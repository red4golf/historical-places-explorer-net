var kL=Object.defineProperty;var DL=(c,y,x)=>y in c?kL(c,y,{enumerable:!0,configurable:!0,writable:!0,value:x}):c[y]=x;var pE=(c,y,x)=>DL(c,typeof y!="symbol"?y+"":y,x);function RL(c,y){for(var x=0;x<y.length;x++){const E=y[x];if(typeof E!="string"&&!Array.isArray(E)){for(const A in E)if(A!=="default"&&!(A in c)){const R=Object.getOwnPropertyDescriptor(E,A);R&&Object.defineProperty(c,A,R.get?R:{enumerable:!0,get:()=>E[A]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))E(A);new MutationObserver(A=>{for(const R of A)if(R.type==="childList")for(const C of R.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&E(C)}).observe(document,{childList:!0,subtree:!0});function x(A){const R={};return A.integrity&&(R.integrity=A.integrity),A.referrerPolicy&&(R.referrerPolicy=A.referrerPolicy),A.crossOrigin==="use-credentials"?R.credentials="include":A.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function E(A){if(A.ep)return;A.ep=!0;const R=x(A);fetch(A.href,R)}})();var NE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function W0(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var SA={exports:{}},UE={},TA={exports:{}},U0={exports:{}};U0.exports;(function(c,y){/**
 * @license React
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var x="18.3.1",E=Symbol.for("react.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),N=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),qe=Symbol.iterator,je="@@iterator";function Ne(Q){if(Q===null||typeof Q!="object")return null;var Ie=qe&&Q[qe]||Q[je];return typeof Ie=="function"?Ie:null}var Xe={current:null},Et={transition:null},St={current:null,isBatchingLegacy:!1,didScheduleLegacyUpdate:!1},Qe={current:null},Nt={},Mn=null;function dn(Q){Mn=Q}Nt.setExtraStackFrame=function(Q){Mn=Q},Nt.getCurrentStack=null,Nt.getStackAddendum=function(){var Q="";Mn&&(Q+=Mn);var Ie=Nt.getCurrentStack;return Ie&&(Q+=Ie()||""),Q};var ut=!1,qn=!1,Jn=!1,et=!1,$t=!1,un={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Et,ReactCurrentOwner:Qe};un.ReactDebugCurrentFrame=Nt,un.ReactCurrentActQueue=St;function Hn(Q){{for(var Ie=arguments.length,st=new Array(Ie>1?Ie-1:0),gt=1;gt<Ie;gt++)st[gt-1]=arguments[gt];Cr("warn",Q,st)}}function cn(Q){{for(var Ie=arguments.length,st=new Array(Ie>1?Ie-1:0),gt=1;gt<Ie;gt++)st[gt-1]=arguments[gt];Cr("error",Q,st)}}function Cr(Q,Ie,st){{var gt=un.ReactDebugCurrentFrame,Yt=gt.getStackAddendum();Yt!==""&&(Ie+="%s",st=st.concat([Yt]));var zn=st.map(function(_n){return String(_n)});zn.unshift("Warning: "+Ie),Function.prototype.apply.call(console[Q],console,zn)}}var It={};function Ee(Q,Ie){{var st=Q.constructor,gt=st&&(st.displayName||st.name)||"ReactClass",Yt=gt+"."+Ie;if(It[Yt])return;cn("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",Ie,gt),It[Yt]=!0}}var Fn={isMounted:function(Q){return!1},enqueueForceUpdate:function(Q,Ie,st){Ee(Q,"forceUpdate")},enqueueReplaceState:function(Q,Ie,st,gt){Ee(Q,"replaceState")},enqueueSetState:function(Q,Ie,st,gt){Ee(Q,"setState")}},An=Object.assign,Me={};Object.freeze(Me);function Vn(Q,Ie,st){this.props=Q,this.context=Ie,this.refs=Me,this.updater=st||Fn}Vn.prototype.isReactComponent={},Vn.prototype.setState=function(Q,Ie){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw new Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,Ie,"setState")},Vn.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};{var Ti={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},Vi=function(Q,Ie){Object.defineProperty(Vn.prototype,Q,{get:function(){Hn("%s(...) is deprecated in plain JavaScript React classes. %s",Ie[0],Ie[1])}})};for(var Ci in Ti)Ti.hasOwnProperty(Ci)&&Vi(Ci,Ti[Ci])}function hr(){}hr.prototype=Vn.prototype;function ai(Q,Ie,st){this.props=Q,this.context=Ie,this.refs=Me,this.updater=st||Fn}var Or=ai.prototype=new hr;Or.constructor=ai,An(Or,Vn.prototype),Or.isPureReactComponent=!0;function xi(){var Q={current:null};return Object.seal(Q),Q}var Dn=Array.isArray;function Yr(Q){return Dn(Q)}function Zr(Q){{var Ie=typeof Symbol=="function"&&Symbol.toStringTag,st=Ie&&Q[Symbol.toStringTag]||Q.constructor.name||"Object";return st}}function oi(Q){try{return Wn(Q),!1}catch{return!0}}function Wn(Q){return""+Q}function Dr(Q){if(oi(Q))return cn("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Zr(Q)),Wn(Q)}function aa(Q,Ie,st){var gt=Q.displayName;if(gt)return gt;var Yt=Ie.displayName||Ie.name||"";return Yt!==""?st+"("+Yt+")":st}function bi(Q){return Q.displayName||"Context"}function Kr(Q){if(Q==null)return null;if(typeof Q.tag=="number"&&cn("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof Q=="function")return Q.displayName||Q.name||null;if(typeof Q=="string")return Q;switch(Q){case R:return"Fragment";case A:return"Portal";case U:return"Profiler";case C:return"StrictMode";case H:return"Suspense";case X:return"SuspenseList"}if(typeof Q=="object")switch(Q.$$typeof){case N:var Ie=Q;return bi(Ie)+".Consumer";case s:var st=Q;return bi(st._context)+".Provider";case G:return aa(Q,Q.render,"ForwardRef");case J:var gt=Q.displayName||null;return gt!==null?gt:Kr(Q.type)||"Memo";case Pe:{var Yt=Q,zn=Yt._payload,_n=Yt._init;try{return Kr(_n(zn))}catch{return null}}}return null}var va=Object.prototype.hasOwnProperty,Wi={key:!0,ref:!0,__self:!0,__source:!0},Zi,Xi,Ii;Ii={};function ft(Q){if(va.call(Q,"ref")){var Ie=Object.getOwnPropertyDescriptor(Q,"ref").get;if(Ie&&Ie.isReactWarning)return!1}return Q.ref!==void 0}function at(Q){if(va.call(Q,"key")){var Ie=Object.getOwnPropertyDescriptor(Q,"key").get;if(Ie&&Ie.isReactWarning)return!1}return Q.key!==void 0}function Jt(Q,Ie){var st=function(){Zi||(Zi=!0,cn("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ie))};st.isReactWarning=!0,Object.defineProperty(Q,"key",{get:st,configurable:!0})}function On(Q,Ie){var st=function(){Xi||(Xi=!0,cn("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Ie))};st.isReactWarning=!0,Object.defineProperty(Q,"ref",{get:st,configurable:!0})}function sr(Q){if(typeof Q.ref=="string"&&Qe.current&&Q.__self&&Qe.current.stateNode!==Q.__self){var Ie=Kr(Qe.current.type);Ii[Ie]||(cn('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',Ie,Q.ref),Ii[Ie]=!0)}}var Ht=function(Q,Ie,st,gt,Yt,zn,_n){var $n={$$typeof:E,type:Q,key:Ie,ref:st,props:_n,_owner:zn};return $n._store={},Object.defineProperty($n._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty($n,"_self",{configurable:!1,enumerable:!1,writable:!1,value:gt}),Object.defineProperty($n,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Yt}),Object.freeze&&(Object.freeze($n.props),Object.freeze($n)),$n};function hn(Q,Ie,st){var gt,Yt={},zn=null,_n=null,$n=null,br=null;if(Ie!=null){ft(Ie)&&(_n=Ie.ref,sr(Ie)),at(Ie)&&(Dr(Ie.key),zn=""+Ie.key),$n=Ie.__self===void 0?null:Ie.__self,br=Ie.__source===void 0?null:Ie.__source;for(gt in Ie)va.call(Ie,gt)&&!Wi.hasOwnProperty(gt)&&(Yt[gt]=Ie[gt])}var ti=arguments.length-2;if(ti===1)Yt.children=st;else if(ti>1){for(var si=Array(ti),mi=0;mi<ti;mi++)si[mi]=arguments[mi+2];Object.freeze&&Object.freeze(si),Yt.children=si}if(Q&&Q.defaultProps){var Ai=Q.defaultProps;for(gt in Ai)Yt[gt]===void 0&&(Yt[gt]=Ai[gt])}if(zn||_n){var ki=typeof Q=="function"?Q.displayName||Q.name||"Unknown":Q;zn&&Jt(Yt,ki),_n&&On(Yt,ki)}return Ht(Q,zn,_n,$n,br,Qe.current,Yt)}function Un(Q,Ie){var st=Ht(Q.type,Ie,Q.ref,Q._self,Q._source,Q._owner,Q.props);return st}function dr(Q,Ie,st){if(Q==null)throw new Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var gt,Yt=An({},Q.props),zn=Q.key,_n=Q.ref,$n=Q._self,br=Q._source,ti=Q._owner;if(Ie!=null){ft(Ie)&&(_n=Ie.ref,ti=Qe.current),at(Ie)&&(Dr(Ie.key),zn=""+Ie.key);var si;Q.type&&Q.type.defaultProps&&(si=Q.type.defaultProps);for(gt in Ie)va.call(Ie,gt)&&!Wi.hasOwnProperty(gt)&&(Ie[gt]===void 0&&si!==void 0?Yt[gt]=si[gt]:Yt[gt]=Ie[gt])}var mi=arguments.length-2;if(mi===1)Yt.children=st;else if(mi>1){for(var Ai=Array(mi),ki=0;ki<mi;ki++)Ai[ki]=arguments[ki+2];Yt.children=Ai}return Ht(Q.type,zn,_n,$n,br,ti,Yt)}function fr(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===E}var xr=".",Rr=":";function Jr(Q){var Ie=/[=:]/g,st={"=":"=0",":":"=2"},gt=Q.replace(Ie,function(Yt){return st[Yt]});return"$"+gt}var Fr=!1,_e=/\/+/g;function K(Q){return Q.replace(_e,"$&/")}function ee(Q,Ie){return typeof Q=="object"&&Q!==null&&Q.key!=null?(Dr(Q.key),Jr(""+Q.key)):Ie.toString(36)}function ye(Q,Ie,st,gt,Yt){var zn=typeof Q;(zn==="undefined"||zn==="boolean")&&(Q=null);var _n=!1;if(Q===null)_n=!0;else switch(zn){case"string":case"number":_n=!0;break;case"object":switch(Q.$$typeof){case E:case A:_n=!0}}if(_n){var $n=Q,br=Yt($n),ti=gt===""?xr+ee($n,0):gt;if(Yr(br)){var si="";ti!=null&&(si=K(ti)+"/"),ye(br,Ie,si,"",function(ju){return ju})}else br!=null&&(fr(br)&&(br.key&&(!$n||$n.key!==br.key)&&Dr(br.key),br=Un(br,st+(br.key&&(!$n||$n.key!==br.key)?K(""+br.key)+"/":"")+ti)),Ie.push(br));return 1}var mi,Ai,ki=0,Sn=gt===""?xr:gt+Rr;if(Yr(Q))for(var Al=0;Al<Q.length;Al++)mi=Q[Al],Ai=Sn+ee(mi,Al),ki+=ye(mi,Ie,st,Ai,Yt);else{var kl=Ne(Q);if(typeof kl=="function"){var Uu=Q;kl===Uu.entries&&(Fr||Hn("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),Fr=!0);for(var uh=kl.call(Uu),Es,lu=0;!(Es=uh.next()).done;)mi=Es.value,Ai=Sn+ee(mi,lu++),ki+=ye(mi,Ie,st,Ai,Yt)}else if(zn==="object"){var Ss=String(Q);throw new Error("Objects are not valid as a React child (found: "+(Ss==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":Ss)+"). If you meant to render a collection of children, use an array instead.")}}return ki}function Se(Q,Ie,st){if(Q==null)return Q;var gt=[],Yt=0;return ye(Q,gt,"","",function(zn){return Ie.call(st,zn,Yt++)}),gt}function ze(Q){var Ie=0;return Se(Q,function(){Ie++}),Ie}function $e(Q,Ie,st){Se(Q,function(){Ie.apply(this,arguments)},st)}function Ge(Q){return Se(Q,function(Ie){return Ie})||[]}function Le(Q){if(!fr(Q))throw new Error("React.Children.only expected to receive a single React element child.");return Q}function Ye(Q){var Ie={$$typeof:N,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};Ie.Provider={$$typeof:s,_context:Ie};var st=!1,gt=!1,Yt=!1;{var zn={$$typeof:N,_context:Ie};Object.defineProperties(zn,{Provider:{get:function(){return gt||(gt=!0,cn("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),Ie.Provider},set:function(_n){Ie.Provider=_n}},_currentValue:{get:function(){return Ie._currentValue},set:function(_n){Ie._currentValue=_n}},_currentValue2:{get:function(){return Ie._currentValue2},set:function(_n){Ie._currentValue2=_n}},_threadCount:{get:function(){return Ie._threadCount},set:function(_n){Ie._threadCount=_n}},Consumer:{get:function(){return st||(st=!0,cn("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),Ie.Consumer}},displayName:{get:function(){return Ie.displayName},set:function(_n){Yt||(Hn("Setting `displayName` on Context.Consumer has no effect. You should set it directly on the context with Context.displayName = '%s'.",_n),Yt=!0)}}}),Ie.Consumer=zn}return Ie._currentRenderer=null,Ie._currentRenderer2=null,Ie}var zt=-1,Gt=0,kt=1,Ln=2;function jn(Q){if(Q._status===zt){var Ie=Q._result,st=Ie();if(st.then(function(zn){if(Q._status===Gt||Q._status===zt){var _n=Q;_n._status=kt,_n._result=zn}},function(zn){if(Q._status===Gt||Q._status===zt){var _n=Q;_n._status=Ln,_n._result=zn}}),Q._status===zt){var gt=Q;gt._status=Gt,gt._result=st}}if(Q._status===kt){var Yt=Q._result;return Yt===void 0&&cn(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))

Did you accidentally put curly braces around the import?`,Yt),"default"in Yt||cn(`lazy: Expected the result of a dynamic import() call. Instead received: %s

Your code should look like: 
  const MyComponent = lazy(() => import('./MyComponent'))`,Yt),Yt.default}else throw Q._result}function xe(Q){var Ie={_status:zt,_result:Q},st={$$typeof:Pe,_payload:Ie,_init:jn};{var gt,Yt;Object.defineProperties(st,{defaultProps:{configurable:!0,get:function(){return gt},set:function(zn){cn("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),gt=zn,Object.defineProperty(st,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return Yt},set:function(zn){cn("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),Yt=zn,Object.defineProperty(st,"propTypes",{enumerable:!0})}}})}return st}function dt(Q){Q!=null&&Q.$$typeof===J?cn("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):typeof Q!="function"?cn("forwardRef requires a render function but was given %s.",Q===null?"null":typeof Q):Q.length!==0&&Q.length!==2&&cn("forwardRef render functions accept exactly two parameters: props and ref. %s",Q.length===1?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),Q!=null&&(Q.defaultProps!=null||Q.propTypes!=null)&&cn("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?");var Ie={$$typeof:G,render:Q};{var st;Object.defineProperty(Ie,"displayName",{enumerable:!1,configurable:!0,get:function(){return st},set:function(gt){st=gt,!Q.name&&!Q.displayName&&(Q.displayName=gt)}})}return Ie}var Dt;Dt=Symbol.for("react.module.reference");function pe(Q){return!!(typeof Q=="string"||typeof Q=="function"||Q===R||Q===U||$t||Q===C||Q===H||Q===X||et||Q===Re||ut||qn||Jn||typeof Q=="object"&&Q!==null&&(Q.$$typeof===Pe||Q.$$typeof===J||Q.$$typeof===s||Q.$$typeof===N||Q.$$typeof===G||Q.$$typeof===Dt||Q.getModuleId!==void 0))}function ot(Q,Ie){pe(Q)||cn("memo: The first argument must be a component. Instead received: %s",Q===null?"null":typeof Q);var st={$$typeof:J,type:Q,compare:Ie===void 0?null:Ie};{var gt;Object.defineProperty(st,"displayName",{enumerable:!1,configurable:!0,get:function(){return gt},set:function(Yt){gt=Yt,!Q.name&&!Q.displayName&&(Q.displayName=Yt)}})}return st}function yt(){var Q=Xe.current;return Q===null&&cn(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`),Q}function jt(Q){var Ie=yt();if(Q._context!==void 0){var st=Q._context;st.Consumer===Q?cn("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):st.Provider===Q&&cn("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return Ie.useContext(Q)}function rn(Q){var Ie=yt();return Ie.useState(Q)}function yn(Q,Ie,st){var gt=yt();return gt.useReducer(Q,Ie,st)}function en(Q){var Ie=yt();return Ie.useRef(Q)}function En(Q,Ie){var st=yt();return st.useEffect(Q,Ie)}function Xr(Q,Ie){var st=yt();return st.useInsertionEffect(Q,Ie)}function Nr(Q,Ie){var st=yt();return st.useLayoutEffect(Q,Ie)}function Tn(Q,Ie){var st=yt();return st.useCallback(Q,Ie)}function $r(Q,Ie){var st=yt();return st.useMemo(Q,Ie)}function Ea(Q,Ie,st){var gt=yt();return gt.useImperativeHandle(Q,Ie,st)}function Ua(Q,Ie){{var st=yt();return st.useDebugValue(Q,Ie)}}function Yi(){var Q=yt();return Q.useTransition()}function Qi(Q){var Ie=yt();return Ie.useDeferredValue(Q)}function nr(){var Q=yt();return Q.useId()}function Xo(Q,Ie,st){var gt=yt();return gt.useSyncExternalStore(Q,Ie,st)}var vs=0,Yo,po,Ys,ct,mo,Oi,ea;function oh(){}oh.__reactDisabledLog=!0;function Ro(){{if(vs===0){Yo=console.log,po=console.info,Ys=console.warn,ct=console.error,mo=console.group,Oi=console.groupCollapsed,ea=console.groupEnd;var Q={configurable:!0,enumerable:!0,value:oh,writable:!0};Object.defineProperties(console,{info:Q,log:Q,warn:Q,error:Q,group:Q,groupCollapsed:Q,groupEnd:Q})}vs++}}function ou(){{if(vs--,vs===0){var Q={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:An({},Q,{value:Yo}),info:An({},Q,{value:po}),warn:An({},Q,{value:Ys}),error:An({},Q,{value:ct}),group:An({},Q,{value:mo}),groupCollapsed:An({},Q,{value:Oi}),groupEnd:An({},Q,{value:ea})})}vs<0&&cn("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Tl=un.ReactCurrentDispatcher,Ra;function Zt(Q,Ie,st){{if(Ra===void 0)try{throw Error()}catch(Yt){var gt=Yt.stack.trim().match(/\n( *(at )?)/);Ra=gt&&gt[1]||""}return`
`+Ra+Q}}var rr=!1,ir;{var Ia=typeof WeakMap=="function"?WeakMap:Map;ir=new Ia}function uo(Q,Ie){if(!Q||rr)return"";{var st=ir.get(Q);if(st!==void 0)return st}var gt;rr=!0;var Yt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var zn;zn=Tl.current,Tl.current=null,Ro();try{if(Ie){var _n=function(){throw Error()};if(Object.defineProperty(_n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_n,[])}catch(Sn){gt=Sn}Reflect.construct(Q,[],_n)}else{try{_n.call()}catch(Sn){gt=Sn}Q.call(_n.prototype)}}else{try{throw Error()}catch(Sn){gt=Sn}Q()}}catch(Sn){if(Sn&&gt&&typeof Sn.stack=="string"){for(var $n=Sn.stack.split(`
`),br=gt.stack.split(`
`),ti=$n.length-1,si=br.length-1;ti>=1&&si>=0&&$n[ti]!==br[si];)si--;for(;ti>=1&&si>=0;ti--,si--)if($n[ti]!==br[si]){if(ti!==1||si!==1)do if(ti--,si--,si<0||$n[ti]!==br[si]){var mi=`
`+$n[ti].replace(" at new "," at ");return Q.displayName&&mi.includes("<anonymous>")&&(mi=mi.replace("<anonymous>",Q.displayName)),typeof Q=="function"&&ir.set(Q,mi),mi}while(ti>=1&&si>=0);break}}}finally{rr=!1,Tl.current=zn,ou(),Error.prepareStackTrace=Yt}var Ai=Q?Q.displayName||Q.name:"",ki=Ai?Zt(Ai):"";return typeof Q=="function"&&ir.set(Q,ki),ki}function ar(Q,Ie,st){return uo(Q,!1)}function Ya(Q){var Ie=Q.prototype;return!!(Ie&&Ie.isReactComponent)}function Io(Q,Ie,st){if(Q==null)return"";if(typeof Q=="function")return uo(Q,Ya(Q));if(typeof Q=="string")return Zt(Q);switch(Q){case H:return Zt("Suspense");case X:return Zt("SuspenseList")}if(typeof Q=="object")switch(Q.$$typeof){case G:return ar(Q.render);case J:return Io(Q.type,Ie,st);case Pe:{var gt=Q,Yt=gt._payload,zn=gt._init;try{return Io(zn(Yt),Ie,st)}catch{}}}return""}var _s={},ja=un.ReactDebugCurrentFrame;function Qr(Q){if(Q){var Ie=Q._owner,st=Io(Q.type,Q._source,Ie?Ie.type:null);ja.setExtraStackFrame(st)}else ja.setExtraStackFrame(null)}function sh(Q,Ie,st,gt,Yt){{var zn=Function.call.bind(va);for(var _n in Q)if(zn(Q,_n)){var $n=void 0;try{if(typeof Q[_n]!="function"){var br=Error((gt||"React class")+": "+st+" type `"+_n+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof Q[_n]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw br.name="Invariant Violation",br}$n=Q[_n](Ie,_n,gt,st,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ti){$n=ti}$n&&!($n instanceof Error)&&(Qr(Yt),cn("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",gt||"React class",st,_n,typeof $n),Qr(null)),$n instanceof Error&&!($n.message in _s)&&(_s[$n.message]=!0,Qr(Yt),cn("Failed %s type: %s",st,$n.message),Qr(null))}}}function yr(Q){if(Q){var Ie=Q._owner,st=Io(Q.type,Q._source,Ie?Ie.type:null);dn(st)}else dn(null)}var Ks;Ks=!1;function Js(){if(Qe.current){var Q=Kr(Qe.current.type);if(Q)return`

Check the render method of \``+Q+"`."}return""}function lr(Q){if(Q!==void 0){var Ie=Q.fileName.replace(/^.*[\\\/]/,""),st=Q.lineNumber;return`

Check your code at `+Ie+":"+st+"."}return""}function lh(Q){return Q!=null?lr(Q.__source):""}var ua={};function Ko(Q){var Ie=Js();if(!Ie){var st=typeof Q=="string"?Q:Q.displayName||Q.name;st&&(Ie=`

Check the top-level render call using <`+st+">.")}return Ie}function Jo(Q,Ie){if(!(!Q._store||Q._store.validated||Q.key!=null)){Q._store.validated=!0;var st=Ko(Ie);if(!ua[st]){ua[st]=!0;var gt="";Q&&Q._owner&&Q._owner!==Qe.current&&(gt=" It was passed a child from "+Kr(Q._owner.type)+"."),yr(Q),cn('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',st,gt),yr(null)}}}function Qs(Q,Ie){if(typeof Q=="object"){if(Yr(Q))for(var st=0;st<Q.length;st++){var gt=Q[st];fr(gt)&&Jo(gt,Ie)}else if(fr(Q))Q._store&&(Q._store.validated=!0);else if(Q){var Yt=Ne(Q);if(typeof Yt=="function"&&Yt!==Q.entries)for(var zn=Yt.call(Q),_n;!(_n=zn.next()).done;)fr(_n.value)&&Jo(_n.value,Ie)}}}function ei(Q){{var Ie=Q.type;if(Ie==null||typeof Ie=="string")return;var st;if(typeof Ie=="function")st=Ie.propTypes;else if(typeof Ie=="object"&&(Ie.$$typeof===G||Ie.$$typeof===J))st=Ie.propTypes;else return;if(st){var gt=Kr(Ie);sh(st,Q.props,"prop",gt,Q)}else if(Ie.PropTypes!==void 0&&!Ks){Ks=!0;var Yt=Kr(Ie);cn("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Yt||"Unknown")}typeof Ie.getDefaultProps=="function"&&!Ie.getDefaultProps.isReactClassApproved&&cn("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function pr(Q){{for(var Ie=Object.keys(Q.props),st=0;st<Ie.length;st++){var gt=Ie[st];if(gt!=="children"&&gt!=="key"){yr(Q),cn("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",gt),yr(null);break}}Q.ref!==null&&(yr(Q),cn("Invalid attribute `ref` supplied to `React.Fragment`."),yr(null))}}function Fu(Q,Ie,st){var gt=pe(Q);if(!gt){var Yt="";(Q===void 0||typeof Q=="object"&&Q!==null&&Object.keys(Q).length===0)&&(Yt+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var zn=lh(Ie);zn?Yt+=zn:Yt+=Js();var _n;Q===null?_n="null":Yr(Q)?_n="array":Q!==void 0&&Q.$$typeof===E?(_n="<"+(Kr(Q.type)||"Unknown")+" />",Yt=" Did you accidentally export a JSX literal instead of a component?"):_n=typeof Q,cn("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",_n,Yt)}var $n=hn.apply(this,arguments);if($n==null)return $n;if(gt)for(var br=2;br<arguments.length;br++)Qs(arguments[br],Q);return Q===R?pr($n):ei($n),$n}var Ka=!1;function Mi(Q){var Ie=Fu.bind(null,Q);return Ie.type=Q,Ka||(Ka=!0,Hn("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(Ie,"type",{enumerable:!1,get:function(){return Hn("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:Q}),Q}}),Ie}function oa(Q,Ie,st){for(var gt=dr.apply(this,arguments),Yt=2;Yt<arguments.length;Yt++)Qs(arguments[Yt],gt.type);return ei(gt),gt}function of(Q,Ie){var st=Et.transition;Et.transition={};var gt=Et.transition;Et.transition._updatedFibers=new Set;try{Q()}finally{if(Et.transition=st,st===null&&gt._updatedFibers){var Yt=gt._updatedFibers.size;Yt>10&&Hn("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),gt._updatedFibers.clear()}}}var xs=!1,pi=null;function Cl(Q){if(pi===null)try{var Ie=("require"+Math.random()).slice(0,7),st=c&&c[Ie];pi=st.call(c,"timers").setImmediate}catch{pi=function(Yt){xs===!1&&(xs=!0,typeof MessageChannel>"u"&&cn("This browser does not have a MessageChannel implementation, so enqueuing tasks via await act(async () => ...) will fail. Please file an issue at https://github.com/facebook/react/issues if you encounter this warning."));var zn=new MessageChannel;zn.port1.onmessage=Yt,zn.port2.postMessage(void 0)}}return pi(Q)}var bs=0,ws=!1;function ca(Q){{var Ie=bs;bs++,St.current===null&&(St.current=[]);var st=St.isBatchingLegacy,gt;try{if(St.isBatchingLegacy=!0,gt=Q(),!st&&St.didScheduleLegacyUpdate){var Yt=St.current;Yt!==null&&(St.didScheduleLegacyUpdate=!1,go(Yt))}}catch(Ai){throw Qo(Ie),Ai}finally{St.isBatchingLegacy=st}if(gt!==null&&typeof gt=="object"&&typeof gt.then=="function"){var zn=gt,_n=!1,$n={then:function(Ai,ki){_n=!0,zn.then(function(Sn){Qo(Ie),bs===0?Ml(Sn,Ai,ki):Ai(Sn)},function(Sn){Qo(Ie),ki(Sn)})}};return!ws&&typeof Promise<"u"&&Promise.resolve().then(function(){}).then(function(){_n||(ws=!0,cn("You called act(async () => ...) without await. This could lead to unexpected testing behaviour, interleaving multiple act calls and mixing their scopes. You should - await act(async () => ...);"))}),$n}else{var br=gt;if(Qo(Ie),bs===0){var ti=St.current;ti!==null&&(go(ti),St.current=null);var si={then:function(Ai,ki){St.current===null?(St.current=[],Ml(br,Ai,ki)):Ai(br)}};return si}else{var mi={then:function(Ai,ki){Ai(br)}};return mi}}}}function Qo(Q){Q!==bs-1&&cn("You seem to have overlapping act() calls, this is not supported. Be sure to await previous act() calls before making a new one. "),bs=Q}function Ml(Q,Ie,st){{var gt=St.current;if(gt!==null)try{go(gt),Cl(function(){gt.length===0?(St.current=null,Ie(Q)):Ml(Q,Ie,st)})}catch(Yt){st(Yt)}else Ie(Q)}}var Va=!1;function go(Q){if(!Va){Va=!0;var Ie=0;try{for(;Ie<Q.length;Ie++){var st=Q[Ie];do st=st(!0);while(st!==null)}Q.length=0}catch(gt){throw Q=Q.slice(Ie+1),gt}finally{Va=!1}}}var su=Fu,sf=oa,Nu=Mi,el={map:Se,forEach:$e,count:ze,toArray:Ge,only:Le};y.Children=el,y.Component=Vn,y.Fragment=R,y.Profiler=U,y.PureComponent=ai,y.StrictMode=C,y.Suspense=H,y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=un,y.act=ca,y.cloneElement=sf,y.createContext=Ye,y.createElement=su,y.createFactory=Nu,y.createRef=xi,y.forwardRef=dt,y.isValidElement=fr,y.lazy=xe,y.memo=ot,y.startTransition=of,y.unstable_act=ca,y.useCallback=Tn,y.useContext=jt,y.useDebugValue=Ua,y.useDeferredValue=Qi,y.useEffect=En,y.useId=nr,y.useImperativeHandle=Ea,y.useInsertionEffect=Xr,y.useLayoutEffect=Nr,y.useMemo=$r,y.useReducer=yn,y.useRef=en,y.useState=rn,y.useSyncExternalStore=Xo,y.useTransition=Yi,y.version=x,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(U0,U0.exports);var IL=U0.exports;TA.exports=IL;var ke=TA.exports;const CA=W0(ke),MA=RL({__proto__:null,default:CA},[ke]);/**
 * @license React
 * react-jsx-dev-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var c=ke,y=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),U=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Pe=Symbol.iterator,Re="@@iterator";function qe(xe){if(xe===null||typeof xe!="object")return null;var dt=Pe&&xe[Pe]||xe[Re];return typeof dt=="function"?dt:null}var je=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Ne(xe){{for(var dt=arguments.length,Dt=new Array(dt>1?dt-1:0),pe=1;pe<dt;pe++)Dt[pe-1]=arguments[pe];Xe("error",xe,Dt)}}function Xe(xe,dt,Dt){{var pe=je.ReactDebugCurrentFrame,ot=pe.getStackAddendum();ot!==""&&(dt+="%s",Dt=Dt.concat([ot]));var yt=Dt.map(function(jt){return String(jt)});yt.unshift("Warning: "+dt),Function.prototype.apply.call(console[xe],console,yt)}}var Et=!1,St=!1,Qe=!1,Nt=!1,Mn=!1,dn;dn=Symbol.for("react.module.reference");function ut(xe){return!!(typeof xe=="string"||typeof xe=="function"||xe===E||xe===R||Mn||xe===A||xe===N||xe===G||Nt||xe===J||Et||St||Qe||typeof xe=="object"&&xe!==null&&(xe.$$typeof===X||xe.$$typeof===H||xe.$$typeof===C||xe.$$typeof===U||xe.$$typeof===s||xe.$$typeof===dn||xe.getModuleId!==void 0))}function qn(xe,dt,Dt){var pe=xe.displayName;if(pe)return pe;var ot=dt.displayName||dt.name||"";return ot!==""?Dt+"("+ot+")":Dt}function Jn(xe){return xe.displayName||"Context"}function et(xe){if(xe==null)return null;if(typeof xe.tag=="number"&&Ne("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof xe=="function")return xe.displayName||xe.name||null;if(typeof xe=="string")return xe;switch(xe){case E:return"Fragment";case x:return"Portal";case R:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case G:return"SuspenseList"}if(typeof xe=="object")switch(xe.$$typeof){case U:var dt=xe;return Jn(dt)+".Consumer";case C:var Dt=xe;return Jn(Dt._context)+".Provider";case s:return qn(xe,xe.render,"ForwardRef");case H:var pe=xe.displayName||null;return pe!==null?pe:et(xe.type)||"Memo";case X:{var ot=xe,yt=ot._payload,jt=ot._init;try{return et(jt(yt))}catch{return null}}}return null}var $t=Object.assign,un=0,Hn,cn,Cr,It,Ee,Fn,An;function Me(){}Me.__reactDisabledLog=!0;function Vn(){{if(un===0){Hn=console.log,cn=console.info,Cr=console.warn,It=console.error,Ee=console.group,Fn=console.groupCollapsed,An=console.groupEnd;var xe={configurable:!0,enumerable:!0,value:Me,writable:!0};Object.defineProperties(console,{info:xe,log:xe,warn:xe,error:xe,group:xe,groupCollapsed:xe,groupEnd:xe})}un++}}function Ti(){{if(un--,un===0){var xe={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:$t({},xe,{value:Hn}),info:$t({},xe,{value:cn}),warn:$t({},xe,{value:Cr}),error:$t({},xe,{value:It}),group:$t({},xe,{value:Ee}),groupCollapsed:$t({},xe,{value:Fn}),groupEnd:$t({},xe,{value:An})})}un<0&&Ne("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Vi=je.ReactCurrentDispatcher,Ci;function hr(xe,dt,Dt){{if(Ci===void 0)try{throw Error()}catch(ot){var pe=ot.stack.trim().match(/\n( *(at )?)/);Ci=pe&&pe[1]||""}return`
`+Ci+xe}}var ai=!1,Or;{var xi=typeof WeakMap=="function"?WeakMap:Map;Or=new xi}function Dn(xe,dt){if(!xe||ai)return"";{var Dt=Or.get(xe);if(Dt!==void 0)return Dt}var pe;ai=!0;var ot=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var yt;yt=Vi.current,Vi.current=null,Vn();try{if(dt){var jt=function(){throw Error()};if(Object.defineProperty(jt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(jt,[])}catch($r){pe=$r}Reflect.construct(xe,[],jt)}else{try{jt.call()}catch($r){pe=$r}xe.call(jt.prototype)}}else{try{throw Error()}catch($r){pe=$r}xe()}}catch($r){if($r&&pe&&typeof $r.stack=="string"){for(var rn=$r.stack.split(`
`),yn=pe.stack.split(`
`),en=rn.length-1,En=yn.length-1;en>=1&&En>=0&&rn[en]!==yn[En];)En--;for(;en>=1&&En>=0;en--,En--)if(rn[en]!==yn[En]){if(en!==1||En!==1)do if(en--,En--,En<0||rn[en]!==yn[En]){var Xr=`
`+rn[en].replace(" at new "," at ");return xe.displayName&&Xr.includes("<anonymous>")&&(Xr=Xr.replace("<anonymous>",xe.displayName)),typeof xe=="function"&&Or.set(xe,Xr),Xr}while(en>=1&&En>=0);break}}}finally{ai=!1,Vi.current=yt,Ti(),Error.prepareStackTrace=ot}var Nr=xe?xe.displayName||xe.name:"",Tn=Nr?hr(Nr):"";return typeof xe=="function"&&Or.set(xe,Tn),Tn}function Yr(xe,dt,Dt){return Dn(xe,!1)}function Zr(xe){var dt=xe.prototype;return!!(dt&&dt.isReactComponent)}function oi(xe,dt,Dt){if(xe==null)return"";if(typeof xe=="function")return Dn(xe,Zr(xe));if(typeof xe=="string")return hr(xe);switch(xe){case N:return hr("Suspense");case G:return hr("SuspenseList")}if(typeof xe=="object")switch(xe.$$typeof){case s:return Yr(xe.render);case H:return oi(xe.type,dt,Dt);case X:{var pe=xe,ot=pe._payload,yt=pe._init;try{return oi(yt(ot),dt,Dt)}catch{}}}return""}var Wn=Object.prototype.hasOwnProperty,Dr={},aa=je.ReactDebugCurrentFrame;function bi(xe){if(xe){var dt=xe._owner,Dt=oi(xe.type,xe._source,dt?dt.type:null);aa.setExtraStackFrame(Dt)}else aa.setExtraStackFrame(null)}function Kr(xe,dt,Dt,pe,ot){{var yt=Function.call.bind(Wn);for(var jt in xe)if(yt(xe,jt)){var rn=void 0;try{if(typeof xe[jt]!="function"){var yn=Error((pe||"React class")+": "+Dt+" type `"+jt+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof xe[jt]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw yn.name="Invariant Violation",yn}rn=xe[jt](dt,jt,pe,Dt,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(en){rn=en}rn&&!(rn instanceof Error)&&(bi(ot),Ne("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",pe||"React class",Dt,jt,typeof rn),bi(null)),rn instanceof Error&&!(rn.message in Dr)&&(Dr[rn.message]=!0,bi(ot),Ne("Failed %s type: %s",Dt,rn.message),bi(null))}}}var va=Array.isArray;function Wi(xe){return va(xe)}function Zi(xe){{var dt=typeof Symbol=="function"&&Symbol.toStringTag,Dt=dt&&xe[Symbol.toStringTag]||xe.constructor.name||"Object";return Dt}}function Xi(xe){try{return Ii(xe),!1}catch{return!0}}function Ii(xe){return""+xe}function ft(xe){if(Xi(xe))return Ne("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Zi(xe)),Ii(xe)}var at=je.ReactCurrentOwner,Jt={key:!0,ref:!0,__self:!0,__source:!0},On,sr,Ht;Ht={};function hn(xe){if(Wn.call(xe,"ref")){var dt=Object.getOwnPropertyDescriptor(xe,"ref").get;if(dt&&dt.isReactWarning)return!1}return xe.ref!==void 0}function Un(xe){if(Wn.call(xe,"key")){var dt=Object.getOwnPropertyDescriptor(xe,"key").get;if(dt&&dt.isReactWarning)return!1}return xe.key!==void 0}function dr(xe,dt){if(typeof xe.ref=="string"&&at.current&&dt&&at.current.stateNode!==dt){var Dt=et(at.current.type);Ht[Dt]||(Ne('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',et(at.current.type),xe.ref),Ht[Dt]=!0)}}function fr(xe,dt){{var Dt=function(){On||(On=!0,Ne("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",dt))};Dt.isReactWarning=!0,Object.defineProperty(xe,"key",{get:Dt,configurable:!0})}}function xr(xe,dt){{var Dt=function(){sr||(sr=!0,Ne("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",dt))};Dt.isReactWarning=!0,Object.defineProperty(xe,"ref",{get:Dt,configurable:!0})}}var Rr=function(xe,dt,Dt,pe,ot,yt,jt){var rn={$$typeof:y,type:xe,key:dt,ref:Dt,props:jt,_owner:yt};return rn._store={},Object.defineProperty(rn._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(rn,"_self",{configurable:!1,enumerable:!1,writable:!1,value:pe}),Object.defineProperty(rn,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ot}),Object.freeze&&(Object.freeze(rn.props),Object.freeze(rn)),rn};function Jr(xe,dt,Dt,pe,ot){{var yt,jt={},rn=null,yn=null;Dt!==void 0&&(ft(Dt),rn=""+Dt),Un(dt)&&(ft(dt.key),rn=""+dt.key),hn(dt)&&(yn=dt.ref,dr(dt,ot));for(yt in dt)Wn.call(dt,yt)&&!Jt.hasOwnProperty(yt)&&(jt[yt]=dt[yt]);if(xe&&xe.defaultProps){var en=xe.defaultProps;for(yt in en)jt[yt]===void 0&&(jt[yt]=en[yt])}if(rn||yn){var En=typeof xe=="function"?xe.displayName||xe.name||"Unknown":xe;rn&&fr(jt,En),yn&&xr(jt,En)}return Rr(xe,rn,yn,ot,pe,at.current,jt)}}var Fr=je.ReactCurrentOwner,_e=je.ReactDebugCurrentFrame;function K(xe){if(xe){var dt=xe._owner,Dt=oi(xe.type,xe._source,dt?dt.type:null);_e.setExtraStackFrame(Dt)}else _e.setExtraStackFrame(null)}var ee;ee=!1;function ye(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===y}function Se(){{if(Fr.current){var xe=et(Fr.current.type);if(xe)return`

Check the render method of \``+xe+"`."}return""}}function ze(xe){{if(xe!==void 0){var dt=xe.fileName.replace(/^.*[\\\/]/,""),Dt=xe.lineNumber;return`

Check your code at `+dt+":"+Dt+"."}return""}}var $e={};function Ge(xe){{var dt=Se();if(!dt){var Dt=typeof xe=="string"?xe:xe.displayName||xe.name;Dt&&(dt=`

Check the top-level render call using <`+Dt+">.")}return dt}}function Le(xe,dt){{if(!xe._store||xe._store.validated||xe.key!=null)return;xe._store.validated=!0;var Dt=Ge(dt);if($e[Dt])return;$e[Dt]=!0;var pe="";xe&&xe._owner&&xe._owner!==Fr.current&&(pe=" It was passed a child from "+et(xe._owner.type)+"."),K(xe),Ne('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Dt,pe),K(null)}}function Ye(xe,dt){{if(typeof xe!="object")return;if(Wi(xe))for(var Dt=0;Dt<xe.length;Dt++){var pe=xe[Dt];ye(pe)&&Le(pe,dt)}else if(ye(xe))xe._store&&(xe._store.validated=!0);else if(xe){var ot=qe(xe);if(typeof ot=="function"&&ot!==xe.entries)for(var yt=ot.call(xe),jt;!(jt=yt.next()).done;)ye(jt.value)&&Le(jt.value,dt)}}}function zt(xe){{var dt=xe.type;if(dt==null||typeof dt=="string")return;var Dt;if(typeof dt=="function")Dt=dt.propTypes;else if(typeof dt=="object"&&(dt.$$typeof===s||dt.$$typeof===H))Dt=dt.propTypes;else return;if(Dt){var pe=et(dt);Kr(Dt,xe.props,"prop",pe,xe)}else if(dt.PropTypes!==void 0&&!ee){ee=!0;var ot=et(dt);Ne("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ot||"Unknown")}typeof dt.getDefaultProps=="function"&&!dt.getDefaultProps.isReactClassApproved&&Ne("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Gt(xe){{for(var dt=Object.keys(xe.props),Dt=0;Dt<dt.length;Dt++){var pe=dt[Dt];if(pe!=="children"&&pe!=="key"){K(xe),Ne("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",pe),K(null);break}}xe.ref!==null&&(K(xe),Ne("Invalid attribute `ref` supplied to `React.Fragment`."),K(null))}}var kt={};function Ln(xe,dt,Dt,pe,ot,yt){{var jt=ut(xe);if(!jt){var rn="";(xe===void 0||typeof xe=="object"&&xe!==null&&Object.keys(xe).length===0)&&(rn+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var yn=ze(ot);yn?rn+=yn:rn+=Se();var en;xe===null?en="null":Wi(xe)?en="array":xe!==void 0&&xe.$$typeof===y?(en="<"+(et(xe.type)||"Unknown")+" />",rn=" Did you accidentally export a JSX literal instead of a component?"):en=typeof xe,Ne("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",en,rn)}var En=Jr(xe,dt,Dt,ot,yt);if(En==null)return En;if(jt){var Xr=dt.children;if(Xr!==void 0)if(pe)if(Wi(Xr)){for(var Nr=0;Nr<Xr.length;Nr++)Ye(Xr[Nr],xe);Object.freeze&&Object.freeze(Xr)}else Ne("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ye(Xr,xe)}if(Wn.call(dt,"key")){var Tn=et(xe),$r=Object.keys(dt).filter(function(Yi){return Yi!=="key"}),Ea=$r.length>0?"{key: someKey, "+$r.join(": ..., ")+": ...}":"{key: someKey}";if(!kt[Tn+Ea]){var Ua=$r.length>0?"{"+$r.join(": ..., ")+": ...}":"{}";Ne(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ea,Tn,Ua,Tn),kt[Tn+Ea]=!0}}return xe===E?Gt(En):zt(En),En}}var jn=Ln;UE.Fragment=E,UE.jsxDEV=jn})();SA.exports=UE;var Rt=SA.exports,jE={},AA={exports:{}},wl={},kA={exports:{}},DA={};(function(c){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var y=!1,x=!1,E=5;function A(Ht,hn){var Un=Ht.length;Ht.push(hn),U(Ht,hn,Un)}function R(Ht){return Ht.length===0?null:Ht[0]}function C(Ht){if(Ht.length===0)return null;var hn=Ht[0],Un=Ht.pop();return Un!==hn&&(Ht[0]=Un,s(Ht,Un,0)),hn}function U(Ht,hn,Un){for(var dr=Un;dr>0;){var fr=dr-1>>>1,xr=Ht[fr];if(N(xr,hn)>0)Ht[fr]=hn,Ht[dr]=xr,dr=fr;else return}}function s(Ht,hn,Un){for(var dr=Un,fr=Ht.length,xr=fr>>>1;dr<xr;){var Rr=(dr+1)*2-1,Jr=Ht[Rr],Fr=Rr+1,_e=Ht[Fr];if(N(Jr,hn)<0)Fr<fr&&N(_e,Jr)<0?(Ht[dr]=_e,Ht[Fr]=hn,dr=Fr):(Ht[dr]=Jr,Ht[Rr]=hn,dr=Rr);else if(Fr<fr&&N(_e,hn)<0)Ht[dr]=_e,Ht[Fr]=hn,dr=Fr;else return}}function N(Ht,hn){var Un=Ht.sortIndex-hn.sortIndex;return Un!==0?Un:Ht.id-hn.id}var G=1,H=2,X=3,J=4,Pe=5;function Re(Ht,hn){}var qe=typeof performance=="object"&&typeof performance.now=="function";if(qe){var je=performance;c.unstable_now=function(){return je.now()}}else{var Ne=Date,Xe=Ne.now();c.unstable_now=function(){return Ne.now()-Xe}}var Et=1073741823,St=-1,Qe=250,Nt=5e3,Mn=1e4,dn=Et,ut=[],qn=[],Jn=1,et=null,$t=X,un=!1,Hn=!1,cn=!1,Cr=typeof setTimeout=="function"?setTimeout:null,It=typeof clearTimeout=="function"?clearTimeout:null,Ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Fn(Ht){for(var hn=R(qn);hn!==null;){if(hn.callback===null)C(qn);else if(hn.startTime<=Ht)C(qn),hn.sortIndex=hn.expirationTime,A(ut,hn);else return;hn=R(qn)}}function An(Ht){if(cn=!1,Fn(Ht),!Hn)if(R(ut)!==null)Hn=!0,ft(Me);else{var hn=R(qn);hn!==null&&at(An,hn.startTime-Ht)}}function Me(Ht,hn){Hn=!1,cn&&(cn=!1,Jt()),un=!0;var Un=$t;try{var dr;if(!x)return Vn(Ht,hn)}finally{et=null,$t=Un,un=!1}}function Vn(Ht,hn){var Un=hn;for(Fn(Un),et=R(ut);et!==null&&!y&&!(et.expirationTime>Un&&(!Ht||bi()));){var dr=et.callback;if(typeof dr=="function"){et.callback=null,$t=et.priorityLevel;var fr=et.expirationTime<=Un,xr=dr(fr);Un=c.unstable_now(),typeof xr=="function"?et.callback=xr:et===R(ut)&&C(ut),Fn(Un)}else C(ut);et=R(ut)}if(et!==null)return!0;var Rr=R(qn);return Rr!==null&&at(An,Rr.startTime-Un),!1}function Ti(Ht,hn){switch(Ht){case G:case H:case X:case J:case Pe:break;default:Ht=X}var Un=$t;$t=Ht;try{return hn()}finally{$t=Un}}function Vi(Ht){var hn;switch($t){case G:case H:case X:hn=X;break;default:hn=$t;break}var Un=$t;$t=hn;try{return Ht()}finally{$t=Un}}function Ci(Ht){var hn=$t;return function(){var Un=$t;$t=hn;try{return Ht.apply(this,arguments)}finally{$t=Un}}}function hr(Ht,hn,Un){var dr=c.unstable_now(),fr;if(typeof Un=="object"&&Un!==null){var xr=Un.delay;typeof xr=="number"&&xr>0?fr=dr+xr:fr=dr}else fr=dr;var Rr;switch(Ht){case G:Rr=St;break;case H:Rr=Qe;break;case Pe:Rr=dn;break;case J:Rr=Mn;break;case X:default:Rr=Nt;break}var Jr=fr+Rr,Fr={id:Jn++,callback:hn,priorityLevel:Ht,startTime:fr,expirationTime:Jr,sortIndex:-1};return fr>dr?(Fr.sortIndex=fr,A(qn,Fr),R(ut)===null&&Fr===R(qn)&&(cn?Jt():cn=!0,at(An,fr-dr))):(Fr.sortIndex=Jr,A(ut,Fr),!Hn&&!un&&(Hn=!0,ft(Me))),Fr}function ai(){}function Or(){!Hn&&!un&&(Hn=!0,ft(Me))}function xi(){return R(ut)}function Dn(Ht){Ht.callback=null}function Yr(){return $t}var Zr=!1,oi=null,Wn=-1,Dr=E,aa=-1;function bi(){var Ht=c.unstable_now()-aa;return!(Ht<Dr)}function Kr(){}function va(Ht){if(Ht<0||Ht>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Ht>0?Dr=Math.floor(1e3/Ht):Dr=E}var Wi=function(){if(oi!==null){var Ht=c.unstable_now();aa=Ht;var hn=!0,Un=!0;try{Un=oi(hn,Ht)}finally{Un?Zi():(Zr=!1,oi=null)}}else Zr=!1},Zi;if(typeof Ee=="function")Zi=function(){Ee(Wi)};else if(typeof MessageChannel<"u"){var Xi=new MessageChannel,Ii=Xi.port2;Xi.port1.onmessage=Wi,Zi=function(){Ii.postMessage(null)}}else Zi=function(){Cr(Wi,0)};function ft(Ht){oi=Ht,Zr||(Zr=!0,Zi())}function at(Ht,hn){Wn=Cr(function(){Ht(c.unstable_now())},hn)}function Jt(){It(Wn),Wn=-1}var On=Kr,sr=null;c.unstable_IdlePriority=Pe,c.unstable_ImmediatePriority=G,c.unstable_LowPriority=J,c.unstable_NormalPriority=X,c.unstable_Profiling=sr,c.unstable_UserBlockingPriority=H,c.unstable_cancelCallback=Dn,c.unstable_continueExecution=Or,c.unstable_forceFrameRate=va,c.unstable_getCurrentPriorityLevel=Yr,c.unstable_getFirstCallbackNode=xi,c.unstable_next=Vi,c.unstable_pauseExecution=ai,c.unstable_requestPaint=On,c.unstable_runWithPriority=Ti,c.unstable_scheduleCallback=hr,c.unstable_shouldYield=bi,c.unstable_wrapCallback=Ci,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(DA);kA.exports=DA;var LL=kA.exports;/**
 * @license React
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var c=ke,y=LL,x=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=!1;function A(t){E=t}function R(t){if(!E){for(var a=arguments.length,h=new Array(a>1?a-1:0),g=1;g<a;g++)h[g-1]=arguments[g];U("warn",t,h)}}function C(t){if(!E){for(var a=arguments.length,h=new Array(a>1?a-1:0),g=1;g<a;g++)h[g-1]=arguments[g];U("error",t,h)}}function U(t,a,h){{var g=x.ReactDebugCurrentFrame,w=g.getStackAddendum();w!==""&&(a+="%s",h=h.concat([w]));var k=h.map(function(P){return String(P)});k.unshift("Warning: "+a),Function.prototype.apply.call(console[t],console,k)}}var s=0,N=1,G=2,H=3,X=4,J=5,Pe=6,Re=7,qe=8,je=9,Ne=10,Xe=11,Et=12,St=13,Qe=14,Nt=15,Mn=16,dn=17,ut=18,qn=19,Jn=21,et=22,$t=23,un=24,Hn=25,cn=!0,Cr=!1,It=!1,Ee=!1,Fn=!1,An=!0,Me=!1,Vn=!0,Ti=!0,Vi=!0,Ci=!0,hr=new Set,ai={},Or={};function xi(t,a){Dn(t,a),Dn(t+"Capture",a)}function Dn(t,a){ai[t]&&C("EventRegistry: More than one plugin attempted to publish the same registration name, `%s`.",t),ai[t]=a;{var h=t.toLowerCase();Or[h]=t,t==="onDoubleClick"&&(Or.ondblclick=t)}for(var g=0;g<a.length;g++)hr.add(a[g])}var Yr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zr=Object.prototype.hasOwnProperty;function oi(t){{var a=typeof Symbol=="function"&&Symbol.toStringTag,h=a&&t[Symbol.toStringTag]||t.constructor.name||"Object";return h}}function Wn(t){try{return Dr(t),!1}catch{return!0}}function Dr(t){return""+t}function aa(t,a){if(Wn(t))return C("The provided `%s` attribute is an unsupported type %s. This value must be coerced to a string before before using it here.",a,oi(t)),Dr(t)}function bi(t){if(Wn(t))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",oi(t)),Dr(t)}function Kr(t,a){if(Wn(t))return C("The provided `%s` prop is an unsupported type %s. This value must be coerced to a string before before using it here.",a,oi(t)),Dr(t)}function va(t,a){if(Wn(t))return C("The provided `%s` CSS property is an unsupported type %s. This value must be coerced to a string before before using it here.",a,oi(t)),Dr(t)}function Wi(t){if(Wn(t))return C("The provided HTML markup uses a value of unsupported type %s. This value must be coerced to a string before before using it here.",oi(t)),Dr(t)}function Zi(t){if(Wn(t))return C("Form field values (value, checked, defaultValue, or defaultChecked props) must be strings, not %s. This value must be coerced to a string before before using it here.",oi(t)),Dr(t)}var Xi=0,Ii=1,ft=2,at=3,Jt=4,On=5,sr=6,Ht=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",hn=Ht+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Un=new RegExp("^["+Ht+"]["+hn+"]*$"),dr={},fr={};function xr(t){return Zr.call(fr,t)?!0:Zr.call(dr,t)?!1:Un.test(t)?(fr[t]=!0,!0):(dr[t]=!0,C("Invalid attribute name: `%s`",t),!1)}function Rr(t,a,h){return a!==null?a.type===Xi:h?!1:t.length>2&&(t[0]==="o"||t[0]==="O")&&(t[1]==="n"||t[1]==="N")}function Jr(t,a,h,g){if(h!==null&&h.type===Xi)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":{if(g)return!1;if(h!==null)return!h.acceptsBooleans;var w=t.toLowerCase().slice(0,5);return w!=="data-"&&w!=="aria-"}default:return!1}}function Fr(t,a,h,g){if(a===null||typeof a>"u"||Jr(t,a,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case at:return!a;case Jt:return a===!1;case On:return isNaN(a);case sr:return isNaN(a)||a<1}return!1}function _e(t){return ee.hasOwnProperty(t)?ee[t]:null}function K(t,a,h,g,w,k,P){this.acceptsBooleans=a===ft||a===at||a===Jt,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=t,this.type=a,this.sanitizeURL=k,this.removeEmptyString=P}var ee={},ye=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];ye.forEach(function(t){ee[t]=new K(t,Xi,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var a=t[0],h=t[1];ee[a]=new K(a,Ii,!1,h,null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ee[t]=new K(t,ft,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ee[t]=new K(t,ft,!1,t,null,!1,!1)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(t){ee[t]=new K(t,at,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ee[t]=new K(t,at,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){ee[t]=new K(t,Jt,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){ee[t]=new K(t,sr,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){ee[t]=new K(t,On,!1,t.toLowerCase(),null,!1,!1)});var Se=/[\-\:]([a-z])/g,ze=function(t){return t[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(t){var a=t.replace(Se,ze);ee[a]=new K(a,Ii,!1,t,null,!1,!1)}),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(t){var a=t.replace(Se,ze);ee[a]=new K(a,Ii,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var a=t.replace(Se,ze);ee[a]=new K(a,Ii,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){ee[t]=new K(t,Ii,!1,t.toLowerCase(),null,!1,!1)});var $e="xlinkHref";ee[$e]=new K("xlinkHref",Ii,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){ee[t]=new K(t,Ii,!1,t.toLowerCase(),null,!0,!0)});var Ge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Le=!1;function Ye(t){!Le&&Ge.test(t)&&(Le=!0,C("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(t)))}function zt(t,a,h,g){if(g.mustUseProperty){var w=g.propertyName;return t[w]}else{aa(h,a),g.sanitizeURL&&Ye(""+h);var k=g.attributeName,P=null;if(g.type===Jt){if(t.hasAttribute(k)){var $=t.getAttribute(k);return $===""?!0:Fr(a,h,g,!1)?$:$===""+h?h:$}}else if(t.hasAttribute(k)){if(Fr(a,h,g,!1))return t.getAttribute(k);if(g.type===at)return h;P=t.getAttribute(k)}return Fr(a,h,g,!1)?P===null?h:P:P===""+h?h:P}}function Gt(t,a,h,g){{if(!xr(a))return;if(!t.hasAttribute(a))return h===void 0?void 0:null;var w=t.getAttribute(a);return aa(h,a),w===""+h?h:w}}function kt(t,a,h,g){var w=_e(a);if(!Rr(a,w,g)){if(Fr(a,h,w,g)&&(h=null),g||w===null){if(xr(a)){var k=a;h===null?t.removeAttribute(k):(aa(h,a),t.setAttribute(k,""+h))}return}var P=w.mustUseProperty;if(P){var $=w.propertyName;if(h===null){var Y=w.type;t[$]=Y===at?!1:""}else t[$]=h;return}var le=w.attributeName,me=w.attributeNamespace;if(h===null)t.removeAttribute(le);else{var Ue=w.type,Fe;Ue===at||Ue===Jt&&h===!0?Fe="":(aa(h,le),Fe=""+h,w.sanitizeURL&&Ye(Fe.toString())),me?t.setAttributeNS(me,le,Fe):t.setAttribute(le,Fe)}}}var Ln=Symbol.for("react.element"),jn=Symbol.for("react.portal"),xe=Symbol.for("react.fragment"),dt=Symbol.for("react.strict_mode"),Dt=Symbol.for("react.profiler"),pe=Symbol.for("react.provider"),ot=Symbol.for("react.context"),yt=Symbol.for("react.forward_ref"),jt=Symbol.for("react.suspense"),rn=Symbol.for("react.suspense_list"),yn=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),En=Symbol.for("react.scope"),Xr=Symbol.for("react.debug_trace_mode"),Nr=Symbol.for("react.offscreen"),Tn=Symbol.for("react.legacy_hidden"),$r=Symbol.for("react.cache"),Ea=Symbol.for("react.tracing_marker"),Ua=Symbol.iterator,Yi="@@iterator";function Qi(t){if(t===null||typeof t!="object")return null;var a=Ua&&t[Ua]||t[Yi];return typeof a=="function"?a:null}var nr=Object.assign,Xo=0,vs,Yo,po,Ys,ct,mo,Oi;function ea(){}ea.__reactDisabledLog=!0;function oh(){{if(Xo===0){vs=console.log,Yo=console.info,po=console.warn,Ys=console.error,ct=console.group,mo=console.groupCollapsed,Oi=console.groupEnd;var t={configurable:!0,enumerable:!0,value:ea,writable:!0};Object.defineProperties(console,{info:t,log:t,warn:t,error:t,group:t,groupCollapsed:t,groupEnd:t})}Xo++}}function Ro(){{if(Xo--,Xo===0){var t={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:nr({},t,{value:vs}),info:nr({},t,{value:Yo}),warn:nr({},t,{value:po}),error:nr({},t,{value:Ys}),group:nr({},t,{value:ct}),groupCollapsed:nr({},t,{value:mo}),groupEnd:nr({},t,{value:Oi})})}Xo<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ou=x.ReactCurrentDispatcher,Tl;function Ra(t,a,h){{if(Tl===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);Tl=g&&g[1]||""}return`
`+Tl+t}}var Zt=!1,rr;{var ir=typeof WeakMap=="function"?WeakMap:Map;rr=new ir}function Ia(t,a){if(!t||Zt)return"";{var h=rr.get(t);if(h!==void 0)return h}var g;Zt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var k;k=ou.current,ou.current=null,oh();try{if(a){var P=function(){throw Error()};if(Object.defineProperty(P.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(P,[])}catch(pt){g=pt}Reflect.construct(t,[],P)}else{try{P.call()}catch(pt){g=pt}t.call(P.prototype)}}else{try{throw Error()}catch(pt){g=pt}t()}}catch(pt){if(pt&&g&&typeof pt.stack=="string"){for(var $=pt.stack.split(`
`),Y=g.stack.split(`
`),le=$.length-1,me=Y.length-1;le>=1&&me>=0&&$[le]!==Y[me];)me--;for(;le>=1&&me>=0;le--,me--)if($[le]!==Y[me]){if(le!==1||me!==1)do if(le--,me--,me<0||$[le]!==Y[me]){var Ue=`
`+$[le].replace(" at new "," at ");return t.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",t.displayName)),typeof t=="function"&&rr.set(t,Ue),Ue}while(le>=1&&me>=0);break}}}finally{Zt=!1,ou.current=k,Ro(),Error.prepareStackTrace=w}var Fe=t?t.displayName||t.name:"",lt=Fe?Ra(Fe):"";return typeof t=="function"&&rr.set(t,lt),lt}function uo(t,a,h){return Ia(t,!0)}function ar(t,a,h){return Ia(t,!1)}function Ya(t){var a=t.prototype;return!!(a&&a.isReactComponent)}function Io(t,a,h){if(t==null)return"";if(typeof t=="function")return Ia(t,Ya(t));if(typeof t=="string")return Ra(t);switch(t){case jt:return Ra("Suspense");case rn:return Ra("SuspenseList")}if(typeof t=="object")switch(t.$$typeof){case yt:return ar(t.render);case yn:return Io(t.type,a,h);case en:{var g=t,w=g._payload,k=g._init;try{return Io(k(w),a,h)}catch{}}}return""}function _s(t){switch(t._debugOwner&&t._debugOwner.type,t._debugSource,t.tag){case J:return Ra(t.type);case Mn:return Ra("Lazy");case St:return Ra("Suspense");case qn:return Ra("SuspenseList");case s:case G:case Nt:return ar(t.type);case Xe:return ar(t.type.render);case N:return uo(t.type);default:return""}}function ja(t){try{var a="",h=t;do a+=_s(h),h=h.return;while(h);return a}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Qr(t,a,h){var g=t.displayName;if(g)return g;var w=a.displayName||a.name||"";return w!==""?h+"("+w+")":h}function sh(t){return t.displayName||"Context"}function yr(t){if(t==null)return null;if(typeof t.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xe:return"Fragment";case jn:return"Portal";case Dt:return"Profiler";case dt:return"StrictMode";case jt:return"Suspense";case rn:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ot:var a=t;return sh(a)+".Consumer";case pe:var h=t;return sh(h._context)+".Provider";case yt:return Qr(t,t.render,"ForwardRef");case yn:var g=t.displayName||null;return g!==null?g:yr(t.type)||"Memo";case en:{var w=t,k=w._payload,P=w._init;try{return yr(P(k))}catch{return null}}}return null}function Ks(t,a,h){var g=a.displayName||a.name||"";return t.displayName||(g!==""?h+"("+g+")":h)}function Js(t){return t.displayName||"Context"}function lr(t){var a=t.tag,h=t.type;switch(a){case un:return"Cache";case je:var g=h;return Js(g)+".Consumer";case Ne:var w=h;return Js(w._context)+".Provider";case ut:return"DehydratedFragment";case Xe:return Ks(h,h.render,"ForwardRef");case Re:return"Fragment";case J:return h;case X:return"Portal";case H:return"Root";case Pe:return"Text";case Mn:return yr(h);case qe:return h===dt?"StrictMode":"Mode";case et:return"Offscreen";case Et:return"Profiler";case Jn:return"Scope";case St:return"Suspense";case qn:return"SuspenseList";case Hn:return"TracingMarker";case N:case s:case dn:case G:case Qe:case Nt:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;break}return null}var lh=x.ReactDebugCurrentFrame,ua=null,Ko=!1;function Jo(){{if(ua===null)return null;var t=ua._debugOwner;if(t!==null&&typeof t<"u")return lr(t)}return null}function Qs(){return ua===null?"":ja(ua)}function ei(){lh.getCurrentStack=null,ua=null,Ko=!1}function pr(t){lh.getCurrentStack=t===null?null:Qs,ua=t,Ko=!1}function Fu(){return ua}function Ka(t){Ko=t}function Mi(t){return""+t}function oa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return Zi(t),t;default:return""}}var of={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0};function xs(t,a){of[a.type]||a.onChange||a.onInput||a.readOnly||a.disabled||a.value==null||C("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`."),a.onChange||a.readOnly||a.disabled||a.checked==null||C("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}function pi(t){var a=t.type,h=t.nodeName;return h&&h.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Cl(t){return t._valueTracker}function bs(t){t._valueTracker=null}function ws(t){var a="";return t&&(pi(t)?a=t.checked?"true":"false":a=t.value),a}function ca(t){var a=pi(t)?"checked":"value",h=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);Zi(t[a]);var g=""+t[a];if(!(t.hasOwnProperty(a)||typeof h>"u"||typeof h.get!="function"||typeof h.set!="function")){var w=h.get,k=h.set;Object.defineProperty(t,a,{configurable:!0,get:function(){return w.call(this)},set:function($){Zi($),g=""+$,k.call(this,$)}}),Object.defineProperty(t,a,{enumerable:h.enumerable});var P={getValue:function(){return g},setValue:function($){Zi($),g=""+$},stopTracking:function(){bs(t),delete t[a]}};return P}}function Qo(t){Cl(t)||(t._valueTracker=ca(t))}function Ml(t){if(!t)return!1;var a=Cl(t);if(!a)return!0;var h=a.getValue(),g=ws(t);return g!==h?(a.setValue(g),!0):!1}function Va(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var go=!1,su=!1,sf=!1,Nu=!1;function el(t){var a=t.type==="checkbox"||t.type==="radio";return a?t.checked!=null:t.value!=null}function Q(t,a){var h=t,g=a.checked,w=nr({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??h._wrapperState.initialChecked});return w}function Ie(t,a){xs("input",a),a.checked!==void 0&&a.defaultChecked!==void 0&&!su&&(C("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Jo()||"A component",a.type),su=!0),a.value!==void 0&&a.defaultValue!==void 0&&!go&&(C("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://reactjs.org/link/controlled-components",Jo()||"A component",a.type),go=!0);var h=t,g=a.defaultValue==null?"":a.defaultValue;h._wrapperState={initialChecked:a.checked!=null?a.checked:a.defaultChecked,initialValue:oa(a.value!=null?a.value:g),controlled:el(a)}}function st(t,a){var h=t,g=a.checked;g!=null&&kt(h,"checked",g,!1)}function gt(t,a){var h=t;{var g=el(a);!h._wrapperState.controlled&&g&&!Nu&&(C("A component is changing an uncontrolled input to be controlled. This is likely caused by the value changing from undefined to a defined value, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),Nu=!0),h._wrapperState.controlled&&!g&&!sf&&(C("A component is changing a controlled input to be uncontrolled. This is likely caused by the value changing from a defined to undefined, which should not happen. Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://reactjs.org/link/controlled-components"),sf=!0)}st(t,a);var w=oa(a.value),k=a.type;if(w!=null)k==="number"?(w===0&&h.value===""||h.value!=w)&&(h.value=Mi(w)):h.value!==Mi(w)&&(h.value=Mi(w));else if(k==="submit"||k==="reset"){h.removeAttribute("value");return}a.hasOwnProperty("value")?$n(h,a.type,w):a.hasOwnProperty("defaultValue")&&$n(h,a.type,oa(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(h.defaultChecked=!!a.defaultChecked)}function Yt(t,a,h){var g=t;if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var w=a.type,k=w==="submit"||w==="reset";if(k&&(a.value===void 0||a.value===null))return;var P=Mi(g._wrapperState.initialValue);h||P!==g.value&&(g.value=P),g.defaultValue=P}var $=g.name;$!==""&&(g.name=""),g.defaultChecked=!g.defaultChecked,g.defaultChecked=!!g._wrapperState.initialChecked,$!==""&&(g.name=$)}function zn(t,a){var h=t;gt(h,a),_n(h,a)}function _n(t,a){var h=a.name;if(a.type==="radio"&&h!=null){for(var g=t;g.parentNode;)g=g.parentNode;aa(h,"name");for(var w=g.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),k=0;k<w.length;k++){var P=w[k];if(!(P===t||P.form!==t.form)){var $=kp(P);if(!$)throw new Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");Ml(P),gt(P,$)}}}}function $n(t,a,h){(a!=="number"||Va(t.ownerDocument)!==t)&&(h==null?t.defaultValue=Mi(t._wrapperState.initialValue):t.defaultValue!==Mi(h)&&(t.defaultValue=Mi(h)))}var br=!1,ti=!1,si=!1;function mi(t,a){a.value==null&&(typeof a.children=="object"&&a.children!==null?c.Children.forEach(a.children,function(h){h!=null&&(typeof h=="string"||typeof h=="number"||ti||(ti=!0,C("Cannot infer the option value of complex children. Pass a `value` prop or use a plain string as children to <option>.")))}):a.dangerouslySetInnerHTML!=null&&(si||(si=!0,C("Pass a `value` prop if you set dangerouslyInnerHTML so React knows which value should be selected.")))),a.selected!=null&&!br&&(C("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),br=!0)}function Ai(t,a){a.value!=null&&t.setAttribute("value",Mi(oa(a.value)))}var ki=Array.isArray;function Sn(t){return ki(t)}var Al;Al=!1;function kl(){var t=Jo();return t?`

Check the render method of \``+t+"`.":""}var Uu=["value","defaultValue"];function uh(t){{xs("select",t);for(var a=0;a<Uu.length;a++){var h=Uu[a];if(t[h]!=null){var g=Sn(t[h]);t.multiple&&!g?C("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",h,kl()):!t.multiple&&g&&C("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",h,kl())}}}}function Es(t,a,h,g){var w=t.options;if(a){for(var k=h,P={},$=0;$<k.length;$++)P["$"+k[$]]=!0;for(var Y=0;Y<w.length;Y++){var le=P.hasOwnProperty("$"+w[Y].value);w[Y].selected!==le&&(w[Y].selected=le),le&&g&&(w[Y].defaultSelected=!0)}}else{for(var me=Mi(oa(h)),Ue=null,Fe=0;Fe<w.length;Fe++){if(w[Fe].value===me){w[Fe].selected=!0,g&&(w[Fe].defaultSelected=!0);return}Ue===null&&!w[Fe].disabled&&(Ue=w[Fe])}Ue!==null&&(Ue.selected=!0)}}function lu(t,a){return nr({},a,{value:void 0})}function Ss(t,a){var h=t;uh(a),h._wrapperState={wasMultiple:!!a.multiple},a.value!==void 0&&a.defaultValue!==void 0&&!Al&&(C("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://reactjs.org/link/controlled-components"),Al=!0)}function ju(t,a){var h=t;h.multiple=!!a.multiple;var g=a.value;g!=null?Es(h,!!a.multiple,g,!1):a.defaultValue!=null&&Es(h,!!a.multiple,a.defaultValue,!0)}function Vu(t,a){var h=t,g=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?Es(h,!!a.multiple,w,!1):g!==!!a.multiple&&(a.defaultValue!=null?Es(h,!!a.multiple,a.defaultValue,!0):Es(h,!!a.multiple,a.multiple?[]:"",!1))}function tl(t,a){var h=t,g=a.value;g!=null&&Es(h,!!a.multiple,g,!1)}var Dl=!1;function $u(t,a){var h=t;if(a.dangerouslySetInnerHTML!=null)throw new Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");var g=nr({},a,{value:void 0,defaultValue:void 0,children:Mi(h._wrapperState.initialValue)});return g}function Dd(t,a){var h=t;xs("textarea",a),a.value!==void 0&&a.defaultValue!==void 0&&!Dl&&(C("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://reactjs.org/link/controlled-components",Jo()||"A component"),Dl=!0);var g=a.value;if(g==null){var w=a.children,k=a.defaultValue;if(w!=null){C("Use the `defaultValue` or `value` props instead of setting children on <textarea>.");{if(k!=null)throw new Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Sn(w)){if(w.length>1)throw new Error("<textarea> can only have at most one child.");w=w[0]}k=w}}k==null&&(k=""),g=k}h._wrapperState={initialValue:oa(g)}}function Gu(t,a){var h=t,g=oa(a.value),w=oa(a.defaultValue);if(g!=null){var k=Mi(g);k!==h.value&&(h.value=k),a.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)}w!=null&&(h.defaultValue=Mi(w))}function lf(t,a){var h=t,g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function Rd(t,a){Gu(t,a)}var Lo="http://www.w3.org/1999/xhtml",uf="http://www.w3.org/1998/Math/MathML",ch="http://www.w3.org/2000/svg";function Sr(t){switch(t){case"svg":return ch;case"math":return uf;default:return Lo}}function uu(t,a){return t==null||t===Lo?Sr(a):t===ch&&a==="foreignObject"?Lo:t}var tm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,h,g,w){MSApp.execUnsafeLocalFunction(function(){return t(a,h,g,w)})}:t},qu,Id=tm(function(t,a){if(t.namespaceURI===ch&&!("innerHTML"in t)){qu=qu||document.createElement("div"),qu.innerHTML="<svg>"+a.valueOf().toString()+"</svg>";for(var h=qu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;h.firstChild;)t.appendChild(h.firstChild);return}t.innerHTML=a}),ha=1,es=3,fa=8,nl=9,Ld=11,Hu=function(t,a){if(a){var h=t.firstChild;if(h&&h===t.lastChild&&h.nodeType===es){h.nodeValue=a;return}}t.textContent=a},zd={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function cf(t,a){return t+a.charAt(0).toUpperCase()+a.substring(1)}var nm=["Webkit","ms","Moz","O"];Object.keys(cu).forEach(function(t){nm.forEach(function(a){cu[cf(a,t)]=cu[t]})});function hf(t,a,h){var g=a==null||typeof a=="boolean"||a==="";return g?"":!h&&typeof a=="number"&&a!==0&&!(cu.hasOwnProperty(t)&&cu[t])?a+"px":(va(a,t),(""+a).trim())}var Yg=/([A-Z])/g,hh=/^ms-/;function Wu(t){return t.replace(Yg,"-$1").toLowerCase().replace(hh,"-ms-")}var ff=function(){};{var fh=/^(?:webkit|moz|o)[A-Z]/,Pd=/^-ms-/,Ts=/-(.)/g,dh=/;\s*$/,Rl={},Zu={},Od=!1,df=!1,Kg=function(t){return t.replace(Ts,function(a,h){return h.toUpperCase()})},Bd=function(t){Rl.hasOwnProperty(t)&&Rl[t]||(Rl[t]=!0,C("Unsupported style property %s. Did you mean %s?",t,Kg(t.replace(Pd,"ms-"))))},pf=function(t){Rl.hasOwnProperty(t)&&Rl[t]||(Rl[t]=!0,C("Unsupported vendor-prefixed style property %s. Did you mean %s?",t,t.charAt(0).toUpperCase()+t.slice(1)))},ph=function(t,a){Zu.hasOwnProperty(a)&&Zu[a]||(Zu[a]=!0,C(`Style property values shouldn't contain a semicolon. Try "%s: %s" instead.`,t,a.replace(dh,"")))},rm=function(t,a){Od||(Od=!0,C("`NaN` is an invalid value for the `%s` css style property.",t))},Fd=function(t,a){df||(df=!0,C("`Infinity` is an invalid value for the `%s` css style property.",t))};ff=function(t,a){t.indexOf("-")>-1?Bd(t):fh.test(t)?pf(t):dh.test(a)&&ph(t,a),typeof a=="number"&&(isNaN(a)?rm(t,a):isFinite(a)||Fd(t,a))}}var Jg=ff;function Nd(t){{var a="",h="";for(var g in t)if(t.hasOwnProperty(g)){var w=t[g];if(w!=null){var k=g.indexOf("--")===0;a+=h+(k?g:Wu(g))+":",a+=hf(g,w,k),h=";"}}return a||null}}function Ud(t,a){var h=t.style;for(var g in a)if(a.hasOwnProperty(g)){var w=g.indexOf("--")===0;w||Jg(g,a[g]);var k=hf(g,a[g],w);g==="float"&&(g="cssFloat"),w?h.setProperty(g,k):h[g]=k}}function mh(t){return t==null||typeof t=="boolean"||t===""}function jd(t){var a={};for(var h in t)for(var g=zd[h]||[h],w=0;w<g.length;w++)a[g[w]]=h;return a}function mf(t,a){{if(!a)return;var h=jd(t),g=jd(a),w={};for(var k in h){var P=h[k],$=g[k];if($&&P!==$){var Y=P+","+$;if(w[Y])continue;w[Y]=!0,C("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",mh(t[P])?"Removing":"Updating",P,$)}}}}var im={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Xu=nr({menuitem:!0},im),Qg="__html";function Vd(t,a){if(a){if(Xu[t]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw new Error(t+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.");if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw new Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(typeof a.dangerouslySetInnerHTML!="object"||!(Qg in a.dangerouslySetInnerHTML))throw new Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://reactjs.org/link/dangerously-set-inner-html for more information.")}if(!a.suppressContentEditableWarning&&a.contentEditable&&a.children!=null&&C("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),a.style!=null&&typeof a.style!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.")}}function hu(t,a){if(t.indexOf("-")===-1)return typeof a.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gf={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},am={"aria-current":0,"aria-description":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},fu={},yf=new RegExp("^(aria)-["+hn+"]*$"),Yu=new RegExp("^(aria)[A-Z]["+hn+"]*$");function om(t,a){{if(Zr.call(fu,a)&&fu[a])return!0;if(Yu.test(a)){var h="aria-"+a.slice(4).toLowerCase(),g=am.hasOwnProperty(h)?h:null;if(g==null)return C("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",a),fu[a]=!0,!0;if(a!==g)return C("Invalid ARIA attribute `%s`. Did you mean `%s`?",a,g),fu[a]=!0,!0}if(yf.test(a)){var w=a.toLowerCase(),k=am.hasOwnProperty(w)?w:null;if(k==null)return fu[a]=!0,!1;if(a!==k)return C("Unknown ARIA attribute `%s`. Did you mean `%s`?",a,k),fu[a]=!0,!0}}return!0}function sm(t,a){{var h=[];for(var g in a){var w=om(t,g);w||h.push(g)}var k=h.map(function(P){return"`"+P+"`"}).join(", ");h.length===1?C("Invalid aria prop %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",k,t):h.length>1&&C("Invalid aria props %s on <%s> tag. For details, see https://reactjs.org/link/invalid-aria-props",k,t)}}function rl(t,a){hu(t,a)||sm(t,a)}var gh=!1;function zo(t,a){{if(t!=="input"&&t!=="textarea"&&t!=="select")return;a!=null&&a.value===null&&!gh&&(gh=!0,t==="select"&&a.multiple?C("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",t):C("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",t))}}var Ku=function(){};{var $a={},Il=/^on./,Ju=/^on[^A-Z]/,vf=new RegExp("^(aria)-["+hn+"]*$"),_f=new RegExp("^(aria)[A-Z]["+hn+"]*$");Ku=function(t,a,h,g){if(Zr.call($a,a)&&$a[a])return!0;var w=a.toLowerCase();if(w==="onfocusin"||w==="onfocusout")return C("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),$a[a]=!0,!0;if(g!=null){var k=g.registrationNameDependencies,P=g.possibleRegistrationNames;if(k.hasOwnProperty(a))return!0;var $=P.hasOwnProperty(w)?P[w]:null;if($!=null)return C("Invalid event handler property `%s`. Did you mean `%s`?",a,$),$a[a]=!0,!0;if(Il.test(a))return C("Unknown event handler property `%s`. It will be ignored.",a),$a[a]=!0,!0}else if(Il.test(a))return Ju.test(a)&&C("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",a),$a[a]=!0,!0;if(vf.test(a)||_f.test(a))return!0;if(w==="innerhtml")return C("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),$a[a]=!0,!0;if(w==="aria")return C("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),$a[a]=!0,!0;if(w==="is"&&h!==null&&h!==void 0&&typeof h!="string")return C("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof h),$a[a]=!0,!0;if(typeof h=="number"&&isNaN(h))return C("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",a),$a[a]=!0,!0;var Y=_e(a),le=Y!==null&&Y.type===Xi;if(gf.hasOwnProperty(w)){var me=gf[w];if(me!==a)return C("Invalid DOM property `%s`. Did you mean `%s`?",a,me),$a[a]=!0,!0}else if(!le&&a!==w)return C("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",a,w),$a[a]=!0,!0;return typeof h=="boolean"&&Jr(a,h,Y,!1)?(h?C('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',h,a,a,h,a):C('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',h,a,a,h,a,a,a),$a[a]=!0,!0):le?!0:Jr(a,h,Y,!1)?($a[a]=!0,!1):((h==="false"||h==="true")&&Y!==null&&Y.type===at&&(C("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",h,a,h==="false"?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',a,h),$a[a]=!0),!0)}}var Ir=function(t,a,h){{var g=[];for(var w in a){var k=Ku(t,w,a[w],h);k||g.push(w)}var P=g.map(function($){return"`"+$+"`"}).join(", ");g.length===1?C("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",P,t):g.length>1&&C("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://reactjs.org/link/attribute-behavior ",P,t)}};function yh(t,a,h){hu(t,a)||Ir(t,a,h)}var $d=1,Qu=2,Cs=4,lm=$d|Qu|Cs,Ll=null;function il(t){Ll!==null&&C("Expected currently replaying event to be null. This error is likely caused by a bug in React. Please file an issue."),Ll=t}function um(){Ll===null&&C("Expected currently replaying event to not be null. This error is likely caused by a bug in React. Please file an issue."),Ll=null}function xf(t){return t===Ll}function zl(t){var a=t.target||t.srcElement||window;return a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===es?a.parentNode:a}var Pl=null,Ol=null,Ms=null;function ec(t){var a=Kl(t);if(a){if(typeof Pl!="function")throw new Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var h=a.stateNode;if(h){var g=kp(h);Pl(a.stateNode,a.type,g)}}}function bf(t){Pl=t}function vh(t){Ol?Ms?Ms.push(t):Ms=[t]:Ol=t}function nn(){return Ol!==null||Ms!==null}function Po(){if(Ol){var t=Ol,a=Ms;if(Ol=null,Ms=null,ec(t),a)for(var h=0;h<a.length;h++)ec(a[h])}}var Gd=function(t,a){return t(a)},tc=function(){},du=!1;function Sa(){var t=nn();t&&(tc(),Po())}function nc(t,a,h){if(du)return t(a,h);du=!0;try{return Gd(t,a,h)}finally{du=!1,Sa()}}function wf(t,a,h){Gd=t,tc=h}function qd(t){return t==="button"||t==="input"||t==="select"||t==="textarea"}function Ef(t,a,h){switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!!(h.disabled&&qd(a));default:return!1}}function rc(t,a){var h=t.stateNode;if(h===null)return null;var g=kp(h);if(g===null)return null;var w=g[a];if(Ef(a,t.type,g))return null;if(w&&typeof w!="function")throw new Error("Expected `"+a+"` listener to be a function, instead got a value of `"+typeof w+"` type.");return w}var ic=!1;if(Yr)try{var As={};Object.defineProperty(As,"passive",{get:function(){ic=!0}}),window.addEventListener("test",As,As),window.removeEventListener("test",As,As)}catch{ic=!1}function Sf(t,a,h,g,w,k,P,$,Y){var le=Array.prototype.slice.call(arguments,3);try{a.apply(h,le)}catch(me){this.onError(me)}}var cm=Sf;if(typeof window<"u"&&typeof window.dispatchEvent=="function"&&typeof document<"u"&&typeof document.createEvent=="function"){var Tf=document.createElement("react");cm=function(a,h,g,w,k,P,$,Y,le){if(typeof document>"u"||document===null)throw new Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var me=document.createEvent("Event"),Ue=!1,Fe=!0,lt=window.event,pt=Object.getOwnPropertyDescriptor(window,"event");function Ct(){Tf.removeEventListener(Mt,Kn,!1),typeof window.event<"u"&&window.hasOwnProperty("event")&&(window.event=lt)}var fn=Array.prototype.slice.call(arguments,3);function Kn(){Ue=!0,Ct(),h.apply(g,fn),Fe=!1}var Nn,Wr=!1,Br=!1;function rt(it){if(Nn=it.error,Wr=!0,Nn===null&&it.colno===0&&it.lineno===0&&(Br=!0),it.defaultPrevented&&Nn!=null&&typeof Nn=="object")try{Nn._suppressLogging=!0}catch{}}var Mt="react-"+(a||"invokeguardedcallback");if(window.addEventListener("error",rt),Tf.addEventListener(Mt,Kn,!1),me.initEvent(Mt,!1,!1),Tf.dispatchEvent(me),pt&&Object.defineProperty(window,"event",pt),Ue&&Fe&&(Wr?Br&&(Nn=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://reactjs.org/link/crossorigin-error for more information.")):Nn=new Error(`An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the "Pause on exceptions" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue.`),this.onError(Nn)),window.removeEventListener("error",rt),!Ue)return Ct(),Sf.apply(this,arguments)}}var ac=cm,Bl=!1,oc=null,sc=!1,lc=null,_h={onError:function(t){Bl=!0,oc=t}};function pu(t,a,h,g,w,k,P,$,Y){Bl=!1,oc=null,ac.apply(_h,arguments)}function Hd(t,a,h,g,w,k,P,$,Y){if(pu.apply(this,arguments),Bl){var le=Cf();sc||(sc=!0,lc=le)}}function hm(){if(sc){var t=lc;throw sc=!1,lc=null,t}}function Wd(){return Bl}function Cf(){if(Bl){var t=oc;return Bl=!1,oc=null,t}else throw new Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}function yo(t){return t._reactInternals}function fm(t){return t._reactInternals!==void 0}function dm(t,a){t._reactInternals=a}var Zn=0,mu=1,ta=2,Ar=4,Fl=16,da=32,Zd=64,Ur=128,al=256,Nl=512,Ta=1024,Oo=2048,ol=4096,La=8192,vo=16384,gu=Oo|Ar|Zd|Nl|Ta|vo,Mf=32767,an=32768,za=65536,xh=131072,yu=1048576,sl=2097152,Xt=4194304,bh=8388608,ll=16777216,wh=33554432,Eh=Ar|Ta|0,Af=ta|Ar|Fl|da|Nl|ol|La,uc=Ar|Zd|Nl|La,cc=Oo|Fl,ul=Xt|bh|sl,Xd=x.ReactCurrentOwner;function cl(t){var a=t,h=t;if(t.alternate)for(;a.return;)a=a.return;else{var g=a;do a=g,(a.flags&(ta|ol))!==Zn&&(h=a.return),g=a.return;while(g)}return a.tag===H?h:null}function kf(t){if(t.tag===St){var a=t.memoizedState;if(a===null){var h=t.alternate;h!==null&&(a=h.memoizedState)}if(a!==null)return a.dehydrated}return null}function vu(t){return t.tag===H?t.stateNode.containerInfo:null}function f(t){return cl(t)===t}function i(t){{var a=Xd.current;if(a!==null&&a.tag===N){var h=a,g=h.stateNode;g._warnedAboutRefsInRender||C("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",lr(h)||"A component"),g._warnedAboutRefsInRender=!0}}var w=yo(t);return w?cl(w)===w:!1}function l(t){if(cl(t)!==t)throw new Error("Unable to find node on an unmounted component.")}function p(t){var a=t.alternate;if(!a){var h=cl(t);if(h===null)throw new Error("Unable to find node on an unmounted component.");return h!==t?null:t}for(var g=t,w=a;;){var k=g.return;if(k===null)break;var P=k.alternate;if(P===null){var $=k.return;if($!==null){g=w=$;continue}break}if(k.child===P.child){for(var Y=k.child;Y;){if(Y===g)return l(k),t;if(Y===w)return l(k),a;Y=Y.sibling}throw new Error("Unable to find node on an unmounted component.")}if(g.return!==w.return)g=k,w=P;else{for(var le=!1,me=k.child;me;){if(me===g){le=!0,g=k,w=P;break}if(me===w){le=!0,w=k,g=P;break}me=me.sibling}if(!le){for(me=P.child;me;){if(me===g){le=!0,g=P,w=k;break}if(me===w){le=!0,w=P,g=k;break}me=me.sibling}if(!le)throw new Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(g.alternate!==w)throw new Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(g.tag!==H)throw new Error("Unable to find node on an unmounted component.");return g.stateNode.current===g?t:a}function v(t){var a=p(t);return a!==null?b(a):null}function b(t){if(t.tag===J||t.tag===Pe)return t;for(var a=t.child;a!==null;){var h=b(a);if(h!==null)return h;a=a.sibling}return null}function M(t){var a=p(t);return a!==null?D(a):null}function D(t){if(t.tag===J||t.tag===Pe)return t;for(var a=t.child;a!==null;){if(a.tag!==X){var h=D(a);if(h!==null)return h}a=a.sibling}return null}var L=y.unstable_scheduleCallback,F=y.unstable_cancelCallback,B=y.unstable_shouldYield,q=y.unstable_requestPaint,te=y.unstable_now,oe=y.unstable_getCurrentPriorityLevel,ue=y.unstable_ImmediatePriority,se=y.unstable_UserBlockingPriority,ce=y.unstable_NormalPriority,W=y.unstable_LowPriority,ae=y.unstable_IdlePriority,ge=y.unstable_yieldValue,ve=y.unstable_setDisableYieldValue,De=null,Ae=null,de=null,Be=!1,Oe=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u";function Ke(t){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(a.isDisabled)return!0;if(!a.supportsFiber)return C("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://reactjs.org/link/react-devtools"),!0;try{Ti&&(t=nr({},t,{getLaneLabelMap:vt,injectProfilingHooks:Ze})),De=a.inject(t),Ae=a}catch(h){C("React instrumentation encountered an error: %s.",h)}return!!a.checkDCE}function Ot(t,a){if(Ae&&typeof Ae.onScheduleFiberRoot=="function")try{Ae.onScheduleFiberRoot(De,t,a)}catch(h){Be||(Be=!0,C("React instrumentation encountered an error: %s",h))}}function We(t,a){if(Ae&&typeof Ae.onCommitFiberRoot=="function")try{var h=(t.current.flags&Ur)===Ur;if(Vi){var g;switch(a){case jo:g=ue;break;case rs:g=se;break;case pl:g=ce;break;case Of:g=ae;break;default:g=ce;break}Ae.onCommitFiberRoot(De,t,g,h)}}catch(w){Be||(Be=!0,C("React instrumentation encountered an error: %s",w))}}function _t(t){if(Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(De,t)}catch(a){Be||(Be=!0,C("React instrumentation encountered an error: %s",a))}}function tt(t){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(De,t)}catch(a){Be||(Be=!0,C("React instrumentation encountered an error: %s",a))}}function xt(t){if(typeof ge=="function"&&(ve(t),A(t)),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(De,t)}catch(a){Be||(Be=!0,C("React instrumentation encountered an error: %s",a))}}function Ze(t){de=t}function vt(){{for(var t=new Map,a=1,h=0;h<Th;h++){var g=m_(a);t.set(a,g),a*=2}return t}}function Ft(t){de!==null&&typeof de.markCommitStarted=="function"&&de.markCommitStarted(t)}function Tt(){de!==null&&typeof de.markCommitStopped=="function"&&de.markCommitStopped()}function Pt(t){de!==null&&typeof de.markComponentRenderStarted=="function"&&de.markComponentRenderStarted(t)}function pn(){de!==null&&typeof de.markComponentRenderStopped=="function"&&de.markComponentRenderStopped()}function Xn(t){de!==null&&typeof de.markComponentPassiveEffectMountStarted=="function"&&de.markComponentPassiveEffectMountStarted(t)}function sn(){de!==null&&typeof de.markComponentPassiveEffectMountStopped=="function"&&de.markComponentPassiveEffectMountStopped()}function In(t){de!==null&&typeof de.markComponentPassiveEffectUnmountStarted=="function"&&de.markComponentPassiveEffectUnmountStarted(t)}function vr(){de!==null&&typeof de.markComponentPassiveEffectUnmountStopped=="function"&&de.markComponentPassiveEffectUnmountStopped()}function mr(t){de!==null&&typeof de.markComponentLayoutEffectMountStarted=="function"&&de.markComponentLayoutEffectMountStarted(t)}function gn(){de!==null&&typeof de.markComponentLayoutEffectMountStopped=="function"&&de.markComponentLayoutEffectMountStopped()}function jr(t){de!==null&&typeof de.markComponentLayoutEffectUnmountStarted=="function"&&de.markComponentLayoutEffectUnmountStarted(t)}function ni(){de!==null&&typeof de.markComponentLayoutEffectUnmountStopped=="function"&&de.markComponentLayoutEffectUnmountStopped()}function li(t,a,h){de!==null&&typeof de.markComponentErrored=="function"&&de.markComponentErrored(t,a,h)}function ui(t,a,h){de!==null&&typeof de.markComponentSuspended=="function"&&de.markComponentSuspended(t,a,h)}function Ga(t){de!==null&&typeof de.markLayoutEffectsStarted=="function"&&de.markLayoutEffectsStarted(t)}function Ca(){de!==null&&typeof de.markLayoutEffectsStopped=="function"&&de.markLayoutEffectsStopped()}function Bo(t){de!==null&&typeof de.markPassiveEffectsStarted=="function"&&de.markPassiveEffectsStarted(t)}function ks(){de!==null&&typeof de.markPassiveEffectsStopped=="function"&&de.markPassiveEffectsStopped()}function Di(t){de!==null&&typeof de.markRenderStarted=="function"&&de.markRenderStarted(t)}function ci(){de!==null&&typeof de.markRenderYielded=="function"&&de.markRenderYielded()}function Lr(){de!==null&&typeof de.markRenderStopped=="function"&&de.markRenderStopped()}function sa(t){de!==null&&typeof de.markRenderScheduled=="function"&&de.markRenderScheduled(t)}function Ja(t,a){de!==null&&typeof de.markForceUpdateScheduled=="function"&&de.markForceUpdateScheduled(t,a)}function gi(t,a){de!==null&&typeof de.markStateUpdateScheduled=="function"&&de.markStateUpdateScheduled(t,a)}var xn=0,Er=1,zr=2,Li=8,Ma=16,hl=Math.clz32?Math.clz32:Sh,_u=Math.log,Df=Math.LN2;function Sh(t){var a=t>>>0;return a===0?32:31-(_u(a)/Df|0)|0}var Th=31,qt=0,Pa=0,ur=1,hc=2,Ds=4,fc=8,Rs=16,dc=32,Fo=4194240,pc=64,pm=128,mm=256,ey=512,ty=1024,ny=2048,Yd=4096,Ch=8192,mc=16384,fl=32768,ts=65536,Ul=131072,jl=262144,xu=524288,ry=1048576,iy=2097152,gm=130023424,Rf=4194304,ym=8388608,vm=16777216,ns=33554432,ay=67108864,p_=Rf,Bi=134217728,kn=268435455,Is=268435456,Vl=536870912,$i=1073741824;function m_(t){{if(t&ur)return"Sync";if(t&hc)return"InputContinuousHydration";if(t&Ds)return"InputContinuous";if(t&fc)return"DefaultHydration";if(t&Rs)return"Default";if(t&dc)return"TransitionHydration";if(t&Fo)return"Transition";if(t&gm)return"Retry";if(t&Bi)return"SelectiveHydration";if(t&Is)return"IdleHydration";if(t&Vl)return"Idle";if(t&$i)return"Offscreen"}}var Fi=-1,No=pc,If=Rf;function dl(t){switch(Oa(t)){case ur:return ur;case hc:return hc;case Ds:return Ds;case fc:return fc;case Rs:return Rs;case dc:return dc;case pc:case pm:case mm:case ey:case ty:case ny:case Yd:case Ch:case mc:case fl:case ts:case Ul:case jl:case xu:case ry:case iy:return t&Fo;case Rf:case ym:case vm:case ns:case ay:return t&gm;case Bi:return Bi;case Is:return Is;case Vl:return Vl;case $i:return $i;default:return C("Should have found matching lanes. This is a bug in React."),t}}function gc(t,a){var h=t.pendingLanes;if(h===qt)return qt;var g=qt,w=t.suspendedLanes,k=t.pingedLanes,P=h&kn;if(P!==qt){var $=P&~w;if($!==qt)g=dl($);else{var Y=P&k;Y!==qt&&(g=dl(Y))}}else{var le=h&~w;le!==qt?g=dl(le):k!==qt&&(g=dl(k))}if(g===qt)return qt;if(a!==qt&&a!==g&&(a&w)===qt){var me=Oa(g),Ue=Oa(a);if(me>=Ue||me===Rs&&(Ue&Fo)!==qt)return a}(g&Ds)!==qt&&(g|=h&Rs);var Fe=t.entangledLanes;if(Fe!==qt)for(var lt=t.entanglements,pt=g&Fe;pt>0;){var Ct=pa(pt),fn=1<<Ct;g|=lt[Ct],pt&=~fn}return g}function Mh(t,a){for(var h=t.eventTimes,g=Fi;a>0;){var w=pa(a),k=1<<w,P=h[w];P>g&&(g=P),a&=~k}return g}function oy(t,a){switch(t){case ur:case hc:case Ds:return a+250;case fc:case Rs:case dc:case pc:case pm:case mm:case ey:case ty:case ny:case Yd:case Ch:case mc:case fl:case ts:case Ul:case jl:case xu:case ry:case iy:return a+5e3;case Rf:case ym:case vm:case ns:case ay:return Fi;case Bi:case Is:case Vl:case $i:return Fi;default:return C("Should have found matching lanes. This is a bug in React."),Fi}}function _m(t,a){for(var h=t.pendingLanes,g=t.suspendedLanes,w=t.pingedLanes,k=t.expirationTimes,P=h;P>0;){var $=pa(P),Y=1<<$,le=k[$];le===Fi?((Y&g)===qt||(Y&w)!==qt)&&(k[$]=oy(Y,a)):le<=a&&(t.expiredLanes|=Y),P&=~Y}}function g_(t){return dl(t.pendingLanes)}function xm(t){var a=t.pendingLanes&~$i;return a!==qt?a:a&$i?$i:qt}function Q0(t){return(t&ur)!==qt}function Kd(t){return(t&kn)!==qt}function sy(t){return(t&gm)===t}function Jd(t){var a=ur|Ds|Rs;return(t&a)===qt}function Lf(t){return(t&Fo)===t}function Ls(t,a){var h=hc|Ds|fc|Rs;return(a&h)!==qt}function ly(t,a){return(a&t.expiredLanes)!==qt}function uy(t){return(t&Fo)!==qt}function zf(){var t=No;return No<<=1,(No&Fo)===qt&&(No=pc),t}function Qd(){var t=If;return If<<=1,(If&gm)===qt&&(If=Rf),t}function Oa(t){return t&-t}function bu(t){return Oa(t)}function pa(t){return 31-hl(t)}function Uo(t){return pa(t)}function _o(t,a){return(t&a)!==qt}function Ri(t,a){return(t&a)===a}function wr(t,a){return t|a}function yc(t,a){return t&~a}function zs(t,a){return t&a}function kS(t){return t}function eb(t,a){return t!==Pa&&t<a?t:a}function bm(t){for(var a=[],h=0;h<Th;h++)a.push(t);return a}function Pf(t,a,h){t.pendingLanes|=a,a!==Vl&&(t.suspendedLanes=qt,t.pingedLanes=qt);var g=t.eventTimes,w=Uo(a);g[w]=h}function Ah(t,a){t.suspendedLanes|=a,t.pingedLanes&=~a;for(var h=t.expirationTimes,g=a;g>0;){var w=pa(g),k=1<<w;h[w]=Fi,g&=~k}}function cy(t,a,h){t.pingedLanes|=t.suspendedLanes&a}function y_(t,a){var h=t.pendingLanes&~a;t.pendingLanes=a,t.suspendedLanes=qt,t.pingedLanes=qt,t.expiredLanes&=a,t.mutableReadLanes&=a,t.entangledLanes&=a;for(var g=t.entanglements,w=t.eventTimes,k=t.expirationTimes,P=h;P>0;){var $=pa(P),Y=1<<$;g[$]=qt,w[$]=Fi,k[$]=Fi,P&=~Y}}function wm(t,a){for(var h=t.entangledLanes|=a,g=t.entanglements,w=h;w;){var k=pa(w),P=1<<k;P&a|g[k]&a&&(g[k]|=a),w&=~P}}function v_(t,a){var h=Oa(a),g;switch(h){case Ds:g=hc;break;case Rs:g=fc;break;case pc:case pm:case mm:case ey:case ty:case ny:case Yd:case Ch:case mc:case fl:case ts:case Ul:case jl:case xu:case ry:case iy:case Rf:case ym:case vm:case ns:case ay:g=dc;break;case Vl:g=Is;break;default:g=Pa;break}return(g&(t.suspendedLanes|a))!==Pa?Pa:g}function __(t,a,h){if(Oe)for(var g=t.pendingUpdatersLaneMap;h>0;){var w=Uo(h),k=1<<w,P=g[w];P.add(a),h&=~k}}function x_(t,a){if(Oe)for(var h=t.pendingUpdatersLaneMap,g=t.memoizedUpdaters;a>0;){var w=Uo(a),k=1<<w,P=h[w];P.size>0&&(P.forEach(function($){var Y=$.alternate;(Y===null||!g.has(Y))&&g.add($)}),P.clear()),a&=~k}}function hy(t,a){return null}var jo=ur,rs=Ds,pl=Rs,Of=Vl,kh=Pa;function Gi(){return kh}function Aa(t){kh=t}function b_(t,a){var h=kh;try{return kh=t,a()}finally{kh=h}}function $l(t,a){return t!==0&&t<a?t:a}function tb(t,a){return t>a?t:a}function wu(t,a){return t!==0&&t<a}function Bf(t){var a=Oa(t);return wu(jo,a)?wu(rs,a)?Kd(a)?pl:Of:rs:jo}function xo(t){var a=t.current.memoizedState;return a.isDehydrated}var is;function nb(t){is=t}function Em(t){is(t)}var Sm;function rb(t){Sm=t}var Tm;function Gl(t){Tm=t}var vc;function w_(t){vc=t}var fy;function ib(t){fy=t}var Ff=!1,Nf=[],as=null,os=null,Ps=null,_c=new Map,Uf=new Map,Os=[],dy=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","copy","cut","paste","click","change","contextmenu","reset","submit"];function E_(t){return dy.indexOf(t)>-1}function jf(t,a,h,g,w){return{blockedOn:t,domEventName:a,eventSystemFlags:h,nativeEvent:w,targetContainers:[g]}}function py(t,a){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":{var h=a.pointerId;_c.delete(h);break}case"gotpointercapture":case"lostpointercapture":{var g=a.pointerId;Uf.delete(g);break}}}function Dh(t,a,h,g,w,k){if(t===null||t.nativeEvent!==k){var P=jf(a,h,g,w,k);if(a!==null){var $=Kl(a);$!==null&&Sm($)}return P}t.eventSystemFlags|=g;var Y=t.targetContainers;return w!==null&&Y.indexOf(w)===-1&&Y.push(w),t}function S_(t,a,h,g,w){switch(a){case"focusin":{var k=w;return as=Dh(as,t,a,h,g,k),!0}case"dragenter":{var P=w;return os=Dh(os,t,a,h,g,P),!0}case"mouseover":{var $=w;return Ps=Dh(Ps,t,a,h,g,$),!0}case"pointerover":{var Y=w,le=Y.pointerId;return _c.set(le,Dh(_c.get(le)||null,t,a,h,g,Y)),!0}case"gotpointercapture":{var me=w,Ue=me.pointerId;return Uf.set(Ue,Dh(Uf.get(Ue)||null,t,a,h,g,me)),!0}}return!1}function T_(t){var a=Oc(t.target);if(a!==null){var h=cl(a);if(h!==null){var g=h.tag;if(g===St){var w=kf(h);if(w!==null){t.blockedOn=w,fy(t.priority,function(){Tm(h)});return}}else if(g===H){var k=h.stateNode;if(xo(k)){t.blockedOn=vu(h);return}}}}t.blockedOn=null}function ab(t){for(var a=vc(),h={blockedOn:null,target:t,priority:a},g=0;g<Os.length&&wu(a,Os[g].priority);g++);Os.splice(g,0,h),g===0&&T_(h)}function xc(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;a.length>0;){var h=a[0],g=Mm(t.domEventName,t.eventSystemFlags,h,t.nativeEvent);if(g===null){var w=t.nativeEvent,k=new w.constructor(w.type,w);il(k),w.target.dispatchEvent(k),um()}else{var P=Kl(g);return P!==null&&Sm(P),t.blockedOn=g,!1}a.shift()}return!0}function my(t,a,h){xc(t)&&h.delete(a)}function bc(){Ff=!1,as!==null&&xc(as)&&(as=null),os!==null&&xc(os)&&(os=null),Ps!==null&&xc(Ps)&&(Ps=null),_c.forEach(my),Uf.forEach(my)}function Vr(t,a){t.blockedOn===a&&(t.blockedOn=null,Ff||(Ff=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,bc)))}function Rh(t){if(Nf.length>0){Vr(Nf[0],t);for(var a=1;a<Nf.length;a++){var h=Nf[a];h.blockedOn===t&&(h.blockedOn=null)}}as!==null&&Vr(as,t),os!==null&&Vr(os,t),Ps!==null&&Vr(Ps,t);var g=function($){return Vr($,t)};_c.forEach(g),Uf.forEach(g);for(var w=0;w<Os.length;w++){var k=Os[w];k.blockedOn===t&&(k.blockedOn=null)}for(;Os.length>0;){var P=Os[0];if(P.blockedOn!==null)break;T_(P),P.blockedOn===null&&Os.shift()}}var bo=x.ReactCurrentBatchConfig,Bs=!0;function Fs(t){Bs=!!t}function ss(){return Bs}function qa(t,a,h){var g=Am(a),w;switch(g){case jo:w=C_;break;case rs:w=Ha;break;case pl:default:w=Cm;break}return w.bind(null,a,h,t)}function C_(t,a,h,g){var w=Gi(),k=bo.transition;bo.transition=null;try{Aa(jo),Cm(t,a,h,g)}finally{Aa(w),bo.transition=k}}function Ha(t,a,h,g){var w=Gi(),k=bo.transition;bo.transition=null;try{Aa(rs),Cm(t,a,h,g)}finally{Aa(w),bo.transition=k}}function Cm(t,a,h,g){Bs&&Vf(t,a,h,g)}function Vf(t,a,h,g){var w=Mm(t,a,h,g);if(w===null){Hm(t,a,g,$f,h),py(t,g);return}if(S_(w,t,a,h,g)){g.stopPropagation();return}if(py(t,g),a&Cs&&E_(t)){for(;w!==null;){var k=Kl(w);k!==null&&Em(k);var P=Mm(t,a,h,g);if(P===null&&Hm(t,a,g,$f,h),P===w)break;w=P}w!==null&&g.stopPropagation();return}Hm(t,a,g,null,h)}var $f=null;function Mm(t,a,h,g){$f=null;var w=zl(g),k=Oc(w);if(k!==null){var P=cl(k);if(P===null)k=null;else{var $=P.tag;if($===St){var Y=kf(P);if(Y!==null)return Y;k=null}else if($===H){var le=P.stateNode;if(xo(le))return vu(P);k=null}else P!==k&&(k=null)}}return $f=k,null}function Am(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return jo;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return rs;case"message":{var a=oe();switch(a){case ue:return jo;case se:return rs;case ce:case W:return pl;case ae:return Of;default:return pl}}default:return pl}}function ob(t,a,h){return t.addEventListener(a,h,!1),h}function gy(t,a,h){return t.addEventListener(a,h,!0),h}function M_(t,a,h,g){return t.addEventListener(a,h,{capture:!0,passive:g}),h}function sb(t,a,h,g){return t.addEventListener(a,h,{passive:g}),h}var ls=null,Eu=null,wc=null;function km(t){return ls=t,Eu=A_(),!0}function yy(){ls=null,Eu=null,wc=null}function vy(){if(wc)return wc;var t,a=Eu,h=a.length,g,w=A_(),k=w.length;for(t=0;t<h&&a[t]===w[t];t++);var P=h-t;for(g=1;g<=P&&a[h-g]===w[k-g];g++);var $=g>1?1-g:void 0;return wc=w.slice(t,$),wc}function A_(){return"value"in ls?ls.value:ls.textContent}function ep(t){var a,h=t.keyCode;return"charCode"in t?(a=t.charCode,a===0&&h===13&&(a=13)):a=h,a===10&&(a=13),a>=32||a===13?a:0}function Dm(){return!0}function Rm(){return!1}function us(t){function a(h,g,w,k,P){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=k,this.target=P,this.currentTarget=null;for(var $ in t)if(t.hasOwnProperty($)){var Y=t[$];Y?this[$]=Y(k):this[$]=k[$]}var le=k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1;return le?this.isDefaultPrevented=Dm:this.isDefaultPrevented=Rm,this.isPropagationStopped=Rm,this}return nr(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Dm)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Dm)},persist:function(){},isPersistent:Dm}),a}var Ec={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Im=us(Ec),Gf=nr({},Ec,{view:0,detail:0}),Ih=us(Gf),Lm,_y,ql;function zm(t){t!==ql&&(ql&&t.type==="mousemove"?(Lm=t.screenX-ql.screenX,_y=t.screenY-ql.screenY):(Lm=0,_y=0),ql=t)}var tp=nr({},Gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ty,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(zm(t),Lm)},movementY:function(t){return"movementY"in t?t.movementY:_y}}),xy=us(tp),lb=nr({},tp,{dataTransfer:0}),ub=us(lb),k_=nr({},Gf,{relatedTarget:0}),by=us(k_),D_=nr({},Ec,{animationName:0,elapsedTime:0,pseudoElement:0}),cb=us(D_),hb=nr({},Ec,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),R_=us(hb),I_=nr({},Ec,{data:0}),wy=us(I_),Ey=wy,Su={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function fb(t){if(t.key){var a=Su[t.key]||t.key;if(a!=="Unidentified")return a}if(t.type==="keypress"){var h=ep(t);return h===13?"Enter":String.fromCharCode(h)}return t.type==="keydown"||t.type==="keyup"?Vo[t.keyCode]||"Unidentified":""}var Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function db(t){var a=this,h=a.nativeEvent;if(h.getModifierState)return h.getModifierState(t);var g=Sy[t];return g?!!h[g]:!1}function Ty(t){return db}var pb=nr({},Gf,{key:fb,code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ty,charCode:function(t){return t.type==="keypress"?ep(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ep(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cy=us(pb),Pm=nr({},tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),My=us(Pm),Lh=nr({},Gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ty}),np=us(Lh),mb=nr({},Ec,{propertyName:0,elapsedTime:0,pseudoElement:0}),gb=us(mb),yb=nr({},tp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vb=us(yb),_b=[9,13,27,32],L_=229,Ay=Yr&&"CompositionEvent"in window,zh=null;Yr&&"documentMode"in document&&(zh=document.documentMode);var xb=Yr&&"TextEvent"in window&&!zh,Ph=Yr&&(!Ay||zh&&zh>8&&zh<=11),z_=32,na=String.fromCharCode(z_);function Om(){xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd",["compositionend","focusout","keydown","keypress","keyup","mousedown"]),xi("onCompositionStart",["compositionstart","focusout","keydown","keypress","keyup","mousedown"]),xi("onCompositionUpdate",["compositionupdate","focusout","keydown","keypress","keyup","mousedown"])}var ky=!1;function Bm(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function Fm(t){switch(t){case"compositionstart":return"onCompositionStart";case"compositionend":return"onCompositionEnd";case"compositionupdate":return"onCompositionUpdate"}}function rp(t,a){return t==="keydown"&&a.keyCode===L_}function Dy(t,a){switch(t){case"keyup":return _b.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==L_;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ry(t){var a=t.detail;return typeof a=="object"&&"data"in a?a.data:null}function qf(t){return t.locale==="ko"}var Sc=!1;function Iy(t,a,h,g,w){var k,P;if(Ay?k=Fm(a):Sc?Dy(a,g)&&(k="onCompositionEnd"):rp(a,g)&&(k="onCompositionStart"),!k)return null;Ph&&!qf(g)&&(!Sc&&k==="onCompositionStart"?Sc=km(w):k==="onCompositionEnd"&&Sc&&(P=vy()));var $=Yf(h,k);if($.length>0){var Y=new wy(k,a,null,g,w);if(t.push({event:Y,listeners:$}),P)Y.data=P;else{var le=Ry(g);le!==null&&(Y.data=le)}}}function Ly(t,a){switch(t){case"compositionend":return Ry(a);case"keypress":var h=a.which;return h!==z_?null:(ky=!0,na);case"textInput":var g=a.data;return g===na&&ky?null:g;default:return null}}function bb(t,a){if(Sc){if(t==="compositionend"||!Ay&&Dy(t,a)){var h=vy();return yy(),Sc=!1,h}return null}switch(t){case"paste":return null;case"keypress":if(!Bm(a)){if(a.char&&a.char.length>1)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ph&&!qf(a)?null:a.data;default:return null}}function P_(t,a,h,g,w){var k;if(xb?k=Ly(a,g):k=bb(a,g),!k)return null;var P=Yf(h,"onBeforeInput");if(P.length>0){var $=new Ey("onBeforeInput","beforeinput",null,g,w);t.push({event:$,listeners:P}),$.data=k}}function ip(t,a,h,g,w,k,P){Iy(t,a,h,g,w),P_(t,a,h,g,w)}var wb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nm(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!wb[t.type]:a==="textarea"}/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function Eb(t){if(!Yr)return!1;var a="on"+t,h=a in document;if(!h){var g=document.createElement("div");g.setAttribute(a,"return;"),h=typeof g[a]=="function"}return h}function zy(){xi("onChange",["change","click","focusin","focusout","input","keydown","keyup","selectionchange"])}function Um(t,a,h,g){vh(g);var w=Yf(a,"onChange");if(w.length>0){var k=new Im("onChange","change",null,h,g);t.push({event:k,listeners:w})}}var Tc=null,ap=null;function Sb(t){var a=t.nodeName&&t.nodeName.toLowerCase();return a==="select"||a==="input"&&t.type==="file"}function Tb(t){var a=[];Um(a,ap,t,zl(t)),nc(Cb,a)}function Cb(t){hp(t,0)}function jm(t){var a=sd(t);if(Ml(a))return t}function Mb(t,a){if(t==="change")return a}var op=!1;Yr&&(op=Eb("input")&&(!document.documentMode||document.documentMode>9));function Ab(t,a){Tc=t,ap=a,Tc.attachEvent("onpropertychange",Oh)}function Py(){Tc&&(Tc.detachEvent("onpropertychange",Oh),Tc=null,ap=null)}function Oh(t){t.propertyName==="value"&&jm(ap)&&Tb(t)}function kb(t,a,h){t==="focusin"?(Py(),Ab(a,h)):t==="focusout"&&Py()}function Db(t,a){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jm(ap)}function Rb(t){var a=t.nodeName;return a&&a.toLowerCase()==="input"&&(t.type==="checkbox"||t.type==="radio")}function O_(t,a){if(t==="click")return jm(a)}function B_(t,a){if(t==="input"||t==="change")return jm(a)}function Ib(t){var a=t._wrapperState;!a||!a.controlled||t.type!=="number"||$n(t,"number",t.value)}function Lb(t,a,h,g,w,k,P){var $=h?sd(h):window,Y,le;if(Sb($)?Y=Mb:Nm($)?op?Y=B_:(Y=Db,le=kb):Rb($)&&(Y=O_),Y){var me=Y(a,h);if(me){Um(t,me,g,w);return}}le&&le(a,$,h),a==="focusout"&&Ib($)}function zb(){Dn("onMouseEnter",["mouseout","mouseover"]),Dn("onMouseLeave",["mouseout","mouseover"]),Dn("onPointerEnter",["pointerout","pointerover"]),Dn("onPointerLeave",["pointerout","pointerover"])}function Oy(t,a,h,g,w,k,P){var $=a==="mouseover"||a==="pointerover",Y=a==="mouseout"||a==="pointerout";if($&&!xf(g)){var le=g.relatedTarget||g.fromElement;if(le&&(Oc(le)||od(le)))return}if(!(!Y&&!$)){var me;if(w.window===w)me=w;else{var Ue=w.ownerDocument;Ue?me=Ue.defaultView||Ue.parentWindow:me=window}var Fe,lt;if(Y){var pt=g.relatedTarget||g.toElement;if(Fe=h,lt=pt?Oc(pt):null,lt!==null){var Ct=cl(lt);(lt!==Ct||lt.tag!==J&&lt.tag!==Pe)&&(lt=null)}}else Fe=null,lt=h;if(Fe!==lt){var fn=xy,Kn="onMouseLeave",Nn="onMouseEnter",Wr="mouse";(a==="pointerout"||a==="pointerover")&&(fn=My,Kn="onPointerLeave",Nn="onPointerEnter",Wr="pointer");var Br=Fe==null?me:sd(Fe),rt=lt==null?me:sd(lt),Mt=new fn(Kn,Wr+"leave",Fe,g,w);Mt.target=Br,Mt.relatedTarget=rt;var it=null,Wt=Oc(w);if(Wt===h){var bn=new fn(Nn,Wr+"enter",lt,g,w);bn.target=rt,bn.relatedTarget=Br,it=bn}Kf(t,Mt,it,Fe,lt)}}}function Vm(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var co=typeof Object.is=="function"?Object.is:Vm;function sp(t,a){if(co(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var h=Object.keys(t),g=Object.keys(a);if(h.length!==g.length)return!1;for(var w=0;w<h.length;w++){var k=h[w];if(!Zr.call(a,k)||!co(t[k],a[k]))return!1}return!0}function F_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lp(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function Hf(t,a){for(var h=F_(t),g=0,w=0;h;){if(h.nodeType===es){if(w=g+h.textContent.length,g<=a&&w>=a)return{node:h,offset:a-g};g=w}h=F_(lp(h))}}function N_(t){var a=t.ownerDocument,h=a&&a.defaultView||window,g=h.getSelection&&h.getSelection();if(!g||g.rangeCount===0)return null;var w=g.anchorNode,k=g.anchorOffset,P=g.focusNode,$=g.focusOffset;try{w.nodeType,P.nodeType}catch{return null}return up(t,w,k,P,$)}function up(t,a,h,g,w){var k=0,P=-1,$=-1,Y=0,le=0,me=t,Ue=null;e:for(;;){for(var Fe=null;me===a&&(h===0||me.nodeType===es)&&(P=k+h),me===g&&(w===0||me.nodeType===es)&&($=k+w),me.nodeType===es&&(k+=me.nodeValue.length),(Fe=me.firstChild)!==null;)Ue=me,me=Fe;for(;;){if(me===t)break e;if(Ue===a&&++Y===h&&(P=k),Ue===g&&++le===w&&($=k),(Fe=me.nextSibling)!==null)break;me=Ue,Ue=me.parentNode}me=Fe}return P===-1||$===-1?null:{start:P,end:$}}function U_(t,a){var h=t.ownerDocument||document,g=h&&h.defaultView||window;if(g.getSelection){var w=g.getSelection(),k=t.textContent.length,P=Math.min(a.start,k),$=a.end===void 0?P:Math.min(a.end,k);if(!w.extend&&P>$){var Y=$;$=P,P=Y}var le=Hf(t,P),me=Hf(t,$);if(le&&me){if(w.rangeCount===1&&w.anchorNode===le.node&&w.anchorOffset===le.offset&&w.focusNode===me.node&&w.focusOffset===me.offset)return;var Ue=h.createRange();Ue.setStart(le.node,le.offset),w.removeAllRanges(),P>$?(w.addRange(Ue),w.extend(me.node,me.offset)):(Ue.setEnd(me.node,me.offset),w.addRange(Ue))}}}function j_(t){return t&&t.nodeType===es}function By(t,a){return!t||!a?!1:t===a?!0:j_(t)?!1:j_(a)?By(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1}function V_(t){return t&&t.ownerDocument&&By(t.ownerDocument.documentElement,t)}function $_(t){try{return typeof t.contentWindow.location.href=="string"}catch{return!1}}function Fy(){for(var t=window,a=Va();a instanceof t.HTMLIFrameElement;){if($_(a))t=a.contentWindow;else return a;a=Va(t.document)}return a}function $m(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}function G_(){var t=Fy();return{focusedElem:t,selectionRange:$m(t)?Ob(t):null}}function Pb(t){var a=Fy(),h=t.focusedElem,g=t.selectionRange;if(a!==h&&V_(h)){g!==null&&$m(h)&&q_(h,g);for(var w=[],k=h;k=k.parentNode;)k.nodeType===ha&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});typeof h.focus=="function"&&h.focus();for(var P=0;P<w.length;P++){var $=w[P];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}}function Ob(t){var a;return"selectionStart"in t?a={start:t.selectionStart,end:t.selectionEnd}:a=N_(t),a||{start:0,end:0}}function q_(t,a){var h=a.start,g=a.end;g===void 0&&(g=h),"selectionStart"in t?(t.selectionStart=h,t.selectionEnd=Math.min(g,t.value.length)):U_(t,a)}var Gm=Yr&&"documentMode"in document&&document.documentMode<=11;function H_(){xi("onSelect",["focusout","contextmenu","dragend","focusin","keydown","keyup","mousedown","mouseup","selectionchange"])}var _a=null,Bh=null,Hl=null,Fh=!1;function W_(t){if("selectionStart"in t&&$m(t))return{start:t.selectionStart,end:t.selectionEnd};var a=t.ownerDocument&&t.ownerDocument.defaultView||window,h=a.getSelection();return{anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}}function Z_(t){return t.window===t?t.document:t.nodeType===nl?t:t.ownerDocument}function X_(t,a,h){var g=Z_(h);if(!(Fh||_a==null||_a!==Va(g))){var w=W_(_a);if(!Hl||!sp(Hl,w)){Hl=w;var k=Yf(Bh,"onSelect");if(k.length>0){var P=new Im("onSelect","select",null,a,h);t.push({event:P,listeners:k}),P.target=_a}}}}function Bb(t,a,h,g,w,k,P){var $=h?sd(h):window;switch(a){case"focusin":(Nm($)||$.contentEditable==="true")&&(_a=$,Bh=h,Hl=null);break;case"focusout":_a=null,Bh=null,Hl=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,X_(t,g,w);break;case"selectionchange":if(Gm)break;case"keydown":case"keyup":X_(t,g,w)}}function qm(t,a){var h={};return h[t.toLowerCase()]=a.toLowerCase(),h["Webkit"+t]="webkit"+a,h["Moz"+t]="moz"+a,h}var Wf={animationend:qm("Animation","AnimationEnd"),animationiteration:qm("Animation","AnimationIteration"),animationstart:qm("Animation","AnimationStart"),transitionend:qm("Transition","TransitionEnd")},Ny={},Y_={};Yr&&(Y_=document.createElement("div").style,"AnimationEvent"in window||(delete Wf.animationend.animation,delete Wf.animationiteration.animation,delete Wf.animationstart.animation),"TransitionEvent"in window||delete Wf.transitionend.transition);function Nh(t){if(Ny[t])return Ny[t];if(!Wf[t])return t;var a=Wf[t];for(var h in a)if(a.hasOwnProperty(h)&&h in Y_)return Ny[t]=a[h];return t}var K_=Nh("animationend"),Uy=Nh("animationiteration"),jy=Nh("animationstart"),Vy=Nh("transitionend"),J_=new Map,Q_=["abort","auxClick","cancel","canPlay","canPlayThrough","click","close","contextMenu","copy","cut","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","gotPointerCapture","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","lostPointerCapture","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","pointerCancel","pointerDown","pointerMove","pointerOut","pointerOver","pointerUp","progress","rateChange","reset","resize","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchStart","volumeChange","scroll","toggle","touchMove","waiting","wheel"];function Cc(t,a){J_.set(t,a),xi(a,[t])}function Fb(){for(var t=0;t<Q_.length;t++){var a=Q_[t],h=a.toLowerCase(),g=a[0].toUpperCase()+a.slice(1);Cc(h,"on"+g)}Cc(K_,"onAnimationEnd"),Cc(Uy,"onAnimationIteration"),Cc(jy,"onAnimationStart"),Cc("dblclick","onDoubleClick"),Cc("focusin","onFocus"),Cc("focusout","onBlur"),Cc(Vy,"onTransitionEnd")}function Nb(t,a,h,g,w,k,P){var $=J_.get(a);if($!==void 0){var Y=Im,le=a;switch(a){case"keypress":if(ep(g)===0)return;case"keydown":case"keyup":Y=Cy;break;case"focusin":le="focus",Y=by;break;case"focusout":le="blur",Y=by;break;case"beforeblur":case"afterblur":Y=by;break;case"click":if(g.button===2)return;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=xy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=ub;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=np;break;case K_:case Uy:case jy:Y=cb;break;case Vy:Y=gb;break;case"scroll":Y=Ih;break;case"wheel":Y=vb;break;case"copy":case"cut":case"paste":Y=R_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=My;break}var me=(k&Cs)!==0;{var Ue=!me&&a==="scroll",Fe=yi(h,$,g.type,me,Ue);if(Fe.length>0){var lt=new Y($,le,null,g,w);t.push({event:lt,listeners:Fe})}}}}Fb(),zb(),zy(),H_(),Om();function ex(t,a,h,g,w,k,P){Nb(t,a,h,g,w,k);var $=(k&lm)===0;$&&(Oy(t,a,h,g,w),Lb(t,a,h,g,w),Bb(t,a,h,g,w),ip(t,a,h,g,w))}var cp=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","resize","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],xa=new Set(["cancel","close","invalid","load","scroll","toggle"].concat(cp));function Ns(t,a,h){var g=t.type||"unknown-event";t.currentTarget=h,Hd(g,a,void 0,t),t.currentTarget=null}function $y(t,a,h){var g;if(h)for(var w=a.length-1;w>=0;w--){var k=a[w],P=k.instance,$=k.currentTarget,Y=k.listener;if(P!==g&&t.isPropagationStopped())return;Ns(t,Y,$),g=P}else for(var le=0;le<a.length;le++){var me=a[le],Ue=me.instance,Fe=me.currentTarget,lt=me.listener;if(Ue!==g&&t.isPropagationStopped())return;Ns(t,lt,Fe),g=Ue}}function hp(t,a){for(var h=(a&Cs)!==0,g=0;g<t.length;g++){var w=t[g],k=w.event,P=w.listeners;$y(k,P,h)}hm()}function Zf(t,a,h,g,w){var k=zl(h),P=[];ex(P,t,g,h,k,a),hp(P,a)}function Ki(t,a){xa.has(t)||C('Did not expect a listenToNonDelegatedEvent() call for "%s". This is a bug in React. Please file an issue.',t);var h=!1,g=Ex(a),w=rx(t);g.has(w)||(tx(a,t,Qu,h),g.add(w))}function Gy(t,a,h){xa.has(t)&&!a&&C('Did not expect a listenToNativeEvent() call for "%s" in the bubble phase. This is a bug in React. Please file an issue.',t);var g=0;a&&(g|=Cs),tx(h,t,g,a)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function fp(t){if(!t[Mc]){t[Mc]=!0,hr.forEach(function(h){h!=="selectionchange"&&(xa.has(h)||Gy(h,!1,t),Gy(h,!0,t))});var a=t.nodeType===nl?t:t.ownerDocument;a!==null&&(a[Mc]||(a[Mc]=!0,Gy("selectionchange",!1,a)))}}function tx(t,a,h,g,w){var k=qa(t,a,h),P=void 0;ic&&(a==="touchstart"||a==="touchmove"||a==="wheel")&&(P=!0),t=t,g?P!==void 0?M_(t,a,k,P):gy(t,a,k):P!==void 0?sb(t,a,k,P):ob(t,a,k)}function qy(t,a){return t===a||t.nodeType===fa&&t.parentNode===a}function Hm(t,a,h,g,w){var k=g;if(!(a&$d)&&!(a&Qu)){var P=w;if(g!==null){var $=g;e:for(;;){if($===null)return;var Y=$.tag;if(Y===H||Y===X){var le=$.stateNode.containerInfo;if(qy(le,P))break;if(Y===X)for(var me=$.return;me!==null;){var Ue=me.tag;if(Ue===H||Ue===X){var Fe=me.stateNode.containerInfo;if(qy(Fe,P))return}me=me.return}for(;le!==null;){var lt=Oc(le);if(lt===null)return;var pt=lt.tag;if(pt===J||pt===Pe){$=k=lt;continue e}le=le.parentNode}}$=$.return}}}nc(function(){return Zf(t,a,h,k)})}function Xf(t,a,h){return{instance:t,listener:a,currentTarget:h}}function yi(t,a,h,g,w,k){for(var P=a!==null?a+"Capture":null,$=g?P:a,Y=[],le=t,me=null;le!==null;){var Ue=le,Fe=Ue.stateNode,lt=Ue.tag;if(lt===J&&Fe!==null&&(me=Fe,$!==null)){var pt=rc(le,$);pt!=null&&Y.push(Xf(le,pt,me))}if(w)break;le=le.return}return Y}function Yf(t,a){for(var h=a+"Capture",g=[],w=t;w!==null;){var k=w,P=k.stateNode,$=k.tag;if($===J&&P!==null){var Y=P,le=rc(w,h);le!=null&&g.unshift(Xf(w,le,Y));var me=rc(w,a);me!=null&&g.push(Xf(w,me,Y))}w=w.return}return g}function Uh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==J);return t||null}function nx(t,a){for(var h=t,g=a,w=0,k=h;k;k=Uh(k))w++;for(var P=0,$=g;$;$=Uh($))P++;for(;w-P>0;)h=Uh(h),w--;for(;P-w>0;)g=Uh(g),P--;for(var Y=w;Y--;){if(h===g||g!==null&&h===g.alternate)return h;h=Uh(h),g=Uh(g)}return null}function Wl(t,a,h,g,w){for(var k=a._reactName,P=[],$=h;$!==null&&$!==g;){var Y=$,le=Y.alternate,me=Y.stateNode,Ue=Y.tag;if(le!==null&&le===g)break;if(Ue===J&&me!==null){var Fe=me;if(w){var lt=rc($,k);lt!=null&&P.unshift(Xf($,lt,Fe))}else if(!w){var pt=rc($,k);pt!=null&&P.push(Xf($,pt,Fe))}}$=$.return}P.length!==0&&t.push({event:a,listeners:P})}function Kf(t,a,h,g,w){var k=g&&w?nx(g,w):null;g!==null&&Wl(t,a,g,k,!1),w!==null&&h!==null&&Wl(t,h,w,k,!0)}function rx(t,a){return t+"__bubble"}var $o=!1,dp="dangerouslySetInnerHTML",Wm="suppressContentEditableWarning",Ac="suppressHydrationWarning",ix="autoFocus",jh="children",Vh="style",Zm="__html",Hy,$h,Zl,Wy,Gh,Xm,ax;Hy={dialog:!0,webview:!0},$h=function(t,a){rl(t,a),zo(t,a),yh(t,a,{registrationNameDependencies:ai,possibleRegistrationNames:Or})},Xm=Yr&&!document.documentMode,Zl=function(t,a,h){if(!$o){var g=pp(h),w=pp(a);w!==g&&($o=!0,C("Prop `%s` did not match. Server: %s Client: %s",t,JSON.stringify(w),JSON.stringify(g)))}},Wy=function(t){if(!$o){$o=!0;var a=[];t.forEach(function(h){a.push(h)}),C("Extra attributes from the server: %s",a)}},Gh=function(t,a){a===!1?C("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",t,t,t):C("Expected `%s` listener to be a function, instead got a value of `%s` type.",t,typeof a)},ax=function(t,a){var h=t.namespaceURI===Lo?t.ownerDocument.createElement(t.tagName):t.ownerDocument.createElementNS(t.namespaceURI,t.tagName);return h.innerHTML=a,h.innerHTML};var Ub=/\r\n?/g,jb=/\u0000|\uFFFD/g;function pp(t){Wi(t);var a=typeof t=="string"?t:""+t;return a.replace(Ub,`
`).replace(jb,"")}function Jf(t,a,h,g){var w=pp(a),k=pp(t);if(k!==w&&(g&&($o||($o=!0,C('Text content did not match. Server: "%s" Client: "%s"',k,w))),h&&cn))throw new Error("Text content does not match server-rendered HTML.")}function ho(t){return t.nodeType===nl?t:t.ownerDocument}function Zy(){}function mp(t){t.onclick=Zy}function cs(t,a,h,g,w){for(var k in g)if(g.hasOwnProperty(k)){var P=g[k];if(k===Vh)P&&Object.freeze(P),Ud(a,P);else if(k===dp){var $=P?P[Zm]:void 0;$!=null&&Id(a,$)}else if(k===jh)if(typeof P=="string"){var Y=t!=="textarea"||P!=="";Y&&Hu(a,P)}else typeof P=="number"&&Hu(a,""+P);else k===Wm||k===Ac||k===ix||(ai.hasOwnProperty(k)?P!=null&&(typeof P!="function"&&Gh(k,P),k==="onScroll"&&Ki("scroll",a)):P!=null&&kt(a,k,P,w))}}function ox(t,a,h,g){for(var w=0;w<a.length;w+=2){var k=a[w],P=a[w+1];k===Vh?Ud(t,P):k===dp?Id(t,P):k===jh?Hu(t,P):kt(t,k,P,g)}}function gp(t,a,h,g){var w,k=ho(h),P,$=g;if($===Lo&&($=Sr(t)),$===Lo){if(w=hu(t,a),!w&&t!==t.toLowerCase()&&C("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",t),t==="script"){var Y=k.createElement("div");Y.innerHTML="<script><\/script>";var le=Y.firstChild;P=Y.removeChild(le)}else if(typeof a.is=="string")P=k.createElement(t,{is:a.is});else if(P=k.createElement(t),t==="select"){var me=P;a.multiple?me.multiple=!0:a.size&&(me.size=a.size)}}else P=k.createElementNS($,t);return $===Lo&&!w&&Object.prototype.toString.call(P)==="[object HTMLUnknownElement]"&&!Zr.call(Hy,t)&&(Hy[t]=!0,C("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",t)),P}function Qf(t,a){return ho(a).createTextNode(t)}function Xy(t,a,h,g){var w=hu(a,h);$h(a,h);var k;switch(a){case"dialog":Ki("cancel",t),Ki("close",t),k=h;break;case"iframe":case"object":case"embed":Ki("load",t),k=h;break;case"video":case"audio":for(var P=0;P<cp.length;P++)Ki(cp[P],t);k=h;break;case"source":Ki("error",t),k=h;break;case"img":case"image":case"link":Ki("error",t),Ki("load",t),k=h;break;case"details":Ki("toggle",t),k=h;break;case"input":Ie(t,h),k=Q(t,h),Ki("invalid",t);break;case"option":mi(t,h),k=h;break;case"select":Ss(t,h),k=lu(t,h),Ki("invalid",t);break;case"textarea":Dd(t,h),k=$u(t,h),Ki("invalid",t);break;default:k=h}switch(Vd(a,k),cs(a,t,g,k,w),a){case"input":Qo(t),Yt(t,h,!1);break;case"textarea":Qo(t),lf(t);break;case"option":Ai(t,h);break;case"select":ju(t,h);break;default:typeof k.onClick=="function"&&mp(t);break}}function Ym(t,a,h,g,w){$h(a,g);var k=null,P,$;switch(a){case"input":P=Q(t,h),$=Q(t,g),k=[];break;case"select":P=lu(t,h),$=lu(t,g),k=[];break;case"textarea":P=$u(t,h),$=$u(t,g),k=[];break;default:P=h,$=g,typeof P.onClick!="function"&&typeof $.onClick=="function"&&mp(t);break}Vd(a,$);var Y,le,me=null;for(Y in P)if(!($.hasOwnProperty(Y)||!P.hasOwnProperty(Y)||P[Y]==null))if(Y===Vh){var Ue=P[Y];for(le in Ue)Ue.hasOwnProperty(le)&&(me||(me={}),me[le]="")}else Y===dp||Y===jh||Y===Wm||Y===Ac||Y===ix||(ai.hasOwnProperty(Y)?k||(k=[]):(k=k||[]).push(Y,null));for(Y in $){var Fe=$[Y],lt=P!=null?P[Y]:void 0;if(!(!$.hasOwnProperty(Y)||Fe===lt||Fe==null&&lt==null))if(Y===Vh)if(Fe&&Object.freeze(Fe),lt){for(le in lt)lt.hasOwnProperty(le)&&(!Fe||!Fe.hasOwnProperty(le))&&(me||(me={}),me[le]="");for(le in Fe)Fe.hasOwnProperty(le)&&lt[le]!==Fe[le]&&(me||(me={}),me[le]=Fe[le])}else me||(k||(k=[]),k.push(Y,me)),me=Fe;else if(Y===dp){var pt=Fe?Fe[Zm]:void 0,Ct=lt?lt[Zm]:void 0;pt!=null&&Ct!==pt&&(k=k||[]).push(Y,pt)}else Y===jh?(typeof Fe=="string"||typeof Fe=="number")&&(k=k||[]).push(Y,""+Fe):Y===Wm||Y===Ac||(ai.hasOwnProperty(Y)?(Fe!=null&&(typeof Fe!="function"&&Gh(Y,Fe),Y==="onScroll"&&Ki("scroll",t)),!k&&lt!==Fe&&(k=[])):(k=k||[]).push(Y,Fe))}return me&&(mf(me,$[Vh]),(k=k||[]).push(Vh,me)),k}function Vb(t,a,h,g,w){h==="input"&&w.type==="radio"&&w.name!=null&&st(t,w);var k=hu(h,g),P=hu(h,w);switch(ox(t,a,k,P),h){case"input":gt(t,w);break;case"textarea":Gu(t,w);break;case"select":Vu(t,w);break}}function sx(t){{var a=t.toLowerCase();return gf.hasOwnProperty(a)&&gf[a]||null}}function lx(t,a,h,g,w,k,P){var $,Y;switch($=hu(a,h),$h(a,h),a){case"dialog":Ki("cancel",t),Ki("close",t);break;case"iframe":case"object":case"embed":Ki("load",t);break;case"video":case"audio":for(var le=0;le<cp.length;le++)Ki(cp[le],t);break;case"source":Ki("error",t);break;case"img":case"image":case"link":Ki("error",t),Ki("load",t);break;case"details":Ki("toggle",t);break;case"input":Ie(t,h),Ki("invalid",t);break;case"option":mi(t,h);break;case"select":Ss(t,h),Ki("invalid",t);break;case"textarea":Dd(t,h),Ki("invalid",t);break}Vd(a,h);{Y=new Set;for(var me=t.attributes,Ue=0;Ue<me.length;Ue++){var Fe=me[Ue].name.toLowerCase();switch(Fe){case"value":break;case"checked":break;case"selected":break;default:Y.add(me[Ue].name)}}}var lt=null;for(var pt in h)if(h.hasOwnProperty(pt)){var Ct=h[pt];if(pt===jh)typeof Ct=="string"?t.textContent!==Ct&&(h[Ac]!==!0&&Jf(t.textContent,Ct,k,P),lt=[jh,Ct]):typeof Ct=="number"&&t.textContent!==""+Ct&&(h[Ac]!==!0&&Jf(t.textContent,Ct,k,P),lt=[jh,""+Ct]);else if(ai.hasOwnProperty(pt))Ct!=null&&(typeof Ct!="function"&&Gh(pt,Ct),pt==="onScroll"&&Ki("scroll",t));else if(P&&typeof $=="boolean"){var fn=void 0,Kn=$&&Me?null:_e(pt);if(h[Ac]!==!0){if(!(pt===Wm||pt===Ac||pt==="value"||pt==="checked"||pt==="selected")){if(pt===dp){var Nn=t.innerHTML,Wr=Ct?Ct[Zm]:void 0;if(Wr!=null){var Br=ax(t,Wr);Br!==Nn&&Zl(pt,Nn,Br)}}else if(pt===Vh){if(Y.delete(pt),Xm){var rt=Nd(Ct);fn=t.getAttribute("style"),rt!==fn&&Zl(pt,fn,rt)}}else if($&&!Me)Y.delete(pt.toLowerCase()),fn=Gt(t,pt,Ct),Ct!==fn&&Zl(pt,fn,Ct);else if(!Rr(pt,Kn,$)&&!Fr(pt,Ct,Kn,$)){var Mt=!1;if(Kn!==null)Y.delete(Kn.attributeName),fn=zt(t,pt,Ct,Kn);else{var it=g;if(it===Lo&&(it=Sr(a)),it===Lo)Y.delete(pt.toLowerCase());else{var Wt=sx(pt);Wt!==null&&Wt!==pt&&(Mt=!0,Y.delete(Wt)),Y.delete(pt)}fn=Gt(t,pt,Ct)}var bn=Me;!bn&&Ct!==fn&&!Mt&&Zl(pt,fn,Ct)}}}}}switch(P&&Y.size>0&&h[Ac]!==!0&&Wy(Y),a){case"input":Qo(t),Yt(t,h,!0);break;case"textarea":Qo(t),lf(t);break;case"select":case"option":break;default:typeof h.onClick=="function"&&mp(t);break}return lt}function $b(t,a,h){var g=t.nodeValue!==a;return g}function Km(t,a){{if($o)return;$o=!0,C("Did not expect server HTML to contain a <%s> in <%s>.",a.nodeName.toLowerCase(),t.nodeName.toLowerCase())}}function Jm(t,a){{if($o)return;$o=!0,C('Did not expect server HTML to contain the text node "%s" in <%s>.',a.nodeValue,t.nodeName.toLowerCase())}}function yp(t,a,h){{if($o)return;$o=!0,C("Expected server HTML to contain a matching <%s> in <%s>.",a,t.nodeName.toLowerCase())}}function Qm(t,a){{if(a===""||$o)return;$o=!0,C('Expected server HTML to contain a matching text node for "%s" in <%s>.',a,t.nodeName.toLowerCase())}}function Gb(t,a,h){switch(a){case"input":zn(t,h);return;case"textarea":Rd(t,h);return;case"select":tl(t,h);return}}var ed=function(){},hs=function(){};{var ux=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],Yy=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],cx=Yy.concat(["button"]),hx=["dd","dt","li","option","optgroup","p","rp","rt"],fx={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};hs=function(t,a){var h=nr({},t||fx),g={tag:a};return Yy.indexOf(a)!==-1&&(h.aTagInScope=null,h.buttonTagInScope=null,h.nobrTagInScope=null),cx.indexOf(a)!==-1&&(h.pTagInButtonScope=null),ux.indexOf(a)!==-1&&a!=="address"&&a!=="div"&&a!=="p"&&(h.listItemTagAutoclosing=null,h.dlItemTagAutoclosing=null),h.current=g,a==="form"&&(h.formTag=g),a==="a"&&(h.aTagInScope=g),a==="button"&&(h.buttonTagInScope=g),a==="nobr"&&(h.nobrTagInScope=g),a==="p"&&(h.pTagInButtonScope=g),a==="li"&&(h.listItemTagAutoclosing=g),(a==="dd"||a==="dt")&&(h.dlItemTagAutoclosing=g),h};var qb=function(t,a){switch(a){case"select":return t==="option"||t==="optgroup"||t==="#text";case"optgroup":return t==="option"||t==="#text";case"option":return t==="#text";case"tr":return t==="th"||t==="td"||t==="style"||t==="script"||t==="template";case"tbody":case"thead":case"tfoot":return t==="tr"||t==="style"||t==="script"||t==="template";case"colgroup":return t==="col"||t==="template";case"table":return t==="caption"||t==="colgroup"||t==="tbody"||t==="tfoot"||t==="thead"||t==="style"||t==="script"||t==="template";case"head":return t==="base"||t==="basefont"||t==="bgsound"||t==="link"||t==="meta"||t==="title"||t==="noscript"||t==="noframes"||t==="style"||t==="script"||t==="template";case"html":return t==="head"||t==="body"||t==="frameset";case"frameset":return t==="frame";case"#document":return t==="html"}switch(t){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return a!=="h1"&&a!=="h2"&&a!=="h3"&&a!=="h4"&&a!=="h5"&&a!=="h6";case"rp":case"rt":return hx.indexOf(a)===-1;case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return a==null}return!0},dx=function(t,a){switch(t){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return a.pTagInButtonScope;case"form":return a.formTag||a.pTagInButtonScope;case"li":return a.listItemTagAutoclosing;case"dd":case"dt":return a.dlItemTagAutoclosing;case"button":return a.buttonTagInScope;case"a":return a.aTagInScope;case"nobr":return a.nobrTagInScope}return null},Ky={};ed=function(t,a,h){h=h||fx;var g=h.current,w=g&&g.tag;a!=null&&(t!=null&&C("validateDOMNesting: when childText is passed, childTag should be null"),t="#text");var k=qb(t,w)?null:g,P=k?null:dx(t,h),$=k||P;if($){var Y=$.tag,le=!!k+"|"+t+"|"+Y;if(!Ky[le]){Ky[le]=!0;var me=t,Ue="";if(t==="#text"?/\S/.test(a)?me="Text nodes":(me="Whitespace text nodes",Ue=" Make sure you don't have any extra whitespace between tags on each line of your source code."):me="<"+t+">",k){var Fe="";Y==="table"&&t==="tr"&&(Fe+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),C("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",me,Y,Ue,Fe)}else C("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",me,Y)}}}}var kc="suppressHydrationWarning",vp="$",_p="/$",wo="$?",qh="$!",td="style",Dc=null,eg=null;function tg(t){var a,h,g=t.nodeType;switch(g){case nl:case Ld:{a=g===nl?"#document":"#fragment";var w=t.documentElement;h=w?w.namespaceURI:uu(null,"");break}default:{var k=g===fa?t.parentNode:t,P=k.namespaceURI||null;a=k.tagName,h=uu(P,a);break}}{var $=a.toLowerCase(),Y=hs(null,$);return{namespace:h,ancestorInfo:Y}}}function px(t,a,h){{var g=t,w=uu(g.namespace,a),k=hs(g.ancestorInfo,a);return{namespace:w,ancestorInfo:k}}}function Jy(t){return t}function ng(t){Dc=ss(),eg=G_();var a=null;return Fs(!1),a}function Hb(t){Pb(eg),Fs(Dc),Dc=null,eg=null}function Wb(t,a,h,g,w){var k;{var P=g;if(ed(t,null,P.ancestorInfo),typeof a.children=="string"||typeof a.children=="number"){var $=""+a.children,Y=hs(P.ancestorInfo,t);ed(null,$,Y)}k=P.namespace}var le=gp(t,a,h,k);return Us(w,le),hg(le,a),le}function Zb(t,a){t.appendChild(a)}function Xb(t,a,h,g,w){switch(Xy(t,a,h,g),a){case"button":case"input":case"select":case"textarea":return!!h.autoFocus;case"img":return!0;default:return!1}}function Yb(t,a,h,g,w,k){{var P=k;if(typeof g.children!=typeof h.children&&(typeof g.children=="string"||typeof g.children=="number")){var $=""+g.children,Y=hs(P.ancestorInfo,a);ed(null,$,Y)}}return Ym(t,a,h,g)}function Rc(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}function nd(t,a,h,g){{var w=h;ed(null,t,w.ancestorInfo)}var k=Qf(t,a);return Us(g,k),k}function Qy(){var t=window.event;return t===void 0?pl:Am(t.type)}var ev=typeof setTimeout=="function"?setTimeout:void 0,mx=typeof clearTimeout=="function"?clearTimeout:void 0,tv=-1,rg=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(t){return rg.resolve(null).then(t).catch(xp)}:ev;function xp(t){setTimeout(function(){throw t})}function Ic(t,a,h,g){switch(a){case"button":case"input":case"select":case"textarea":h.autoFocus&&t.focus();return;case"img":{h.src&&(t.src=h.src);return}}}function gx(t,a,h,g,w,k){Vb(t,a,h,g,w),hg(t,w)}function nv(t){Hu(t,"")}function ig(t,a,h){t.nodeValue=h}function rv(t,a){t.appendChild(a)}function Jb(t,a){var h;t.nodeType===fa?(h=t.parentNode,h.insertBefore(a,t)):(h=t,h.appendChild(a));var g=t._reactRootContainer;g==null&&h.onclick===null&&mp(h)}function yx(t,a,h){t.insertBefore(a,h)}function Hh(t,a,h){t.nodeType===fa?t.parentNode.insertBefore(a,h):t.insertBefore(a,h)}function Qb(t,a){t.removeChild(a)}function Lc(t,a){t.nodeType===fa?t.parentNode.removeChild(a):t.removeChild(a)}function iv(t,a){var h=a,g=0;do{var w=h.nextSibling;if(t.removeChild(h),w&&w.nodeType===fa){var k=w.data;if(k===_p)if(g===0){t.removeChild(w),Rh(a);return}else g--;else(k===vp||k===wo||k===qh)&&g++}h=w}while(h);Rh(a)}function bp(t,a){t.nodeType===fa?iv(t.parentNode,a):t.nodeType===ha&&iv(t,a),Rh(t)}function wp(t){t=t;var a=t.style;typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"}function Ep(t){t.nodeValue=""}function Sp(t,a){t=t;var h=a[td],g=h!=null&&h.hasOwnProperty("display")?h.display:null;t.style.display=hf("display",g)}function ag(t,a){t.nodeValue=a}function e1(t){t.nodeType===ha?t.textContent="":t.nodeType===nl&&t.documentElement&&t.removeChild(t.documentElement)}function t1(t,a,h){return t.nodeType!==ha||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t}function rd(t,a){return a===""||t.nodeType!==es?null:t}function og(t){return t.nodeType!==fa?null:t}function vx(t){return t.data===wo}function sg(t){return t.data===qh}function _x(t){var a=t.nextSibling&&t.nextSibling.dataset,h,g,w;return a&&(h=a.dgst,g=a.msg,w=a.stck),{message:g,digest:h,stack:w}}function n1(t,a){t._reactRetry=a}function Tp(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===ha||a===es)break;if(a===fa){var h=t.data;if(h===vp||h===qh||h===wo)break;if(h===_p)return null}}return t}function Cp(t){return Tp(t.nextSibling)}function xx(t){return Tp(t.firstChild)}function r1(t){return Tp(t.firstChild)}function bx(t){return Tp(t.nextSibling)}function i1(t,a,h,g,w,k,P){Us(k,t),hg(t,h);var $;{var Y=w;$=Y.namespace}var le=(k.mode&Er)!==xn;return lx(t,a,h,$,g,le,P)}function a1(t,a,h,g){return Us(h,t),h.mode&Er,$b(t,a)}function lg(t,a){Us(a,t)}function ug(t){for(var a=t.nextSibling,h=0;a;){if(a.nodeType===fa){var g=a.data;if(g===_p){if(h===0)return Cp(a);h--}else(g===vp||g===qh||g===wo)&&h++}a=a.nextSibling}return null}function Mp(t){for(var a=t.previousSibling,h=0;a;){if(a.nodeType===fa){var g=a.data;if(g===vp||g===qh||g===wo){if(h===0)return a;h--}else g===_p&&h++}a=a.previousSibling}return null}function o1(t){Rh(t)}function av(t){Rh(t)}function ov(t){return t!=="head"&&t!=="body"}function zc(t,a,h,g){var w=!0;Jf(a.nodeValue,h,g,w)}function s1(t,a,h,g,w,k){if(a[kc]!==!0){var P=!0;Jf(g.nodeValue,w,k,P)}}function sv(t,a){a.nodeType===ha?Km(t,a):a.nodeType===fa||Jm(t,a)}function wx(t,a){{var h=t.parentNode;h!==null&&(a.nodeType===ha?Km(h,a):a.nodeType===fa||Jm(h,a))}}function cg(t,a,h,g,w){(w||a[kc]!==!0)&&(g.nodeType===ha?Km(h,g):g.nodeType===fa||Jm(h,g))}function l1(t,a,h){yp(t,a)}function u1(t,a){Qm(t,a)}function c1(t,a,h){{var g=t.parentNode;g!==null&&yp(g,a)}}function h1(t,a){{var h=t.parentNode;h!==null&&Qm(h,a)}}function lv(t,a,h,g,w,k){(k||a[kc]!==!0)&&yp(h,g)}function f1(t,a,h,g,w){(w||a[kc]!==!0)&&Qm(h,g)}function Ap(t){C("An error occurred during hydration. The server HTML was replaced with client content in <%s>.",t.nodeName.toLowerCase())}function d1(t){fp(t)}var id=Math.random().toString(36).slice(2),Wh="__reactFiber$"+id,uv="__reactProps$"+id,ad="__reactContainer$"+id,Go="__reactEvents$"+id,Xl="__reactListeners$"+id,Pc="__reactHandles$"+id;function Yl(t){delete t[Wh],delete t[uv],delete t[Go],delete t[Xl],delete t[Pc]}function Us(t,a){a[Wh]=t}function Zh(t,a){a[ad]=t}function cv(t){t[ad]=null}function od(t){return!!t[ad]}function Oc(t){var a=t[Wh];if(a)return a;for(var h=t.parentNode;h;){if(a=h[ad]||h[Wh],a){var g=a.alternate;if(a.child!==null||g!==null&&g.child!==null)for(var w=Mp(t);w!==null;){var k=w[Wh];if(k)return k;w=Mp(w)}return a}t=h,h=t.parentNode}return null}function Kl(t){var a=t[Wh]||t[ad];return a&&(a.tag===J||a.tag===Pe||a.tag===St||a.tag===H)?a:null}function sd(t){if(t.tag===J||t.tag===Pe)return t.stateNode;throw new Error("getNodeFromInstance: Invalid argument.")}function kp(t){return t[uv]||null}function hg(t,a){t[uv]=a}function Ex(t){var a=t[Go];return a===void 0&&(a=t[Go]=new Set),a}var hv={},fv=x.ReactDebugCurrentFrame;function Dp(t){if(t){var a=t._owner,h=Io(t.type,t._source,a?a.type:null);fv.setExtraStackFrame(h)}else fv.setExtraStackFrame(null)}function js(t,a,h,g,w){{var k=Function.call.bind(Zr);for(var P in t)if(k(t,P)){var $=void 0;try{if(typeof t[P]!="function"){var Y=Error((g||"React class")+": "+h+" type `"+P+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof t[P]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Y.name="Invariant Violation",Y}$=t[P](a,P,g,h,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(le){$=le}$&&!($ instanceof Error)&&(Dp(w),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",g||"React class",h,P,typeof $),Dp(null)),$ instanceof Error&&!($.message in hv)&&(hv[$.message]=!0,Dp(w),C("Failed %s type: %s",h,$.message),Dp(null))}}}var Jl=[],Rp;Rp=[];var Tu=-1;function Bc(t){return{current:t}}function Ba(t,a){if(Tu<0){C("Unexpected pop.");return}a!==Rp[Tu]&&C("Unexpected Fiber popped."),t.current=Jl[Tu],Jl[Tu]=null,Rp[Tu]=null,Tu--}function fo(t,a,h){Tu++,Jl[Tu]=t.current,Rp[Tu]=h,t.current=a}var Fc;Fc={};var Eo={};Object.freeze(Eo);var ml=Bc(Eo),Fa=Bc(!1),Ip=Eo;function Nc(t,a,h){return h&&gl(a)?Ip:ml.current}function Vs(t,a,h){{var g=t.stateNode;g.__reactInternalMemoizedUnmaskedChildContext=a,g.__reactInternalMemoizedMaskedChildContext=h}}function $s(t,a){{var h=t.type,g=h.contextTypes;if(!g)return Eo;var w=t.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===a)return w.__reactInternalMemoizedMaskedChildContext;var k={};for(var P in g)k[P]=a[P];{var $=lr(t)||"Unknown";js(g,k,"context",$)}return w&&Vs(t,a,k),k}}function Lp(){return Fa.current}function gl(t){{var a=t.childContextTypes;return a!=null}}function Uc(t){Ba(Fa,t),Ba(ml,t)}function ld(t){Ba(Fa,t),Ba(ml,t)}function dv(t,a,h){{if(ml.current!==Eo)throw new Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");fo(ml,a,t),fo(Fa,h,t)}}function pv(t,a,h){{var g=t.stateNode,w=a.childContextTypes;if(typeof g.getChildContext!="function"){{var k=lr(t)||"Unknown";Fc[k]||(Fc[k]=!0,C("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",k,k))}return h}var P=g.getChildContext();for(var $ in P)if(!($ in w))throw new Error((lr(t)||"Unknown")+'.getChildContext(): key "'+$+'" is not defined in childContextTypes.');{var Y=lr(t)||"Unknown";js(w,P,"child context",Y)}return nr({},h,P)}}function fg(t){{var a=t.stateNode,h=a&&a.__reactInternalMemoizedMergedChildContext||Eo;return Ip=ml.current,fo(ml,h,t),fo(Fa,Fa.current,t),!0}}function mv(t,a,h){{var g=t.stateNode;if(!g)throw new Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(h){var w=pv(t,a,Ip);g.__reactInternalMemoizedMergedChildContext=w,Ba(Fa,t),Ba(ml,t),fo(ml,w,t),fo(Fa,h,t)}else Ba(Fa,t),fo(Fa,h,t)}}function Sx(t){{if(!f(t)||t.tag!==N)throw new Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var a=t;do{switch(a.tag){case H:return a.stateNode.context;case N:{var h=a.type;if(gl(h))return a.stateNode.__reactInternalMemoizedMergedChildContext;break}}a=a.return}while(a!==null);throw new Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}}var Cu=0,dg=1,yl=null,pg=!1,mg=!1;function gv(t){yl===null?yl=[t]:yl.push(t)}function yv(t){pg=!0,gv(t)}function gg(){pg&&Mu()}function Mu(){if(!mg&&yl!==null){mg=!0;var t=0,a=Gi();try{var h=!0,g=yl;for(Aa(jo);t<g.length;t++){var w=g[t];do w=w(h);while(w!==null)}yl=null,pg=!1}catch(k){throw yl!==null&&(yl=yl.slice(t+1)),L(ue,Mu),k}finally{Aa(a),mg=!1}}return null}var Ql=[],jc=0,zp=null,n=0,e=[],r=0,o=null,u=1,d="";function m(t){return fe(),(t.flags&yu)!==Zn}function _(t){return fe(),n}function S(){var t=d,a=u,h=a&~j(a);return h.toString(32)+t}function T(t,a){fe(),Ql[jc++]=n,Ql[jc++]=zp,zp=t,n=a}function I(t,a,h){fe(),e[r++]=u,e[r++]=d,e[r++]=o,o=t;var g=u,w=d,k=O(g)-1,P=g&~(1<<k),$=h+1,Y=O(a)+k;if(Y>30){var le=k-k%5,me=(1<<le)-1,Ue=(P&me).toString(32),Fe=P>>le,lt=k-le,pt=O(a)+lt,Ct=$<<lt,fn=Ct|Fe,Kn=Ue+w;u=1<<pt|fn,d=Kn}else{var Nn=$<<k,Wr=Nn|P,Br=w;u=1<<Y|Wr,d=Br}}function z(t){fe();var a=t.return;if(a!==null){var h=1,g=0;T(t,h),I(t,h,g)}}function O(t){return 32-hl(t)}function j(t){return 1<<O(t)-1}function V(t){for(;t===zp;)zp=Ql[--jc],Ql[jc]=null,n=Ql[--jc],Ql[jc]=null;for(;t===o;)o=e[--r],e[r]=null,d=e[--r],e[r]=null,u=e[--r],e[r]=null}function Z(){return fe(),o!==null?{id:u,overflow:d}:null}function ne(t,a){fe(),e[r++]=u,e[r++]=d,e[r++]=o,u=a.id,d=a.overflow,o=t}function fe(){cr()||C("Expected to be hydrating. This is a bug in React. Please file an issue.")}var be=null,he=null,we=!1,Ce=!1,Te=null;function Je(){we&&C("We should not be hydrating here. This is a bug in React. Please file a bug.")}function He(){Ce=!0}function mt(){return Ce}function Bt(t){var a=t.stateNode.containerInfo;return he=r1(a),be=t,we=!0,Te=null,Ce=!1,!0}function nt(t,a,h){return he=bx(a),be=t,we=!0,Te=null,Ce=!1,h!==null&&ne(t,h),!0}function bt(t,a){switch(t.tag){case H:{sv(t.stateNode.containerInfo,a);break}case J:{var h=(t.mode&Er)!==xn;cg(t.type,t.memoizedProps,t.stateNode,a,h);break}case St:{var g=t.memoizedState;g.dehydrated!==null&&wx(g.dehydrated,a);break}}}function wt(t,a){bt(t,a);var h=YI();h.stateNode=a,h.return=t;var g=t.deletions;g===null?(t.deletions=[h],t.flags|=Fl):g.push(h)}function At(t,a){{if(Ce)return;switch(t.tag){case H:{var h=t.stateNode.containerInfo;switch(a.tag){case J:var g=a.type;a.pendingProps,l1(h,g);break;case Pe:var w=a.pendingProps;u1(h,w);break}break}case J:{var k=t.type,P=t.memoizedProps,$=t.stateNode;switch(a.tag){case J:{var Y=a.type,le=a.pendingProps,me=(t.mode&Er)!==xn;lv(k,P,$,Y,le,me);break}case Pe:{var Ue=a.pendingProps,Fe=(t.mode&Er)!==xn;f1(k,P,$,Ue,Fe);break}}break}case St:{var lt=t.memoizedState,pt=lt.dehydrated;if(pt!==null)switch(a.tag){case J:var Ct=a.type;a.pendingProps,c1(pt,Ct);break;case Pe:var fn=a.pendingProps;h1(pt,fn);break}break}default:return}}}function Ut(t,a){a.flags=a.flags&~ol|ta,At(t,a)}function ht(t,a){switch(t.tag){case J:{var h=t.type;t.pendingProps;var g=t1(a,h);return g!==null?(t.stateNode=g,be=t,he=xx(g),!0):!1}case Pe:{var w=t.pendingProps,k=rd(a,w);return k!==null?(t.stateNode=k,be=t,he=null,!0):!1}case St:{var P=og(a);if(P!==null){var $={dehydrated:P,treeContext:Z(),retryLane:$i};t.memoizedState=$;var Y=KI(P);return Y.return=t,t.child=Y,be=t,he=null,!0}return!1}default:return!1}}function Kt(t){return(t.mode&Er)!==xn&&(t.flags&Ur)===Zn}function on(t){throw new Error("Hydration failed because the initial UI does not match what was rendered on the server.")}function Qt(t){if(we){var a=he;if(!a){Kt(t)&&(At(be,t),on()),Ut(be,t),we=!1,be=t;return}var h=a;if(!ht(t,a)){Kt(t)&&(At(be,t),on()),a=Cp(h);var g=be;if(!a||!ht(t,a)){Ut(be,t),we=!1,be=t;return}wt(g,h)}}}function Qn(t,a,h){var g=t.stateNode,w=!Ce,k=i1(g,t.type,t.memoizedProps,a,h,t,w);return t.updateQueue=k,k!==null}function Vt(t){var a=t.stateNode,h=t.memoizedProps,g=a1(a,h,t);if(g){var w=be;if(w!==null)switch(w.tag){case H:{var k=w.stateNode.containerInfo,P=(w.mode&Er)!==xn;zc(k,a,h,P);break}case J:{var $=w.type,Y=w.memoizedProps,le=w.stateNode,me=(w.mode&Er)!==xn;s1($,Y,le,a,h,me);break}}}return g}function Cn(t){var a=t.memoizedState,h=a!==null?a.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");lg(h,t)}function er(t){var a=t.memoizedState,h=a!==null?a.dehydrated:null;if(!h)throw new Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return ug(h)}function kr(t){for(var a=t.return;a!==null&&a.tag!==J&&a.tag!==H&&a.tag!==St;)a=a.return;be=a}function Yn(t){if(t!==be)return!1;if(!we)return kr(t),we=!0,!1;if(t.tag!==H&&(t.tag!==J||ov(t.type)&&!Rc(t.type,t.memoizedProps))){var a=he;if(a)if(Kt(t))vi(t),on();else for(;a;)wt(t,a),a=Cp(a)}return kr(t),t.tag===St?he=er(t):he=be?Cp(t.stateNode):null,!0}function Pn(){return we&&he!==null}function vi(t){for(var a=he;a;)bt(t,a),a=Cp(a)}function Gn(){be=null,he=null,we=!1,Ce=!1}function tr(){Te!==null&&(pC(Te),Te=null)}function cr(){return we}function ri(t){Te===null?Te=[t]:Te.push(t)}var _i=x.ReactCurrentBatchConfig,hi=null;function Ni(){return _i.transition}var Gr={recordUnsafeLifecycleWarnings:function(t,a){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(t,a){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}};{var la=function(t){for(var a=null,h=t;h!==null;)h.mode&Li&&(a=h),h=h.return;return a},Pr=function(t){var a=[];return t.forEach(function(h){a.push(h)}),a.sort().join(", ")},qi=[],Ui=[],wi=[],Tr=[],ji=[],qr=[],ma=new Set;Gr.recordUnsafeLifecycleWarnings=function(t,a){ma.has(t.type)||(typeof a.componentWillMount=="function"&&a.componentWillMount.__suppressDeprecationWarning!==!0&&qi.push(t),t.mode&Li&&typeof a.UNSAFE_componentWillMount=="function"&&Ui.push(t),typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps.__suppressDeprecationWarning!==!0&&wi.push(t),t.mode&Li&&typeof a.UNSAFE_componentWillReceiveProps=="function"&&Tr.push(t),typeof a.componentWillUpdate=="function"&&a.componentWillUpdate.__suppressDeprecationWarning!==!0&&ji.push(t),t.mode&Li&&typeof a.UNSAFE_componentWillUpdate=="function"&&qr.push(t))},Gr.flushPendingUnsafeLifecycleWarnings=function(){var t=new Set;qi.length>0&&(qi.forEach(function(Fe){t.add(lr(Fe)||"Component"),ma.add(Fe.type)}),qi=[]);var a=new Set;Ui.length>0&&(Ui.forEach(function(Fe){a.add(lr(Fe)||"Component"),ma.add(Fe.type)}),Ui=[]);var h=new Set;wi.length>0&&(wi.forEach(function(Fe){h.add(lr(Fe)||"Component"),ma.add(Fe.type)}),wi=[]);var g=new Set;Tr.length>0&&(Tr.forEach(function(Fe){g.add(lr(Fe)||"Component"),ma.add(Fe.type)}),Tr=[]);var w=new Set;ji.length>0&&(ji.forEach(function(Fe){w.add(lr(Fe)||"Component"),ma.add(Fe.type)}),ji=[]);var k=new Set;if(qr.length>0&&(qr.forEach(function(Fe){k.add(lr(Fe)||"Component"),ma.add(Fe.type)}),qr=[]),a.size>0){var P=Pr(a);C(`Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.

Please update the following components: %s`,P)}if(g.size>0){var $=Pr(g);C(`Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state

Please update the following components: %s`,$)}if(k.size>0){var Y=Pr(k);C(`Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.

Please update the following components: %s`,Y)}if(t.size>0){var le=Pr(t);R(`componentWillMount has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move code with side effects to componentDidMount, and set initial state in the constructor.
* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,le)}if(h.size>0){var me=Pr(h);R(`componentWillReceiveProps has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://reactjs.org/link/derived-state
* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,me)}if(w.size>0){var Ue=Pr(w);R(`componentWillUpdate has been renamed, and is not recommended for use. See https://reactjs.org/link/unsafe-component-lifecycles for details.

* Move data fetching code or side effects to componentDidUpdate.
* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 18.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run \`npx react-codemod rename-unsafe-lifecycles\` in your project source folder.

Please update the following components: %s`,Ue)}};var Hi=new Map,ka=new Set;Gr.recordLegacyContextWarning=function(t,a){var h=la(t);if(h===null){C("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.");return}if(!ka.has(t.type)){var g=Hi.get(h);(t.type.contextTypes!=null||t.type.childContextTypes!=null||a!==null&&typeof a.getChildContext=="function")&&(g===void 0&&(g=[],Hi.set(h,g)),g.push(t))}},Gr.flushLegacyContextWarning=function(){Hi.forEach(function(t,a){if(t.length!==0){var h=t[0],g=new Set;t.forEach(function(k){g.add(lr(k)||"Component"),ka.add(k.type)});var w=Pr(g);try{pr(h),C(`Legacy context API has been detected within a strict-mode tree.

The old API will be supported in all 16.x releases, but applications using it should migrate to the new version.

Please update the following components: %s

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)}finally{ei()}}})},Gr.discardPendingWarnings=function(){qi=[],Ui=[],wi=[],Tr=[],ji=[],qr=[],Hi=new Map}}var ga,Wa,ya,fs,Vc,ud=function(t,a){};ga=!1,Wa=!1,ya={},fs={},Vc={},ud=function(t,a){if(!(t===null||typeof t!="object")&&!(!t._store||t._store.validated||t.key!=null)){if(typeof t._store!="object")throw new Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");t._store.validated=!0;var h=lr(a)||"Component";fs[h]||(fs[h]=!0,C('Each child in a list should have a unique "key" prop. See https://reactjs.org/link/warning-keys for more information.'))}};function Pp(t){return t.prototype&&t.prototype.isReactComponent}function cd(t,a,h){var g=h.ref;if(g!==null&&typeof g!="function"&&typeof g!="object"){if((t.mode&Li||Vn)&&!(h._owner&&h._self&&h._owner.stateNode!==h._self)&&!(h._owner&&h._owner.tag!==N)&&!(typeof h.type=="function"&&!Pp(h.type))&&h._owner){var w=lr(t)||"Component";ya[w]||(C('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',w,g),ya[w]=!0)}if(h._owner){var k=h._owner,P;if(k){var $=k;if($.tag!==N)throw new Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref");P=$.stateNode}if(!P)throw new Error("Missing owner for string ref "+g+". This error is likely caused by a bug in React. Please file an issue.");var Y=P;Kr(g,"ref");var le=""+g;if(a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===le)return a.ref;var me=function(Ue){var Fe=Y.refs;Ue===null?delete Fe[le]:Fe[le]=Ue};return me._stringRef=le,me}else{if(typeof g!="string")throw new Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!h._owner)throw new Error("Element ref was specified as a string ("+g+`) but no owner was set. This could happen for one of the following reasons:
1. You may be adding a ref to a function component
2. You may be adding a ref to a component that was not created inside a component's render method
3. You have multiple copies of React loaded
See https://reactjs.org/link/refs-must-have-owner for more information.`)}}return g}function Op(t,a){var h=Object.prototype.toString.call(a);throw new Error("Objects are not valid as a React child (found: "+(h==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":h)+"). If you meant to render a collection of children, use an array instead.")}function Bp(t){{var a=lr(t)||"Component";if(Vc[a])return;Vc[a]=!0,C("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.")}}function vv(t){var a=t._payload,h=t._init;return h(a)}function yg(t){function a(rt,Mt){if(t){var it=rt.deletions;it===null?(rt.deletions=[Mt],rt.flags|=Fl):it.push(Mt)}}function h(rt,Mt){if(!t)return null;for(var it=Mt;it!==null;)a(rt,it),it=it.sibling;return null}function g(rt,Mt){for(var it=new Map,Wt=Mt;Wt!==null;)Wt.key!==null?it.set(Wt.key,Wt):it.set(Wt.index,Wt),Wt=Wt.sibling;return it}function w(rt,Mt){var it=Zp(rt,Mt);return it.index=0,it.sibling=null,it}function k(rt,Mt,it){if(rt.index=it,!t)return rt.flags|=yu,Mt;var Wt=rt.alternate;if(Wt!==null){var bn=Wt.index;return bn<Mt?(rt.flags|=ta,Mt):bn}else return rt.flags|=ta,Mt}function P(rt){return t&&rt.alternate===null&&(rt.flags|=ta),rt}function $(rt,Mt,it,Wt){if(Mt===null||Mt.tag!==Pe){var bn=iE(it,rt.mode,Wt);return bn.return=rt,bn}else{var mn=w(Mt,it);return mn.return=rt,mn}}function Y(rt,Mt,it,Wt){var bn=it.type;if(bn===xe)return me(rt,Mt,it.props.children,Wt,it.key);if(Mt!==null&&(Mt.elementType===bn||DC(Mt,it)||typeof bn=="object"&&bn!==null&&bn.$$typeof===en&&vv(bn)===Mt.type)){var mn=w(Mt,it.props);return mn.ref=cd(rt,Mt,it),mn.return=rt,mn._debugSource=it._source,mn._debugOwner=it._owner,mn}var or=rE(it,rt.mode,Wt);return or.ref=cd(rt,Mt,it),or.return=rt,or}function le(rt,Mt,it,Wt){if(Mt===null||Mt.tag!==X||Mt.stateNode.containerInfo!==it.containerInfo||Mt.stateNode.implementation!==it.implementation){var bn=aE(it,rt.mode,Wt);return bn.return=rt,bn}else{var mn=w(Mt,it.children||[]);return mn.return=rt,mn}}function me(rt,Mt,it,Wt,bn){if(Mt===null||Mt.tag!==Re){var mn=wd(it,rt.mode,Wt,bn);return mn.return=rt,mn}else{var or=w(Mt,it);return or.return=rt,or}}function Ue(rt,Mt,it){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"){var Wt=iE(""+Mt,rt.mode,it);return Wt.return=rt,Wt}if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Ln:{var bn=rE(Mt,rt.mode,it);return bn.ref=cd(rt,null,Mt),bn.return=rt,bn}case jn:{var mn=aE(Mt,rt.mode,it);return mn.return=rt,mn}case en:{var or=Mt._payload,_r=Mt._init;return Ue(rt,_r(or),it)}}if(Sn(Mt)||Qi(Mt)){var Pi=wd(Mt,rt.mode,it,null);return Pi.return=rt,Pi}Op(rt,Mt)}return typeof Mt=="function"&&Bp(rt),null}function Fe(rt,Mt,it,Wt){var bn=Mt!==null?Mt.key:null;if(typeof it=="string"&&it!==""||typeof it=="number")return bn!==null?null:$(rt,Mt,""+it,Wt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case Ln:return it.key===bn?Y(rt,Mt,it,Wt):null;case jn:return it.key===bn?le(rt,Mt,it,Wt):null;case en:{var mn=it._payload,or=it._init;return Fe(rt,Mt,or(mn),Wt)}}if(Sn(it)||Qi(it))return bn!==null?null:me(rt,Mt,it,Wt,null);Op(rt,it)}return typeof it=="function"&&Bp(rt),null}function lt(rt,Mt,it,Wt,bn){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number"){var mn=rt.get(it)||null;return $(Mt,mn,""+Wt,bn)}if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case Ln:{var or=rt.get(Wt.key===null?it:Wt.key)||null;return Y(Mt,or,Wt,bn)}case jn:{var _r=rt.get(Wt.key===null?it:Wt.key)||null;return le(Mt,_r,Wt,bn)}case en:var Pi=Wt._payload,fi=Wt._init;return lt(rt,Mt,it,fi(Pi),bn)}if(Sn(Wt)||Qi(Wt)){var Na=rt.get(it)||null;return me(Mt,Na,Wt,bn,null)}Op(Mt,Wt)}return typeof Wt=="function"&&Bp(Mt),null}function pt(rt,Mt,it){{if(typeof rt!="object"||rt===null)return Mt;switch(rt.$$typeof){case Ln:case jn:ud(rt,it);var Wt=rt.key;if(typeof Wt!="string")break;if(Mt===null){Mt=new Set,Mt.add(Wt);break}if(!Mt.has(Wt)){Mt.add(Wt);break}C("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.",Wt);break;case en:var bn=rt._payload,mn=rt._init;pt(mn(bn),Mt,it);break}}return Mt}function Ct(rt,Mt,it,Wt){for(var bn=null,mn=0;mn<it.length;mn++){var or=it[mn];bn=pt(or,bn,rt)}for(var _r=null,Pi=null,fi=Mt,Na=0,di=0,Da=null;fi!==null&&di<it.length;di++){fi.index>di?(Da=fi,fi=null):Da=fi.sibling;var Ho=Fe(rt,fi,it[di],Wt);if(Ho===null){fi===null&&(fi=Da);break}t&&fi&&Ho.alternate===null&&a(rt,fi),Na=k(Ho,Na,di),Pi===null?_r=Ho:Pi.sibling=Ho,Pi=Ho,fi=Da}if(di===it.length){if(h(rt,fi),cr()){var Do=di;T(rt,Do)}return _r}if(fi===null){for(;di<it.length;di++){var bl=Ue(rt,it[di],Wt);bl!==null&&(Na=k(bl,Na,di),Pi===null?_r=bl:Pi.sibling=bl,Pi=bl)}if(cr()){var gs=di;T(rt,gs)}return _r}for(var ys=g(rt,fi);di<it.length;di++){var Wo=lt(ys,rt,di,it[di],Wt);Wo!==null&&(t&&Wo.alternate!==null&&ys.delete(Wo.key===null?di:Wo.key),Na=k(Wo,Na,di),Pi===null?_r=Wo:Pi.sibling=Wo,Pi=Wo)}if(t&&ys.forEach(function(Pg){return a(rt,Pg)}),cr()){var nf=di;T(rt,nf)}return _r}function fn(rt,Mt,it,Wt){var bn=Qi(it);if(typeof bn!="function")throw new Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");{typeof Symbol=="function"&&it[Symbol.toStringTag]==="Generator"&&(Wa||C("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),Wa=!0),it.entries===bn&&(ga||C("Using Maps as children is not supported. Use an array of keyed ReactElements instead."),ga=!0);var mn=bn.call(it);if(mn)for(var or=null,_r=mn.next();!_r.done;_r=mn.next()){var Pi=_r.value;or=pt(Pi,or,rt)}}var fi=bn.call(it);if(fi==null)throw new Error("An iterable object provided no iterator.");for(var Na=null,di=null,Da=Mt,Ho=0,Do=0,bl=null,gs=fi.next();Da!==null&&!gs.done;Do++,gs=fi.next()){Da.index>Do?(bl=Da,Da=null):bl=Da.sibling;var ys=Fe(rt,Da,gs.value,Wt);if(ys===null){Da===null&&(Da=bl);break}t&&Da&&ys.alternate===null&&a(rt,Da),Ho=k(ys,Ho,Do),di===null?Na=ys:di.sibling=ys,di=ys,Da=bl}if(gs.done){if(h(rt,Da),cr()){var Wo=Do;T(rt,Wo)}return Na}if(Da===null){for(;!gs.done;Do++,gs=fi.next()){var nf=Ue(rt,gs.value,Wt);nf!==null&&(Ho=k(nf,Ho,Do),di===null?Na=nf:di.sibling=nf,di=nf)}if(cr()){var Pg=Do;T(rt,Pg)}return Na}for(var Jv=g(rt,Da);!gs.done;Do++,gs=fi.next()){var Jc=lt(Jv,rt,Do,gs.value,Wt);Jc!==null&&(t&&Jc.alternate!==null&&Jv.delete(Jc.key===null?Do:Jc.key),Ho=k(Jc,Ho,Do),di===null?Na=Jc:di.sibling=Jc,di=Jc)}if(t&&Jv.forEach(function(AL){return a(rt,AL)}),cr()){var ML=Do;T(rt,ML)}return Na}function Kn(rt,Mt,it,Wt){if(Mt!==null&&Mt.tag===Pe){h(rt,Mt.sibling);var bn=w(Mt,it);return bn.return=rt,bn}h(rt,Mt);var mn=iE(it,rt.mode,Wt);return mn.return=rt,mn}function Nn(rt,Mt,it,Wt){for(var bn=it.key,mn=Mt;mn!==null;){if(mn.key===bn){var or=it.type;if(or===xe){if(mn.tag===Re){h(rt,mn.sibling);var _r=w(mn,it.props.children);return _r.return=rt,_r._debugSource=it._source,_r._debugOwner=it._owner,_r}}else if(mn.elementType===or||DC(mn,it)||typeof or=="object"&&or!==null&&or.$$typeof===en&&vv(or)===mn.type){h(rt,mn.sibling);var Pi=w(mn,it.props);return Pi.ref=cd(rt,mn,it),Pi.return=rt,Pi._debugSource=it._source,Pi._debugOwner=it._owner,Pi}h(rt,mn);break}else a(rt,mn);mn=mn.sibling}if(it.type===xe){var fi=wd(it.props.children,rt.mode,Wt,it.key);return fi.return=rt,fi}else{var Na=rE(it,rt.mode,Wt);return Na.ref=cd(rt,Mt,it),Na.return=rt,Na}}function Wr(rt,Mt,it,Wt){for(var bn=it.key,mn=Mt;mn!==null;){if(mn.key===bn)if(mn.tag===X&&mn.stateNode.containerInfo===it.containerInfo&&mn.stateNode.implementation===it.implementation){h(rt,mn.sibling);var or=w(mn,it.children||[]);return or.return=rt,or}else{h(rt,mn);break}else a(rt,mn);mn=mn.sibling}var _r=aE(it,rt.mode,Wt);return _r.return=rt,_r}function Br(rt,Mt,it,Wt){var bn=typeof it=="object"&&it!==null&&it.type===xe&&it.key===null;if(bn&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case Ln:return P(Nn(rt,Mt,it,Wt));case jn:return P(Wr(rt,Mt,it,Wt));case en:var mn=it._payload,or=it._init;return Br(rt,Mt,or(mn),Wt)}if(Sn(it))return Ct(rt,Mt,it,Wt);if(Qi(it))return fn(rt,Mt,it,Wt);Op(rt,it)}return typeof it=="string"&&it!==""||typeof it=="number"?P(Kn(rt,Mt,""+it,Wt)):(typeof it=="function"&&Bp(rt),h(rt,Mt))}return Br}var $c=yg(!0),vl=yg(!1);function Tx(t,a){if(t!==null&&a.child!==t.child)throw new Error("Resuming work not yet implemented.");if(a.child!==null){var h=a.child,g=Zp(h,h.pendingProps);for(a.child=g,g.return=a;h.sibling!==null;)h=h.sibling,g=g.sibling=Zp(h,h.pendingProps),g.return=a;g.sibling=null}}function Xh(t,a){for(var h=t.child;h!==null;)qI(h,a),h=h.sibling}var Fp=Bc(null),Np;Np={};var _l=null,Gc=null,_v=null,Qa=!1;function eo(){_l=null,Gc=null,_v=null,Qa=!1}function hd(){Qa=!0}function vg(){Qa=!1}function xv(t,a,h){fo(Fp,a._currentValue,t),a._currentValue=h,a._currentRenderer!==void 0&&a._currentRenderer!==null&&a._currentRenderer!==Np&&C("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),a._currentRenderer=Np}function Au(t,a){var h=Fp.current;Ba(Fp,a),t._currentValue=h}function p1(t,a,h){for(var g=t;g!==null;){var w=g.alternate;if(Ri(g.childLanes,a)?w!==null&&!Ri(w.childLanes,a)&&(w.childLanes=wr(w.childLanes,a)):(g.childLanes=wr(g.childLanes,a),w!==null&&(w.childLanes=wr(w.childLanes,a))),g===h)break;g=g.return}g!==h&&C("Expected to find the propagation root when scheduling context work. This error is likely caused by a bug in React. Please file an issue.")}function aD(t,a,h){oD(t,a,h)}function oD(t,a,h){var g=t.child;for(g!==null&&(g.return=t);g!==null;){var w=void 0,k=g.dependencies;if(k!==null){w=g.child;for(var P=k.firstContext;P!==null;){if(P.context===a){if(g.tag===N){var $=bu(h),Y=Yh(Fi,$);Y.tag=Mx;var le=g.updateQueue;if(le!==null){var me=le.shared,Ue=me.pending;Ue===null?Y.next=Y:(Y.next=Ue.next,Ue.next=Y),me.pending=Y}}g.lanes=wr(g.lanes,h);var Fe=g.alternate;Fe!==null&&(Fe.lanes=wr(Fe.lanes,h)),p1(g.return,h,t),k.lanes=wr(k.lanes,h);break}P=P.next}}else if(g.tag===Ne)w=g.type===t.type?null:g.child;else if(g.tag===ut){var lt=g.return;if(lt===null)throw new Error("We just came from a parent so we must have had a parent. This is a bug in React.");lt.lanes=wr(lt.lanes,h);var pt=lt.alternate;pt!==null&&(pt.lanes=wr(pt.lanes,h)),p1(lt,h,t),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===t){w=null;break}var Ct=w.sibling;if(Ct!==null){Ct.return=w.return,w=Ct;break}w=w.return}g=w}}function _g(t,a){_l=t,Gc=null,_v=null;var h=t.dependencies;if(h!==null){var g=h.firstContext;g!==null&&(_o(h.lanes,a)&&Pv(),h.firstContext=null)}}function Za(t){Qa&&C("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");var a=t._currentValue;if(_v!==t){var h={context:t,memoizedValue:a,next:null};if(Gc===null){if(_l===null)throw new Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");Gc=h,_l.dependencies={lanes:qt,firstContext:h}}else Gc=Gc.next=h}return a}var Up=null;function m1(t){Up===null?Up=[t]:Up.push(t)}function sD(){if(Up!==null){for(var t=0;t<Up.length;t++){var a=Up[t],h=a.interleaved;if(h!==null){a.interleaved=null;var g=h.next,w=a.pending;if(w!==null){var k=w.next;w.next=g,h.next=k}a.pending=h}}Up=null}}function DS(t,a,h,g){var w=a.interleaved;return w===null?(h.next=h,m1(a)):(h.next=w.next,w.next=h),a.interleaved=h,Cx(t,g)}function lD(t,a,h,g){var w=a.interleaved;w===null?(h.next=h,m1(a)):(h.next=w.next,w.next=h),a.interleaved=h}function uD(t,a,h,g){var w=a.interleaved;return w===null?(h.next=h,m1(a)):(h.next=w.next,w.next=h),a.interleaved=h,Cx(t,g)}function Gs(t,a){return Cx(t,a)}var cD=Cx;function Cx(t,a){t.lanes=wr(t.lanes,a);var h=t.alternate;h!==null&&(h.lanes=wr(h.lanes,a)),h===null&&(t.flags&(ta|ol))!==Zn&&CC(t);for(var g=t,w=t.return;w!==null;)w.childLanes=wr(w.childLanes,a),h=w.alternate,h!==null?h.childLanes=wr(h.childLanes,a):(w.flags&(ta|ol))!==Zn&&CC(t),g=w,w=w.return;if(g.tag===H){var k=g.stateNode;return k}else return null}var RS=0,IS=1,Mx=2,g1=3,Ax=!1,y1,kx;y1=!1,kx=null;function v1(t){var a={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:qt},effects:null};t.updateQueue=a}function LS(t,a){var h=a.updateQueue,g=t.updateQueue;if(h===g){var w={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects};a.updateQueue=w}}function Yh(t,a){var h={eventTime:t,lane:a,tag:RS,payload:null,callback:null,next:null};return h}function fd(t,a,h){var g=t.updateQueue;if(g===null)return null;var w=g.shared;if(kx===w&&!y1&&(C("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),y1=!0),lI()){var k=w.pending;return k===null?a.next=a:(a.next=k.next,k.next=a),w.pending=a,cD(t,h)}else return uD(t,w,a,h)}function Dx(t,a,h){var g=a.updateQueue;if(g!==null){var w=g.shared;if(uy(h)){var k=w.lanes;k=zs(k,t.pendingLanes);var P=wr(k,h);w.lanes=P,wm(t,P)}}}function _1(t,a){var h=t.updateQueue,g=t.alternate;if(g!==null){var w=g.updateQueue;if(h===w){var k=null,P=null,$=h.firstBaseUpdate;if($!==null){var Y=$;do{var le={eventTime:Y.eventTime,lane:Y.lane,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null};P===null?k=P=le:(P.next=le,P=le),Y=Y.next}while(Y!==null);P===null?k=P=a:(P.next=a,P=a)}else k=P=a;h={baseState:w.baseState,firstBaseUpdate:k,lastBaseUpdate:P,shared:w.shared,effects:w.effects},t.updateQueue=h;return}}var me=h.lastBaseUpdate;me===null?h.firstBaseUpdate=a:me.next=a,h.lastBaseUpdate=a}function hD(t,a,h,g,w,k){switch(h.tag){case IS:{var P=h.payload;if(typeof P=="function"){hd();var $=P.call(k,g,w);{if(t.mode&Li){xt(!0);try{P.call(k,g,w)}finally{xt(!1)}}vg()}return $}return P}case g1:t.flags=t.flags&~za|Ur;case RS:{var Y=h.payload,le;if(typeof Y=="function"){hd(),le=Y.call(k,g,w);{if(t.mode&Li){xt(!0);try{Y.call(k,g,w)}finally{xt(!1)}}vg()}}else le=Y;return le==null?g:nr({},g,le)}case Mx:return Ax=!0,g}return g}function Rx(t,a,h,g){var w=t.updateQueue;Ax=!1,kx=w.shared;var k=w.firstBaseUpdate,P=w.lastBaseUpdate,$=w.shared.pending;if($!==null){w.shared.pending=null;var Y=$,le=Y.next;Y.next=null,P===null?k=le:P.next=le,P=Y;var me=t.alternate;if(me!==null){var Ue=me.updateQueue,Fe=Ue.lastBaseUpdate;Fe!==P&&(Fe===null?Ue.firstBaseUpdate=le:Fe.next=le,Ue.lastBaseUpdate=Y)}}if(k!==null){var lt=w.baseState,pt=qt,Ct=null,fn=null,Kn=null,Nn=k;do{var Wr=Nn.lane,Br=Nn.eventTime;if(Ri(g,Wr)){if(Kn!==null){var Mt={eventTime:Br,lane:Pa,tag:Nn.tag,payload:Nn.payload,callback:Nn.callback,next:null};Kn=Kn.next=Mt}lt=hD(t,w,Nn,lt,a,h);var it=Nn.callback;if(it!==null&&Nn.lane!==Pa){t.flags|=Zd;var Wt=w.effects;Wt===null?w.effects=[Nn]:Wt.push(Nn)}}else{var rt={eventTime:Br,lane:Wr,tag:Nn.tag,payload:Nn.payload,callback:Nn.callback,next:null};Kn===null?(fn=Kn=rt,Ct=lt):Kn=Kn.next=rt,pt=wr(pt,Wr)}if(Nn=Nn.next,Nn===null){if($=w.shared.pending,$===null)break;var bn=$,mn=bn.next;bn.next=null,Nn=mn,w.lastBaseUpdate=bn,w.shared.pending=null}}while(!0);Kn===null&&(Ct=lt),w.baseState=Ct,w.firstBaseUpdate=fn,w.lastBaseUpdate=Kn;var or=w.shared.interleaved;if(or!==null){var _r=or;do pt=wr(pt,_r.lane),_r=_r.next;while(_r!==or)}else k===null&&(w.shared.lanes=qt);Wv(pt),t.lanes=pt,t.memoizedState=lt}kx=null}function fD(t,a){if(typeof t!="function")throw new Error("Invalid argument passed as callback. Expected a function. Instead "+("received: "+t));t.call(a)}function zS(){Ax=!1}function Ix(){return Ax}function PS(t,a,h){var g=a.effects;if(a.effects=null,g!==null)for(var w=0;w<g.length;w++){var k=g[w],P=k.callback;P!==null&&(k.callback=null,fD(P,h))}}var bv={},dd=Bc(bv),wv=Bc(bv),Lx=Bc(bv);function zx(t){if(t===bv)throw new Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return t}function OS(){var t=zx(Lx.current);return t}function x1(t,a){fo(Lx,a,t),fo(wv,t,t),fo(dd,bv,t);var h=tg(a);Ba(dd,t),fo(dd,h,t)}function xg(t){Ba(dd,t),Ba(wv,t),Ba(Lx,t)}function b1(){var t=zx(dd.current);return t}function BS(t){zx(Lx.current);var a=zx(dd.current),h=px(a,t.type);a!==h&&(fo(wv,t,t),fo(dd,h,t))}function w1(t){wv.current===t&&(Ba(dd,t),Ba(wv,t))}var dD=0,FS=1,NS=1,Ev=2,ku=Bc(dD);function E1(t,a){return(t&a)!==0}function bg(t){return t&FS}function S1(t,a){return t&FS|a}function pD(t,a){return t|a}function pd(t,a){fo(ku,a,t)}function wg(t){Ba(ku,t)}function mD(t,a){var h=t.memoizedState;return h!==null?h.dehydrated!==null:(t.memoizedProps,!0)}function Px(t){for(var a=t;a!==null;){if(a.tag===St){var h=a.memoizedState;if(h!==null){var g=h.dehydrated;if(g===null||vx(g)||sg(g))return a}}else if(a.tag===qn&&a.memoizedProps.revealOrder!==void 0){var w=(a.flags&Ur)!==Zn;if(w)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)return null;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var qs=0,to=1,qc=2,no=4,So=8,T1=[];function C1(){for(var t=0;t<T1.length;t++){var a=T1[t];a._workInProgressVersionPrimary=null}T1.length=0}function gD(t,a){var h=a._getVersion,g=h(a._source);t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[a,g]:t.mutableSourceEagerHydrationData.push(a,g)}var vn=x.ReactCurrentDispatcher,Sv=x.ReactCurrentBatchConfig,M1,Eg;M1=new Set;var jp=qt,zi=null,ro=null,io=null,Ox=!1,Tv=!1,Cv=0,yD=0,vD=25,Lt=null,eu=null,md=-1,A1=!1;function Ei(){{var t=Lt;eu===null?eu=[t]:eu.push(t)}}function ln(){{var t=Lt;eu!==null&&(md++,eu[md]!==t&&_D(t))}}function Sg(t){t!=null&&!Sn(t)&&C("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",Lt,typeof t)}function _D(t){{var a=lr(zi);if(!M1.has(a)&&(M1.add(a),eu!==null)){for(var h="",g=30,w=0;w<=md;w++){for(var k=eu[w],P=w===md?t:k,$=w+1+". "+k;$.length<g;)$+=" ";$+=P+`
`,h+=$}C(`React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://reactjs.org/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
`,a,h)}}}function qo(){throw new Error(`Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:
1. You might have mismatching versions of React and the renderer (such as React DOM)
2. You might be breaking the Rules of Hooks
3. You might have more than one copy of React in the same app
See https://reactjs.org/link/invalid-hook-call for tips about how to debug and fix this problem.`)}function k1(t,a){if(A1)return!1;if(a===null)return C("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",Lt),!1;t.length!==a.length&&C(`The final argument passed to %s changed size between renders. The order and size of this array must remain constant.

Previous: %s
Incoming: %s`,Lt,"["+a.join(", ")+"]","["+t.join(", ")+"]");for(var h=0;h<a.length&&h<t.length;h++)if(!co(t[h],a[h]))return!1;return!0}function Tg(t,a,h,g,w,k){jp=k,zi=a,eu=t!==null?t._debugHookTypes:null,md=-1,A1=t!==null&&t.type!==a.type,a.memoizedState=null,a.updateQueue=null,a.lanes=qt,t!==null&&t.memoizedState!==null?vn.current=sT:eu!==null?vn.current=oT:vn.current=aT;var P=h(g,w);if(Tv){var $=0;do{if(Tv=!1,Cv=0,$>=vD)throw new Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");$+=1,A1=!1,ro=null,io=null,a.updateQueue=null,md=-1,vn.current=lT,P=h(g,w)}while(Tv)}vn.current=Xx,a._debugHookTypes=eu;var Y=ro!==null&&ro.next!==null;if(jp=qt,zi=null,ro=null,io=null,Lt=null,eu=null,md=-1,t!==null&&(t.flags&ul)!==(a.flags&ul)&&(t.mode&Er)!==xn&&C("Internal React error: Expected static flag was missing. Please notify the React team."),Ox=!1,Y)throw new Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return P}function Cg(){var t=Cv!==0;return Cv=0,t}function US(t,a,h){a.updateQueue=t.updateQueue,(a.mode&Ma)!==xn?a.flags&=~(wh|ll|Oo|Ar):a.flags&=~(Oo|Ar),t.lanes=yc(t.lanes,h)}function jS(){if(vn.current=Xx,Ox){for(var t=zi.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Ox=!1}jp=qt,zi=null,ro=null,io=null,eu=null,md=-1,Lt=null,eT=!1,Tv=!1,Cv=0}function Hc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return io===null?zi.memoizedState=io=t:io=io.next=t,io}function tu(){var t;if(ro===null){var a=zi.alternate;a!==null?t=a.memoizedState:t=null}else t=ro.next;var h;if(io===null?h=zi.memoizedState:h=io.next,h!==null)io=h,h=io.next,ro=t;else{if(t===null)throw new Error("Rendered more hooks than during the previous render.");ro=t;var g={memoizedState:ro.memoizedState,baseState:ro.baseState,baseQueue:ro.baseQueue,queue:ro.queue,next:null};io===null?zi.memoizedState=io=g:io=io.next=g}return io}function VS(){return{lastEffect:null,stores:null}}function D1(t,a){return typeof a=="function"?a(t):a}function R1(t,a,h){var g=Hc(),w;h!==void 0?w=h(a):w=a,g.memoizedState=g.baseState=w;var k={pending:null,interleaved:null,lanes:qt,dispatch:null,lastRenderedReducer:t,lastRenderedState:w};g.queue=k;var P=k.dispatch=ED.bind(null,zi,k);return[g.memoizedState,P]}function I1(t,a,h){var g=tu(),w=g.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=t;var k=ro,P=k.baseQueue,$=w.pending;if($!==null){if(P!==null){var Y=P.next,le=$.next;P.next=le,$.next=Y}k.baseQueue!==P&&C("Internal error: Expected work-in-progress queue to be a clone. This is a bug in React."),k.baseQueue=P=$,w.pending=null}if(P!==null){var me=P.next,Ue=k.baseState,Fe=null,lt=null,pt=null,Ct=me;do{var fn=Ct.lane;if(Ri(jp,fn)){if(pt!==null){var Nn={lane:Pa,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null};pt=pt.next=Nn}if(Ct.hasEagerState)Ue=Ct.eagerState;else{var Wr=Ct.action;Ue=t(Ue,Wr)}}else{var Kn={lane:fn,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null};pt===null?(lt=pt=Kn,Fe=Ue):pt=pt.next=Kn,zi.lanes=wr(zi.lanes,fn),Wv(fn)}Ct=Ct.next}while(Ct!==null&&Ct!==me);pt===null?Fe=Ue:pt.next=lt,co(Ue,g.memoizedState)||Pv(),g.memoizedState=Ue,g.baseState=Fe,g.baseQueue=pt,w.lastRenderedState=Ue}var Br=w.interleaved;if(Br!==null){var rt=Br;do{var Mt=rt.lane;zi.lanes=wr(zi.lanes,Mt),Wv(Mt),rt=rt.next}while(rt!==Br)}else P===null&&(w.lanes=qt);var it=w.dispatch;return[g.memoizedState,it]}function L1(t,a,h){var g=tu(),w=g.queue;if(w===null)throw new Error("Should have a queue. This is likely a bug in React. Please file an issue.");w.lastRenderedReducer=t;var k=w.dispatch,P=w.pending,$=g.memoizedState;if(P!==null){w.pending=null;var Y=P.next,le=Y;do{var me=le.action;$=t($,me),le=le.next}while(le!==Y);co($,g.memoizedState)||Pv(),g.memoizedState=$,g.baseQueue===null&&(g.baseState=$),w.lastRenderedState=$}return[$,k]}function TU(t,a,h){}function CU(t,a,h){}function z1(t,a,h){var g=zi,w=Hc(),k,P=cr();if(P){if(h===void 0)throw new Error("Missing getServerSnapshot, which is required for server-rendered content. Will revert to client rendering.");k=h(),Eg||k!==h()&&(C("The result of getServerSnapshot should be cached to avoid an infinite loop"),Eg=!0)}else{if(k=a(),!Eg){var $=a();co(k,$)||(C("The result of getSnapshot should be cached to avoid an infinite loop"),Eg=!0)}var Y=p0();if(Y===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Ls(Y,jp)||$S(g,a,k)}w.memoizedState=k;var le={value:k,getSnapshot:a};return w.queue=le,jx(qS.bind(null,g,le,t),[t]),g.flags|=Oo,Mv(to|So,GS.bind(null,g,le,k,a),void 0,null),k}function Bx(t,a,h){var g=zi,w=tu(),k=a();if(!Eg){var P=a();co(k,P)||(C("The result of getSnapshot should be cached to avoid an infinite loop"),Eg=!0)}var $=w.memoizedState,Y=!co($,k);Y&&(w.memoizedState=k,Pv());var le=w.queue;if(kv(qS.bind(null,g,le,t),[t]),le.getSnapshot!==a||Y||io!==null&&io.memoizedState.tag&to){g.flags|=Oo,Mv(to|So,GS.bind(null,g,le,k,a),void 0,null);var me=p0();if(me===null)throw new Error("Expected a work-in-progress root. This is a bug in React. Please file an issue.");Ls(me,jp)||$S(g,a,k)}return k}function $S(t,a,h){t.flags|=vo;var g={getSnapshot:a,value:h},w=zi.updateQueue;if(w===null)w=VS(),zi.updateQueue=w,w.stores=[g];else{var k=w.stores;k===null?w.stores=[g]:k.push(g)}}function GS(t,a,h,g){a.value=h,a.getSnapshot=g,HS(a)&&WS(t)}function qS(t,a,h){var g=function(){HS(a)&&WS(t)};return h(g)}function HS(t){var a=t.getSnapshot,h=t.value;try{var g=a();return!co(h,g)}catch{return!0}}function WS(t){var a=Gs(t,ur);a!==null&&lo(a,t,ur,Fi)}function Fx(t){var a=Hc();typeof t=="function"&&(t=t()),a.memoizedState=a.baseState=t;var h={pending:null,interleaved:null,lanes:qt,dispatch:null,lastRenderedReducer:D1,lastRenderedState:t};a.queue=h;var g=h.dispatch=SD.bind(null,zi,h);return[a.memoizedState,g]}function P1(t){return I1(D1)}function O1(t){return L1(D1)}function Mv(t,a,h,g){var w={tag:t,create:a,destroy:h,deps:g,next:null},k=zi.updateQueue;if(k===null)k=VS(),zi.updateQueue=k,k.lastEffect=w.next=w;else{var P=k.lastEffect;if(P===null)k.lastEffect=w.next=w;else{var $=P.next;P.next=w,w.next=$,k.lastEffect=w}}return w}function B1(t){var a=Hc();{var h={current:t};return a.memoizedState=h,h}}function Nx(t){var a=tu();return a.memoizedState}function Av(t,a,h,g){var w=Hc(),k=g===void 0?null:g;zi.flags|=t,w.memoizedState=Mv(to|a,h,void 0,k)}function Ux(t,a,h,g){var w=tu(),k=g===void 0?null:g,P=void 0;if(ro!==null){var $=ro.memoizedState;if(P=$.destroy,k!==null){var Y=$.deps;if(k1(k,Y)){w.memoizedState=Mv(a,h,P,k);return}}}zi.flags|=t,w.memoizedState=Mv(to|a,h,P,k)}function jx(t,a){return(zi.mode&Ma)!==xn?Av(wh|Oo|bh,So,t,a):Av(Oo|bh,So,t,a)}function kv(t,a){return Ux(Oo,So,t,a)}function F1(t,a){return Av(Ar,qc,t,a)}function Vx(t,a){return Ux(Ar,qc,t,a)}function N1(t,a){var h=Ar;return h|=Xt,(zi.mode&Ma)!==xn&&(h|=ll),Av(h,no,t,a)}function $x(t,a){return Ux(Ar,no,t,a)}function ZS(t,a){if(typeof a=="function"){var h=a,g=t();return h(g),function(){h(null)}}else if(a!=null){var w=a;w.hasOwnProperty("current")||C("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(w).join(", ")+"}");var k=t();return w.current=k,function(){w.current=null}}}function U1(t,a,h){typeof a!="function"&&C("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",a!==null?typeof a:"null");var g=h!=null?h.concat([t]):null,w=Ar;return w|=Xt,(zi.mode&Ma)!==xn&&(w|=ll),Av(w,no,ZS.bind(null,a,t),g)}function Gx(t,a,h){typeof a!="function"&&C("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",a!==null?typeof a:"null");var g=h!=null?h.concat([t]):null;return Ux(Ar,no,ZS.bind(null,a,t),g)}function xD(t,a){}var qx=xD;function j1(t,a){var h=Hc(),g=a===void 0?null:a;return h.memoizedState=[t,g],t}function Hx(t,a){var h=tu(),g=a===void 0?null:a,w=h.memoizedState;if(w!==null&&g!==null){var k=w[1];if(k1(g,k))return w[0]}return h.memoizedState=[t,g],t}function V1(t,a){var h=Hc(),g=a===void 0?null:a,w=t();return h.memoizedState=[w,g],w}function Wx(t,a){var h=tu(),g=a===void 0?null:a,w=h.memoizedState;if(w!==null&&g!==null){var k=w[1];if(k1(g,k))return w[0]}var P=t();return h.memoizedState=[P,g],P}function $1(t){var a=Hc();return a.memoizedState=t,t}function XS(t){var a=tu(),h=ro,g=h.memoizedState;return KS(a,g,t)}function YS(t){var a=tu();if(ro===null)return a.memoizedState=t,t;var h=ro.memoizedState;return KS(a,h,t)}function KS(t,a,h){var g=!Jd(jp);if(g){if(!co(h,a)){var w=zf();zi.lanes=wr(zi.lanes,w),Wv(w),t.baseState=!0}return a}else return t.baseState&&(t.baseState=!1,Pv()),t.memoizedState=h,h}function bD(t,a,h){var g=Gi();Aa($l(g,rs)),t(!0);var w=Sv.transition;Sv.transition={};var k=Sv.transition;Sv.transition._updatedFibers=new Set;try{t(!1),a()}finally{if(Aa(g),Sv.transition=w,w===null&&k._updatedFibers){var P=k._updatedFibers.size;P>10&&R("Detected a large number of updates inside startTransition. If this is due to a subscription please re-write it to use React provided hooks. Otherwise concurrent mode guarantees are off the table."),k._updatedFibers.clear()}}}function G1(){var t=Fx(!1),a=t[0],h=t[1],g=bD.bind(null,h),w=Hc();return w.memoizedState=g,[a,g]}function JS(){var t=P1(),a=t[0],h=tu(),g=h.memoizedState;return[a,g]}function QS(){var t=O1(),a=t[0],h=tu(),g=h.memoizedState;return[a,g]}var eT=!1;function wD(){return eT}function q1(){var t=Hc(),a=p0(),h=a.identifierPrefix,g;if(cr()){var w=S();g=":"+h+"R"+w;var k=Cv++;k>0&&(g+="H"+k.toString(32)),g+=":"}else{var P=yD++;g=":"+h+"r"+P.toString(32)+":"}return t.memoizedState=g,g}function Zx(){var t=tu(),a=t.memoizedState;return a}function ED(t,a,h){typeof arguments[3]=="function"&&C("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var g=xd(t),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(tT(t))nT(a,w);else{var k=DS(t,a,w,g);if(k!==null){var P=ms();lo(k,t,g,P),rT(k,a,g)}}iT(t,g)}function SD(t,a,h){typeof arguments[3]=="function"&&C("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var g=xd(t),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(tT(t))nT(a,w);else{var k=t.alternate;if(t.lanes===qt&&(k===null||k.lanes===qt)){var P=a.lastRenderedReducer;if(P!==null){var $;$=vn.current,vn.current=Du;try{var Y=a.lastRenderedState,le=P(Y,h);if(w.hasEagerState=!0,w.eagerState=le,co(le,Y)){lD(t,a,w,g);return}}catch{}finally{vn.current=$}}}var me=DS(t,a,w,g);if(me!==null){var Ue=ms();lo(me,t,g,Ue),rT(me,a,g)}}iT(t,g)}function tT(t){var a=t.alternate;return t===zi||a!==null&&a===zi}function nT(t,a){Tv=Ox=!0;var h=t.pending;h===null?a.next=a:(a.next=h.next,h.next=a),t.pending=a}function rT(t,a,h){if(uy(h)){var g=a.lanes;g=zs(g,t.pendingLanes);var w=wr(g,h);a.lanes=w,wm(t,w)}}function iT(t,a,h){gi(t,a)}var Xx={readContext:Za,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useInsertionEffect:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useDeferredValue:qo,useTransition:qo,useMutableSource:qo,useSyncExternalStore:qo,useId:qo,unstable_isNewReconciler:Cr},aT=null,oT=null,sT=null,lT=null,Wc=null,Du=null,Yx=null;{var H1=function(){C("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},gr=function(){C("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://reactjs.org/link/rules-of-hooks")};aT={readContext:function(t){return Za(t)},useCallback:function(t,a){return Lt="useCallback",Ei(),Sg(a),j1(t,a)},useContext:function(t){return Lt="useContext",Ei(),Za(t)},useEffect:function(t,a){return Lt="useEffect",Ei(),Sg(a),jx(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",Ei(),Sg(h),U1(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",Ei(),Sg(a),F1(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",Ei(),Sg(a),N1(t,a)},useMemo:function(t,a){Lt="useMemo",Ei(),Sg(a);var h=vn.current;vn.current=Wc;try{return V1(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",Ei();var g=vn.current;vn.current=Wc;try{return R1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",Ei(),B1(t)},useState:function(t){Lt="useState",Ei();var a=vn.current;vn.current=Wc;try{return Fx(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",Ei(),void 0},useDeferredValue:function(t){return Lt="useDeferredValue",Ei(),$1(t)},useTransition:function(){return Lt="useTransition",Ei(),G1()},useMutableSource:function(t,a,h){return Lt="useMutableSource",Ei(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",Ei(),z1(t,a,h)},useId:function(){return Lt="useId",Ei(),q1()},unstable_isNewReconciler:Cr},oT={readContext:function(t){return Za(t)},useCallback:function(t,a){return Lt="useCallback",ln(),j1(t,a)},useContext:function(t){return Lt="useContext",ln(),Za(t)},useEffect:function(t,a){return Lt="useEffect",ln(),jx(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",ln(),U1(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",ln(),F1(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",ln(),N1(t,a)},useMemo:function(t,a){Lt="useMemo",ln();var h=vn.current;vn.current=Wc;try{return V1(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",ln();var g=vn.current;vn.current=Wc;try{return R1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",ln(),B1(t)},useState:function(t){Lt="useState",ln();var a=vn.current;vn.current=Wc;try{return Fx(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",ln(),void 0},useDeferredValue:function(t){return Lt="useDeferredValue",ln(),$1(t)},useTransition:function(){return Lt="useTransition",ln(),G1()},useMutableSource:function(t,a,h){return Lt="useMutableSource",ln(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",ln(),z1(t,a,h)},useId:function(){return Lt="useId",ln(),q1()},unstable_isNewReconciler:Cr},sT={readContext:function(t){return Za(t)},useCallback:function(t,a){return Lt="useCallback",ln(),Hx(t,a)},useContext:function(t){return Lt="useContext",ln(),Za(t)},useEffect:function(t,a){return Lt="useEffect",ln(),kv(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",ln(),Gx(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",ln(),Vx(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",ln(),$x(t,a)},useMemo:function(t,a){Lt="useMemo",ln();var h=vn.current;vn.current=Du;try{return Wx(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",ln();var g=vn.current;vn.current=Du;try{return I1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",ln(),Nx()},useState:function(t){Lt="useState",ln();var a=vn.current;vn.current=Du;try{return P1(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",ln(),qx()},useDeferredValue:function(t){return Lt="useDeferredValue",ln(),XS(t)},useTransition:function(){return Lt="useTransition",ln(),JS()},useMutableSource:function(t,a,h){return Lt="useMutableSource",ln(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",ln(),Bx(t,a)},useId:function(){return Lt="useId",ln(),Zx()},unstable_isNewReconciler:Cr},lT={readContext:function(t){return Za(t)},useCallback:function(t,a){return Lt="useCallback",ln(),Hx(t,a)},useContext:function(t){return Lt="useContext",ln(),Za(t)},useEffect:function(t,a){return Lt="useEffect",ln(),kv(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",ln(),Gx(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",ln(),Vx(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",ln(),$x(t,a)},useMemo:function(t,a){Lt="useMemo",ln();var h=vn.current;vn.current=Yx;try{return Wx(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",ln();var g=vn.current;vn.current=Yx;try{return L1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",ln(),Nx()},useState:function(t){Lt="useState",ln();var a=vn.current;vn.current=Yx;try{return O1(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",ln(),qx()},useDeferredValue:function(t){return Lt="useDeferredValue",ln(),YS(t)},useTransition:function(){return Lt="useTransition",ln(),QS()},useMutableSource:function(t,a,h){return Lt="useMutableSource",ln(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",ln(),Bx(t,a)},useId:function(){return Lt="useId",ln(),Zx()},unstable_isNewReconciler:Cr},Wc={readContext:function(t){return H1(),Za(t)},useCallback:function(t,a){return Lt="useCallback",gr(),Ei(),j1(t,a)},useContext:function(t){return Lt="useContext",gr(),Ei(),Za(t)},useEffect:function(t,a){return Lt="useEffect",gr(),Ei(),jx(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",gr(),Ei(),U1(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",gr(),Ei(),F1(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",gr(),Ei(),N1(t,a)},useMemo:function(t,a){Lt="useMemo",gr(),Ei();var h=vn.current;vn.current=Wc;try{return V1(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",gr(),Ei();var g=vn.current;vn.current=Wc;try{return R1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",gr(),Ei(),B1(t)},useState:function(t){Lt="useState",gr(),Ei();var a=vn.current;vn.current=Wc;try{return Fx(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",gr(),Ei(),void 0},useDeferredValue:function(t){return Lt="useDeferredValue",gr(),Ei(),$1(t)},useTransition:function(){return Lt="useTransition",gr(),Ei(),G1()},useMutableSource:function(t,a,h){return Lt="useMutableSource",gr(),Ei(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",gr(),Ei(),z1(t,a,h)},useId:function(){return Lt="useId",gr(),Ei(),q1()},unstable_isNewReconciler:Cr},Du={readContext:function(t){return H1(),Za(t)},useCallback:function(t,a){return Lt="useCallback",gr(),ln(),Hx(t,a)},useContext:function(t){return Lt="useContext",gr(),ln(),Za(t)},useEffect:function(t,a){return Lt="useEffect",gr(),ln(),kv(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",gr(),ln(),Gx(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",gr(),ln(),Vx(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",gr(),ln(),$x(t,a)},useMemo:function(t,a){Lt="useMemo",gr(),ln();var h=vn.current;vn.current=Du;try{return Wx(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",gr(),ln();var g=vn.current;vn.current=Du;try{return I1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",gr(),ln(),Nx()},useState:function(t){Lt="useState",gr(),ln();var a=vn.current;vn.current=Du;try{return P1(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",gr(),ln(),qx()},useDeferredValue:function(t){return Lt="useDeferredValue",gr(),ln(),XS(t)},useTransition:function(){return Lt="useTransition",gr(),ln(),JS()},useMutableSource:function(t,a,h){return Lt="useMutableSource",gr(),ln(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",gr(),ln(),Bx(t,a)},useId:function(){return Lt="useId",gr(),ln(),Zx()},unstable_isNewReconciler:Cr},Yx={readContext:function(t){return H1(),Za(t)},useCallback:function(t,a){return Lt="useCallback",gr(),ln(),Hx(t,a)},useContext:function(t){return Lt="useContext",gr(),ln(),Za(t)},useEffect:function(t,a){return Lt="useEffect",gr(),ln(),kv(t,a)},useImperativeHandle:function(t,a,h){return Lt="useImperativeHandle",gr(),ln(),Gx(t,a,h)},useInsertionEffect:function(t,a){return Lt="useInsertionEffect",gr(),ln(),Vx(t,a)},useLayoutEffect:function(t,a){return Lt="useLayoutEffect",gr(),ln(),$x(t,a)},useMemo:function(t,a){Lt="useMemo",gr(),ln();var h=vn.current;vn.current=Du;try{return Wx(t,a)}finally{vn.current=h}},useReducer:function(t,a,h){Lt="useReducer",gr(),ln();var g=vn.current;vn.current=Du;try{return L1(t,a,h)}finally{vn.current=g}},useRef:function(t){return Lt="useRef",gr(),ln(),Nx()},useState:function(t){Lt="useState",gr(),ln();var a=vn.current;vn.current=Du;try{return O1(t)}finally{vn.current=a}},useDebugValue:function(t,a){return Lt="useDebugValue",gr(),ln(),qx()},useDeferredValue:function(t){return Lt="useDeferredValue",gr(),ln(),YS(t)},useTransition:function(){return Lt="useTransition",gr(),ln(),QS()},useMutableSource:function(t,a,h){return Lt="useMutableSource",gr(),ln(),void 0},useSyncExternalStore:function(t,a,h){return Lt="useSyncExternalStore",gr(),ln(),Bx(t,a)},useId:function(){return Lt="useId",gr(),ln(),Zx()},unstable_isNewReconciler:Cr}}var gd=y.unstable_now,uT=0,Kx=-1,Dv=-1,Jx=-1,W1=!1,Qx=!1;function cT(){return W1}function TD(){Qx=!0}function CD(){W1=!1,Qx=!1}function MD(){W1=Qx,Qx=!1}function hT(){return uT}function fT(){uT=gd()}function Z1(t){Dv=gd(),t.actualStartTime<0&&(t.actualStartTime=gd())}function dT(t){Dv=-1}function e0(t,a){if(Dv>=0){var h=gd()-Dv;t.actualDuration+=h,a&&(t.selfBaseDuration=h),Dv=-1}}function Zc(t){if(Kx>=0){var a=gd()-Kx;Kx=-1;for(var h=t.return;h!==null;){switch(h.tag){case H:var g=h.stateNode;g.effectDuration+=a;return;case Et:var w=h.stateNode;w.effectDuration+=a;return}h=h.return}}}function X1(t){if(Jx>=0){var a=gd()-Jx;Jx=-1;for(var h=t.return;h!==null;){switch(h.tag){case H:var g=h.stateNode;g!==null&&(g.passiveEffectDuration+=a);return;case Et:var w=h.stateNode;w!==null&&(w.passiveEffectDuration+=a);return}h=h.return}}}function Xc(){Kx=gd()}function Y1(){Jx=gd()}function K1(t){for(var a=t.child;a;)t.actualDuration+=a.actualDuration,a=a.sibling}function Ru(t,a){if(t&&t.defaultProps){var h=nr({},a),g=t.defaultProps;for(var w in g)h[w]===void 0&&(h[w]=g[w]);return h}return a}var J1={},Q1,ew,tw,nw,rw,pT,t0,iw,aw,ow,Rv;{Q1=new Set,ew=new Set,tw=new Set,nw=new Set,iw=new Set,rw=new Set,aw=new Set,ow=new Set,Rv=new Set;var mT=new Set;t0=function(t,a){if(!(t===null||typeof t=="function")){var h=a+"_"+t;mT.has(h)||(mT.add(h),C("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",a,t))}},pT=function(t,a){if(a===void 0){var h=yr(t)||"Component";rw.has(h)||(rw.add(h),C("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",h))}},Object.defineProperty(J1,"_processChildContext",{enumerable:!1,value:function(){throw new Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(J1)}function sw(t,a,h,g){var w=t.memoizedState,k=h(g,w);{if(t.mode&Li){xt(!0);try{k=h(g,w)}finally{xt(!1)}}pT(a,k)}var P=k==null?w:nr({},w,k);if(t.memoizedState=P,t.lanes===qt){var $=t.updateQueue;$.baseState=P}}var lw={isMounted:i,enqueueSetState:function(t,a,h){var g=yo(t),w=ms(),k=xd(g),P=Yh(w,k);P.payload=a,h!=null&&(t0(h,"setState"),P.callback=h);var $=fd(g,P,k);$!==null&&(lo($,g,k,w),Dx($,g,k)),gi(g,k)},enqueueReplaceState:function(t,a,h){var g=yo(t),w=ms(),k=xd(g),P=Yh(w,k);P.tag=IS,P.payload=a,h!=null&&(t0(h,"replaceState"),P.callback=h);var $=fd(g,P,k);$!==null&&(lo($,g,k,w),Dx($,g,k)),gi(g,k)},enqueueForceUpdate:function(t,a){var h=yo(t),g=ms(),w=xd(h),k=Yh(g,w);k.tag=Mx,a!=null&&(t0(a,"forceUpdate"),k.callback=a);var P=fd(h,k,w);P!==null&&(lo(P,h,w,g),Dx(P,h,w)),Ja(h,w)}};function gT(t,a,h,g,w,k,P){var $=t.stateNode;if(typeof $.shouldComponentUpdate=="function"){var Y=$.shouldComponentUpdate(g,k,P);{if(t.mode&Li){xt(!0);try{Y=$.shouldComponentUpdate(g,k,P)}finally{xt(!1)}}Y===void 0&&C("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",yr(a)||"Component")}return Y}return a.prototype&&a.prototype.isPureReactComponent?!sp(h,g)||!sp(w,k):!0}function AD(t,a,h){var g=t.stateNode;{var w=yr(a)||"Component",k=g.render;k||(a.prototype&&typeof a.prototype.render=="function"?C("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",w):C("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",w)),g.getInitialState&&!g.getInitialState.isReactClassApproved&&!g.state&&C("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",w),g.getDefaultProps&&!g.getDefaultProps.isReactClassApproved&&C("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",w),g.propTypes&&C("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",w),g.contextType&&C("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",w),a.childContextTypes&&!Rv.has(a)&&(t.mode&Li)===xn&&(Rv.add(a),C(`%s uses the legacy childContextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() instead

.Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),a.contextTypes&&!Rv.has(a)&&(t.mode&Li)===xn&&(Rv.add(a),C(`%s uses the legacy contextTypes API which is no longer supported and will be removed in the next major release. Use React.createContext() with static contextType instead.

Learn more about this warning here: https://reactjs.org/link/legacy-context`,w)),g.contextTypes&&C("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",w),a.contextType&&a.contextTypes&&!aw.has(a)&&(aw.add(a),C("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",w)),typeof g.componentShouldUpdate=="function"&&C("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",w),a.prototype&&a.prototype.isPureReactComponent&&typeof g.shouldComponentUpdate<"u"&&C("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",yr(a)||"A pure component"),typeof g.componentDidUnmount=="function"&&C("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",w),typeof g.componentDidReceiveProps=="function"&&C("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",w),typeof g.componentWillRecieveProps=="function"&&C("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",w),typeof g.UNSAFE_componentWillRecieveProps=="function"&&C("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",w);var P=g.props!==h;g.props!==void 0&&P&&C("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",w,w),g.defaultProps&&C("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",w,w),typeof g.getSnapshotBeforeUpdate=="function"&&typeof g.componentDidUpdate!="function"&&!tw.has(a)&&(tw.add(a),C("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",yr(a))),typeof g.getDerivedStateFromProps=="function"&&C("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof g.getDerivedStateFromError=="function"&&C("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",w),typeof a.getSnapshotBeforeUpdate=="function"&&C("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",w);var $=g.state;$&&(typeof $!="object"||Sn($))&&C("%s.state: must be set to an object or null",w),typeof g.getChildContext=="function"&&typeof a.childContextTypes!="object"&&C("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",w)}}function yT(t,a){a.updater=lw,t.stateNode=a,dm(a,t),a._reactInternalInstance=J1}function vT(t,a,h){var g=!1,w=Eo,k=Eo,P=a.contextType;if("contextType"in a){var $=P===null||P!==void 0&&P.$$typeof===ot&&P._context===void 0;if(!$&&!ow.has(a)){ow.add(a);var Y="";P===void 0?Y=" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":typeof P!="object"?Y=" However, it is set to a "+typeof P+".":P.$$typeof===pe?Y=" Did you accidentally pass the Context.Provider instead?":P._context!==void 0?Y=" Did you accidentally pass the Context.Consumer instead?":Y=" However, it is set to an object with keys {"+Object.keys(P).join(", ")+"}.",C("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",yr(a)||"Component",Y)}}if(typeof P=="object"&&P!==null)k=Za(P);else{w=Nc(t,a,!0);var le=a.contextTypes;g=le!=null,k=g?$s(t,w):Eo}var me=new a(h,k);if(t.mode&Li){xt(!0);try{me=new a(h,k)}finally{xt(!1)}}var Ue=t.memoizedState=me.state!==null&&me.state!==void 0?me.state:null;yT(t,me);{if(typeof a.getDerivedStateFromProps=="function"&&Ue===null){var Fe=yr(a)||"Component";ew.has(Fe)||(ew.add(Fe),C("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",Fe,me.state===null?"null":"undefined",Fe))}if(typeof a.getDerivedStateFromProps=="function"||typeof me.getSnapshotBeforeUpdate=="function"){var lt=null,pt=null,Ct=null;if(typeof me.componentWillMount=="function"&&me.componentWillMount.__suppressDeprecationWarning!==!0?lt="componentWillMount":typeof me.UNSAFE_componentWillMount=="function"&&(lt="UNSAFE_componentWillMount"),typeof me.componentWillReceiveProps=="function"&&me.componentWillReceiveProps.__suppressDeprecationWarning!==!0?pt="componentWillReceiveProps":typeof me.UNSAFE_componentWillReceiveProps=="function"&&(pt="UNSAFE_componentWillReceiveProps"),typeof me.componentWillUpdate=="function"&&me.componentWillUpdate.__suppressDeprecationWarning!==!0?Ct="componentWillUpdate":typeof me.UNSAFE_componentWillUpdate=="function"&&(Ct="UNSAFE_componentWillUpdate"),lt!==null||pt!==null||Ct!==null){var fn=yr(a)||"Component",Kn=typeof a.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";nw.has(fn)||(nw.add(fn),C(`Unsafe legacy lifecycles will not be called for components using new component APIs.

%s uses %s but also contains the following legacy lifecycles:%s%s%s

The above lifecycles should be removed. Learn more about this warning here:
https://reactjs.org/link/unsafe-component-lifecycles`,fn,Kn,lt!==null?`
  `+lt:"",pt!==null?`
  `+pt:"",Ct!==null?`
  `+Ct:""))}}}return g&&Vs(t,w,k),me}function kD(t,a){var h=a.state;typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),h!==a.state&&(C("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",lr(t)||"Component"),lw.enqueueReplaceState(a,a.state,null))}function _T(t,a,h,g){var w=a.state;if(typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,g),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,g),a.state!==w){{var k=lr(t)||"Component";Q1.has(k)||(Q1.add(k),C("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",k))}lw.enqueueReplaceState(a,a.state,null)}}function uw(t,a,h,g){AD(t,a,h);var w=t.stateNode;w.props=h,w.state=t.memoizedState,w.refs={},v1(t);var k=a.contextType;if(typeof k=="object"&&k!==null)w.context=Za(k);else{var P=Nc(t,a,!0);w.context=$s(t,P)}{if(w.state===h){var $=yr(a)||"Component";iw.has($)||(iw.add($),C("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",$))}t.mode&Li&&Gr.recordLegacyContextWarning(t,w),Gr.recordUnsafeLifecycleWarnings(t,w)}w.state=t.memoizedState;var Y=a.getDerivedStateFromProps;if(typeof Y=="function"&&(sw(t,a,Y,h),w.state=t.memoizedState),typeof a.getDerivedStateFromProps!="function"&&typeof w.getSnapshotBeforeUpdate!="function"&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(kD(t,w),Rx(t,h,w,g),w.state=t.memoizedState),typeof w.componentDidMount=="function"){var le=Ar;le|=Xt,(t.mode&Ma)!==xn&&(le|=ll),t.flags|=le}}function DD(t,a,h,g){var w=t.stateNode,k=t.memoizedProps;w.props=k;var P=w.context,$=a.contextType,Y=Eo;if(typeof $=="object"&&$!==null)Y=Za($);else{var le=Nc(t,a,!0);Y=$s(t,le)}var me=a.getDerivedStateFromProps,Ue=typeof me=="function"||typeof w.getSnapshotBeforeUpdate=="function";!Ue&&(typeof w.UNSAFE_componentWillReceiveProps=="function"||typeof w.componentWillReceiveProps=="function")&&(k!==h||P!==Y)&&_T(t,w,h,Y),zS();var Fe=t.memoizedState,lt=w.state=Fe;if(Rx(t,h,w,g),lt=t.memoizedState,k===h&&Fe===lt&&!Lp()&&!Ix()){if(typeof w.componentDidMount=="function"){var pt=Ar;pt|=Xt,(t.mode&Ma)!==xn&&(pt|=ll),t.flags|=pt}return!1}typeof me=="function"&&(sw(t,a,me,h),lt=t.memoizedState);var Ct=Ix()||gT(t,a,k,h,Fe,lt,Y);if(Ct){if(!Ue&&(typeof w.UNSAFE_componentWillMount=="function"||typeof w.componentWillMount=="function")&&(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"){var fn=Ar;fn|=Xt,(t.mode&Ma)!==xn&&(fn|=ll),t.flags|=fn}}else{if(typeof w.componentDidMount=="function"){var Kn=Ar;Kn|=Xt,(t.mode&Ma)!==xn&&(Kn|=ll),t.flags|=Kn}t.memoizedProps=h,t.memoizedState=lt}return w.props=h,w.state=lt,w.context=Y,Ct}function RD(t,a,h,g,w){var k=a.stateNode;LS(t,a);var P=a.memoizedProps,$=a.type===a.elementType?P:Ru(a.type,P);k.props=$;var Y=a.pendingProps,le=k.context,me=h.contextType,Ue=Eo;if(typeof me=="object"&&me!==null)Ue=Za(me);else{var Fe=Nc(a,h,!0);Ue=$s(a,Fe)}var lt=h.getDerivedStateFromProps,pt=typeof lt=="function"||typeof k.getSnapshotBeforeUpdate=="function";!pt&&(typeof k.UNSAFE_componentWillReceiveProps=="function"||typeof k.componentWillReceiveProps=="function")&&(P!==Y||le!==Ue)&&_T(a,k,g,Ue),zS();var Ct=a.memoizedState,fn=k.state=Ct;if(Rx(a,g,k,w),fn=a.memoizedState,P===Y&&Ct===fn&&!Lp()&&!Ix()&&!It)return typeof k.componentDidUpdate=="function"&&(P!==t.memoizedProps||Ct!==t.memoizedState)&&(a.flags|=Ar),typeof k.getSnapshotBeforeUpdate=="function"&&(P!==t.memoizedProps||Ct!==t.memoizedState)&&(a.flags|=Ta),!1;typeof lt=="function"&&(sw(a,h,lt,g),fn=a.memoizedState);var Kn=Ix()||gT(a,h,$,g,Ct,fn,Ue)||It;return Kn?(!pt&&(typeof k.UNSAFE_componentWillUpdate=="function"||typeof k.componentWillUpdate=="function")&&(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(g,fn,Ue),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(g,fn,Ue)),typeof k.componentDidUpdate=="function"&&(a.flags|=Ar),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=Ta)):(typeof k.componentDidUpdate=="function"&&(P!==t.memoizedProps||Ct!==t.memoizedState)&&(a.flags|=Ar),typeof k.getSnapshotBeforeUpdate=="function"&&(P!==t.memoizedProps||Ct!==t.memoizedState)&&(a.flags|=Ta),a.memoizedProps=g,a.memoizedState=fn),k.props=g,k.state=fn,k.context=Ue,Kn}function Vp(t,a){return{value:t,source:a,stack:ja(a),digest:null}}function cw(t,a,h){return{value:t,source:null,stack:h??null,digest:a??null}}function ID(t,a){return!0}function hw(t,a){try{var h=ID(t,a);if(h===!1)return;var g=a.value,w=a.source,k=a.stack,P=k!==null?k:"";if(g!=null&&g._suppressLogging){if(t.tag===N)return;console.error(g)}var $=w?lr(w):null,Y=$?"The above error occurred in the <"+$+"> component:":"The above error occurred in one of your React components:",le;if(t.tag===H)le=`Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.`;else{var me=lr(t)||"Anonymous";le="React will try to recreate this component tree from scratch "+("using the error boundary you provided, "+me+".")}var Ue=Y+`
`+P+`

`+(""+le);console.error(Ue)}catch(Fe){setTimeout(function(){throw Fe})}}var LD=typeof WeakMap=="function"?WeakMap:Map;function xT(t,a,h){var g=Yh(Fi,h);g.tag=g1,g.payload={element:null};var w=a.value;return g.callback=function(){TI(w),hw(t,a)},g}function fw(t,a,h){var g=Yh(Fi,h);g.tag=g1;var w=t.type.getDerivedStateFromError;if(typeof w=="function"){var k=a.value;g.payload=function(){return w(k)},g.callback=function(){RC(t),hw(t,a)}}var P=t.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(g.callback=function(){RC(t),hw(t,a),typeof w!="function"&&EI(this);var Y=a.value,le=a.stack;this.componentDidCatch(Y,{componentStack:le!==null?le:""}),typeof w!="function"&&(_o(t.lanes,ur)||C("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",lr(t)||"Unknown"))}),g}function bT(t,a,h){var g=t.pingCache,w;if(g===null?(g=t.pingCache=new LD,w=new Set,g.set(a,w)):(w=g.get(a),w===void 0&&(w=new Set,g.set(a,w))),!w.has(h)){w.add(h);var k=CI.bind(null,t,a,h);Oe&&Zv(t,h),a.then(k,k)}}function zD(t,a,h,g){var w=t.updateQueue;if(w===null){var k=new Set;k.add(h),t.updateQueue=k}else w.add(h)}function PD(t,a){var h=t.tag;if((t.mode&Er)===xn&&(h===s||h===Xe||h===Nt)){var g=t.alternate;g?(t.updateQueue=g.updateQueue,t.memoizedState=g.memoizedState,t.lanes=g.lanes):(t.updateQueue=null,t.memoizedState=null)}}function wT(t){var a=t;do{if(a.tag===St&&mD(a))return a;a=a.return}while(a!==null);return null}function ET(t,a,h,g,w){if((t.mode&Er)===xn){if(t===a)t.flags|=za;else{if(t.flags|=Ur,h.flags|=xh,h.flags&=~(gu|an),h.tag===N){var k=h.alternate;if(k===null)h.tag=dn;else{var P=Yh(Fi,ur);P.tag=Mx,fd(h,P,ur)}}h.lanes=wr(h.lanes,ur)}return t}return t.flags|=za,t.lanes=w,t}function OD(t,a,h,g,w){if(h.flags|=an,Oe&&Zv(t,w),g!==null&&typeof g=="object"&&typeof g.then=="function"){var k=g;PD(h),cr()&&h.mode&Er&&He();var P=wT(a);if(P!==null){P.flags&=~al,ET(P,a,h,t,w),P.mode&Er&&bT(t,k,w),zD(P,t,k);return}else{if(!Q0(w)){bT(t,k,w),qw();return}var $=new Error("A component suspended while responding to synchronous input. This will cause the UI to be replaced with a loading indicator. To fix, updates that suspend should be wrapped with startTransition.");g=$}}else if(cr()&&h.mode&Er){He();var Y=wT(a);if(Y!==null){(Y.flags&za)===Zn&&(Y.flags|=al),ET(Y,a,h,t,w),ri(Vp(g,h));return}}g=Vp(g,h),mI(g);var le=a;do{switch(le.tag){case H:{var me=g;le.flags|=za;var Ue=bu(w);le.lanes=wr(le.lanes,Ue);var Fe=xT(le,me,Ue);_1(le,Fe);return}case N:var lt=g,pt=le.type,Ct=le.stateNode;if((le.flags&Ur)===Zn&&(typeof pt.getDerivedStateFromError=="function"||Ct!==null&&typeof Ct.componentDidCatch=="function"&&!wC(Ct))){le.flags|=za;var fn=bu(w);le.lanes=wr(le.lanes,fn);var Kn=fw(le,lt,fn);_1(le,Kn);return}break}le=le.return}while(le!==null)}function BD(){return null}var Iv=x.ReactCurrentOwner,Iu=!1,dw,Lv,pw,mw,gw,$p,yw,n0,zv;dw={},Lv={},pw={},mw={},gw={},$p=!1,yw={},n0={},zv={};function ds(t,a,h,g){t===null?a.child=vl(a,null,h,g):a.child=$c(a,t.child,h,g)}function FD(t,a,h,g){a.child=$c(a,t.child,null,g),a.child=$c(a,null,h,g)}function ST(t,a,h,g,w){if(a.type!==a.elementType){var k=h.propTypes;k&&js(k,g,"prop",yr(h))}var P=h.render,$=a.ref,Y,le;_g(a,w),Pt(a);{if(Iv.current=a,Ka(!0),Y=Tg(t,a,P,g,$,w),le=Cg(),a.mode&Li){xt(!0);try{Y=Tg(t,a,P,g,$,w),le=Cg()}finally{xt(!1)}}Ka(!1)}return pn(),t!==null&&!Iu?(US(t,a,w),Kh(t,a,w)):(cr()&&le&&z(a),a.flags|=mu,ds(t,a,Y,w),a.child)}function TT(t,a,h,g,w){if(t===null){var k=h.type;if($I(k)&&h.compare===null&&h.defaultProps===void 0){var P=k;return P=zg(k),a.tag=Nt,a.type=P,xw(a,k),CT(t,a,P,g,w)}{var $=k.propTypes;if($&&js($,g,"prop",yr(k)),h.defaultProps!==void 0){var Y=yr(k)||"Unknown";zv[Y]||(C("%s: Support for defaultProps will be removed from memo components in a future major release. Use JavaScript default parameters instead.",Y),zv[Y]=!0)}}var le=nE(h.type,null,g,a,a.mode,w);return le.ref=a.ref,le.return=a,a.child=le,le}{var me=h.type,Ue=me.propTypes;Ue&&js(Ue,g,"prop",yr(me))}var Fe=t.child,lt=Cw(t,w);if(!lt){var pt=Fe.memoizedProps,Ct=h.compare;if(Ct=Ct!==null?Ct:sp,Ct(pt,g)&&t.ref===a.ref)return Kh(t,a,w)}a.flags|=mu;var fn=Zp(Fe,g);return fn.ref=a.ref,fn.return=a,a.child=fn,fn}function CT(t,a,h,g,w){if(a.type!==a.elementType){var k=a.elementType;if(k.$$typeof===en){var P=k,$=P._payload,Y=P._init;try{k=Y($)}catch{k=null}var le=k&&k.propTypes;le&&js(le,g,"prop",yr(k))}}if(t!==null){var me=t.memoizedProps;if(sp(me,g)&&t.ref===a.ref&&a.type===t.type)if(Iu=!1,a.pendingProps=g=me,Cw(t,w))(t.flags&xh)!==Zn&&(Iu=!0);else return a.lanes=t.lanes,Kh(t,a,w)}return vw(t,a,h,g,w)}function MT(t,a,h){var g=a.pendingProps,w=g.children,k=t!==null?t.memoizedState:null;if(g.mode==="hidden"||Ee)if((a.mode&Er)===xn){var P={baseLanes:qt,cachePool:null,transitions:null};a.memoizedState=P,m0(a,h)}else if(_o(h,$i)){var Ue={baseLanes:qt,cachePool:null,transitions:null};a.memoizedState=Ue;var Fe=k!==null?k.baseLanes:h;m0(a,Fe)}else{var $=null,Y;if(k!==null){var le=k.baseLanes;Y=wr(le,h)}else Y=h;a.lanes=a.childLanes=$i;var me={baseLanes:Y,cachePool:$,transitions:null};return a.memoizedState=me,a.updateQueue=null,m0(a,Y),null}else{var lt;k!==null?(lt=wr(k.baseLanes,h),a.memoizedState=null):lt=h,m0(a,lt)}return ds(t,a,w,h),a.child}function ND(t,a,h){var g=a.pendingProps;return ds(t,a,g,h),a.child}function UD(t,a,h){var g=a.pendingProps.children;return ds(t,a,g,h),a.child}function jD(t,a,h){{a.flags|=Ar;{var g=a.stateNode;g.effectDuration=0,g.passiveEffectDuration=0}}var w=a.pendingProps,k=w.children;return ds(t,a,k,h),a.child}function AT(t,a){var h=a.ref;(t===null&&h!==null||t!==null&&t.ref!==h)&&(a.flags|=Nl,a.flags|=sl)}function vw(t,a,h,g,w){if(a.type!==a.elementType){var k=h.propTypes;k&&js(k,g,"prop",yr(h))}var P;{var $=Nc(a,h,!0);P=$s(a,$)}var Y,le;_g(a,w),Pt(a);{if(Iv.current=a,Ka(!0),Y=Tg(t,a,h,g,P,w),le=Cg(),a.mode&Li){xt(!0);try{Y=Tg(t,a,h,g,P,w),le=Cg()}finally{xt(!1)}}Ka(!1)}return pn(),t!==null&&!Iu?(US(t,a,w),Kh(t,a,w)):(cr()&&le&&z(a),a.flags|=mu,ds(t,a,Y,w),a.child)}function kT(t,a,h,g,w){{switch(iL(a)){case!1:{var k=a.stateNode,P=a.type,$=new P(a.memoizedProps,k.context),Y=$.state;k.updater.enqueueSetState(k,Y,null);break}case!0:{a.flags|=Ur,a.flags|=za;var le=new Error("Simulated error coming from DevTools"),me=bu(w);a.lanes=wr(a.lanes,me);var Ue=fw(a,Vp(le,a),me);_1(a,Ue);break}}if(a.type!==a.elementType){var Fe=h.propTypes;Fe&&js(Fe,g,"prop",yr(h))}}var lt;gl(h)?(lt=!0,fg(a)):lt=!1,_g(a,w);var pt=a.stateNode,Ct;pt===null?(i0(t,a),vT(a,h,g),uw(a,h,g,w),Ct=!0):t===null?Ct=DD(a,h,g,w):Ct=RD(t,a,h,g,w);var fn=_w(t,a,h,Ct,lt,w);{var Kn=a.stateNode;Ct&&Kn.props!==g&&($p||C("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",lr(a)||"a component"),$p=!0)}return fn}function _w(t,a,h,g,w,k){AT(t,a);var P=(a.flags&Ur)!==Zn;if(!g&&!P)return w&&mv(a,h,!1),Kh(t,a,k);var $=a.stateNode;Iv.current=a;var Y;if(P&&typeof h.getDerivedStateFromError!="function")Y=null,dT();else{Pt(a);{if(Ka(!0),Y=$.render(),a.mode&Li){xt(!0);try{$.render()}finally{xt(!1)}}Ka(!1)}pn()}return a.flags|=mu,t!==null&&P?FD(t,a,Y,k):ds(t,a,Y,k),a.memoizedState=$.state,w&&mv(a,h,!0),a.child}function DT(t){var a=t.stateNode;a.pendingContext?dv(t,a.pendingContext,a.pendingContext!==a.context):a.context&&dv(t,a.context,!1),x1(t,a.containerInfo)}function VD(t,a,h){if(DT(a),t===null)throw new Error("Should have a current fiber. This is a bug in React.");var g=a.pendingProps,w=a.memoizedState,k=w.element;LS(t,a),Rx(a,g,null,h);var P=a.memoizedState;a.stateNode;var $=P.element;if(w.isDehydrated){var Y={element:$,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},le=a.updateQueue;if(le.baseState=Y,a.memoizedState=Y,a.flags&al){var me=Vp(new Error("There was an error while hydrating. Because the error happened outside of a Suspense boundary, the entire root will switch to client rendering."),a);return RT(t,a,$,h,me)}else if($!==k){var Ue=Vp(new Error("This root received an early update, before anything was able hydrate. Switched the entire root to client rendering."),a);return RT(t,a,$,h,Ue)}else{Bt(a);var Fe=vl(a,null,$,h);a.child=Fe;for(var lt=Fe;lt;)lt.flags=lt.flags&~ta|ol,lt=lt.sibling}}else{if(Gn(),$===k)return Kh(t,a,h);ds(t,a,$,h)}return a.child}function RT(t,a,h,g,w){return Gn(),ri(w),a.flags|=al,ds(t,a,h,g),a.child}function $D(t,a,h){BS(a),t===null&&Qt(a);var g=a.type,w=a.pendingProps,k=t!==null?t.memoizedProps:null,P=w.children,$=Rc(g,w);return $?P=null:k!==null&&Rc(g,k)&&(a.flags|=da),AT(t,a),ds(t,a,P,h),a.child}function GD(t,a){return t===null&&Qt(a),null}function qD(t,a,h,g){i0(t,a);var w=a.pendingProps,k=h,P=k._payload,$=k._init,Y=$(P);a.type=Y;var le=a.tag=GI(Y),me=Ru(Y,w),Ue;switch(le){case s:return xw(a,Y),a.type=Y=zg(Y),Ue=vw(null,a,Y,me,g),Ue;case N:return a.type=Y=Yw(Y),Ue=kT(null,a,Y,me,g),Ue;case Xe:return a.type=Y=Kw(Y),Ue=ST(null,a,Y,me,g),Ue;case Qe:{if(a.type!==a.elementType){var Fe=Y.propTypes;Fe&&js(Fe,me,"prop",yr(Y))}return Ue=TT(null,a,Y,Ru(Y.type,me),g),Ue}}var lt="";throw Y!==null&&typeof Y=="object"&&Y.$$typeof===en&&(lt=" Did you wrap a component in React.lazy() more than once?"),new Error("Element type is invalid. Received a promise that resolves to: "+Y+". "+("Lazy element type must resolve to a class or function."+lt))}function HD(t,a,h,g,w){i0(t,a),a.tag=N;var k;return gl(h)?(k=!0,fg(a)):k=!1,_g(a,w),vT(a,h,g),uw(a,h,g,w),_w(null,a,h,!0,k,w)}function WD(t,a,h,g){i0(t,a);var w=a.pendingProps,k;{var P=Nc(a,h,!1);k=$s(a,P)}_g(a,g);var $,Y;Pt(a);{if(h.prototype&&typeof h.prototype.render=="function"){var le=yr(h)||"Unknown";dw[le]||(C("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",le,le),dw[le]=!0)}a.mode&Li&&Gr.recordLegacyContextWarning(a,null),Ka(!0),Iv.current=a,$=Tg(null,a,h,w,k,g),Y=Cg(),Ka(!1)}if(pn(),a.flags|=mu,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){var me=yr(h)||"Unknown";Lv[me]||(C("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",me,me,me),Lv[me]=!0)}if(typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0){{var Ue=yr(h)||"Unknown";Lv[Ue]||(C("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",Ue,Ue,Ue),Lv[Ue]=!0)}a.tag=N,a.memoizedState=null,a.updateQueue=null;var Fe=!1;return gl(h)?(Fe=!0,fg(a)):Fe=!1,a.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,v1(a),yT(a,$),uw(a,h,w,g),_w(null,a,h,!0,Fe,g)}else{if(a.tag=s,a.mode&Li){xt(!0);try{$=Tg(null,a,h,w,k,g),Y=Cg()}finally{xt(!1)}}return cr()&&Y&&z(a),ds(null,a,$,g),xw(a,h),a.child}}function xw(t,a){{if(a&&a.childContextTypes&&C("%s(...): childContextTypes cannot be defined on a function component.",a.displayName||a.name||"Component"),t.ref!==null){var h="",g=Jo();g&&(h+=`

Check the render method of \``+g+"`.");var w=g||"",k=t._debugSource;k&&(w=k.fileName+":"+k.lineNumber),gw[w]||(gw[w]=!0,C("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",h))}if(a.defaultProps!==void 0){var P=yr(a)||"Unknown";zv[P]||(C("%s: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.",P),zv[P]=!0)}if(typeof a.getDerivedStateFromProps=="function"){var $=yr(a)||"Unknown";mw[$]||(C("%s: Function components do not support getDerivedStateFromProps.",$),mw[$]=!0)}if(typeof a.contextType=="object"&&a.contextType!==null){var Y=yr(a)||"Unknown";pw[Y]||(C("%s: Function components do not support contextType.",Y),pw[Y]=!0)}}}var bw={dehydrated:null,treeContext:null,retryLane:Pa};function ww(t){return{baseLanes:t,cachePool:BD(),transitions:null}}function ZD(t,a){var h=null;return{baseLanes:wr(t.baseLanes,a),cachePool:h,transitions:t.transitions}}function XD(t,a,h,g){if(a!==null){var w=a.memoizedState;if(w===null)return!1}return E1(t,Ev)}function YD(t,a){return yc(t.childLanes,a)}function IT(t,a,h){var g=a.pendingProps;aL(a)&&(a.flags|=Ur);var w=ku.current,k=!1,P=(a.flags&Ur)!==Zn;if(P||XD(w,t)?(k=!0,a.flags&=~Ur):(t===null||t.memoizedState!==null)&&(w=pD(w,NS)),w=bg(w),pd(a,w),t===null){Qt(a);var $=a.memoizedState;if($!==null){var Y=$.dehydrated;if(Y!==null)return tR(a,Y)}var le=g.children,me=g.fallback;if(k){var Ue=KD(a,le,me,h),Fe=a.child;return Fe.memoizedState=ww(h),a.memoizedState=bw,Ue}else return Ew(a,le)}else{var lt=t.memoizedState;if(lt!==null){var pt=lt.dehydrated;if(pt!==null)return nR(t,a,P,g,pt,lt,h)}if(k){var Ct=g.fallback,fn=g.children,Kn=QD(t,a,fn,Ct,h),Nn=a.child,Wr=t.child.memoizedState;return Nn.memoizedState=Wr===null?ww(h):ZD(Wr,h),Nn.childLanes=YD(t,h),a.memoizedState=bw,Kn}else{var Br=g.children,rt=JD(t,a,Br,h);return a.memoizedState=null,rt}}}function Ew(t,a,h){var g=t.mode,w={mode:"visible",children:a},k=Sw(w,g);return k.return=t,t.child=k,k}function KD(t,a,h,g){var w=t.mode,k=t.child,P={mode:"hidden",children:a},$,Y;return(w&Er)===xn&&k!==null?($=k,$.childLanes=qt,$.pendingProps=P,t.mode&zr&&($.actualDuration=0,$.actualStartTime=-1,$.selfBaseDuration=0,$.treeBaseDuration=0),Y=wd(h,w,g,null)):($=Sw(P,w),Y=wd(h,w,g,null)),$.return=t,Y.return=t,$.sibling=Y,t.child=$,Y}function Sw(t,a,h){return LC(t,a,qt,null)}function LT(t,a){return Zp(t,a)}function JD(t,a,h,g){var w=t.child,k=w.sibling,P=LT(w,{mode:"visible",children:h});if((a.mode&Er)===xn&&(P.lanes=g),P.return=a,P.sibling=null,k!==null){var $=a.deletions;$===null?(a.deletions=[k],a.flags|=Fl):$.push(k)}return a.child=P,P}function QD(t,a,h,g,w){var k=a.mode,P=t.child,$=P.sibling,Y={mode:"hidden",children:h},le;if((k&Er)===xn&&a.child!==P){var me=a.child;le=me,le.childLanes=qt,le.pendingProps=Y,a.mode&zr&&(le.actualDuration=0,le.actualStartTime=-1,le.selfBaseDuration=P.selfBaseDuration,le.treeBaseDuration=P.treeBaseDuration),a.deletions=null}else le=LT(P,Y),le.subtreeFlags=P.subtreeFlags&ul;var Ue;return $!==null?Ue=Zp($,g):(Ue=wd(g,k,w,null),Ue.flags|=ta),Ue.return=a,le.return=a,le.sibling=Ue,a.child=le,Ue}function r0(t,a,h,g){g!==null&&ri(g),$c(a,t.child,null,h);var w=a.pendingProps,k=w.children,P=Ew(a,k);return P.flags|=ta,a.memoizedState=null,P}function eR(t,a,h,g,w){var k=a.mode,P={mode:"visible",children:h},$=Sw(P,k),Y=wd(g,k,w,null);return Y.flags|=ta,$.return=a,Y.return=a,$.sibling=Y,a.child=$,(a.mode&Er)!==xn&&$c(a,t.child,null,w),Y}function tR(t,a,h){return(t.mode&Er)===xn?(C("Cannot hydrate Suspense in legacy mode. Switch from ReactDOM.hydrate(element, container) to ReactDOMClient.hydrateRoot(container, <App />).render(element) or remove the Suspense components from the server rendered components."),t.lanes=ur):sg(a)?t.lanes=fc:t.lanes=$i,null}function nR(t,a,h,g,w,k,P){if(h)if(a.flags&al){a.flags&=~al;var rt=cw(new Error("There was an error while hydrating this Suspense boundary. Switched to client rendering."));return r0(t,a,P,rt)}else{if(a.memoizedState!==null)return a.child=t.child,a.flags|=Ur,null;var Mt=g.children,it=g.fallback,Wt=eR(t,a,Mt,it,P),bn=a.child;return bn.memoizedState=ww(P),a.memoizedState=bw,Wt}else{if(Je(),(a.mode&Er)===xn)return r0(t,a,P,null);if(sg(w)){var $,Y,le;{var me=_x(w);$=me.digest,Y=me.message,le=me.stack}var Ue;Y?Ue=new Error(Y):Ue=new Error("The server could not finish this Suspense boundary, likely due to an error during server rendering. Switched to client rendering.");var Fe=cw(Ue,$,le);return r0(t,a,P,Fe)}var lt=_o(P,t.childLanes);if(Iu||lt){var pt=p0();if(pt!==null){var Ct=v_(pt,P);if(Ct!==Pa&&Ct!==k.retryLane){k.retryLane=Ct;var fn=Fi;Gs(t,Ct),lo(pt,t,Ct,fn)}}qw();var Kn=cw(new Error("This Suspense boundary received an update before it finished hydrating. This caused the boundary to switch to client rendering. The usual way to fix this is to wrap the original update in startTransition."));return r0(t,a,P,Kn)}else if(vx(w)){a.flags|=Ur,a.child=t.child;var Nn=MI.bind(null,t);return n1(w,Nn),null}else{nt(a,w,k.treeContext);var Wr=g.children,Br=Ew(a,Wr);return Br.flags|=ol,Br}}}function zT(t,a,h){t.lanes=wr(t.lanes,a);var g=t.alternate;g!==null&&(g.lanes=wr(g.lanes,a)),p1(t.return,a,h)}function rR(t,a,h){for(var g=a;g!==null;){if(g.tag===St){var w=g.memoizedState;w!==null&&zT(g,h,t)}else if(g.tag===qn)zT(g,h,t);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)return;for(;g.sibling===null;){if(g.return===null||g.return===t)return;g=g.return}g.sibling.return=g.return,g=g.sibling}}function iR(t){for(var a=t,h=null;a!==null;){var g=a.alternate;g!==null&&Px(g)===null&&(h=a),a=a.sibling}return h}function aR(t){if(t!==void 0&&t!=="forwards"&&t!=="backwards"&&t!=="together"&&!yw[t])if(yw[t]=!0,typeof t=="string")switch(t.toLowerCase()){case"together":case"forwards":case"backwards":{C('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',t,t.toLowerCase());break}case"forward":case"backward":{C('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',t,t.toLowerCase());break}default:C('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',t);break}else C('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',t)}function oR(t,a){t!==void 0&&!n0[t]&&(t!=="collapsed"&&t!=="hidden"?(n0[t]=!0,C('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',t)):a!=="forwards"&&a!=="backwards"&&(n0[t]=!0,C('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',t)))}function PT(t,a){{var h=Sn(t),g=!h&&typeof Qi(t)=="function";if(h||g){var w=h?"array":"iterable";return C("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",w,a,w),!1}}return!0}function sR(t,a){if((a==="forwards"||a==="backwards")&&t!==void 0&&t!==null&&t!==!1)if(Sn(t)){for(var h=0;h<t.length;h++)if(!PT(t[h],h))return}else{var g=Qi(t);if(typeof g=="function"){var w=g.call(t);if(w)for(var k=w.next(),P=0;!k.done;k=w.next()){if(!PT(k.value,P))return;P++}}else C('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',a)}}function Tw(t,a,h,g,w){var k=t.memoizedState;k===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(k.isBackwards=a,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=h,k.tailMode=w)}function OT(t,a,h){var g=a.pendingProps,w=g.revealOrder,k=g.tail,P=g.children;aR(w),oR(k,w),sR(P,w),ds(t,a,P,h);var $=ku.current,Y=E1($,Ev);if(Y)$=S1($,Ev),a.flags|=Ur;else{var le=t!==null&&(t.flags&Ur)!==Zn;le&&rR(a,a.child,h),$=bg($)}if(pd(a,$),(a.mode&Er)===xn)a.memoizedState=null;else switch(w){case"forwards":{var me=iR(a.child),Ue;me===null?(Ue=a.child,a.child=null):(Ue=me.sibling,me.sibling=null),Tw(a,!1,Ue,me,k);break}case"backwards":{var Fe=null,lt=a.child;for(a.child=null;lt!==null;){var pt=lt.alternate;if(pt!==null&&Px(pt)===null){a.child=lt;break}var Ct=lt.sibling;lt.sibling=Fe,Fe=lt,lt=Ct}Tw(a,!0,Fe,null,k);break}case"together":{Tw(a,!1,null,null,void 0);break}default:a.memoizedState=null}return a.child}function lR(t,a,h){x1(a,a.stateNode.containerInfo);var g=a.pendingProps;return t===null?a.child=$c(a,null,g,h):ds(t,a,g,h),a.child}var BT=!1;function uR(t,a,h){var g=a.type,w=g._context,k=a.pendingProps,P=a.memoizedProps,$=k.value;{"value"in k||BT||(BT=!0,C("The `value` prop is required for the `<Context.Provider>`. Did you misspell it or forget to pass it?"));var Y=a.type.propTypes;Y&&js(Y,k,"prop","Context.Provider")}if(xv(a,w,$),P!==null){var le=P.value;if(co(le,$)){if(P.children===k.children&&!Lp())return Kh(t,a,h)}else aD(a,w,h)}var me=k.children;return ds(t,a,me,h),a.child}var FT=!1;function cR(t,a,h){var g=a.type;g._context===void 0?g!==g.Consumer&&(FT||(FT=!0,C("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):g=g._context;var w=a.pendingProps,k=w.children;typeof k!="function"&&C("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),_g(a,h);var P=Za(g);Pt(a);var $;return Iv.current=a,Ka(!0),$=k(P),Ka(!1),pn(),a.flags|=mu,ds(t,a,$,h),a.child}function Pv(){Iu=!0}function i0(t,a){(a.mode&Er)===xn&&t!==null&&(t.alternate=null,a.alternate=null,a.flags|=ta)}function Kh(t,a,h){return t!==null&&(a.dependencies=t.dependencies),dT(),Wv(a.lanes),_o(h,a.childLanes)?(Tx(t,a),a.child):null}function hR(t,a,h){{var g=a.return;if(g===null)throw new Error("Cannot swap the root fiber.");if(t.alternate=null,a.alternate=null,h.index=a.index,h.sibling=a.sibling,h.return=a.return,h.ref=a.ref,a===g.child)g.child=h;else{var w=g.child;if(w===null)throw new Error("Expected parent to have a child.");for(;w.sibling!==a;)if(w=w.sibling,w===null)throw new Error("Expected to find the previous sibling.");w.sibling=h}var k=g.deletions;return k===null?(g.deletions=[t],g.flags|=Fl):k.push(t),h.flags|=ta,h}}function Cw(t,a){var h=t.lanes;return!!_o(h,a)}function fR(t,a,h){switch(a.tag){case H:DT(a),a.stateNode,Gn();break;case J:BS(a);break;case N:{var g=a.type;gl(g)&&fg(a);break}case X:x1(a,a.stateNode.containerInfo);break;case Ne:{var w=a.memoizedProps.value,k=a.type._context;xv(a,k,w);break}case Et:{var P=_o(h,a.childLanes);P&&(a.flags|=Ar);{var $=a.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}}break;case St:{var Y=a.memoizedState;if(Y!==null){if(Y.dehydrated!==null)return pd(a,bg(ku.current)),a.flags|=Ur,null;var le=a.child,me=le.childLanes;if(_o(h,me))return IT(t,a,h);pd(a,bg(ku.current));var Ue=Kh(t,a,h);return Ue!==null?Ue.sibling:null}else pd(a,bg(ku.current));break}case qn:{var Fe=(t.flags&Ur)!==Zn,lt=_o(h,a.childLanes);if(Fe){if(lt)return OT(t,a,h);a.flags|=Ur}var pt=a.memoizedState;if(pt!==null&&(pt.rendering=null,pt.tail=null,pt.lastEffect=null),pd(a,ku.current),lt)break;return null}case et:case $t:return a.lanes=qt,MT(t,a,h)}return Kh(t,a,h)}function NT(t,a,h){if(a._debugNeedsRemount&&t!==null)return hR(t,a,nE(a.type,a.key,a.pendingProps,a._debugOwner||null,a.mode,a.lanes));if(t!==null){var g=t.memoizedProps,w=a.pendingProps;if(g!==w||Lp()||a.type!==t.type)Iu=!0;else{var k=Cw(t,h);if(!k&&(a.flags&Ur)===Zn)return Iu=!1,fR(t,a,h);(t.flags&xh)!==Zn?Iu=!0:Iu=!1}}else if(Iu=!1,cr()&&m(a)){var P=a.index,$=_();I(a,$,P)}switch(a.lanes=qt,a.tag){case G:return WD(t,a,a.type,h);case Mn:{var Y=a.elementType;return qD(t,a,Y,h)}case s:{var le=a.type,me=a.pendingProps,Ue=a.elementType===le?me:Ru(le,me);return vw(t,a,le,Ue,h)}case N:{var Fe=a.type,lt=a.pendingProps,pt=a.elementType===Fe?lt:Ru(Fe,lt);return kT(t,a,Fe,pt,h)}case H:return VD(t,a,h);case J:return $D(t,a,h);case Pe:return GD(t,a);case St:return IT(t,a,h);case X:return lR(t,a,h);case Xe:{var Ct=a.type,fn=a.pendingProps,Kn=a.elementType===Ct?fn:Ru(Ct,fn);return ST(t,a,Ct,Kn,h)}case Re:return ND(t,a,h);case qe:return UD(t,a,h);case Et:return jD(t,a,h);case Ne:return uR(t,a,h);case je:return cR(t,a,h);case Qe:{var Nn=a.type,Wr=a.pendingProps,Br=Ru(Nn,Wr);if(a.type!==a.elementType){var rt=Nn.propTypes;rt&&js(rt,Br,"prop",yr(Nn))}return Br=Ru(Nn.type,Br),TT(t,a,Nn,Br,h)}case Nt:return CT(t,a,a.type,a.pendingProps,h);case dn:{var Mt=a.type,it=a.pendingProps,Wt=a.elementType===Mt?it:Ru(Mt,it);return HD(t,a,Mt,Wt,h)}case qn:return OT(t,a,h);case Jn:break;case et:return MT(t,a,h)}throw new Error("Unknown unit of work tag ("+a.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function Mg(t){t.flags|=Ar}function UT(t){t.flags|=Nl,t.flags|=sl}var jT,Mw,VT,$T;jT=function(t,a,h,g){for(var w=a.child;w!==null;){if(w.tag===J||w.tag===Pe)Zb(t,w.stateNode);else if(w.tag!==X){if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===a)return;for(;w.sibling===null;){if(w.return===null||w.return===a)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Mw=function(t,a){},VT=function(t,a,h,g,w){var k=t.memoizedProps;if(k!==g){var P=a.stateNode,$=b1(),Y=Yb(P,h,k,g,w,$);a.updateQueue=Y,Y&&Mg(a)}},$T=function(t,a,h,g){h!==g&&Mg(a)};function Ov(t,a){if(!cr())switch(t.tailMode){case"hidden":{for(var h=t.tail,g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?t.tail=null:g.sibling=null;break}case"collapsed":{for(var w=t.tail,k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?!a&&t.tail!==null?t.tail.sibling=null:t.tail=null:k.sibling=null;break}}}function To(t){var a=t.alternate!==null&&t.alternate.child===t.child,h=qt,g=Zn;if(a){if((t.mode&zr)!==xn){for(var Y=t.selfBaseDuration,le=t.child;le!==null;)h=wr(h,wr(le.lanes,le.childLanes)),g|=le.subtreeFlags&ul,g|=le.flags&ul,Y+=le.treeBaseDuration,le=le.sibling;t.treeBaseDuration=Y}else for(var me=t.child;me!==null;)h=wr(h,wr(me.lanes,me.childLanes)),g|=me.subtreeFlags&ul,g|=me.flags&ul,me.return=t,me=me.sibling;t.subtreeFlags|=g}else{if((t.mode&zr)!==xn){for(var w=t.actualDuration,k=t.selfBaseDuration,P=t.child;P!==null;)h=wr(h,wr(P.lanes,P.childLanes)),g|=P.subtreeFlags,g|=P.flags,w+=P.actualDuration,k+=P.treeBaseDuration,P=P.sibling;t.actualDuration=w,t.treeBaseDuration=k}else for(var $=t.child;$!==null;)h=wr(h,wr($.lanes,$.childLanes)),g|=$.subtreeFlags,g|=$.flags,$.return=t,$=$.sibling;t.subtreeFlags|=g}return t.childLanes=h,a}function dR(t,a,h){if(Pn()&&(a.mode&Er)!==xn&&(a.flags&Ur)===Zn)return vi(a),Gn(),a.flags|=al|an|za,!1;var g=Yn(a);if(h!==null&&h.dehydrated!==null)if(t===null){if(!g)throw new Error("A dehydrated suspense component was completed without a hydrated node. This is probably a bug in React.");if(Cn(a),To(a),(a.mode&zr)!==xn){var w=h!==null;if(w){var k=a.child;k!==null&&(a.treeBaseDuration-=k.treeBaseDuration)}}return!1}else{if(Gn(),(a.flags&Ur)===Zn&&(a.memoizedState=null),a.flags|=Ar,To(a),(a.mode&zr)!==xn){var P=h!==null;if(P){var $=a.child;$!==null&&(a.treeBaseDuration-=$.treeBaseDuration)}}return!1}else return tr(),!0}function GT(t,a,h){var g=a.pendingProps;switch(V(a),a.tag){case G:case Mn:case Nt:case s:case Xe:case Re:case qe:case Et:case je:case Qe:return To(a),null;case N:{var w=a.type;return gl(w)&&Uc(a),To(a),null}case H:{var k=a.stateNode;if(xg(a),ld(a),C1(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),t===null||t.child===null){var P=Yn(a);if(P)Mg(a);else if(t!==null){var $=t.memoizedState;(!$.isDehydrated||(a.flags&al)!==Zn)&&(a.flags|=Ta,tr())}}return Mw(t,a),To(a),null}case J:{w1(a);var Y=OS(),le=a.type;if(t!==null&&a.stateNode!=null)VT(t,a,le,g,Y),t.ref!==a.ref&&UT(a);else{if(!g){if(a.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return To(a),null}var me=b1(),Ue=Yn(a);if(Ue)Qn(a,Y,me)&&Mg(a);else{var Fe=Wb(le,g,Y,me,a);jT(Fe,a,!1,!1),a.stateNode=Fe,Xb(Fe,le,g,Y)&&Mg(a)}a.ref!==null&&UT(a)}return To(a),null}case Pe:{var lt=g;if(t&&a.stateNode!=null){var pt=t.memoizedProps;$T(t,a,pt,lt)}else{if(typeof lt!="string"&&a.stateNode===null)throw new Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var Ct=OS(),fn=b1(),Kn=Yn(a);Kn?Vt(a)&&Mg(a):a.stateNode=nd(lt,Ct,fn,a)}return To(a),null}case St:{wg(a);var Nn=a.memoizedState;if(t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){var Wr=dR(t,a,Nn);if(!Wr)return a.flags&za?a:null}if((a.flags&Ur)!==Zn)return a.lanes=h,(a.mode&zr)!==xn&&K1(a),a;var Br=Nn!==null,rt=t!==null&&t.memoizedState!==null;if(Br!==rt&&Br){var Mt=a.child;if(Mt.flags|=La,(a.mode&Er)!==xn){var it=t===null&&(a.memoizedProps.unstable_avoidThisFallback!==!0||!Fn);it||E1(ku.current,NS)?pI():qw()}}var Wt=a.updateQueue;if(Wt!==null&&(a.flags|=Ar),To(a),(a.mode&zr)!==xn&&Br){var bn=a.child;bn!==null&&(a.treeBaseDuration-=bn.treeBaseDuration)}return null}case X:return xg(a),Mw(t,a),t===null&&d1(a.stateNode.containerInfo),To(a),null;case Ne:var mn=a.type._context;return Au(mn,a),To(a),null;case dn:{var or=a.type;return gl(or)&&Uc(a),To(a),null}case qn:{wg(a);var _r=a.memoizedState;if(_r===null)return To(a),null;var Pi=(a.flags&Ur)!==Zn,fi=_r.rendering;if(fi===null)if(Pi)Ov(_r,!1);else{var Na=gI()&&(t===null||(t.flags&Ur)===Zn);if(!Na)for(var di=a.child;di!==null;){var Da=Px(di);if(Da!==null){Pi=!0,a.flags|=Ur,Ov(_r,!1);var Ho=Da.updateQueue;return Ho!==null&&(a.updateQueue=Ho,a.flags|=Ar),a.subtreeFlags=Zn,Xh(a,h),pd(a,S1(ku.current,Ev)),a.child}di=di.sibling}_r.tail!==null&&te()>hC()&&(a.flags|=Ur,Pi=!0,Ov(_r,!1),a.lanes=p_)}else{if(!Pi){var Do=Px(fi);if(Do!==null){a.flags|=Ur,Pi=!0;var bl=Do.updateQueue;if(bl!==null&&(a.updateQueue=bl,a.flags|=Ar),Ov(_r,!0),_r.tail===null&&_r.tailMode==="hidden"&&!fi.alternate&&!cr())return To(a),null}else te()*2-_r.renderingStartTime>hC()&&h!==$i&&(a.flags|=Ur,Pi=!0,Ov(_r,!1),a.lanes=p_)}if(_r.isBackwards)fi.sibling=a.child,a.child=fi;else{var gs=_r.last;gs!==null?gs.sibling=fi:a.child=fi,_r.last=fi}}if(_r.tail!==null){var ys=_r.tail;_r.rendering=ys,_r.tail=ys.sibling,_r.renderingStartTime=te(),ys.sibling=null;var Wo=ku.current;return Pi?Wo=S1(Wo,Ev):Wo=bg(Wo),pd(a,Wo),ys}return To(a),null}case Jn:break;case et:case $t:{Gw(a);var nf=a.memoizedState,Pg=nf!==null;if(t!==null){var Jv=t.memoizedState,Jc=Jv!==null;Jc!==Pg&&!Ee&&(a.flags|=La)}return!Pg||(a.mode&Er)===xn?To(a):_o(Kc,$i)&&(To(a),a.subtreeFlags&(ta|Ar)&&(a.flags|=La)),null}case un:return null;case Hn:return null}throw new Error("Unknown unit of work tag ("+a.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function pR(t,a,h){switch(V(a),a.tag){case N:{var g=a.type;gl(g)&&Uc(a);var w=a.flags;return w&za?(a.flags=w&~za|Ur,(a.mode&zr)!==xn&&K1(a),a):null}case H:{a.stateNode,xg(a),ld(a),C1();var k=a.flags;return(k&za)!==Zn&&(k&Ur)===Zn?(a.flags=k&~za|Ur,a):null}case J:return w1(a),null;case St:{wg(a);var P=a.memoizedState;if(P!==null&&P.dehydrated!==null){if(a.alternate===null)throw new Error("Threw in newly mounted dehydrated component. This is likely a bug in React. Please file an issue.");Gn()}var $=a.flags;return $&za?(a.flags=$&~za|Ur,(a.mode&zr)!==xn&&K1(a),a):null}case qn:return wg(a),null;case X:return xg(a),null;case Ne:var Y=a.type._context;return Au(Y,a),null;case et:case $t:return Gw(a),null;case un:return null;default:return null}}function qT(t,a,h){switch(V(a),a.tag){case N:{var g=a.type.childContextTypes;g!=null&&Uc(a);break}case H:{a.stateNode,xg(a),ld(a),C1();break}case J:{w1(a);break}case X:xg(a);break;case St:wg(a);break;case qn:wg(a);break;case Ne:var w=a.type._context;Au(w,a);break;case et:case $t:Gw(a);break}}var HT=null;HT=new Set;var a0=!1,Co=!1,mR=typeof WeakSet=="function"?WeakSet:Set,Rn=null,Ag=null,kg=null;function gR(t){pu(null,function(){throw t}),Cf()}var yR=function(t,a){if(a.props=t.memoizedProps,a.state=t.memoizedState,t.mode&zr)try{Xc(),a.componentWillUnmount()}finally{Zc(t)}else a.componentWillUnmount()};function WT(t,a){try{yd(no,t)}catch(h){Ji(t,a,h)}}function Aw(t,a,h){try{yR(t,h)}catch(g){Ji(t,a,g)}}function vR(t,a,h){try{h.componentDidMount()}catch(g){Ji(t,a,g)}}function ZT(t,a){try{YT(t)}catch(h){Ji(t,a,h)}}function Dg(t,a){var h=t.ref;if(h!==null)if(typeof h=="function"){var g;try{if(Vi&&Ci&&t.mode&zr)try{Xc(),g=h(null)}finally{Zc(t)}else g=h(null)}catch(w){Ji(t,a,w)}typeof g=="function"&&C("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",lr(t))}else h.current=null}function o0(t,a,h){try{h()}catch(g){Ji(t,a,g)}}var XT=!1;function _R(t,a){ng(t.containerInfo),Rn=a,xR();var h=XT;return XT=!1,h}function xR(){for(;Rn!==null;){var t=Rn,a=t.child;(t.subtreeFlags&Eh)!==Zn&&a!==null?(a.return=t,Rn=a):bR()}}function bR(){for(;Rn!==null;){var t=Rn;pr(t);try{wR(t)}catch(h){Ji(t,t.return,h)}ei();var a=t.sibling;if(a!==null){a.return=t.return,Rn=a;return}Rn=t.return}}function wR(t){var a=t.alternate,h=t.flags;if((h&Ta)!==Zn){switch(pr(t),t.tag){case s:case Xe:case Nt:break;case N:{if(a!==null){var g=a.memoizedProps,w=a.memoizedState,k=t.stateNode;t.type===t.elementType&&!$p&&(k.props!==t.memoizedProps&&C("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lr(t)||"instance"),k.state!==t.memoizedState&&C("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lr(t)||"instance"));var P=k.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ru(t.type,g),w);{var $=HT;P===void 0&&!$.has(t.type)&&($.add(t.type),C("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",lr(t)))}k.__reactInternalSnapshotBeforeUpdate=P}break}case H:{{var Y=t.stateNode;e1(Y.containerInfo)}break}case J:case Pe:case X:case dn:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}ei()}}function Lu(t,a,h){var g=a.updateQueue,w=g!==null?g.lastEffect:null;if(w!==null){var k=w.next,P=k;do{if((P.tag&t)===t){var $=P.destroy;P.destroy=void 0,$!==void 0&&((t&So)!==qs?In(a):(t&no)!==qs&&jr(a),(t&qc)!==qs&&Xv(!0),o0(a,h,$),(t&qc)!==qs&&Xv(!1),(t&So)!==qs?vr():(t&no)!==qs&&ni())}P=P.next}while(P!==k)}}function yd(t,a){var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var w=g.next,k=w;do{if((k.tag&t)===t){(t&So)!==qs?Xn(a):(t&no)!==qs&&mr(a);var P=k.create;(t&qc)!==qs&&Xv(!0),k.destroy=P(),(t&qc)!==qs&&Xv(!1),(t&So)!==qs?sn():(t&no)!==qs&&gn();{var $=k.destroy;if($!==void 0&&typeof $!="function"){var Y=void 0;(k.tag&no)!==Zn?Y="useLayoutEffect":(k.tag&qc)!==Zn?Y="useInsertionEffect":Y="useEffect";var le=void 0;$===null?le=" You returned null. If your effect does not require clean up, return undefined (or nothing).":typeof $.then=="function"?le=`

It looks like you wrote `+Y+`(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:

`+Y+`(() => {
  async function fetchData() {
    // You can await here
    const response = await MyAPI.getData(someId);
    // ...
  }
  fetchData();
}, [someId]); // Or [] if effect doesn't need props or state

Learn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching`:le=" You returned: "+$,C("%s must not return anything besides a function, which is used for clean-up.%s",Y,le)}}}k=k.next}while(k!==w)}}function ER(t,a){if((a.flags&Ar)!==Zn)switch(a.tag){case Et:{var h=a.stateNode.passiveEffectDuration,g=a.memoizedProps,w=g.id,k=g.onPostCommit,P=hT(),$=a.alternate===null?"mount":"update";cT()&&($="nested-update"),typeof k=="function"&&k(w,$,h,P);var Y=a.return;e:for(;Y!==null;){switch(Y.tag){case H:var le=Y.stateNode;le.passiveEffectDuration+=h;break e;case Et:var me=Y.stateNode;me.passiveEffectDuration+=h;break e}Y=Y.return}break}}}function SR(t,a,h,g){if((h.flags&uc)!==Zn)switch(h.tag){case s:case Xe:case Nt:{if(!Co)if(h.mode&zr)try{Xc(),yd(no|to,h)}finally{Zc(h)}else yd(no|to,h);break}case N:{var w=h.stateNode;if(h.flags&Ar&&!Co)if(a===null)if(h.type===h.elementType&&!$p&&(w.props!==h.memoizedProps&&C("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lr(h)||"instance"),w.state!==h.memoizedState&&C("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lr(h)||"instance")),h.mode&zr)try{Xc(),w.componentDidMount()}finally{Zc(h)}else w.componentDidMount();else{var k=h.elementType===h.type?a.memoizedProps:Ru(h.type,a.memoizedProps),P=a.memoizedState;if(h.type===h.elementType&&!$p&&(w.props!==h.memoizedProps&&C("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lr(h)||"instance"),w.state!==h.memoizedState&&C("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lr(h)||"instance")),h.mode&zr)try{Xc(),w.componentDidUpdate(k,P,w.__reactInternalSnapshotBeforeUpdate)}finally{Zc(h)}else w.componentDidUpdate(k,P,w.__reactInternalSnapshotBeforeUpdate)}var $=h.updateQueue;$!==null&&(h.type===h.elementType&&!$p&&(w.props!==h.memoizedProps&&C("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",lr(h)||"instance"),w.state!==h.memoizedState&&C("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.state`. Please file an issue.",lr(h)||"instance")),PS(h,$,w));break}case H:{var Y=h.updateQueue;if(Y!==null){var le=null;if(h.child!==null)switch(h.child.tag){case J:le=h.child.stateNode;break;case N:le=h.child.stateNode;break}PS(h,Y,le)}break}case J:{var me=h.stateNode;if(a===null&&h.flags&Ar){var Ue=h.type,Fe=h.memoizedProps;Ic(me,Ue,Fe)}break}case Pe:break;case X:break;case Et:{{var lt=h.memoizedProps,pt=lt.onCommit,Ct=lt.onRender,fn=h.stateNode.effectDuration,Kn=hT(),Nn=a===null?"mount":"update";cT()&&(Nn="nested-update"),typeof Ct=="function"&&Ct(h.memoizedProps.id,Nn,h.actualDuration,h.treeBaseDuration,h.actualStartTime,Kn);{typeof pt=="function"&&pt(h.memoizedProps.id,Nn,fn,Kn),bI(h);var Wr=h.return;e:for(;Wr!==null;){switch(Wr.tag){case H:var Br=Wr.stateNode;Br.effectDuration+=fn;break e;case Et:var rt=Wr.stateNode;rt.effectDuration+=fn;break e}Wr=Wr.return}}}break}case St:{IR(t,h);break}case qn:case dn:case Jn:case et:case $t:case Hn:break;default:throw new Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}Co||h.flags&Nl&&YT(h)}function TR(t){switch(t.tag){case s:case Xe:case Nt:{if(t.mode&zr)try{Xc(),WT(t,t.return)}finally{Zc(t)}else WT(t,t.return);break}case N:{var a=t.stateNode;typeof a.componentDidMount=="function"&&vR(t,t.return,a),ZT(t,t.return);break}case J:{ZT(t,t.return);break}}}function CR(t,a){for(var h=null,g=t;;){if(g.tag===J){if(h===null){h=g;try{var w=g.stateNode;a?wp(w):Sp(g.stateNode,g.memoizedProps)}catch(P){Ji(t,t.return,P)}}}else if(g.tag===Pe){if(h===null)try{var k=g.stateNode;a?Ep(k):ag(k,g.memoizedProps)}catch(P){Ji(t,t.return,P)}}else if(!((g.tag===et||g.tag===$t)&&g.memoizedState!==null&&g!==t)){if(g.child!==null){g.child.return=g,g=g.child;continue}}if(g===t)return;for(;g.sibling===null;){if(g.return===null||g.return===t)return;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}function YT(t){var a=t.ref;if(a!==null){var h=t.stateNode,g;switch(t.tag){case J:g=h;break;default:g=h}if(typeof a=="function"){var w;if(t.mode&zr)try{Xc(),w=a(g)}finally{Zc(t)}else w=a(g);typeof w=="function"&&C("Unexpected return value from a callback ref in %s. A callback ref should not return a function.",lr(t))}else a.hasOwnProperty("current")||C("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().",lr(t)),a.current=g}}function MR(t){var a=t.alternate;a!==null&&(a.return=null),t.return=null}function KT(t){var a=t.alternate;a!==null&&(t.alternate=null,KT(a));{if(t.child=null,t.deletions=null,t.sibling=null,t.tag===J){var h=t.stateNode;h!==null&&Yl(h)}t.stateNode=null,t._debugOwner=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}}function AR(t){for(var a=t.return;a!==null;){if(JT(a))return a;a=a.return}throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}function JT(t){return t.tag===J||t.tag===H||t.tag===X}function QT(t){var a=t;e:for(;;){for(;a.sibling===null;){if(a.return===null||JT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==J&&a.tag!==Pe&&a.tag!==ut;){if(a.flags&ta||a.child===null||a.tag===X)continue e;a.child.return=a,a=a.child}if(!(a.flags&ta))return a.stateNode}}function kR(t){var a=AR(t);switch(a.tag){case J:{var h=a.stateNode;a.flags&da&&(nv(h),a.flags&=~da);var g=QT(t);Dw(t,g,h);break}case H:case X:{var w=a.stateNode.containerInfo,k=QT(t);kw(t,k,w);break}default:throw new Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}}function kw(t,a,h){var g=t.tag,w=g===J||g===Pe;if(w){var k=t.stateNode;a?Hh(h,k,a):Jb(h,k)}else if(g!==X){var P=t.child;if(P!==null){kw(P,a,h);for(var $=P.sibling;$!==null;)kw($,a,h),$=$.sibling}}}function Dw(t,a,h){var g=t.tag,w=g===J||g===Pe;if(w){var k=t.stateNode;a?yx(h,k,a):rv(h,k)}else if(g!==X){var P=t.child;if(P!==null){Dw(P,a,h);for(var $=P.sibling;$!==null;)Dw($,a,h),$=$.sibling}}}var Mo=null,zu=!1;function DR(t,a,h){{var g=a;e:for(;g!==null;){switch(g.tag){case J:{Mo=g.stateNode,zu=!1;break e}case H:{Mo=g.stateNode.containerInfo,zu=!0;break e}case X:{Mo=g.stateNode.containerInfo,zu=!0;break e}}g=g.return}if(Mo===null)throw new Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");eC(t,a,h),Mo=null,zu=!1}MR(h)}function vd(t,a,h){for(var g=h.child;g!==null;)eC(t,a,g),g=g.sibling}function eC(t,a,h){switch(tt(h),h.tag){case J:Co||Dg(h,a);case Pe:{{var g=Mo,w=zu;Mo=null,vd(t,a,h),Mo=g,zu=w,Mo!==null&&(zu?Lc(Mo,h.stateNode):Qb(Mo,h.stateNode))}return}case ut:{Mo!==null&&(zu?bp(Mo,h.stateNode):iv(Mo,h.stateNode));return}case X:{{var k=Mo,P=zu;Mo=h.stateNode.containerInfo,zu=!0,vd(t,a,h),Mo=k,zu=P}return}case s:case Xe:case Qe:case Nt:{if(!Co){var $=h.updateQueue;if($!==null){var Y=$.lastEffect;if(Y!==null){var le=Y.next,me=le;do{var Ue=me,Fe=Ue.destroy,lt=Ue.tag;Fe!==void 0&&((lt&qc)!==qs?o0(h,a,Fe):(lt&no)!==qs&&(jr(h),h.mode&zr?(Xc(),o0(h,a,Fe),Zc(h)):o0(h,a,Fe),ni())),me=me.next}while(me!==le)}}}vd(t,a,h);return}case N:{if(!Co){Dg(h,a);var pt=h.stateNode;typeof pt.componentWillUnmount=="function"&&Aw(h,a,pt)}vd(t,a,h);return}case Jn:{vd(t,a,h);return}case et:{if(h.mode&Er){var Ct=Co;Co=Ct||h.memoizedState!==null,vd(t,a,h),Co=Ct}else vd(t,a,h);break}default:{vd(t,a,h);return}}}function RR(t){t.memoizedState}function IR(t,a){var h=a.memoizedState;if(h===null){var g=a.alternate;if(g!==null){var w=g.memoizedState;if(w!==null){var k=w.dehydrated;k!==null&&av(k)}}}}function tC(t){var a=t.updateQueue;if(a!==null){t.updateQueue=null;var h=t.stateNode;h===null&&(h=t.stateNode=new mR),a.forEach(function(g){var w=AI.bind(null,t,g);if(!h.has(g)){if(h.add(g),Oe)if(Ag!==null&&kg!==null)Zv(kg,Ag);else throw Error("Expected finished root and lanes to be set. This is a bug in React.");g.then(w,w)}})}}function LR(t,a,h){Ag=h,kg=t,pr(a),nC(a,t),pr(a),Ag=null,kg=null}function Pu(t,a,h){var g=a.deletions;if(g!==null)for(var w=0;w<g.length;w++){var k=g[w];try{DR(t,a,k)}catch(Y){Ji(k,a,Y)}}var P=Fu();if(a.subtreeFlags&Af)for(var $=a.child;$!==null;)pr($),nC($,t),$=$.sibling;pr(P)}function nC(t,a,h){var g=t.alternate,w=t.flags;switch(t.tag){case s:case Xe:case Qe:case Nt:{if(Pu(a,t),Yc(t),w&Ar){try{Lu(qc|to,t,t.return),yd(qc|to,t)}catch(or){Ji(t,t.return,or)}if(t.mode&zr){try{Xc(),Lu(no|to,t,t.return)}catch(or){Ji(t,t.return,or)}Zc(t)}else try{Lu(no|to,t,t.return)}catch(or){Ji(t,t.return,or)}}return}case N:{Pu(a,t),Yc(t),w&Nl&&g!==null&&Dg(g,g.return);return}case J:{Pu(a,t),Yc(t),w&Nl&&g!==null&&Dg(g,g.return);{if(t.flags&da){var k=t.stateNode;try{nv(k)}catch(or){Ji(t,t.return,or)}}if(w&Ar){var P=t.stateNode;if(P!=null){var $=t.memoizedProps,Y=g!==null?g.memoizedProps:$,le=t.type,me=t.updateQueue;if(t.updateQueue=null,me!==null)try{gx(P,me,le,Y,$,t)}catch(or){Ji(t,t.return,or)}}}}return}case Pe:{if(Pu(a,t),Yc(t),w&Ar){if(t.stateNode===null)throw new Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var Ue=t.stateNode,Fe=t.memoizedProps,lt=g!==null?g.memoizedProps:Fe;try{ig(Ue,lt,Fe)}catch(or){Ji(t,t.return,or)}}return}case H:{if(Pu(a,t),Yc(t),w&Ar&&g!==null){var pt=g.memoizedState;if(pt.isDehydrated)try{o1(a.containerInfo)}catch(or){Ji(t,t.return,or)}}return}case X:{Pu(a,t),Yc(t);return}case St:{Pu(a,t),Yc(t);var Ct=t.child;if(Ct.flags&La){var fn=Ct.stateNode,Kn=Ct.memoizedState,Nn=Kn!==null;if(fn.isHidden=Nn,Nn){var Wr=Ct.alternate!==null&&Ct.alternate.memoizedState!==null;Wr||dI()}}if(w&Ar){try{RR(t)}catch(or){Ji(t,t.return,or)}tC(t)}return}case et:{var Br=g!==null&&g.memoizedState!==null;if(t.mode&Er){var rt=Co;Co=rt||Br,Pu(a,t),Co=rt}else Pu(a,t);if(Yc(t),w&La){var Mt=t.stateNode,it=t.memoizedState,Wt=it!==null,bn=t;if(Mt.isHidden=Wt,Wt&&!Br&&(bn.mode&Er)!==xn){Rn=bn;for(var mn=bn.child;mn!==null;)Rn=mn,PR(mn),mn=mn.sibling}CR(bn,Wt)}return}case qn:{Pu(a,t),Yc(t),w&Ar&&tC(t);return}case Jn:return;default:{Pu(a,t),Yc(t);return}}}function Yc(t){var a=t.flags;if(a&ta){try{kR(t)}catch(h){Ji(t,t.return,h)}t.flags&=~ta}a&ol&&(t.flags&=~ol)}function zR(t,a,h){Ag=h,kg=a,Rn=t,rC(t,a,h),Ag=null,kg=null}function rC(t,a,h){for(var g=(t.mode&Er)!==xn;Rn!==null;){var w=Rn,k=w.child;if(w.tag===et&&g){var P=w.memoizedState!==null,$=P||a0;if($){Rw(t,a,h);continue}else{var Y=w.alternate,le=Y!==null&&Y.memoizedState!==null,me=le||Co,Ue=a0,Fe=Co;a0=$,Co=me,Co&&!Fe&&(Rn=w,OR(w));for(var lt=k;lt!==null;)Rn=lt,rC(lt,a,h),lt=lt.sibling;Rn=w,a0=Ue,Co=Fe,Rw(t,a,h);continue}}(w.subtreeFlags&uc)!==Zn&&k!==null?(k.return=w,Rn=k):Rw(t,a,h)}}function Rw(t,a,h){for(;Rn!==null;){var g=Rn;if((g.flags&uc)!==Zn){var w=g.alternate;pr(g);try{SR(a,w,g,h)}catch(P){Ji(g,g.return,P)}ei()}if(g===t){Rn=null;return}var k=g.sibling;if(k!==null){k.return=g.return,Rn=k;return}Rn=g.return}}function PR(t){for(;Rn!==null;){var a=Rn,h=a.child;switch(a.tag){case s:case Xe:case Qe:case Nt:{if(a.mode&zr)try{Xc(),Lu(no,a,a.return)}finally{Zc(a)}else Lu(no,a,a.return);break}case N:{Dg(a,a.return);var g=a.stateNode;typeof g.componentWillUnmount=="function"&&Aw(a,a.return,g);break}case J:{Dg(a,a.return);break}case et:{var w=a.memoizedState!==null;if(w){iC(t);continue}break}}h!==null?(h.return=a,Rn=h):iC(t)}}function iC(t){for(;Rn!==null;){var a=Rn;if(a===t){Rn=null;return}var h=a.sibling;if(h!==null){h.return=a.return,Rn=h;return}Rn=a.return}}function OR(t){for(;Rn!==null;){var a=Rn,h=a.child;if(a.tag===et){var g=a.memoizedState!==null;if(g){aC(t);continue}}h!==null?(h.return=a,Rn=h):aC(t)}}function aC(t){for(;Rn!==null;){var a=Rn;pr(a);try{TR(a)}catch(g){Ji(a,a.return,g)}if(ei(),a===t){Rn=null;return}var h=a.sibling;if(h!==null){h.return=a.return,Rn=h;return}Rn=a.return}}function BR(t,a,h,g){Rn=a,FR(a,t,h,g)}function FR(t,a,h,g){for(;Rn!==null;){var w=Rn,k=w.child;(w.subtreeFlags&cc)!==Zn&&k!==null?(k.return=w,Rn=k):NR(t,a,h,g)}}function NR(t,a,h,g){for(;Rn!==null;){var w=Rn;if((w.flags&Oo)!==Zn){pr(w);try{UR(a,w,h,g)}catch(P){Ji(w,w.return,P)}ei()}if(w===t){Rn=null;return}var k=w.sibling;if(k!==null){k.return=w.return,Rn=k;return}Rn=w.return}}function UR(t,a,h,g){switch(a.tag){case s:case Xe:case Nt:{if(a.mode&zr){Y1();try{yd(So|to,a)}finally{X1(a)}}else yd(So|to,a);break}}}function jR(t){Rn=t,VR()}function VR(){for(;Rn!==null;){var t=Rn,a=t.child;if((Rn.flags&Fl)!==Zn){var h=t.deletions;if(h!==null){for(var g=0;g<h.length;g++){var w=h[g];Rn=w,qR(w,t)}{var k=t.alternate;if(k!==null){var P=k.child;if(P!==null){k.child=null;do{var $=P.sibling;P.sibling=null,P=$}while(P!==null)}}}Rn=t}}(t.subtreeFlags&cc)!==Zn&&a!==null?(a.return=t,Rn=a):$R()}}function $R(){for(;Rn!==null;){var t=Rn;(t.flags&Oo)!==Zn&&(pr(t),GR(t),ei());var a=t.sibling;if(a!==null){a.return=t.return,Rn=a;return}Rn=t.return}}function GR(t){switch(t.tag){case s:case Xe:case Nt:{t.mode&zr?(Y1(),Lu(So|to,t,t.return),X1(t)):Lu(So|to,t,t.return);break}}}function qR(t,a){for(;Rn!==null;){var h=Rn;pr(h),WR(h,a),ei();var g=h.child;g!==null?(g.return=h,Rn=g):HR(t)}}function HR(t){for(;Rn!==null;){var a=Rn,h=a.sibling,g=a.return;if(KT(a),a===t){Rn=null;return}if(h!==null){h.return=g,Rn=h;return}Rn=g}}function WR(t,a){switch(t.tag){case s:case Xe:case Nt:{t.mode&zr?(Y1(),Lu(So,t,a),X1(t)):Lu(So,t,a);break}}}function ZR(t){switch(t.tag){case s:case Xe:case Nt:{try{yd(no|to,t)}catch(h){Ji(t,t.return,h)}break}case N:{var a=t.stateNode;try{a.componentDidMount()}catch(h){Ji(t,t.return,h)}break}}}function XR(t){switch(t.tag){case s:case Xe:case Nt:{try{yd(So|to,t)}catch(a){Ji(t,t.return,a)}break}}}function YR(t){switch(t.tag){case s:case Xe:case Nt:{try{Lu(no|to,t,t.return)}catch(h){Ji(t,t.return,h)}break}case N:{var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Aw(t,t.return,a);break}}}function KR(t){switch(t.tag){case s:case Xe:case Nt:try{Lu(So|to,t,t.return)}catch(a){Ji(t,t.return,a)}}}if(typeof Symbol=="function"&&Symbol.for){var Bv=Symbol.for;Bv("selector.component"),Bv("selector.has_pseudo_class"),Bv("selector.role"),Bv("selector.test_id"),Bv("selector.text")}var JR=[];function QR(){JR.forEach(function(t){return t()})}var eI=x.ReactCurrentActQueue;function tI(t){{var a=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0,h=typeof jest<"u";return h&&a!==!1}}function oC(){{var t=typeof IS_REACT_ACT_ENVIRONMENT<"u"?IS_REACT_ACT_ENVIRONMENT:void 0;return!t&&eI.current!==null&&C("The current testing environment is not configured to support act(...)"),t}}var nI=Math.ceil,Iw=x.ReactCurrentDispatcher,Lw=x.ReactCurrentOwner,Ao=x.ReactCurrentBatchConfig,Ou=x.ReactCurrentActQueue,ao=0,sC=1,ko=2,nu=4,Jh=0,Fv=1,Gp=2,s0=3,Nv=4,lC=5,zw=6,Hr=ao,ps=null,ba=null,oo=qt,Kc=qt,Pw=Bc(qt),so=Jh,Uv=null,l0=qt,jv=qt,u0=qt,Vv=null,Hs=null,Ow=0,uC=500,cC=1/0,rI=500,Qh=null;function $v(){cC=te()+rI}function hC(){return cC}var c0=!1,Bw=null,Rg=null,qp=!1,_d=null,Gv=qt,Fw=[],Nw=null,iI=50,qv=0,Uw=null,jw=!1,h0=!1,aI=50,Ig=0,f0=null,Hv=Fi,d0=qt,fC=!1;function p0(){return ps}function ms(){return(Hr&(ko|nu))!==ao?te():(Hv!==Fi||(Hv=te()),Hv)}function xd(t){var a=t.mode;if((a&Er)===xn)return ur;if((Hr&ko)!==ao&&oo!==qt)return bu(oo);var h=Ni()!==hi;if(h){if(Ao.transition!==null){var g=Ao.transition;g._updatedFibers||(g._updatedFibers=new Set),g._updatedFibers.add(t)}return d0===Pa&&(d0=zf()),d0}var w=Gi();if(w!==Pa)return w;var k=Qy();return k}function oI(t){var a=t.mode;return(a&Er)===xn?ur:Qd()}function lo(t,a,h,g){DI(),fC&&C("useInsertionEffect must not schedule updates."),jw&&(h0=!0),Pf(t,h,g),(Hr&ko)!==qt&&t===ps?LI(a):(Oe&&__(t,a,h),zI(a),t===ps&&((Hr&ko)===ao&&(jv=wr(jv,h)),so===Nv&&bd(t,oo)),Ws(t,g),h===ur&&Hr===ao&&(a.mode&Er)===xn&&!Ou.isBatchingLegacy&&($v(),gg()))}function sI(t,a,h){var g=t.current;g.lanes=a,Pf(t,a,h),Ws(t,h)}function lI(t){return(Hr&ko)!==ao}function Ws(t,a){var h=t.callbackNode;_m(t,a);var g=gc(t,t===ps?oo:qt);if(g===qt){h!==null&&AC(h),t.callbackNode=null,t.callbackPriority=Pa;return}var w=Oa(g),k=t.callbackPriority;if(k===w&&!(Ou.current!==null&&h!==Zw)){h==null&&k!==ur&&C("Expected scheduled callback to exist. This error is likely caused by a bug in React. Please file an issue.");return}h!=null&&AC(h);var P;if(w===ur)t.tag===Cu?(Ou.isBatchingLegacy!==null&&(Ou.didScheduleLegacyUpdate=!0),yv(mC.bind(null,t))):gv(mC.bind(null,t)),Ou.current!==null?Ou.current.push(Mu):Kb(function(){(Hr&(ko|nu))===ao&&Mu()}),P=null;else{var $;switch(Bf(g)){case jo:$=ue;break;case rs:$=se;break;case pl:$=ce;break;case Of:$=ae;break;default:$=ce;break}P=Xw($,dC.bind(null,t))}t.callbackPriority=w,t.callbackNode=P}function dC(t,a){if(CD(),Hv=Fi,d0=qt,(Hr&(ko|nu))!==ao)throw new Error("Should not already be working.");var h=t.callbackNode,g=tf();if(g&&t.callbackNode!==h)return null;var w=gc(t,t===ps?oo:qt);if(w===qt)return null;var k=!Ls(t,w)&&!ly(t,w)&&!a,P=k?vI(t,w):g0(t,w);if(P!==Jh){if(P===Gp){var $=xm(t);$!==qt&&(w=$,P=Vw(t,$))}if(P===Fv){var Y=Uv;throw Hp(t,qt),bd(t,w),Ws(t,te()),Y}if(P===zw)bd(t,w);else{var le=!Ls(t,w),me=t.current.alternate;if(le&&!cI(me)){if(P=g0(t,w),P===Gp){var Ue=xm(t);Ue!==qt&&(w=Ue,P=Vw(t,Ue))}if(P===Fv){var Fe=Uv;throw Hp(t,qt),bd(t,w),Ws(t,te()),Fe}}t.finishedWork=me,t.finishedLanes=w,uI(t,P,w)}}return Ws(t,te()),t.callbackNode===h?dC.bind(null,t):null}function Vw(t,a){var h=Vv;if(xo(t)){var g=Hp(t,a);g.flags|=al,Ap(t.containerInfo)}var w=g0(t,a);if(w!==Gp){var k=Hs;Hs=h,k!==null&&pC(k)}return w}function pC(t){Hs===null?Hs=t:Hs.push.apply(Hs,t)}function uI(t,a,h){switch(a){case Jh:case Fv:throw new Error("Root did not complete. This is a bug in React.");case Gp:{Wp(t,Hs,Qh);break}case s0:{if(bd(t,h),sy(h)&&!kC()){var g=Ow+uC-te();if(g>10){var w=gc(t,qt);if(w!==qt)break;var k=t.suspendedLanes;if(!Ri(k,h)){ms(),cy(t,k);break}t.timeoutHandle=ev(Wp.bind(null,t,Hs,Qh),g);break}}Wp(t,Hs,Qh);break}case Nv:{if(bd(t,h),Lf(h))break;if(!kC()){var P=Mh(t,h),$=P,Y=te()-$,le=kI(Y)-Y;if(le>10){t.timeoutHandle=ev(Wp.bind(null,t,Hs,Qh),le);break}}Wp(t,Hs,Qh);break}case lC:{Wp(t,Hs,Qh);break}default:throw new Error("Unknown root exit status.")}}function cI(t){for(var a=t;;){if(a.flags&vo){var h=a.updateQueue;if(h!==null){var g=h.stores;if(g!==null)for(var w=0;w<g.length;w++){var k=g[w],P=k.getSnapshot,$=k.value;try{if(!co(P(),$))return!1}catch{return!1}}}}var Y=a.child;if(a.subtreeFlags&vo&&Y!==null){Y.return=a,a=Y;continue}if(a===t)return!0;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}return!0}function bd(t,a){a=yc(a,u0),a=yc(a,jv),Ah(t,a)}function mC(t){if(MD(),(Hr&(ko|nu))!==ao)throw new Error("Should not already be working.");tf();var a=gc(t,qt);if(!_o(a,ur))return Ws(t,te()),null;var h=g0(t,a);if(t.tag!==Cu&&h===Gp){var g=xm(t);g!==qt&&(a=g,h=Vw(t,g))}if(h===Fv){var w=Uv;throw Hp(t,qt),bd(t,a),Ws(t,te()),w}if(h===zw)throw new Error("Root did not complete. This is a bug in React.");var k=t.current.alternate;return t.finishedWork=k,t.finishedLanes=a,Wp(t,Hs,Qh),Ws(t,te()),null}function hI(t,a){a!==qt&&(wm(t,wr(a,ur)),Ws(t,te()),(Hr&(ko|nu))===ao&&($v(),Mu()))}function $w(t,a){var h=Hr;Hr|=sC;try{return t(a)}finally{Hr=h,Hr===ao&&!Ou.isBatchingLegacy&&($v(),gg())}}function fI(t,a,h,g,w){var k=Gi(),P=Ao.transition;try{return Ao.transition=null,Aa(jo),t(a,h,g,w)}finally{Aa(k),Ao.transition=P,Hr===ao&&$v()}}function ef(t){_d!==null&&_d.tag===Cu&&(Hr&(ko|nu))===ao&&tf();var a=Hr;Hr|=sC;var h=Ao.transition,g=Gi();try{return Ao.transition=null,Aa(jo),t?t():void 0}finally{Aa(g),Ao.transition=h,Hr=a,(Hr&(ko|nu))===ao&&Mu()}}function gC(){return(Hr&(ko|nu))!==ao}function m0(t,a){fo(Pw,Kc,t),Kc=wr(Kc,a)}function Gw(t){Kc=Pw.current,Ba(Pw,t)}function Hp(t,a){t.finishedWork=null,t.finishedLanes=qt;var h=t.timeoutHandle;if(h!==tv&&(t.timeoutHandle=tv,mx(h)),ba!==null)for(var g=ba.return;g!==null;){var w=g.alternate;qT(w,g),g=g.return}ps=t;var k=Zp(t.current,null);return ba=k,oo=Kc=a,so=Jh,Uv=null,l0=qt,jv=qt,u0=qt,Vv=null,Hs=null,sD(),Gr.discardPendingWarnings(),k}function yC(t,a){do{var h=ba;try{if(eo(),jS(),ei(),Lw.current=null,h===null||h.return===null){so=Fv,Uv=a,ba=null;return}if(Vi&&h.mode&zr&&e0(h,!0),Ti)if(pn(),a!==null&&typeof a=="object"&&typeof a.then=="function"){var g=a;ui(h,g,oo)}else li(h,a,oo);OD(t,h.return,h,a,oo),bC(h)}catch(w){a=w,ba===h&&h!==null?(h=h.return,ba=h):h=ba;continue}return}while(!0)}function vC(){var t=Iw.current;return Iw.current=Xx,t===null?Xx:t}function _C(t){Iw.current=t}function dI(){Ow=te()}function Wv(t){l0=wr(t,l0)}function pI(){so===Jh&&(so=s0)}function qw(){(so===Jh||so===s0||so===Gp)&&(so=Nv),ps!==null&&(Kd(l0)||Kd(jv))&&bd(ps,oo)}function mI(t){so!==Nv&&(so=Gp),Vv===null?Vv=[t]:Vv.push(t)}function gI(){return so===Jh}function g0(t,a){var h=Hr;Hr|=ko;var g=vC();if(ps!==t||oo!==a){if(Oe){var w=t.memoizedUpdaters;w.size>0&&(Zv(t,oo),w.clear()),x_(t,a)}Qh=hy(),Hp(t,a)}Di(a);do try{yI();break}catch(k){yC(t,k)}while(!0);if(eo(),Hr=h,_C(g),ba!==null)throw new Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");return Lr(),ps=null,oo=qt,so}function yI(){for(;ba!==null;)xC(ba)}function vI(t,a){var h=Hr;Hr|=ko;var g=vC();if(ps!==t||oo!==a){if(Oe){var w=t.memoizedUpdaters;w.size>0&&(Zv(t,oo),w.clear()),x_(t,a)}Qh=hy(),$v(),Hp(t,a)}Di(a);do try{_I();break}catch(k){yC(t,k)}while(!0);return eo(),_C(g),Hr=h,ba!==null?(ci(),Jh):(Lr(),ps=null,oo=qt,so)}function _I(){for(;ba!==null&&!B();)xC(ba)}function xC(t){var a=t.alternate;pr(t);var h;(t.mode&zr)!==xn?(Z1(t),h=Hw(a,t,Kc),e0(t,!0)):h=Hw(a,t,Kc),ei(),t.memoizedProps=t.pendingProps,h===null?bC(t):ba=h,Lw.current=null}function bC(t){var a=t;do{var h=a.alternate,g=a.return;if((a.flags&an)===Zn){pr(a);var w=void 0;if((a.mode&zr)===xn?w=GT(h,a,Kc):(Z1(a),w=GT(h,a,Kc),e0(a,!1)),ei(),w!==null){ba=w;return}}else{var k=pR(h,a);if(k!==null){k.flags&=Mf,ba=k;return}if((a.mode&zr)!==xn){e0(a,!1);for(var P=a.actualDuration,$=a.child;$!==null;)P+=$.actualDuration,$=$.sibling;a.actualDuration=P}if(g!==null)g.flags|=an,g.subtreeFlags=Zn,g.deletions=null;else{so=zw,ba=null;return}}var Y=a.sibling;if(Y!==null){ba=Y;return}a=g,ba=a}while(a!==null);so===Jh&&(so=lC)}function Wp(t,a,h){var g=Gi(),w=Ao.transition;try{Ao.transition=null,Aa(jo),xI(t,a,h,g)}finally{Ao.transition=w,Aa(g)}return null}function xI(t,a,h,g){do tf();while(_d!==null);if(RI(),(Hr&(ko|nu))!==ao)throw new Error("Should not already be working.");var w=t.finishedWork,k=t.finishedLanes;if(Ft(k),w===null)return Tt(),null;if(k===qt&&C("root.finishedLanes should not be empty during a commit. This is a bug in React."),t.finishedWork=null,t.finishedLanes=qt,w===t.current)throw new Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");t.callbackNode=null,t.callbackPriority=Pa;var P=wr(w.lanes,w.childLanes);y_(t,P),t===ps&&(ps=null,ba=null,oo=qt),((w.subtreeFlags&cc)!==Zn||(w.flags&cc)!==Zn)&&(qp||(qp=!0,Nw=h,Xw(ce,function(){return tf(),null})));var $=(w.subtreeFlags&(Eh|Af|uc|cc))!==Zn,Y=(w.flags&(Eh|Af|uc|cc))!==Zn;if($||Y){var le=Ao.transition;Ao.transition=null;var me=Gi();Aa(jo);var Ue=Hr;Hr|=nu,Lw.current=null,_R(t,w),fT(),LR(t,w,k),Hb(t.containerInfo),t.current=w,Ga(k),zR(w,t,k),Ca(),q(),Hr=Ue,Aa(me),Ao.transition=le}else t.current=w,fT();var Fe=qp;if(qp?(qp=!1,_d=t,Gv=k):(Ig=0,f0=null),P=t.pendingLanes,P===qt&&(Rg=null),Fe||TC(t.current,!1),We(w.stateNode,g),Oe&&t.memoizedUpdaters.clear(),QR(),Ws(t,te()),a!==null)for(var lt=t.onRecoverableError,pt=0;pt<a.length;pt++){var Ct=a[pt],fn=Ct.stack,Kn=Ct.digest;lt(Ct.value,{componentStack:fn,digest:Kn})}if(c0){c0=!1;var Nn=Bw;throw Bw=null,Nn}return _o(Gv,ur)&&t.tag!==Cu&&tf(),P=t.pendingLanes,_o(P,ur)?(TD(),t===Uw?qv++:(qv=0,Uw=t)):qv=0,Mu(),Tt(),null}function tf(){if(_d!==null){var t=Bf(Gv),a=tb(pl,t),h=Ao.transition,g=Gi();try{return Ao.transition=null,Aa(a),wI()}finally{Aa(g),Ao.transition=h}}return!1}function bI(t){Fw.push(t),qp||(qp=!0,Xw(ce,function(){return tf(),null}))}function wI(){if(_d===null)return!1;var t=Nw;Nw=null;var a=_d,h=Gv;if(_d=null,Gv=qt,(Hr&(ko|nu))!==ao)throw new Error("Cannot flush passive effects while already rendering.");jw=!0,h0=!1,Bo(h);var g=Hr;Hr|=nu,jR(a.current),BR(a,a.current,h,t);{var w=Fw;Fw=[];for(var k=0;k<w.length;k++){var P=w[k];ER(a,P)}}ks(),TC(a.current,!0),Hr=g,Mu(),h0?a===f0?Ig++:(Ig=0,f0=a):Ig=0,jw=!1,h0=!1,_t(a);{var $=a.current.stateNode;$.effectDuration=0,$.passiveEffectDuration=0}return!0}function wC(t){return Rg!==null&&Rg.has(t)}function EI(t){Rg===null?Rg=new Set([t]):Rg.add(t)}function SI(t){c0||(c0=!0,Bw=t)}var TI=SI;function EC(t,a,h){var g=Vp(h,a),w=xT(t,g,ur),k=fd(t,w,ur),P=ms();k!==null&&(Pf(k,ur,P),Ws(k,P))}function Ji(t,a,h){if(gR(h),Xv(!1),t.tag===H){EC(t,t,h);return}var g=null;for(g=a;g!==null;){if(g.tag===H){EC(g,t,h);return}else if(g.tag===N){var w=g.type,k=g.stateNode;if(typeof w.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&!wC(k)){var P=Vp(h,t),$=fw(g,P,ur),Y=fd(g,$,ur),le=ms();Y!==null&&(Pf(Y,ur,le),Ws(Y,le));return}}g=g.return}C(`Internal React error: Attempted to capture a commit phase error inside a detached tree. This indicates a bug in React. Likely causes include deleting the same fiber more than once, committing an already-finished tree, or an inconsistent return pointer.

Error message:

%s`,h)}function CI(t,a,h){var g=t.pingCache;g!==null&&g.delete(a);var w=ms();cy(t,h),PI(t),ps===t&&Ri(oo,h)&&(so===Nv||so===s0&&sy(oo)&&te()-Ow<uC?Hp(t,qt):u0=wr(u0,h)),Ws(t,w)}function SC(t,a){a===Pa&&(a=oI(t));var h=ms(),g=Gs(t,a);g!==null&&(Pf(g,a,h),Ws(g,h))}function MI(t){var a=t.memoizedState,h=Pa;a!==null&&(h=a.retryLane),SC(t,h)}function AI(t,a){var h=Pa,g;switch(t.tag){case St:g=t.stateNode;var w=t.memoizedState;w!==null&&(h=w.retryLane);break;case qn:g=t.stateNode;break;default:throw new Error("Pinged unknown suspense boundary type. This is probably a bug in React.")}g!==null&&g.delete(a),SC(t,h)}function kI(t){return t<120?120:t<480?480:t<1080?1080:t<1920?1920:t<3e3?3e3:t<4320?4320:nI(t/1960)*1960}function DI(){if(qv>iI)throw qv=0,Uw=null,new Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");Ig>aI&&(Ig=0,f0=null,C("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}function RI(){Gr.flushLegacyContextWarning(),Gr.flushPendingUnsafeLifecycleWarnings()}function TC(t,a){pr(t),y0(t,ll,YR),a&&y0(t,wh,KR),y0(t,ll,ZR),a&&y0(t,wh,XR),ei()}function y0(t,a,h){for(var g=t,w=null;g!==null;){var k=g.subtreeFlags&a;g!==w&&g.child!==null&&k!==Zn?g=g.child:((g.flags&a)!==Zn&&h(g),g.sibling!==null?g=g.sibling:g=w=g.return)}}var v0=null;function CC(t){{if((Hr&ko)!==ao||!(t.mode&Er))return;var a=t.tag;if(a!==G&&a!==H&&a!==N&&a!==s&&a!==Xe&&a!==Qe&&a!==Nt)return;var h=lr(t)||"ReactComponent";if(v0!==null){if(v0.has(h))return;v0.add(h)}else v0=new Set([h]);var g=ua;try{pr(t),C("Can't perform a React state update on a component that hasn't mounted yet. This indicates that you have a side-effect in your render function that asynchronously later calls tries to update the component. Move this work to useEffect instead.")}finally{g?pr(t):ei()}}}var Hw;{var II=null;Hw=function(t,a,h){var g=zC(II,a);try{return NT(t,a,h)}catch(k){if(mt()||k!==null&&typeof k=="object"&&typeof k.then=="function")throw k;if(eo(),jS(),qT(t,a),zC(a,g),a.mode&zr&&Z1(a),pu(null,NT,null,t,a,h),Wd()){var w=Cf();typeof w=="object"&&w!==null&&w._suppressLogging&&typeof k=="object"&&k!==null&&!k._suppressLogging&&(k._suppressLogging=!0)}throw k}}}var MC=!1,Ww;Ww=new Set;function LI(t){if(Ko&&!wD())switch(t.tag){case s:case Xe:case Nt:{var a=ba&&lr(ba)||"Unknown",h=a;if(!Ww.has(h)){Ww.add(h);var g=lr(t)||"Unknown";C("Cannot update a component (`%s`) while rendering a different component (`%s`). To locate the bad setState() call inside `%s`, follow the stack trace as described in https://reactjs.org/link/setstate-in-render",g,a,a)}break}case N:{MC||(C("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),MC=!0);break}}}function Zv(t,a){if(Oe){var h=t.memoizedUpdaters;h.forEach(function(g){__(t,g,a)})}}var Zw={};function Xw(t,a){{var h=Ou.current;return h!==null?(h.push(a),Zw):L(t,a)}}function AC(t){if(t!==Zw)return F(t)}function kC(){return Ou.current!==null}function zI(t){{if(t.mode&Er){if(!oC())return}else if(!tI()||Hr!==ao||t.tag!==s&&t.tag!==Xe&&t.tag!==Nt)return;if(Ou.current===null){var a=ua;try{pr(t),C(`An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`,lr(t))}finally{a?pr(t):ei()}}}}function PI(t){t.tag!==Cu&&oC()&&Ou.current===null&&C(`A suspended resource finished loading inside a test, but the event was not wrapped in act(...).

When testing, code that resolves suspended data should be wrapped into act(...):

act(() => {
  /* finish loading suspended data */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act`)}function Xv(t){fC=t}var ru=null,Lg=null,OI=function(t){ru=t};function zg(t){{if(ru===null)return t;var a=ru(t);return a===void 0?t:a.current}}function Yw(t){return zg(t)}function Kw(t){{if(ru===null)return t;var a=ru(t);if(a===void 0){if(t!=null&&typeof t.render=="function"){var h=zg(t.render);if(t.render!==h){var g={$$typeof:yt,render:h};return t.displayName!==void 0&&(g.displayName=t.displayName),g}}return t}return a.current}}function DC(t,a){{if(ru===null)return!1;var h=t.elementType,g=a.type,w=!1,k=typeof g=="object"&&g!==null?g.$$typeof:null;switch(t.tag){case N:{typeof g=="function"&&(w=!0);break}case s:{(typeof g=="function"||k===en)&&(w=!0);break}case Xe:{(k===yt||k===en)&&(w=!0);break}case Qe:case Nt:{(k===yn||k===en)&&(w=!0);break}default:return!1}if(w){var P=ru(h);if(P!==void 0&&P===ru(g))return!0}return!1}}function RC(t){{if(ru===null||typeof WeakSet!="function")return;Lg===null&&(Lg=new WeakSet),Lg.add(t)}}var BI=function(t,a){{if(ru===null)return;var h=a.staleFamilies,g=a.updatedFamilies;tf(),ef(function(){Jw(t.current,g,h)})}},FI=function(t,a){{if(t.context!==Eo)return;tf(),ef(function(){Yv(a,t,null,null)})}};function Jw(t,a,h){{var g=t.alternate,w=t.child,k=t.sibling,P=t.tag,$=t.type,Y=null;switch(P){case s:case Nt:case N:Y=$;break;case Xe:Y=$.render;break}if(ru===null)throw new Error("Expected resolveFamily to be set during hot reload.");var le=!1,me=!1;if(Y!==null){var Ue=ru(Y);Ue!==void 0&&(h.has(Ue)?me=!0:a.has(Ue)&&(P===N?me=!0:le=!0))}if(Lg!==null&&(Lg.has(t)||g!==null&&Lg.has(g))&&(me=!0),me&&(t._debugNeedsRemount=!0),me||le){var Fe=Gs(t,ur);Fe!==null&&lo(Fe,t,ur,Fi)}w!==null&&!me&&Jw(w,a,h),k!==null&&Jw(k,a,h)}}var NI=function(t,a){{var h=new Set,g=new Set(a.map(function(w){return w.current}));return Qw(t.current,g,h),h}};function Qw(t,a,h){{var g=t.child,w=t.sibling,k=t.tag,P=t.type,$=null;switch(k){case s:case Nt:case N:$=P;break;case Xe:$=P.render;break}var Y=!1;$!==null&&a.has($)&&(Y=!0),Y?UI(t,h):g!==null&&Qw(g,a,h),w!==null&&Qw(w,a,h)}}function UI(t,a){{var h=jI(t,a);if(h)return;for(var g=t;;){switch(g.tag){case J:a.add(g.stateNode);return;case X:a.add(g.stateNode.containerInfo);return;case H:a.add(g.stateNode.containerInfo);return}if(g.return===null)throw new Error("Expected to reach root first.");g=g.return}}}function jI(t,a){for(var h=t,g=!1;;){if(h.tag===J)g=!0,a.add(h.stateNode);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)return g;for(;h.sibling===null;){if(h.return===null||h.return===t)return g;h=h.return}h.sibling.return=h.return,h=h.sibling}return!1}var eE;{eE=!1;try{var IC=Object.preventExtensions({})}catch{eE=!0}}function VI(t,a,h,g){this.tag=t,this.key=h,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=a,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=g,this.flags=Zn,this.subtreeFlags=Zn,this.deletions=null,this.lanes=qt,this.childLanes=qt,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,!eE&&typeof Object.preventExtensions=="function"&&Object.preventExtensions(this)}var xl=function(t,a,h,g){return new VI(t,a,h,g)};function tE(t){var a=t.prototype;return!!(a&&a.isReactComponent)}function $I(t){return typeof t=="function"&&!tE(t)&&t.defaultProps===void 0}function GI(t){if(typeof t=="function")return tE(t)?N:s;if(t!=null){var a=t.$$typeof;if(a===yt)return Xe;if(a===yn)return Qe}return G}function Zp(t,a){var h=t.alternate;h===null?(h=xl(t.tag,a,t.key,t.mode),h.elementType=t.elementType,h.type=t.type,h.stateNode=t.stateNode,h._debugSource=t._debugSource,h._debugOwner=t._debugOwner,h._debugHookTypes=t._debugHookTypes,h.alternate=t,t.alternate=h):(h.pendingProps=a,h.type=t.type,h.flags=Zn,h.subtreeFlags=Zn,h.deletions=null,h.actualDuration=0,h.actualStartTime=-1),h.flags=t.flags&ul,h.childLanes=t.childLanes,h.lanes=t.lanes,h.child=t.child,h.memoizedProps=t.memoizedProps,h.memoizedState=t.memoizedState,h.updateQueue=t.updateQueue;var g=t.dependencies;switch(h.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},h.sibling=t.sibling,h.index=t.index,h.ref=t.ref,h.selfBaseDuration=t.selfBaseDuration,h.treeBaseDuration=t.treeBaseDuration,h._debugNeedsRemount=t._debugNeedsRemount,h.tag){case G:case s:case Nt:h.type=zg(t.type);break;case N:h.type=Yw(t.type);break;case Xe:h.type=Kw(t.type);break}return h}function qI(t,a){t.flags&=ul|ta;var h=t.alternate;if(h===null)t.childLanes=qt,t.lanes=a,t.child=null,t.subtreeFlags=Zn,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null,t.selfBaseDuration=0,t.treeBaseDuration=0;else{t.childLanes=h.childLanes,t.lanes=h.lanes,t.child=h.child,t.subtreeFlags=Zn,t.deletions=null,t.memoizedProps=h.memoizedProps,t.memoizedState=h.memoizedState,t.updateQueue=h.updateQueue,t.type=h.type;var g=h.dependencies;t.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},t.selfBaseDuration=h.selfBaseDuration,t.treeBaseDuration=h.treeBaseDuration}return t}function HI(t,a,h){var g;return t===dg?(g=Er,a===!0&&(g|=Li,g|=Ma)):g=xn,Oe&&(g|=zr),xl(H,null,null,g)}function nE(t,a,h,g,w,k){var P=G,$=t;if(typeof t=="function")tE(t)?(P=N,$=Yw($)):$=zg($);else if(typeof t=="string")P=J;else e:switch(t){case xe:return wd(h.children,w,k,a);case dt:P=qe,w|=Li,(w&Er)!==xn&&(w|=Ma);break;case Dt:return WI(h,w,k,a);case jt:return ZI(h,w,k,a);case rn:return XI(h,w,k,a);case Nr:return LC(h,w,k,a);case Tn:case En:case $r:case Ea:case Xr:default:{if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:P=Ne;break e;case ot:P=je;break e;case yt:P=Xe,$=Kw($);break e;case yn:P=Qe;break e;case en:P=Mn,$=null;break e}var Y="";{(t===void 0||typeof t=="object"&&t!==null&&Object.keys(t).length===0)&&(Y+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var le=g?lr(g):null;le&&(Y+=`

Check the render method of \``+le+"`.")}throw new Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) "+("but got: "+(t==null?t:typeof t)+"."+Y))}}var me=xl(P,h,a,w);return me.elementType=t,me.type=$,me.lanes=k,me._debugOwner=g,me}function rE(t,a,h){var g=null;g=t._owner;var w=t.type,k=t.key,P=t.props,$=nE(w,k,P,g,a,h);return $._debugSource=t._source,$._debugOwner=t._owner,$}function wd(t,a,h,g){var w=xl(Re,t,g,a);return w.lanes=h,w}function WI(t,a,h,g){typeof t.id!="string"&&C('Profiler must specify an "id" of type `string` as a prop. Received the type `%s` instead.',typeof t.id);var w=xl(Et,t,g,a|zr);return w.elementType=Dt,w.lanes=h,w.stateNode={effectDuration:0,passiveEffectDuration:0},w}function ZI(t,a,h,g){var w=xl(St,t,g,a);return w.elementType=jt,w.lanes=h,w}function XI(t,a,h,g){var w=xl(qn,t,g,a);return w.elementType=rn,w.lanes=h,w}function LC(t,a,h,g){var w=xl(et,t,g,a);w.elementType=Nr,w.lanes=h;var k={isHidden:!1};return w.stateNode=k,w}function iE(t,a,h){var g=xl(Pe,t,null,a);return g.lanes=h,g}function YI(){var t=xl(J,null,null,xn);return t.elementType="DELETED",t}function KI(t){var a=xl(ut,null,null,xn);return a.stateNode=t,a}function aE(t,a,h){var g=t.children!==null?t.children:[],w=xl(X,g,t.key,a);return w.lanes=h,w.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},w}function zC(t,a){return t===null&&(t=xl(G,null,null,xn)),t.tag=a.tag,t.key=a.key,t.elementType=a.elementType,t.type=a.type,t.stateNode=a.stateNode,t.return=a.return,t.child=a.child,t.sibling=a.sibling,t.index=a.index,t.ref=a.ref,t.pendingProps=a.pendingProps,t.memoizedProps=a.memoizedProps,t.updateQueue=a.updateQueue,t.memoizedState=a.memoizedState,t.dependencies=a.dependencies,t.mode=a.mode,t.flags=a.flags,t.subtreeFlags=a.subtreeFlags,t.deletions=a.deletions,t.lanes=a.lanes,t.childLanes=a.childLanes,t.alternate=a.alternate,t.actualDuration=a.actualDuration,t.actualStartTime=a.actualStartTime,t.selfBaseDuration=a.selfBaseDuration,t.treeBaseDuration=a.treeBaseDuration,t._debugSource=a._debugSource,t._debugOwner=a._debugOwner,t._debugNeedsRemount=a._debugNeedsRemount,t._debugHookTypes=a._debugHookTypes,t}function JI(t,a,h,g,w){this.tag=a,this.containerInfo=t,this.pendingChildren=null,this.current=null,this.pingCache=null,this.finishedWork=null,this.timeoutHandle=tv,this.context=null,this.pendingContext=null,this.callbackNode=null,this.callbackPriority=Pa,this.eventTimes=bm(qt),this.expirationTimes=bm(Fi),this.pendingLanes=qt,this.suspendedLanes=qt,this.pingedLanes=qt,this.expiredLanes=qt,this.mutableReadLanes=qt,this.finishedLanes=qt,this.entangledLanes=qt,this.entanglements=bm(qt),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null,this.effectDuration=0,this.passiveEffectDuration=0;{this.memoizedUpdaters=new Set;for(var k=this.pendingUpdatersLaneMap=[],P=0;P<Th;P++)k.push(new Set)}switch(a){case dg:this._debugRootType=h?"hydrateRoot()":"createRoot()";break;case Cu:this._debugRootType=h?"hydrate()":"render()";break}}function PC(t,a,h,g,w,k,P,$,Y,le){var me=new JI(t,a,h,$,Y),Ue=HI(a,k);me.current=Ue,Ue.stateNode=me;{var Fe={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null};Ue.memoizedState=Fe}return v1(Ue),me}var oE="18.3.1";function QI(t,a,h){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return bi(g),{$$typeof:jn,key:g==null?null:""+g,children:t,containerInfo:a,implementation:h}}var sE,lE;sE=!1,lE={};function OC(t){if(!t)return Eo;var a=yo(t),h=Sx(a);if(a.tag===N){var g=a.type;if(gl(g))return pv(a,g,h)}return h}function eL(t,a){{var h=yo(t);if(h===void 0){if(typeof t.render=="function")throw new Error("Unable to find node on an unmounted component.");var g=Object.keys(t).join(",");throw new Error("Argument appears to not be a ReactComponent. Keys: "+g)}var w=v(h);if(w===null)return null;if(w.mode&Li){var k=lr(h)||"Component";if(!lE[k]){lE[k]=!0;var P=ua;try{pr(w),h.mode&Li?C("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",a,a,k):C("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node",a,a,k)}finally{P?pr(P):ei()}}}return w.stateNode}}function BC(t,a,h,g,w,k,P,$){var Y=!1,le=null;return PC(t,a,Y,le,h,g,w,k,P)}function FC(t,a,h,g,w,k,P,$,Y,le){var me=!0,Ue=PC(h,g,me,t,w,k,P,$,Y);Ue.context=OC(null);var Fe=Ue.current,lt=ms(),pt=xd(Fe),Ct=Yh(lt,pt);return Ct.callback=a??null,fd(Fe,Ct,pt),sI(Ue,pt,lt),Ue}function Yv(t,a,h,g){Ot(a,t);var w=a.current,k=ms(),P=xd(w);sa(P);var $=OC(h);a.context===null?a.context=$:a.pendingContext=$,Ko&&ua!==null&&!sE&&(sE=!0,C(`Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.

Check the render method of %s.`,lr(ua)||"Unknown"));var Y=Yh(k,P);Y.payload={element:t},g=g===void 0?null:g,g!==null&&(typeof g!="function"&&C("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",g),Y.callback=g);var le=fd(w,Y,P);return le!==null&&(lo(le,w,P,k),Dx(le,w,P)),P}function _0(t){var a=t.current;if(!a.child)return null;switch(a.child.tag){case J:return a.child.stateNode;default:return a.child.stateNode}}function tL(t){switch(t.tag){case H:{var a=t.stateNode;if(xo(a)){var h=g_(a);hI(a,h)}break}case St:{ef(function(){var w=Gs(t,ur);if(w!==null){var k=ms();lo(w,t,ur,k)}});var g=ur;uE(t,g);break}}}function NC(t,a){var h=t.memoizedState;h!==null&&h.dehydrated!==null&&(h.retryLane=eb(h.retryLane,a))}function uE(t,a){NC(t,a);var h=t.alternate;h&&NC(h,a)}function nL(t){if(t.tag===St){var a=Bi,h=Gs(t,a);if(h!==null){var g=ms();lo(h,t,a,g)}uE(t,a)}}function rL(t){if(t.tag===St){var a=xd(t),h=Gs(t,a);if(h!==null){var g=ms();lo(h,t,a,g)}uE(t,a)}}function UC(t){var a=M(t);return a===null?null:a.stateNode}var jC=function(t){return null};function iL(t){return jC(t)}var VC=function(t){return!1};function aL(t){return VC(t)}var $C=null,GC=null,qC=null,HC=null,WC=null,ZC=null,XC=null,YC=null,KC=null;{var JC=function(t,a,h){var g=a[h],w=Sn(t)?t.slice():nr({},t);return h+1===a.length?(Sn(w)?w.splice(g,1):delete w[g],w):(w[g]=JC(t[g],a,h+1),w)},QC=function(t,a){return JC(t,a,0)},eM=function(t,a,h,g){var w=a[g],k=Sn(t)?t.slice():nr({},t);if(g+1===a.length){var P=h[g];k[P]=k[w],Sn(k)?k.splice(w,1):delete k[w]}else k[w]=eM(t[w],a,h,g+1);return k},tM=function(t,a,h){if(a.length!==h.length){R("copyWithRename() expects paths of the same length");return}else for(var g=0;g<h.length-1;g++)if(a[g]!==h[g]){R("copyWithRename() expects paths to be the same except for the deepest key");return}return eM(t,a,h,0)},nM=function(t,a,h,g){if(h>=a.length)return g;var w=a[h],k=Sn(t)?t.slice():nr({},t);return k[w]=nM(t[w],a,h+1,g),k},rM=function(t,a,h){return nM(t,a,0,h)},cE=function(t,a){for(var h=t.memoizedState;h!==null&&a>0;)h=h.next,a--;return h};$C=function(t,a,h,g){var w=cE(t,a);if(w!==null){var k=rM(w.memoizedState,h,g);w.memoizedState=k,w.baseState=k,t.memoizedProps=nr({},t.memoizedProps);var P=Gs(t,ur);P!==null&&lo(P,t,ur,Fi)}},GC=function(t,a,h){var g=cE(t,a);if(g!==null){var w=QC(g.memoizedState,h);g.memoizedState=w,g.baseState=w,t.memoizedProps=nr({},t.memoizedProps);var k=Gs(t,ur);k!==null&&lo(k,t,ur,Fi)}},qC=function(t,a,h,g){var w=cE(t,a);if(w!==null){var k=tM(w.memoizedState,h,g);w.memoizedState=k,w.baseState=k,t.memoizedProps=nr({},t.memoizedProps);var P=Gs(t,ur);P!==null&&lo(P,t,ur,Fi)}},HC=function(t,a,h){t.pendingProps=rM(t.memoizedProps,a,h),t.alternate&&(t.alternate.pendingProps=t.pendingProps);var g=Gs(t,ur);g!==null&&lo(g,t,ur,Fi)},WC=function(t,a){t.pendingProps=QC(t.memoizedProps,a),t.alternate&&(t.alternate.pendingProps=t.pendingProps);var h=Gs(t,ur);h!==null&&lo(h,t,ur,Fi)},ZC=function(t,a,h){t.pendingProps=tM(t.memoizedProps,a,h),t.alternate&&(t.alternate.pendingProps=t.pendingProps);var g=Gs(t,ur);g!==null&&lo(g,t,ur,Fi)},XC=function(t){var a=Gs(t,ur);a!==null&&lo(a,t,ur,Fi)},YC=function(t){jC=t},KC=function(t){VC=t}}function oL(t){var a=v(t);return a===null?null:a.stateNode}function sL(t){return null}function lL(){return ua}function uL(t){var a=t.findFiberByHostInstance,h=x.ReactCurrentDispatcher;return Ke({bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:$C,overrideHookStateDeletePath:GC,overrideHookStateRenamePath:qC,overrideProps:HC,overridePropsDeletePath:WC,overridePropsRenamePath:ZC,setErrorHandler:YC,setSuspenseHandler:KC,scheduleUpdate:XC,currentDispatcherRef:h,findHostInstanceByFiber:oL,findFiberByHostInstance:a||sL,findHostInstancesForRefresh:NI,scheduleRefresh:BI,scheduleRoot:FI,setRefreshHandler:OI,getCurrentFiber:lL,reconcilerVersion:oE})}var iM=typeof reportError=="function"?reportError:function(t){console.error(t)};function hE(t){this._internalRoot=t}x0.prototype.render=hE.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw new Error("Cannot update an unmounted root.");{typeof arguments[1]=="function"?C("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect()."):b0(arguments[1])?C("You passed a container to the second argument of root.render(...). You don't need to pass it again since you already passed it to create the root."):typeof arguments[1]<"u"&&C("You passed a second argument to root.render(...) but it only accepts one argument.");var h=a.containerInfo;if(h.nodeType!==fa){var g=UC(a.current);g&&g.parentNode!==h&&C("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}}Yv(t,a,null,null)},x0.prototype.unmount=hE.prototype.unmount=function(){typeof arguments[0]=="function"&&C("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;gC()&&C("Attempted to synchronously unmount a root while React was already rendering. React cannot finish unmounting the root until the current render has completed, which may lead to a race condition."),ef(function(){Yv(null,t,null,null)}),cv(a)}};function cL(t,a){if(!b0(t))throw new Error("createRoot(...): Target container is not a DOM element.");aM(t);var h=!1,g=!1,w="",k=iM;a!=null&&(a.hydrate?R("hydrate through createRoot is deprecated. Use ReactDOMClient.hydrateRoot(container, <App />) instead."):typeof a=="object"&&a!==null&&a.$$typeof===Ln&&C(`You passed a JSX element to createRoot. You probably meant to call root.render instead. Example usage:

  let root = createRoot(domContainer);
  root.render(<App />);`),a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(w=a.identifierPrefix),a.onRecoverableError!==void 0&&(k=a.onRecoverableError),a.transitionCallbacks!==void 0&&a.transitionCallbacks);var P=BC(t,dg,null,h,g,w,k);Zh(P.current,t);var $=t.nodeType===fa?t.parentNode:t;return fp($),new hE(P)}function x0(t){this._internalRoot=t}function hL(t){t&&ab(t)}x0.prototype.unstable_scheduleHydration=hL;function fL(t,a,h){if(!b0(t))throw new Error("hydrateRoot(...): Target container is not a DOM element.");aM(t),a===void 0&&C("Must provide initial children as second argument to hydrateRoot. Example usage: hydrateRoot(domContainer, <App />)");var g=h??null,w=h!=null&&h.hydratedSources||null,k=!1,P=!1,$="",Y=iM;h!=null&&(h.unstable_strictMode===!0&&(k=!0),h.identifierPrefix!==void 0&&($=h.identifierPrefix),h.onRecoverableError!==void 0&&(Y=h.onRecoverableError));var le=FC(a,null,t,dg,g,k,P,$,Y);if(Zh(le.current,t),fp(t),w)for(var me=0;me<w.length;me++){var Ue=w[me];gD(le,Ue)}return new x0(le)}function b0(t){return!!(t&&(t.nodeType===ha||t.nodeType===nl||t.nodeType===Ld||!An))}function Kv(t){return!!(t&&(t.nodeType===ha||t.nodeType===nl||t.nodeType===Ld||t.nodeType===fa&&t.nodeValue===" react-mount-point-unstable "))}function aM(t){t.nodeType===ha&&t.tagName&&t.tagName.toUpperCase()==="BODY"&&C("createRoot(): Creating roots directly with document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try using a container element created for your app."),od(t)&&(t._reactRootContainer?C("You are calling ReactDOMClient.createRoot() on a container that was previously passed to ReactDOM.render(). This is not supported."):C("You are calling ReactDOMClient.createRoot() on a container that has already been passed to createRoot() before. Instead, call root.render() on the existing root instead if you want to update it."))}var dL=x.ReactCurrentOwner,oM;oM=function(t){if(t._reactRootContainer&&t.nodeType!==fa){var a=UC(t._reactRootContainer.current);a&&a.parentNode!==t&&C("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var h=!!t._reactRootContainer,g=fE(t),w=!!(g&&Kl(g));w&&!h&&C("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),t.nodeType===ha&&t.tagName&&t.tagName.toUpperCase()==="BODY"&&C("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};function fE(t){return t?t.nodeType===nl?t.documentElement:t.firstChild:null}function sM(){}function pL(t,a,h,g,w){if(w){if(typeof g=="function"){var k=g;g=function(){var Fe=_0(P);k.call(Fe)}}var P=FC(a,g,t,Cu,null,!1,!1,"",sM);t._reactRootContainer=P,Zh(P.current,t);var $=t.nodeType===fa?t.parentNode:t;return fp($),ef(),P}else{for(var Y;Y=t.lastChild;)t.removeChild(Y);if(typeof g=="function"){var le=g;g=function(){var Fe=_0(me);le.call(Fe)}}var me=BC(t,Cu,null,!1,!1,"",sM);t._reactRootContainer=me,Zh(me.current,t);var Ue=t.nodeType===fa?t.parentNode:t;return fp(Ue),ef(function(){Yv(a,me,h,g)}),me}}function mL(t,a){t!==null&&typeof t!="function"&&C("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",a,t)}function w0(t,a,h,g,w){oM(h),mL(w===void 0?null:w,"render");var k=h._reactRootContainer,P;if(!k)P=pL(h,a,t,w,g);else{if(P=k,typeof w=="function"){var $=w;w=function(){var Y=_0(P);$.call(Y)}}Yv(a,P,t,w)}return _0(P)}var lM=!1;function gL(t){{lM||(lM=!0,C("findDOMNode is deprecated and will be removed in the next major release. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-find-node"));var a=dL.current;if(a!==null&&a.stateNode!==null){var h=a.stateNode._warnedAboutRefsInRender;h||C("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",yr(a.type)||"A component"),a.stateNode._warnedAboutRefsInRender=!0}}return t==null?null:t.nodeType===ha?t:eL(t,"findDOMNode")}function yL(t,a,h){if(C("ReactDOM.hydrate is no longer supported in React 18. Use hydrateRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Kv(a))throw new Error("Target container is not a DOM element.");{var g=od(a)&&a._reactRootContainer===void 0;g&&C("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call hydrateRoot(container, element)?")}return w0(null,t,a,!0,h)}function vL(t,a,h){if(C("ReactDOM.render is no longer supported in React 18. Use createRoot instead. Until you switch to the new API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Kv(a))throw new Error("Target container is not a DOM element.");{var g=od(a)&&a._reactRootContainer===void 0;g&&C("You are calling ReactDOM.render() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.render(element)?")}return w0(null,t,a,!1,h)}function _L(t,a,h,g){if(C("ReactDOM.unstable_renderSubtreeIntoContainer() is no longer supported in React 18. Consider using a portal instead. Until you switch to the createRoot API, your app will behave as if it's running React 17. Learn more: https://reactjs.org/link/switch-to-createroot"),!Kv(h))throw new Error("Target container is not a DOM element.");if(t==null||!fm(t))throw new Error("parentComponent must be a valid React Component");return w0(t,a,h,!1,g)}var uM=!1;function xL(t){if(uM||(uM=!0,C("unmountComponentAtNode is deprecated and will be removed in the next major release. Switch to the createRoot API. Learn more: https://reactjs.org/link/switch-to-createroot")),!Kv(t))throw new Error("unmountComponentAtNode(...): Target container is not a DOM element.");{var a=od(t)&&t._reactRootContainer===void 0;a&&C("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOMClient.createRoot(). This is not supported. Did you mean to call root.unmount()?")}if(t._reactRootContainer){{var h=fE(t),g=h&&!Kl(h);g&&C("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.")}return ef(function(){w0(null,null,t,!1,function(){t._reactRootContainer=null,cv(t)})}),!0}else{{var w=fE(t),k=!!(w&&Kl(w)),P=t.nodeType===ha&&Kv(t.parentNode)&&!!t.parentNode._reactRootContainer;k&&C("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",P?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component.")}return!1}}nb(tL),rb(nL),Gl(rL),w_(Gi),ib(b_),(typeof Map!="function"||Map.prototype==null||typeof Map.prototype.forEach!="function"||typeof Set!="function"||Set.prototype==null||typeof Set.prototype.clear!="function"||typeof Set.prototype.forEach!="function")&&C("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),bf(Gb),wf($w,fI,ef);function bL(t,a){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!b0(a))throw new Error("Target container is not a DOM element.");return QI(t,a,null,h)}function wL(t,a,h,g){return _L(t,a,h,g)}var dE={usingClientEntryPoint:!1,Events:[Kl,sd,kp,vh,Po,$w]};function EL(t,a){return dE.usingClientEntryPoint||C('You are importing createRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),cL(t,a)}function SL(t,a,h){return dE.usingClientEntryPoint||C('You are importing hydrateRoot from "react-dom" which is not supported. You should instead import it from "react-dom/client".'),fL(t,a,h)}function TL(t){return gC()&&C("flushSync was called from inside a lifecycle method. React cannot flush when React is already rendering. Consider moving this call to a scheduler task or micro task."),ef(t)}var CL=uL({findFiberByHostInstance:Oc,bundleType:1,version:oE,rendererPackageName:"react-dom"});if(!CL&&Yr&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var cM=window.location.protocol;/^(https?|file):$/.test(cM)&&console.info("%cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools"+(cM==="file:"?`
You might need to use a local HTTP server (instead of file://): https://reactjs.org/link/react-devtools-faq`:""),"font-weight:bold")}wl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dE,wl.createPortal=bL,wl.createRoot=EL,wl.findDOMNode=gL,wl.flushSync=TL,wl.hydrate=yL,wl.hydrateRoot=SL,wl.render=vL,wl.unmountComponentAtNode=xL,wl.unstable_batchedUpdates=$w,wl.unstable_renderSubtreeIntoContainer=wL,wl.version=oE,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})();AA.exports=wl;var RA=AA.exports,mE=RA;{var E0=mE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;jE.createRoot=function(c,y){E0.usingClientEntryPoint=!0;try{return mE.createRoot(c,y)}finally{E0.usingClientEntryPoint=!1}},jE.hydrateRoot=function(c,y,x){E0.usingClientEntryPoint=!0;try{return mE.hydrateRoot(c,y,x)}finally{E0.usingClientEntryPoint=!1}}}/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function r_(){return r_=Object.assign?Object.assign.bind():function(c){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(c[E]=x[E])}return c},r_.apply(this,arguments)}var Td;(function(c){c.Pop="POP",c.Push="PUSH",c.Replace="REPLACE"})(Td||(Td={}));const hM="popstate";function zL(c){c===void 0&&(c={});function y(E,A){let{pathname:R,search:C,hash:U}=E.location;return VE("",{pathname:R,search:C,hash:U},A.state&&A.state.usr||null,A.state&&A.state.key||"default")}function x(E,A){return typeof A=="string"?A:i_(A)}return OL(y,x,null,c)}function wa(c,y){if(c===!1||c===null||typeof c>"u")throw new Error(y)}function rh(c,y){if(!c){typeof console<"u"&&console.warn(y);try{throw new Error(y)}catch{}}}function PL(){return Math.random().toString(36).substr(2,8)}function fM(c,y){return{usr:c.state,key:c.key,idx:y}}function VE(c,y,x,E){return x===void 0&&(x=null),r_({pathname:typeof c=="string"?c:c.pathname,search:"",hash:""},typeof y=="string"?qg(y):y,{state:x,key:y&&y.key||E||PL()})}function i_(c){let{pathname:y="/",search:x="",hash:E=""}=c;return x&&x!=="?"&&(y+=x.charAt(0)==="?"?x:"?"+x),E&&E!=="#"&&(y+=E.charAt(0)==="#"?E:"#"+E),y}function qg(c){let y={};if(c){let x=c.indexOf("#");x>=0&&(y.hash=c.substr(x),c=c.substr(0,x));let E=c.indexOf("?");E>=0&&(y.search=c.substr(E),c=c.substr(0,E)),c&&(y.pathname=c)}return y}function OL(c,y,x,E){E===void 0&&(E={});let{window:A=document.defaultView,v5Compat:R=!1}=E,C=A.history,U=Td.Pop,s=null,N=G();N==null&&(N=0,C.replaceState(r_({},C.state,{idx:N}),""));function G(){return(C.state||{idx:null}).idx}function H(){U=Td.Pop;let qe=G(),je=qe==null?null:qe-N;N=qe,s&&s({action:U,location:Re.location,delta:je})}function X(qe,je){U=Td.Push;let Ne=VE(Re.location,qe,je);N=G()+1;let Xe=fM(Ne,N),Et=Re.createHref(Ne);try{C.pushState(Xe,"",Et)}catch(St){if(St instanceof DOMException&&St.name==="DataCloneError")throw St;A.location.assign(Et)}R&&s&&s({action:U,location:Re.location,delta:1})}function J(qe,je){U=Td.Replace;let Ne=VE(Re.location,qe,je);N=G();let Xe=fM(Ne,N),Et=Re.createHref(Ne);C.replaceState(Xe,"",Et),R&&s&&s({action:U,location:Re.location,delta:0})}function Pe(qe){let je=A.location.origin!=="null"?A.location.origin:A.location.href,Ne=typeof qe=="string"?qe:i_(qe);return Ne=Ne.replace(/ $/,"%20"),wa(je,"No window.location.(origin|href) available to create URL for href: "+Ne),new URL(Ne,je)}let Re={get action(){return U},get location(){return c(A,C)},listen(qe){if(s)throw new Error("A history only accepts one active listener");return A.addEventListener(hM,H),s=qe,()=>{A.removeEventListener(hM,H),s=null}},createHref(qe){return y(A,qe)},createURL:Pe,encodeLocation(qe){let je=Pe(qe);return{pathname:je.pathname,search:je.search,hash:je.hash}},push:X,replace:J,go(qe){return C.go(qe)}};return Re}var dM;(function(c){c.data="data",c.deferred="deferred",c.redirect="redirect",c.error="error"})(dM||(dM={}));function BL(c,y,x){return x===void 0&&(x="/"),FL(c,y,x,!1)}function FL(c,y,x,E){let A=typeof y=="string"?qg(y):y,R=Md(A.pathname||"/",x);if(R==null)return null;let C=IA(c);NL(C);let U=null;for(let s=0;U==null&&s<C.length;++s){let N=YL(R);U=ZL(C[s],N,E)}return U}function IA(c,y,x,E){y===void 0&&(y=[]),x===void 0&&(x=[]),E===void 0&&(E="");let A=(R,C,U)=>{let s={relativePath:U===void 0?R.path||"":U,caseSensitive:R.caseSensitive===!0,childrenIndex:C,route:R};s.relativePath.startsWith("/")&&(wa(s.relativePath.startsWith(E),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+E+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(E.length));let N=rf([E,s.relativePath]),G=x.concat(s);R.children&&R.children.length>0&&(wa(R.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+N+'".')),IA(R.children,y,G,N)),!(R.path==null&&!R.index)&&y.push({path:N,score:HL(N,R.index),routesMeta:G})};return c.forEach((R,C)=>{var U;if(R.path===""||!((U=R.path)!=null&&U.includes("?")))A(R,C);else for(let s of LA(R.path))A(R,C,s)}),y}function LA(c){let y=c.split("/");if(y.length===0)return[];let[x,...E]=y,A=x.endsWith("?"),R=x.replace(/\?$/,"");if(E.length===0)return A?[R,""]:[R];let C=LA(E.join("/")),U=[];return U.push(...C.map(s=>s===""?R:[R,s].join("/"))),A&&U.push(...C),U.map(s=>c.startsWith("/")&&s===""?"/":s)}function NL(c){c.sort((y,x)=>y.score!==x.score?x.score-y.score:WL(y.routesMeta.map(E=>E.childrenIndex),x.routesMeta.map(E=>E.childrenIndex)))}const UL=/^:[\w-]+$/,jL=3,VL=2,$L=1,GL=10,qL=-2,pM=c=>c==="*";function HL(c,y){let x=c.split("/"),E=x.length;return x.some(pM)&&(E+=qL),y&&(E+=VL),x.filter(A=>!pM(A)).reduce((A,R)=>A+(UL.test(R)?jL:R===""?$L:GL),E)}function WL(c,y){return c.length===y.length&&c.slice(0,-1).every((E,A)=>E===y[A])?c[c.length-1]-y[y.length-1]:0}function ZL(c,y,x){let{routesMeta:E}=c,A={},R="/",C=[];for(let U=0;U<E.length;++U){let s=E[U],N=U===E.length-1,G=R==="/"?y:y.slice(R.length)||"/",H=j0({path:s.relativePath,caseSensitive:s.caseSensitive,end:N},G),X=s.route;if(!H&&N&&x&&!E[E.length-1].route.index&&(H=j0({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},G)),!H)return null;Object.assign(A,H.params),C.push({params:A,pathname:rf([R,H.pathname]),pathnameBase:ez(rf([R,H.pathnameBase])),route:X}),H.pathnameBase!=="/"&&(R=rf([R,H.pathnameBase]))}return C}function j0(c,y){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[x,E]=XL(c.path,c.caseSensitive,c.end),A=y.match(x);if(!A)return null;let R=A[0],C=R.replace(/(.)\/+$/,"$1"),U=A.slice(1);return{params:E.reduce((N,G,H)=>{let{paramName:X,isOptional:J}=G;if(X==="*"){let Re=U[H]||"";C=R.slice(0,R.length-Re.length).replace(/(.)\/+$/,"$1")}const Pe=U[H];return J&&!Pe?N[X]=void 0:N[X]=(Pe||"").replace(/%2F/g,"/"),N},{}),pathname:R,pathnameBase:C,pattern:c}}function XL(c,y,x){y===void 0&&(y=!1),x===void 0&&(x=!0),rh(c==="*"||!c.endsWith("*")||c.endsWith("/*"),'Route path "'+c+'" will be treated as if it were '+('"'+c.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+c.replace(/\*$/,"/*")+'".'));let E=[],A="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(C,U,s)=>(E.push({paramName:U,isOptional:s!=null}),s?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(E.push({paramName:"*"}),A+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):x?A+="\\/*$":c!==""&&c!=="/"&&(A+="(?:(?=\\/|$))"),[new RegExp(A,y?void 0:"i"),E]}function YL(c){try{return c.split("/").map(y=>decodeURIComponent(y).replace(/\//g,"%2F")).join("/")}catch(y){return rh(!1,'The URL path "'+c+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+y+").")),c}}function Md(c,y){if(y==="/")return c;if(!c.toLowerCase().startsWith(y.toLowerCase()))return null;let x=y.endsWith("/")?y.length-1:y.length,E=c.charAt(x);return E&&E!=="/"?null:c.slice(x)||"/"}function KL(c,y){y===void 0&&(y="/");let{pathname:x,search:E="",hash:A=""}=typeof c=="string"?qg(c):c;return{pathname:x?x.startsWith("/")?x:JL(x,y):y,search:tz(E),hash:nz(A)}}function JL(c,y){let x=y.replace(/\/+$/,"").split("/");return c.split("/").forEach(A=>{A===".."?x.length>1&&x.pop():A!=="."&&x.push(A)}),x.length>1?x.join("/"):"/"}function gE(c,y,x,E){return"Cannot include a '"+c+"' character in a manually specified "+("`to."+y+"` field ["+JSON.stringify(E)+"].  Please separate it out to the ")+("`to."+x+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QL(c){return c.filter((y,x)=>x===0||y.route.path&&y.route.path.length>0)}function zA(c,y){let x=QL(c);return y?x.map((E,A)=>A===x.length-1?E.pathname:E.pathnameBase):x.map(E=>E.pathnameBase)}function PA(c,y,x,E){E===void 0&&(E=!1);let A;typeof c=="string"?A=qg(c):(A=r_({},c),wa(!A.pathname||!A.pathname.includes("?"),gE("?","pathname","search",A)),wa(!A.pathname||!A.pathname.includes("#"),gE("#","pathname","hash",A)),wa(!A.search||!A.search.includes("#"),gE("#","search","hash",A)));let R=c===""||A.pathname==="",C=R?"/":A.pathname,U;if(C==null)U=x;else{let H=y.length-1;if(!E&&C.startsWith("..")){let X=C.split("/");for(;X[0]==="..";)X.shift(),H-=1;A.pathname=X.join("/")}U=H>=0?y[H]:"/"}let s=KL(A,U),N=C&&C!=="/"&&C.endsWith("/"),G=(R||C===".")&&x.endsWith("/");return!s.pathname.endsWith("/")&&(N||G)&&(s.pathname+="/"),s}const rf=c=>c.join("/").replace(/\/\/+/g,"/"),ez=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),tz=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,nz=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function rz(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}const OA=["post","put","patch","delete"];new Set(OA);const iz=["get",...OA];new Set(iz);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a_(){return a_=Object.assign?Object.assign.bind():function(c){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(c[E]=x[E])}return c},a_.apply(this,arguments)}const l_=ke.createContext(null);l_.displayName="DataRouter";const aS=ke.createContext(null);aS.displayName="DataRouterState";const az=ke.createContext(null);az.displayName="Await";const Bu=ke.createContext(null);Bu.displayName="Navigation";const u_=ke.createContext(null);u_.displayName="Location";const af=ke.createContext({outlet:null,matches:[],isDataRoute:!1});af.displayName="Route";const oS=ke.createContext(null);oS.displayName="RouteError";function oz(c,y){let{relative:x}=y===void 0?{}:y;c_()||wa(!1,"useHref() may be used only in the context of a <Router> component.");let{basename:E,navigator:A}=ke.useContext(Bu),{hash:R,pathname:C,search:U}=h_(c,{relative:x}),s=C;return E!=="/"&&(s=C==="/"?E:rf([E,C])),A.createHref({pathname:s,search:U,hash:R})}function c_(){return ke.useContext(u_)!=null}function Hg(){return c_()||wa(!1,"useLocation() may be used only in the context of a <Router> component."),ke.useContext(u_).location}const BA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FA(c){ke.useContext(Bu).static||ke.useLayoutEffect(c)}function sz(){let{isDataRoute:c}=ke.useContext(af);return c?bz():lz()}function lz(){c_()||wa(!1,"useNavigate() may be used only in the context of a <Router> component.");let c=ke.useContext(l_),{basename:y,future:x,navigator:E}=ke.useContext(Bu),{matches:A}=ke.useContext(af),{pathname:R}=Hg(),C=JSON.stringify(zA(A,x.v7_relativeSplatPath)),U=ke.useRef(!1);return FA(()=>{U.current=!0}),ke.useCallback(function(N,G){if(G===void 0&&(G={}),rh(U.current,BA),!U.current)return;if(typeof N=="number"){E.go(N);return}let H=PA(N,JSON.parse(C),R,G.relative==="path");c==null&&y!=="/"&&(H.pathname=H.pathname==="/"?y:rf([y,H.pathname])),(G.replace?E.replace:E.push)(H,G.state,G)},[y,E,C,R,c])}function h_(c,y){let{relative:x}=y===void 0?{}:y,{future:E}=ke.useContext(Bu),{matches:A}=ke.useContext(af),{pathname:R}=Hg(),C=JSON.stringify(zA(A,E.v7_relativeSplatPath));return ke.useMemo(()=>PA(c,JSON.parse(C),R,x==="path"),[c,C,R,x])}function uz(c,y){return cz(c,y)}function cz(c,y,x,E){c_()||wa(!1,"useRoutes() may be used only in the context of a <Router> component.");let{navigator:A}=ke.useContext(Bu),{matches:R}=ke.useContext(af),C=R[R.length-1],U=C?C.params:{},s=C?C.pathname:"/",N=C?C.pathnameBase:"/",G=C&&C.route;{let Ne=G&&G.path||"";UA(s,!G||Ne.endsWith("*"),"You rendered descendant <Routes> (or called `useRoutes()`) at "+('"'+s+'" (under <Route path="'+Ne+'">) but the ')+`parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

`+('Please change the parent <Route path="'+Ne+'"> to <Route ')+('path="'+(Ne==="/"?"*":Ne+"/*")+'">.'))}let H=Hg(),X;if(y){var J;let Ne=typeof y=="string"?qg(y):y;N==="/"||(J=Ne.pathname)!=null&&J.startsWith(N)||wa(!1,"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was "+('matched by all parent routes. The current pathname base is "'+N+'" ')+('but pathname "'+Ne.pathname+'" was given in the `location` prop.')),X=Ne}else X=H;let Pe=X.pathname||"/",Re=Pe;if(N!=="/"){let Ne=N.replace(/^\//,"").split("/");Re="/"+Pe.replace(/^\//,"").split("/").slice(Ne.length).join("/")}let qe=BL(c,{pathname:Re});rh(G||qe!=null,'No routes matched location "'+X.pathname+X.search+X.hash+'" '),rh(qe==null||qe[qe.length-1].route.element!==void 0||qe[qe.length-1].route.Component!==void 0||qe[qe.length-1].route.lazy!==void 0,'Matched leaf route at location "'+X.pathname+X.search+X.hash+'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.');let je=mz(qe&&qe.map(Ne=>Object.assign({},Ne,{params:Object.assign({},U,Ne.params),pathname:rf([N,A.encodeLocation?A.encodeLocation(Ne.pathname).pathname:Ne.pathname]),pathnameBase:Ne.pathnameBase==="/"?N:rf([N,A.encodeLocation?A.encodeLocation(Ne.pathnameBase).pathname:Ne.pathnameBase])})),R,x,E);return y&&je?ke.createElement(u_.Provider,{value:{location:a_({pathname:"/",search:"",hash:"",state:null,key:"default"},X),navigationType:Td.Pop}},je):je}function hz(){let c=xz(),y=rz(c)?c.status+" "+c.statusText:c instanceof Error?c.message:JSON.stringify(c),x=c instanceof Error?c.stack:null,E="rgba(200,200,200, 0.5)",A={padding:"0.5rem",backgroundColor:E},R={padding:"2px 4px",backgroundColor:E},C=null;return console.error("Error handled by React Router default ErrorBoundary:",c),C=ke.createElement(ke.Fragment,null,ke.createElement("p",null," Hey developer "),ke.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ke.createElement("code",{style:R},"ErrorBoundary")," or"," ",ke.createElement("code",{style:R},"errorElement")," prop on your route.")),ke.createElement(ke.Fragment,null,ke.createElement("h2",null,"Unexpected Application Error!"),ke.createElement("h3",{style:{fontStyle:"italic"}},y),x?ke.createElement("pre",{style:A},x):null,C)}const fz=ke.createElement(hz,null);class dz extends ke.Component{constructor(y){super(y),this.state={location:y.location,revalidation:y.revalidation,error:y.error}}static getDerivedStateFromError(y){return{error:y}}static getDerivedStateFromProps(y,x){return x.location!==y.location||x.revalidation!=="idle"&&y.revalidation==="idle"?{error:y.error,location:y.location,revalidation:y.revalidation}:{error:y.error!==void 0?y.error:x.error,location:x.location,revalidation:y.revalidation||x.revalidation}}componentDidCatch(y,x){console.error("React Router caught the following error during render",y,x)}render(){return this.state.error!==void 0?ke.createElement(af.Provider,{value:this.props.routeContext},ke.createElement(oS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pz(c){let{routeContext:y,match:x,children:E}=c,A=ke.useContext(l_);return A&&A.static&&A.staticContext&&(x.route.errorElement||x.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=x.route.id),ke.createElement(af.Provider,{value:y},E)}function mz(c,y,x,E){var A;if(y===void 0&&(y=[]),x===void 0&&(x=null),E===void 0&&(E=null),c==null){var R;if(!x)return null;if(x.errors)c=x.matches;else if((R=E)!=null&&R.v7_partialHydration&&y.length===0&&!x.initialized&&x.matches.length>0)c=x.matches;else return null}let C=c,U=(A=x)==null?void 0:A.errors;if(U!=null){let G=C.findIndex(H=>H.route.id&&(U==null?void 0:U[H.route.id])!==void 0);G>=0||wa(!1,"Could not find a matching route for errors on route IDs: "+Object.keys(U).join(",")),C=C.slice(0,Math.min(C.length,G+1))}let s=!1,N=-1;if(x&&E&&E.v7_partialHydration)for(let G=0;G<C.length;G++){let H=C[G];if((H.route.HydrateFallback||H.route.hydrateFallbackElement)&&(N=G),H.route.id){let{loaderData:X,errors:J}=x,Pe=H.route.loader&&X[H.route.id]===void 0&&(!J||J[H.route.id]===void 0);if(H.route.lazy||Pe){s=!0,N>=0?C=C.slice(0,N+1):C=[C[0]];break}}}return C.reduceRight((G,H,X)=>{let J,Pe=!1,Re=null,qe=null;x&&(J=U&&H.route.id?U[H.route.id]:void 0,Re=H.route.errorElement||fz,s&&(N<0&&X===0?(UA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Pe=!0,qe=null):N===X&&(Pe=!0,qe=H.route.hydrateFallbackElement||null)));let je=y.concat(C.slice(0,X+1)),Ne=()=>{let Xe;return J?Xe=Re:Pe?Xe=qe:H.route.Component?Xe=ke.createElement(H.route.Component,null):H.route.element?Xe=H.route.element:Xe=G,ke.createElement(pz,{match:H,routeContext:{outlet:G,matches:je,isDataRoute:x!=null},children:Xe})};return x&&(H.route.ErrorBoundary||H.route.errorElement||X===0)?ke.createElement(dz,{location:x.location,revalidation:x.revalidation,component:Re,error:J,children:Ne(),routeContext:{outlet:null,matches:je,isDataRoute:!0}}):Ne()},null)}var NA=function(c){return c.UseBlocker="useBlocker",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c}(NA||{}),o_=function(c){return c.UseBlocker="useBlocker",c.UseLoaderData="useLoaderData",c.UseActionData="useActionData",c.UseRouteError="useRouteError",c.UseNavigation="useNavigation",c.UseRouteLoaderData="useRouteLoaderData",c.UseMatches="useMatches",c.UseRevalidator="useRevalidator",c.UseNavigateStable="useNavigate",c.UseRouteId="useRouteId",c}(o_||{});function sS(c){return c+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function gz(c){let y=ke.useContext(l_);return y||wa(!1,sS(c)),y}function yz(c){let y=ke.useContext(aS);return y||wa(!1,sS(c)),y}function vz(c){let y=ke.useContext(af);return y||wa(!1,sS(c)),y}function lS(c){let y=vz(c),x=y.matches[y.matches.length-1];return x.route.id||wa(!1,c+' can only be used on routes that contain a unique "id"'),x.route.id}function _z(){return lS(o_.UseRouteId)}function xz(){var c;let y=ke.useContext(oS),x=yz(o_.UseRouteError),E=lS(o_.UseRouteError);return y!==void 0?y:(c=x.errors)==null?void 0:c[E]}function bz(){let{router:c}=gz(NA.UseNavigateStable),y=lS(o_.UseNavigateStable),x=ke.useRef(!1);return FA(()=>{x.current=!0}),ke.useCallback(function(A,R){R===void 0&&(R={}),rh(x.current,BA),x.current&&(typeof A=="number"?c.navigate(A):c.navigate(A,a_({fromRouteId:y},R)))},[c,y])}const mM={};function UA(c,y,x){!y&&!mM[c]&&(mM[c]=!0,rh(!1,x))}const gM={};function wz(c,y){gM[y]||(gM[y]=!0,console.warn(y))}const yM=(c,y,x)=>wz(c," React Router Future Flag Warning: "+y+". "+("You can use the `"+c+"` future flag to opt-in early. ")+("For more information, see "+x+"."));function Ez(c,y){c!=null&&c.v7_startTransition||yM("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(c!=null&&c.v7_relativeSplatPath)&&!y&&yM("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function $E(c){wa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Sz(c){let{basename:y="/",children:x=null,location:E,navigationType:A=Td.Pop,navigator:R,static:C=!1,future:U}=c;c_()&&wa(!1,"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=y.replace(/^\/*/,"/"),N=ke.useMemo(()=>({basename:s,navigator:R,static:C,future:a_({v7_relativeSplatPath:!1},U)}),[s,U,R,C]);typeof E=="string"&&(E=qg(E));let{pathname:G="/",search:H="",hash:X="",state:J=null,key:Pe="default"}=E,Re=ke.useMemo(()=>{let qe=Md(G,s);return qe==null?null:{location:{pathname:qe,search:H,hash:X,state:J,key:Pe},navigationType:A}},[s,G,H,X,J,Pe,A]);return rh(Re!=null,'<Router basename="'+s+'"> is not able to match the URL '+('"'+G+H+X+'" because it does not start with the ')+"basename, so the <Router> won't render anything."),Re==null?null:ke.createElement(Bu.Provider,{value:N},ke.createElement(u_.Provider,{children:x,value:Re}))}function Tz(c){let{children:y,location:x}=c;return uz(GE(y),x)}new Promise(()=>{});function GE(c,y){y===void 0&&(y=[]);let x=[];return ke.Children.forEach(c,(E,A)=>{if(!ke.isValidElement(E))return;let R=[...y,A];if(E.type===ke.Fragment){x.push.apply(x,GE(E.props.children,R));return}E.type!==$E&&wa(!1,"["+(typeof E.type=="string"?E.type:E.type.name)+"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>"),!E.props.index||!E.props.children||wa(!1,"An index route cannot have child routes.");let C={id:E.props.id||R.join("-"),caseSensitive:E.props.caseSensitive,element:E.props.element,Component:E.props.Component,index:E.props.index,path:E.props.path,loader:E.props.loader,action:E.props.action,errorElement:E.props.errorElement,ErrorBoundary:E.props.ErrorBoundary,hasErrorBoundary:E.props.ErrorBoundary!=null||E.props.errorElement!=null,shouldRevalidate:E.props.shouldRevalidate,handle:E.props.handle,lazy:E.props.lazy};E.props.children&&(C.children=GE(E.props.children,R)),x.push(C)}),x}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gg(){return Gg=Object.assign?Object.assign.bind():function(c){for(var y=1;y<arguments.length;y++){var x=arguments[y];for(var E in x)Object.prototype.hasOwnProperty.call(x,E)&&(c[E]=x[E])}return c},Gg.apply(this,arguments)}function uS(c,y){if(c==null)return{};var x={},E=Object.keys(c),A,R;for(R=0;R<E.length;R++)A=E[R],!(y.indexOf(A)>=0)&&(x[A]=c[A]);return x}const L0="get",z0="application/x-www-form-urlencoded";function Z0(c){return c!=null&&typeof c.tagName=="string"}function Cz(c){return Z0(c)&&c.tagName.toLowerCase()==="button"}function Mz(c){return Z0(c)&&c.tagName.toLowerCase()==="form"}function Az(c){return Z0(c)&&c.tagName.toLowerCase()==="input"}function kz(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function Dz(c,y){return c.button===0&&(!y||y==="_self")&&!kz(c)}let S0=null;function Rz(){if(S0===null)try{new FormData(document.createElement("form"),0),S0=!1}catch{S0=!0}return S0}const Iz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yE(c){return c!=null&&!Iz.has(c)?(rh(!1,'"'+c+'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` '+('and will default to "'+z0+'"')),null):c}function Lz(c,y){let x,E,A,R,C;if(Mz(c)){let U=c.getAttribute("action");E=U?Md(U,y):null,x=c.getAttribute("method")||L0,A=yE(c.getAttribute("enctype"))||z0,R=new FormData(c)}else if(Cz(c)||Az(c)&&(c.type==="submit"||c.type==="image")){let U=c.form;if(U==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=c.getAttribute("formaction")||U.getAttribute("action");if(E=s?Md(s,y):null,x=c.getAttribute("formmethod")||U.getAttribute("method")||L0,A=yE(c.getAttribute("formenctype"))||yE(U.getAttribute("enctype"))||z0,R=new FormData(U,c),!Rz()){let{name:N,type:G,value:H}=c;if(G==="image"){let X=N?N+".":"";R.append(X+"x","0"),R.append(X+"y","0")}else N&&R.append(N,H)}}else{if(Z0(c))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');x=L0,E=null,A=z0,C=c}return R&&A==="text/plain"&&(C=R,R=void 0),{action:E,method:x.toLowerCase(),encType:A,formData:R,body:C}}const zz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Pz=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Oz=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"],Bz="6";try{window.__reactRouterVersion=Bz}catch{}const jA=ke.createContext({isTransitioning:!1});jA.displayName="ViewTransition";const Fz=ke.createContext(new Map);Fz.displayName="Fetchers";const Nz="startTransition",vM=MA[Nz];function Uz(c){let{basename:y,children:x,future:E,window:A}=c,R=ke.useRef();R.current==null&&(R.current=zL({window:A,v5Compat:!0}));let C=R.current,[U,s]=ke.useState({action:C.action,location:C.location}),{v7_startTransition:N}=E||{},G=ke.useCallback(H=>{N&&vM?vM(()=>s(H)):s(H)},[s,N]);return ke.useLayoutEffect(()=>C.listen(G),[C,G]),ke.useEffect(()=>Ez(E),[E]),ke.createElement(Sz,{basename:y,children:x,location:U.location,navigationType:U.action,navigator:C,future:E})}const jz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VA=ke.forwardRef(function(y,x){let{onClick:E,relative:A,reloadDocument:R,replace:C,state:U,target:s,to:N,preventScrollReset:G,viewTransition:H}=y,X=uS(y,zz),{basename:J}=ke.useContext(Bu),Pe,Re=!1;if(typeof N=="string"&&Vz.test(N)&&(Pe=N,jz))try{let Xe=new URL(window.location.href),Et=N.startsWith("//")?new URL(Xe.protocol+N):new URL(N),St=Md(Et.pathname,J);Et.origin===Xe.origin&&St!=null?N=St+Et.search+Et.hash:Re=!0}catch{rh(!1,'<Link to="'+N+'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.')}let qe=oz(N,{relative:A}),je=Hz(N,{replace:C,state:U,target:s,preventScrollReset:G,relative:A,viewTransition:H});function Ne(Xe){E&&E(Xe),Xe.defaultPrevented||je(Xe)}return ke.createElement("a",Gg({},X,{href:Pe||qe,onClick:Re||R?E:Ne,ref:x,target:s}))});VA.displayName="Link";const $z=ke.forwardRef(function(y,x){let{"aria-current":E="page",caseSensitive:A=!1,className:R="",end:C=!1,style:U,to:s,viewTransition:N,children:G}=y,H=uS(y,Pz),X=h_(s,{relative:H.relative}),J=Hg(),Pe=ke.useContext(aS),{navigator:Re,basename:qe}=ke.useContext(Bu),je=Pe!=null&&Jz(X)&&N===!0,Ne=Re.encodeLocation?Re.encodeLocation(X).pathname:X.pathname,Xe=J.pathname,Et=Pe&&Pe.navigation&&Pe.navigation.location?Pe.navigation.location.pathname:null;A||(Xe=Xe.toLowerCase(),Et=Et?Et.toLowerCase():null,Ne=Ne.toLowerCase()),Et&&qe&&(Et=Md(Et,qe)||Et);const St=Ne!=="/"&&Ne.endsWith("/")?Ne.length-1:Ne.length;let Qe=Xe===Ne||!C&&Xe.startsWith(Ne)&&Xe.charAt(St)==="/",Nt=Et!=null&&(Et===Ne||!C&&Et.startsWith(Ne)&&Et.charAt(Ne.length)==="/"),Mn={isActive:Qe,isPending:Nt,isTransitioning:je},dn=Qe?E:void 0,ut;typeof R=="function"?ut=R(Mn):ut=[R,Qe?"active":null,Nt?"pending":null,je?"transitioning":null].filter(Boolean).join(" ");let qn=typeof U=="function"?U(Mn):U;return ke.createElement(VA,Gg({},H,{"aria-current":dn,className:ut,ref:x,style:qn,to:s,viewTransition:N}),typeof G=="function"?G(Mn):G)});$z.displayName="NavLink";const Gz=ke.forwardRef((c,y)=>{let{fetcherKey:x,navigate:E,reloadDocument:A,replace:R,state:C,method:U=L0,action:s,onSubmit:N,relative:G,preventScrollReset:H,viewTransition:X}=c,J=uS(c,Oz),Pe=Yz(),Re=Kz(s,{relative:G}),qe=U.toLowerCase()==="get"?"get":"post",je=Ne=>{if(N&&N(Ne),Ne.defaultPrevented)return;Ne.preventDefault();let Xe=Ne.nativeEvent.submitter,Et=(Xe==null?void 0:Xe.getAttribute("formmethod"))||U;Pe(Xe||Ne.currentTarget,{fetcherKey:x,method:Et,navigate:E,replace:R,state:C,relative:G,preventScrollReset:H,viewTransition:X})};return ke.createElement("form",Gg({ref:y,method:qe,action:Re,onSubmit:A?N:je},J))});Gz.displayName="Form";var V0;(function(c){c.UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState"})(V0||(V0={}));var _M;(function(c){c.UseFetcher="useFetcher",c.UseFetchers="useFetchers",c.UseScrollRestoration="useScrollRestoration"})(_M||(_M={}));function qz(c){return c+" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router."}function $A(c){let y=ke.useContext(l_);return y||wa(!1,qz(c)),y}function Hz(c,y){let{target:x,replace:E,state:A,preventScrollReset:R,relative:C,viewTransition:U}=y===void 0?{}:y,s=sz(),N=Hg(),G=h_(c,{relative:C});return ke.useCallback(H=>{if(Dz(H,x)){H.preventDefault();let X=E!==void 0?E:i_(N)===i_(G);s(c,{replace:X,state:A,preventScrollReset:R,relative:C,viewTransition:U})}},[N,s,G,E,A,x,c,R,C,U])}function Wz(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let Zz=0,Xz=()=>"__"+String(++Zz)+"__";function Yz(){let{router:c}=$A(V0.UseSubmit),{basename:y}=ke.useContext(Bu),x=_z();return ke.useCallback(function(E,A){A===void 0&&(A={}),Wz();let{action:R,method:C,encType:U,formData:s,body:N}=Lz(E,y);if(A.navigate===!1){let G=A.fetcherKey||Xz();c.fetch(G,x,A.action||R,{preventScrollReset:A.preventScrollReset,formData:s,body:N,formMethod:A.method||C,formEncType:A.encType||U,flushSync:A.flushSync})}else c.navigate(A.action||R,{preventScrollReset:A.preventScrollReset,formData:s,body:N,formMethod:A.method||C,formEncType:A.encType||U,replace:A.replace,state:A.state,fromRouteId:x,flushSync:A.flushSync,viewTransition:A.viewTransition})},[c,y,x])}function Kz(c,y){let{relative:x}=y===void 0?{}:y,{basename:E}=ke.useContext(Bu),A=ke.useContext(af);A||wa(!1,"useFormAction must be used inside a RouteContext");let[R]=A.matches.slice(-1),C=Gg({},h_(c||".",{relative:x})),U=Hg();if(c==null){C.search=U.search;let s=new URLSearchParams(C.search),N=s.getAll("index");if(N.some(H=>H==="")){s.delete("index"),N.filter(X=>X).forEach(X=>s.append("index",X));let H=s.toString();C.search=H?"?"+H:""}}return(!c||c===".")&&R.route.index&&(C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index"),E!=="/"&&(C.pathname=C.pathname==="/"?E:rf([E,C.pathname])),i_(C)}function Jz(c,y){y===void 0&&(y={});let x=ke.useContext(jA);x==null&&wa(!1,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:E}=$A(V0.useViewTransitionState),A=h_(c,{relative:y.relative});if(!x.isTransitioning)return!1;let R=Md(x.currentLocation.pathname,E)||x.currentLocation.pathname,C=Md(x.nextLocation.pathname,E)||x.nextLocation.pathname;return j0(A.pathname,C)!=null||j0(A.pathname,R)!=null}var GA={exports:{}};(function(c,y){var x={};(function(E,A){c.exports=A()})(NE,function(){var E,A,R;function C(s,N){if(!E)E=N;else if(!A)A=N;else{var G="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+E+")(sharedChunk); ("+A+")(sharedChunk); self.onerror = null;",H={};E(H),R=N(H),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(R.workerUrl=window.URL.createObjectURL(new Blob([G],{type:"text/javascript"})))}}C(["exports"],function(s){var N=typeof self<"u"?self:{},G="2.15.0";let H;const X={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(H==null){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{H=x.API_URL_REGEX!=null?new RegExp(x.API_URL_REGEX):n}catch{H=n}}return H},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!X.API_URL)return null;try{const n=new URL(X.API_URL);return n.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":n.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},J={supported:!1,testSupport:function(n){!qe&&Re&&(je?Ne(n):Pe=n)}};let Pe,Re,qe=!1,je=!1;function Ne(n){const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,Re),n.isContextLost())return;J.supported=!0}catch{}n.deleteTexture(e),qe=!0}N.document&&(Re=N.document.createElement("img"),Re.onload=function(){Pe&&Ne(Pe),Pe=null,je=!0},Re.onerror=function(){qe=!0,Pe=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Xe="01";function Et(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var St=Qe;function Qe(n,e,r,o){this.cx=3*n,this.bx=3*(r-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=e,this.p2x=r,this.p2y=o}Qe.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,e){if(e===void 0&&(e=1e-6),n<0)return 0;if(n>1)return 1;for(var r=n,o=0;o<8;o++){var u=this.sampleCurveX(r)-n;if(Math.abs(u)<e)return r;var d=this.sampleCurveDerivativeX(r);if(Math.abs(d)<1e-6)break;r-=u/d}var m=0,_=1;for(r=n,o=0;o<20&&(u=this.sampleCurveX(r),!(Math.abs(u-n)<e));o++)n>u?m=r:_=r,r=.5*(_-m)+m;return r},solve:function(n,e){return this.sampleCurveY(this.solveCurveX(n,e))}};var Nt=Et(St),Mn=dn;function dn(n,e){this.x=n,this.y=e}dn.prototype={clone:function(){return new dn(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,e){return this.clone()._rotateAround(n,e)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var e=n.x-this.x,r=n.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult:function(n){var e=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=e,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var e=Math.cos(n),r=Math.sin(n),o=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=o,this},_rotateAround:function(n,e){var r=Math.cos(n),o=Math.sin(n),u=e.y+o*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-o*(this.y-e.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},dn.convert=function(n){return n instanceof dn?n:Array.isArray(n)?new dn(n[0],n[1]):n};var ut=Et(Mn);const qn=Math.PI/180,Jn=180/Math.PI;function et(n){return n*qn}function $t(n){return n*Jn}const un=[[0,0],[1,0],[1,1],[0,1]];function Hn(n){if(n<=0)return 0;if(n>=1)return 1;const e=n*n,r=e*n;return 4*(n<.5?r:3*(n-e)+r-.75)}function cn(n,e,r,o){const u=new Nt(n,e,r,o);return function(d){return u.solve(d)}}const Cr=cn(.25,.1,.25,1);function It(n,e,r){return Math.min(r,Math.max(e,n))}function Ee(n,e,r){return(r=It((r-n)/(e-n),0,1))*r*(3-2*r)}function Fn(n,e,r){const o=r-e,u=((n-e)%o+o)%o+e;return u===e?r:u}function An(n,e,r){if(!n.length)return r(null,[]);let o=n.length;const u=new Array(n.length);let d=null;n.forEach((m,_)=>{e(m,(S,T)=>{S&&(d=S),u[_]=T,--o==0&&r(d,u)})})}function Me(n){const e=[];for(const r in n)e.push(n[r]);return e}function Vn(n,...e){for(const r of e)for(const o in r)n[o]=r[o];return n}let Ti=1;function Vi(){return Ti++}function Ci(){return function n(e){return e?(e^Math.random()*(16>>e/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function hr(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ai(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Or(n,e){n.forEach(r=>{e[r]&&(e[r]=e[r].bind(e))})}function xi(n,e){return n.indexOf(e,n.length-e.length)!==-1}function Dn(n,e,r){const o={};for(const u in n)o[u]=e.call(this,n[u],u,n);return o}function Yr(n,e,r){const o={};for(const u in n)e.call(r||this,n[u],u,n)&&(o[u]=n[u]);return o}function Zr(n){return Array.isArray(n)?n.map(Zr):typeof n=="object"&&n?Dn(n,Zr):n}const oi={};function Wn(n){oi[n]||(typeof console<"u"&&console.warn(n),oi[n]=!0)}function Dr(n,e,r){return(r.y-n.y)*(e.x-n.x)>(e.y-n.y)*(r.x-n.x)}function aa(n){let e=0;for(let r,o,u=0,d=n.length,m=d-1;u<d;m=u++)r=n[u],o=n[m],e+=(o.x-r.x)*(r.y+o.y);return e}function bi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Kr(n){const e={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,o,u,d)=>{const m=u||d;return e[o]=!m||m.toLowerCase(),""}),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e}let va=null;function Wi(n){if(va==null){const e=n.navigator?n.navigator.userAgent:null;va=!!n.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return va}function Zi(n){try{const e=N[n];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch{return!1}}function Xi(n,e){return[n[4*e],n[4*e+1],n[4*e+2],n[4*e+3]]}const Ii="mapbox-tiles";let ft=500,at=50,Jt,On;function sr(){try{return N.caches}catch{}}function Ht(){sr()&&!Jt&&(Jt=N.caches.open(Ii))}function hn(n){const e=n.indexOf("?");if(e<0)return n;const r=function(u){const d=u.indexOf("?");return d>0?u.slice(d+1).split("&"):[]}(n),o=r.filter(u=>{const d=u.split("=");return d[0]==="language"||d[0]==="worldview"});return o.length?`${n.slice(0,e)}?${o.join("&")}`:n.slice(0,e)}let Un=1/0;const dr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(dr);class fr extends Error{constructor(e,r,o){r===401&&$e(o)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=r,this.url=o}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const xr=bi()?()=>self.worker&&self.worker.referrer:()=>(N.location.protocol==="blob:"?N.parent:N).location.href,Rr=function(n,e){if(!(/^file:/.test(r=n.url)||/^file:/.test(xr())&&!/^\w+:/.test(r))){if(N.fetch&&N.Request&&N.AbortController&&N.Request.prototype.hasOwnProperty("signal"))return function(o,u){const d=new N.AbortController,m=new N.Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:xr(),referrerPolicy:o.referrerPolicy,signal:d.signal});let _=!1,S=!1;const T=(I=m.url).indexOf("sku=")>0&&$e(I);var I;o.type==="json"&&m.headers.set("Accept","application/json");const z=(j,V,Z)=>{if(S)return;if(j&&j.message!=="SecurityError"&&Wn(j.toString()),V&&Z)return O(V);const ne=Date.now();N.fetch(m).then(fe=>{if(fe.ok){const be=T?fe.clone():null;return O(fe,be,ne)}return u(new fr(fe.statusText,fe.status,o.url))}).catch(fe=>{fe.name!=="AbortError"&&u(new Error(`${fe.message} ${o.url}`))})},O=(j,V,Z)=>{(o.type==="arrayBuffer"?j.arrayBuffer():o.type==="json"?j.json():j.text()).then(ne=>{S||(V&&Z&&function(fe,be,he){if(Ht(),!Jt)return;const we={status:be.status,statusText:be.statusText,headers:new N.Headers};be.headers.forEach((Je,He)=>we.headers.set(He,Je));const Ce=Kr(be.headers.get("Cache-Control")||"");if(Ce["no-store"])return;Ce["max-age"]&&we.headers.set("Expires",new Date(he+1e3*Ce["max-age"]).toUTCString());const Te=we.headers.get("Expires");Te&&(new Date(Te).getTime()-he<42e4||function(Je,He){if(On===void 0)try{new Response(new ReadableStream),On=!0}catch{On=!1}On?He(Je.body):Je.blob().then(He)}(be,Je=>{const He=new N.Response(Je,we);Ht(),Jt&&Jt.then(mt=>mt.put(hn(fe.url),He)).catch(mt=>Wn(mt.message))}))}(m,V,Z),_=!0,u(null,ne,j.headers.get("Cache-Control"),j.headers.get("Expires")))}).catch(ne=>{S||u(new Error(ne.message))})};return T?function(j,V){if(Ht(),!Jt)return V(null);const Z=hn(j.url);Jt.then(ne=>{ne.match(Z).then(fe=>{const be=function(he){if(!he)return!1;const we=new Date(he.headers.get("Expires")||0),Ce=Kr(he.headers.get("Cache-Control")||"");return we>Date.now()&&!Ce["no-cache"]}(fe);ne.delete(Z),be&&ne.put(Z,fe.clone()),V(null,fe,be)}).catch(V)}).catch(V)}(m,z):z(null,null),{cancel:()=>{S=!0,_||d.abort()}}}(n,e);if(bi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,e,void 0,!0)}var r;return function(o,u){const d=new N.XMLHttpRequest;d.open(o.method||"GET",o.url,!0),o.type==="arrayBuffer"&&(d.responseType="arraybuffer");for(const m in o.headers)d.setRequestHeader(m,o.headers[m]);return o.type==="json"&&(d.responseType="text",d.setRequestHeader("Accept","application/json")),d.withCredentials=o.credentials==="include",d.onerror=()=>{u(new Error(d.statusText))},d.onload=()=>{if((d.status>=200&&d.status<300||d.status===0)&&d.response!==null){let m=d.response;if(o.type==="json")try{m=JSON.parse(d.response)}catch(_){return u(_)}u(null,m,d.getResponseHeader("Cache-Control"),d.getResponseHeader("Expires"))}else u(new fr(d.statusText,d.status,o.url))},d.send(o.body),{cancel:()=>d.abort()}}(n,e)},Jr=function(n,e){return Rr(Vn(n,{type:"arrayBuffer"}),e)};function Fr(n){const e=N.document.createElement("a");return e.href=n,e.protocol===N.document.location.protocol&&e.host===N.document.location.host}const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let K,ee;K=[],ee=0;const ye=function(n,e){if(J.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),ee>=X.MAX_PARALLEL_IMAGE_REQUESTS){const d={requestParameters:n,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return K.push(d),d}ee++;let r=!1;const o=()=>{if(!r)for(r=!0,ee--;K.length&&ee<X.MAX_PARALLEL_IMAGE_REQUESTS;){const d=K.shift(),{requestParameters:m,callback:_,cancelled:S}=d;S||(d.cancel=ye(m,_).cancel)}},u=Jr(n,(d,m,_,S)=>{o(),d?e(d):m&&(N.createImageBitmap?function(T,I){const z=new N.Blob([new Uint8Array(T)],{type:"image/png"});N.createImageBitmap(z).then(O=>{I(null,O)}).catch(O=>{I(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(m,(T,I)=>e(T,I,_,S)):function(T,I){const z=new N.Image,O=N.URL;z.onload=()=>{I(null,z),O.revokeObjectURL(z.src),z.onload=null,N.requestAnimationFrame(()=>{z.src=_e})},z.onerror=()=>I(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const j=new N.Blob([new Uint8Array(T)],{type:"image/png"});z.src=T.byteLength?O.createObjectURL(j):_e}(m,(T,I)=>e(T,I,_,S)))});return{cancel:()=>{u.cancel(),o()}}},Se="NO_ACCESS_TOKEN";function ze(n){return n.indexOf("mapbox:")===0}function $e(n){return X.API_URL_REGEX.test(n)}function Ge(n){return X.API_CDN_URL_REGEX.test(n)}function Le(n){return X.API_STYLE_REGEX.test(n)&&!Ye(n)}function Ye(n){return X.API_SPRITE_REGEX.test(n)}const zt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Gt(n){const e=n.match(zt);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function kt(n){const e=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${e}`}const Ln="mapbox.eventData";function jn(n){if(!n)return null;const e=n.split(".");if(!e||e.length!==3)return null;try{return JSON.parse(decodeURIComponent(N.atob(e[1]).split("").map(r=>"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class xe{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const r=jn(X.ACCESS_TOKEN);let o="";return o=r&&r.u?N.btoa(encodeURIComponent(r.u).replace(/%([0-9A-F]{2})/g,(u,d)=>String.fromCharCode(+("0x"+d)))):X.ACCESS_TOKEN||"",e?`${Ln}.${e}:${o}`:`${Ln}:${o}`}fetchEventData(){const e=Zi("localStorage"),r=this.getStorageKey(),o=this.getStorageKey("uuid");if(e)try{const u=N.localStorage.getItem(r);u&&(this.eventData=JSON.parse(u));const d=N.localStorage.getItem(o);d&&(this.anonId=d)}catch{Wn("Unable to read from LocalStorage")}}saveEventData(){const e=Zi("localStorage"),r=this.getStorageKey(),o=this.getStorageKey("uuid");if(e)try{N.localStorage.setItem(o,this.anonId),Object.keys(this.eventData).length>=1&&N.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Wn("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,r,o,u){if(!X.EVENTS_URL)return;const d=Gt(X.EVENTS_URL);d.params.push(`access_token=${u||X.ACCESS_TOKEN||""}`);const m={event:this.type,created:new Date(e).toISOString()},_=r?Vn(m,r):m,S={url:kt(d),headers:{"Content-Type":"text/plain"},body:JSON.stringify([_])};this.pendingRequest=function(T,I){return Rr(Vn(T,{method:"POST"}),I)}(S,T=>{this.pendingRequest=null,o(T),this.saveEventData(),this.processRequests(u)})}queueRequest(e,r){this.queue.push(e),this.processRequests(r)}}const dt=new class extends xe{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,e){X.EVENTS_URL&&X.ACCESS_TOKEN&&Array.isArray(n)&&n.some(r=>ze(r)||$e(r))&&this.queueRequest(Date.now(),e)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const e=jn(X.ACCESS_TOKEN),r=e?e.u:X.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;ai(this.anonId)||(this.anonId=Ci(),o=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const d=new Date(this.eventData.lastSuccess),m=new Date(u),_=(u-this.eventData.lastSuccess)/864e5;o=o||_>=1||_<-1||d.getDate()!==m.getDate()}else o=!0;o?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:G,skuId:Xe,"enabled.telemetry":!1,userId:this.anonId},d=>{d||(this.eventData.lastSuccess=u,this.eventData.tokenU=r)},n):this.processRequests()}},Dt=dt.postTurnstileEvent.bind(dt),pe=new class extends xe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,e,r,o){this.skuToken=e,this.errorCb=o,X.EVENTS_URL&&(r||X.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(Se)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||(this.anonId||this.fetchEventData(),ai(this.anonId)||(this.anonId=Ci()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:G,skuId:Xe,skuToken:this.skuToken,userId:this.anonId},o=>{o?this.errorCb(o):e&&(this.success[e]=!0)},n))}},ot=pe.postMapLoadEvent.bind(pe),yt=new class extends xe{constructor(){super("gljs.performance")}postPerformanceEvent(n,e){X.EVENTS_URL&&(n||X.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:e},n)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:e,performanceData:r}=this.queue.shift(),o=function(u){const d=N.performance.getEntriesByType("resource"),m=N.performance.getEntriesByType("mark"),_=function(O){const j={};if(O){for(const V in O)if(V!=="other")for(const Z of O[V]){const ne=`${V}ResolveRangeMin`,fe=`${V}ResolveRangeMax`,be=`${V}RequestCount`,he=`${V}RequestCachedCount`;j[ne]=Math.min(j[ne]||1/0,Z.startTime),j[fe]=Math.max(j[fe]||-1/0,Z.responseEnd);const we=Ce=>{j[Ce]===void 0&&(j[Ce]=0),++j[Ce]};Z.transferSize!==void 0&&Z.transferSize===0&&we(he),we(be)}}return j}(function(O,j){const V={};if(O)for(const Z of O){const ne=j(Z);V[ne]===void 0&&(V[ne]=[]),V[ne].push(Z)}return V}(d,Nr)),S=N.devicePixelRatio,T=N.navigator.connection||N.navigator.mozConnection||N.navigator.webkitConnection,I={counters:[],metadata:[],attributes:[]},z=(O,j,V)=>{V!=null&&O.push({name:j,value:V.toString()})};for(const O in _)z(I.counters,O,_[O]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(z(I.counters,"interactionRangeMin",u.interactionRange[0]),z(I.counters,"interactionRangeMax",u.interactionRange[1])),m)for(const O of Object.keys(En)){const j=En[O],V=m.find(Z=>Z.name===j);V&&z(I.counters,j,V.startTime)}return z(I.counters,"visibilityHidden",u.visibilityHidden),z(I.attributes,"style",function(O){if(O)for(const j of O){const V=j.name.split("?")[0];if(Le(V)){const Z=V.split("/").slice(-2);if(Z.length===2)return`mapbox://styles/${Z[0]}/${Z[1]}`}}}(d)),z(I.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),z(I.attributes,"fogEnabled",u.fogEnabled?"true":"false"),z(I.attributes,"projection",u.projection),z(I.attributes,"zoom",u.zoom),z(I.metadata,"devicePixelRatio",S),z(I.metadata,"connectionEffectiveType",T?T.effectiveType:void 0),z(I.metadata,"navigatorUserAgent",N.navigator.userAgent),z(I.metadata,"screenWidth",N.screen.width),z(I.metadata,"screenHeight",N.screen.height),z(I.metadata,"windowWidth",N.innerWidth),z(I.metadata,"windowHeight",N.innerHeight),z(I.metadata,"mapWidth",u.width/S),z(I.metadata,"mapHeight",u.height/S),z(I.metadata,"webglRenderer",u.renderer),z(I.metadata,"webglVendor",u.vendor),z(I.metadata,"sdkVersion",G),z(I.metadata,"sdkIdentifier","mapbox-gl-js"),I}(r);for(const u of o.metadata);for(const u of o.counters);for(const u of o.attributes);this.postEvent(e,o,()=>{},n)}},jt=yt.postPerformanceEvent.bind(yt),rn=new class extends xe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,e,r,o){if(!X.API_URL||!X.SESSION_PATH)return;const u=Gt(X.API_URL+X.SESSION_PATH);u.params.push(`sku=${e||""}`),u.params.push(`access_token=${o||X.ACCESS_TOKEN||""}`);const d={url:kt(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(m,_){return Rr(Vn(m,{method:"GET"}),_)}(d,m=>{this.pendingRequest=null,r(m),this.saveEventData(),this.processRequests(o)})}getSessionAPI(n,e,r,o){this.skuToken=e,this.errorCb=o,X.SESSION_PATH&&X.API_URL&&(r||X.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},r):this.errorCb(new Error(Se)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:e,timestamp:r}=this.queue.shift();e&&this.success[e]||this.getSession(r,this.skuToken,o=>{o?this.errorCb(o):e&&(this.success[e]=!0)},n)}},yn=rn.getSessionAPI.bind(rn),en=new Set,En={create:"create",load:"load",fullLoad:"fullLoad"},Xr={mark(n){N.performance.mark(n)},measure(n,e,r){N.performance.measure(n,e,r)}};function Nr(n){const e=n.name.split("?")[0];return Ge(e)&&e.includes("mapbox-gl.js")?"javascript":Ge(e)&&e.includes("mapbox-gl.css")?"css":function(r){return X.API_FONTS_REGEX.test(r)}(e)?"fontRange":Ye(e)?"sprite":Le(e)?"style":function(r){return X.API_TILEJSON_REGEX.test(r)}(e)?"tilejson":"other"}const Tn=N.performance;function $r(n){const e=n?n.url.toString():void 0;return Tn.getEntriesByName(e)}let Ea,Ua,Yi,Qi;const nr={now:()=>Yi!==void 0?Yi:N.performance.now(),setNow(n){Yi=n},restoreNow(){Yi=void 0},frame(n){const e=N.requestAnimationFrame(n);return{cancel:()=>N.cancelAnimationFrame(e)}},getImageData(n,e=0){const{width:r,height:o}=n;Qi||(Qi=N.document.createElement("canvas"));const u=Qi.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(r>Qi.width||o>Qi.height)&&(Qi.width=r,Qi.height=o),u.clearRect(-e,-e,r+2*e,o+2*e),u.drawImage(n,0,0,r,o),u.getImageData(-e,-e,r+2*e,o+2*e)},resolveURL:n=>(Ea||(Ea=N.document.createElement("a")),Ea.href=n,Ea.href),get devicePixelRatio(){return N.devicePixelRatio},get prefersReducedMotion(){return!!N.matchMedia&&(Ua==null&&(Ua=N.matchMedia("(prefers-reduced-motion: reduce)")),Ua.matches)}};function Xo(n,e,r){r[n]&&r[n].indexOf(e)!==-1||(r[n]=r[n]||[],r[n].push(e))}function vs(n,e,r){if(r&&r[n]){const o=r[n].indexOf(e);o!==-1&&r[n].splice(o,1)}}class Yo{constructor(e,r={}){Vn(this,r),this.type=e}}class po extends Yo{constructor(e,r={}){super("error",Vn({error:e},r))}}class Ys{on(e,r){return this._listeners=this._listeners||{},Xo(e,r,this._listeners),this}off(e,r){return vs(e,r,this._listeners),vs(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Xo(e,r,this._oneTimeListeners),this):new Promise(o=>this.once(e,o))}fire(e,r){typeof e=="string"&&(e=new Yo(e,r||{}));const o=e.type;if(this.listens(o)){e.target=this;const u=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const _ of u)_.call(this,e);const d=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const _ of d)vs(o,_,this._oneTimeListeners),_.call(this,e);const m=this._eventedParent;m&&(Vn(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),m.fire(e))}else e instanceof po&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var ct=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function mo(n,...e){for(const r of e)for(const o in r)n[o]=r[o];return n}function Oi(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function ea(n){if(Array.isArray(n))return n.map(ea);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const e={};for(const r in n)e[r]=ea(n[r]);return e}return Oi(n)}class oh extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}var Ro=oh;class ou{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[o,u]of r)this.bindings[o]=u}concat(e){return new ou(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var Tl=ou;const Ra={kind:"null"},Zt={kind:"number"},rr={kind:"string"},ir={kind:"boolean"},Ia={kind:"color"},uo={kind:"object"},ar={kind:"value"},Ya={kind:"collator"},Io={kind:"formatted"},_s={kind:"resolvedImage"};function ja(n,e){return{kind:"array",itemType:n,N:e}}function Qr(n){if(n.kind==="array"){const e=Qr(n.itemType);return typeof n.N=="number"?`array<${e}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${e}>`}return n.kind}const sh=[Ra,Zt,rr,ir,Ia,Io,uo,ja(ar),_s];function yr(n,e){if(e.kind==="error")return null;if(n.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!yr(n.itemType,e.itemType))&&(typeof n.N!="number"||n.N===e.N))return null}else{if(n.kind===e.kind)return null;if(n.kind==="value"){for(const r of sh)if(!yr(r,e))return null}}return`Expected ${Qr(n)} but found ${Qr(e)} instead.`}function Ks(n,e){return e.some(r=>r.kind===n.kind)}function Js(n,e){return e.some(r=>r==="null"?n===null:r==="array"?Array.isArray(n):r==="object"?n&&!Array.isArray(n)&&typeof n=="object":r===typeof n)}var lr,lh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ua(n){return(n=Math.round(n))<0?0:n>255?255:n}function Ko(n){return ua(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function Jo(n){return(e=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:e>1?1:e;var e}function Qs(n,e,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?n+(e-n)*r*6:2*r<1?e:3*r<2?n+(e-n)*(2/3-r)*6:n}try{lr={}.parseCSSColor=function(n){var e,r=n.replace(/ /g,"").toLowerCase();if(r in lh)return lh[r].slice();if(r[0]==="#")return r.length===4?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:r.length===7&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var o=r.indexOf("("),u=r.indexOf(")");if(o!==-1&&u+1===r.length){var d=r.substr(0,o),m=r.substr(o+1,u-(o+1)).split(","),_=1;switch(d){case"rgba":if(m.length!==4)return null;_=Jo(m.pop());case"rgb":return m.length!==3?null:[Ko(m[0]),Ko(m[1]),Ko(m[2]),_];case"hsla":if(m.length!==4)return null;_=Jo(m.pop());case"hsl":if(m.length!==3)return null;var S=(parseFloat(m[0])%360+360)%360/360,T=Jo(m[1]),I=Jo(m[2]),z=I<=.5?I*(T+1):I+T-I*T,O=2*I-z;return[ua(255*Qs(O,z,S+1/3)),ua(255*Qs(O,z,S)),ua(255*Qs(O,z,S-1/3)),_];default:return null}}return null}}catch{}class ei{constructor(e,r,o,u=1){this.r=e,this.g=r,this.b=o,this.a=u}static parse(e){if(!e)return;if(e instanceof ei)return e;if(typeof e!="string")return;const r=lr(e);return r?new ei(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3]):void 0}toString(){const[e,r,o,u]=this.toArray();return`rgba(${Math.round(e)},${Math.round(r)},${Math.round(o)},${u})`}toArray(){const{r:e,g:r,b:o,a:u}=this;return u===0?[0,0,0,0]:[255*e/u,255*r/u,255*o/u,u]}toArray01(){const{r:e,g:r,b:o,a:u}=this;return u===0?[0,0,0,0]:[e/u,r/u,o/u,u]}toArray01PremultipliedAlpha(){const{r:e,g:r,b:o,a:u}=this;return[e,r,o,u]}}ei.black=new ei(0,0,0,1),ei.white=new ei(1,1,1,1),ei.transparent=new ei(0,0,0,0),ei.red=new ei(1,0,0,1),ei.blue=new ei(0,0,1,1);var pr=ei;class Fu{constructor(e,r,o){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ka{constructor(e,r,o,u,d){this.text=e.normalize?e.normalize():e,this.image=r,this.scale=o,this.fontStack=u,this.textColor=d}}class Mi{constructor(e){this.sections=e}static fromString(e){return new Mi([new Ka(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Mi?e:Mi.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const r of this.sections){if(r.image){e.push(["image",r.image.name]);continue}e.push(r.text);const o={};r.fontStack&&(o["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(o["font-scale"]=r.scale),r.textColor&&(o["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(o)}return e}}class oa{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new oa({name:e,available:!1}):null}serialize(){return["image",this.name]}}function of(n,e,r,o){return typeof n=="number"&&n>=0&&n<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[n,e,r,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[n,e,r,o]:[n,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function xs(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof pr||n instanceof Fu||n instanceof Mi||n instanceof oa)return!0;if(Array.isArray(n)){for(const e of n)if(!xs(e))return!1;return!0}if(typeof n=="object"){for(const e in n)if(!xs(n[e]))return!1;return!0}return!1}function pi(n){if(n===null)return Ra;if(typeof n=="string")return rr;if(typeof n=="boolean")return ir;if(typeof n=="number")return Zt;if(n instanceof pr)return Ia;if(n instanceof Fu)return Ya;if(n instanceof Mi)return Io;if(n instanceof oa)return _s;if(Array.isArray(n)){const e=n.length;let r;for(const o of n){const u=pi(o);if(r){if(r===u)continue;r=ar;break}r=u}return ja(r||ar,e)}return uo}function Cl(n){const e=typeof n;return n===null?"":e==="string"||e==="number"||e==="boolean"?String(n):n instanceof pr||n instanceof Mi||n instanceof oa?n.toString():JSON.stringify(n)}class bs{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!xs(e[1]))return r.error("invalid value");const o=e[1];let u=pi(o);const d=r.expectedType;return u.kind!=="array"||u.N!==0||!d||d.kind!=="array"||typeof d.N=="number"&&d.N!==0||(u=d),new bs(u,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof pr?["rgba"].concat(this.value.toArray()):this.value instanceof Mi?this.value.serialize():this.value}}var ws=bs,ca=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const Qo={string:rr,number:Zt,boolean:ir,object:uo};class Ml{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let o,u=1;const d=e[0];if(d==="array"){let _,S;if(e.length>2){const T=e[1];if(typeof T!="string"||!(T in Qo)||T==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);_=Qo[T],u++}else _=ar;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);S=e[2],u++}o=ja(_,S)}else o=Qo[d];const m=[];for(;u<e.length;u++){const _=r.parse(e[u],u,ar);if(!_)return null;m.push(_)}return new Ml(o,m)}evaluate(e){for(let r=0;r<this.args.length;r++){const o=this.args[r].evaluate(e);if(!yr(this.type,pi(o)))return o;if(r===this.args.length-1)throw new ca(`Expected value to be of type ${Qr(this.type)}, but found ${Qr(pi(o))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,r=[e.kind];if(e.kind==="array"){const o=e.itemType;if(o.kind==="string"||o.kind==="number"||o.kind==="boolean"){r.push(o.kind);const u=e.N;(typeof u=="number"||this.args.length>1)&&r.push(u)}}return r.concat(this.args.map(o=>o.serialize()))}}var Va=Ml;class go{constructor(e){this.type=Io,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return r.error("First argument must be an image or text section.");const u=[];let d=!1;for(let m=1;m<=e.length-1;++m){const _=e[m];if(d&&typeof _=="object"&&!Array.isArray(_)){d=!1;let S=null;if(_["font-scale"]&&(S=r.parse(_["font-scale"],1,Zt),!S))return null;let T=null;if(_["text-font"]&&(T=r.parse(_["text-font"],1,ja(rr)),!T))return null;let I=null;if(_["text-color"]&&(I=r.parse(_["text-color"],1,Ia),!I))return null;const z=u[u.length-1];z.scale=S,z.font=T,z.textColor=I}else{const S=r.parse(e[m],1,ar);if(!S)return null;const T=S.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");d=!0,u.push({content:S,scale:null,font:null,textColor:null})}}return new go(u)}evaluate(e){return new Mi(this.sections.map(r=>{const o=r.content.evaluate(e);return pi(o)===_s?new Ka("",o,null,null,null):new Ka(Cl(o),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const r of this.sections){e.push(r.content.serialize());const o={};r.scale&&(o["font-scale"]=r.scale.serialize()),r.font&&(o["text-font"]=r.font.serialize()),r.textColor&&(o["text-color"]=r.textColor.serialize()),e.push(o)}return e}}class su{constructor(e){this.type=_s,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const o=r.parse(e[1],1,rr);return o?new su(o):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),o=oa.fromString(r);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(r)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const sf={"to-boolean":ir,"to-color":Ia,"to-number":Zt,"to-string":rr};class Nu{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const o=e[0];if((o==="to-boolean"||o==="to-string")&&e.length!==2)return r.error("Expected one argument.");const u=sf[o],d=[];for(let m=1;m<e.length;m++){const _=r.parse(e[m],m,ar);if(!_)return null;d.push(_)}return new Nu(u,d)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let r,o;for(const u of this.args){if(r=u.evaluate(e),o=null,r instanceof pr)return r;if(typeof r=="string"){const d=e.parseColor(r);if(d)return d}else if(Array.isArray(r)&&(o=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:of(r[0],r[1],r[2],r[3]),!o))return new pr(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new ca(o||`Could not parse color from value '${typeof r=="string"?r:String(JSON.stringify(r))}'`)}if(this.type.kind==="number"){let r=null;for(const o of this.args){if(r=o.evaluate(e),r===null)return 0;const u=Number(r);if(!isNaN(u))return u}throw new ca(`Could not convert ${JSON.stringify(r)} to number.`)}return this.type.kind==="formatted"?Mi.fromString(Cl(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?oa.fromString(Cl(this.args[0].evaluate(e))):Cl(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new go([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new su(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(r=>{e.push(r.serialize())}),e}}var el=Nu;const Q=["Unknown","Point","LineString","Polygon"];var Ie=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Q[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:r,y:o}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(r*e-n[0])+this.featureDistanceData.bearing[1]*(o*e-n[1])}return 0}parseColor(n){let e=this._parseColorCache[n];return e||(e=this._parseColorCache[n]=pr.parse(n)),e}};class st{constructor(e,r,o,u){this.name=e,this.type=r,this._evaluate=o,this.args=u}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,r){const o=e[0],u=st.definitions[o];if(!u)return r.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const d=Array.isArray(u)?u[0]:u.type,m=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,_=m.filter(([T])=>!Array.isArray(T)||T.length===e.length-1);let S=null;for(const[T,I]of _){S=new lf(r.registry,r.path,null,r.scope);const z=[];let O=!1;for(let j=1;j<e.length;j++){const V=e[j],Z=Array.isArray(T)?T[j-1]:T.type,ne=S.parse(V,1+z.length,Z);if(!ne){O=!0;break}z.push(ne)}if(!O)if(Array.isArray(T)&&T.length!==z.length)S.error(`Expected ${T.length} arguments, but found ${z.length} instead.`);else{for(let j=0;j<z.length;j++){const V=Array.isArray(T)?T[j]:T.type,Z=z[j];S.concat(j+1).checkSubtype(V,Z.type)}if(S.errors.length===0)return new st(o,d,I,z)}}if(_.length===1)r.errors.push(...S.errors);else{const T=(_.length?_:m).map(([z])=>{return O=z,Array.isArray(O)?`(${O.map(Qr).join(", ")})`:`(${Qr(O.type)}...)`;var O}).join(" | "),I=[];for(let z=1;z<e.length;z++){const O=r.parse(e[z],1+I.length);if(!O)return null;I.push(Qr(O.type))}r.error(`Expected arguments of type ${T}, but found (${I.join(", ")}) instead.`)}return null}static register(e,r){st.definitions=r;for(const o in r)e[o]=st}}var gt=st;class Yt{constructor(e,r,o){this.type=Ya,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return r.error("Collator options argument must be an object.");const u=r.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,ir);if(!u)return null;const d=r.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,ir);if(!d)return null;let m=null;return o.locale&&(m=r.parse(o.locale,1,rr),!m)?null:new Yt(u,d,m)}evaluate(e){return new Fu(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const zn=8192;function _n(n,e){n[0]=Math.min(n[0],e[0]),n[1]=Math.min(n[1],e[1]),n[2]=Math.max(n[2],e[0]),n[3]=Math.max(n[3],e[1])}function $n(n,e){return!(n[0]<=e[0]||n[2]>=e[2]||n[1]<=e[1]||n[3]>=e[3])}function br(n,e){const r=(180+n[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,u=Math.pow(2,e.z);return[Math.round(r*u*zn),Math.round(o*u*zn)]}function ti(n,e,r){const o=n[0]-e[0],u=n[1]-e[1],d=n[0]-r[0],m=n[1]-r[1];return o*m-d*u==0&&o*d<=0&&u*m<=0}function si(n,e){let r=!1;for(let m=0,_=e.length;m<_;m++){const S=e[m];for(let T=0,I=S.length;T<I-1;T++){if(ti(n,S[T],S[T+1]))return!1;(u=S[T])[1]>(o=n)[1]!=(d=S[T+1])[1]>o[1]&&o[0]<(d[0]-u[0])*(o[1]-u[1])/(d[1]-u[1])+u[0]&&(r=!r)}}var o,u,d;return r}function mi(n,e){for(let r=0;r<e.length;r++)if(si(n,e[r]))return!0;return!1}function Ai(n,e,r,o){const u=o[0]-r[0],d=o[1]-r[1],m=(n[0]-r[0])*d-u*(n[1]-r[1]),_=(e[0]-r[0])*d-u*(e[1]-r[1]);return m>0&&_<0||m<0&&_>0}function ki(n,e,r){for(const T of r)for(let I=0;I<T.length-1;++I)if((_=[(m=T[I+1])[0]-(d=T[I])[0],m[1]-d[1]])[0]*(S=[(u=e)[0]-(o=n)[0],u[1]-o[1]])[1]-_[1]*S[0]!=0&&Ai(o,u,d,m)&&Ai(d,m,o,u))return!0;var o,u,d,m,_,S;return!1}function Sn(n,e){for(let r=0;r<n.length;++r)if(!si(n[r],e))return!1;for(let r=0;r<n.length-1;++r)if(ki(n[r],n[r+1],e))return!1;return!0}function Al(n,e){for(let r=0;r<e.length;r++)if(Sn(n,e[r]))return!0;return!1}function kl(n,e,r){const o=[];for(let u=0;u<n.length;u++){const d=[];for(let m=0;m<n[u].length;m++){const _=br(n[u][m],r);_n(e,_),d.push(_)}o.push(d)}return o}function Uu(n,e,r){const o=[];for(let u=0;u<n.length;u++){const d=kl(n[u],e,r);o.push(d)}return o}function uh(n,e,r,o){if(n[0]<r[0]||n[0]>r[2]){const u=.5*o;let d=n[0]-r[0]>u?-o:r[0]-n[0]>u?o:0;d===0&&(d=n[0]-r[2]>u?-o:r[2]-n[0]>u?o:0),n[0]+=d}_n(e,n)}function Es(n,e,r,o){const u=Math.pow(2,o.z)*zn,d=[o.x*zn,o.y*zn],m=[];if(!n)return m;for(const _ of n)for(const S of _){const T=[S.x+d[0],S.y+d[1]];uh(T,e,r,u),m.push(T)}return m}function lu(n,e,r,o){const u=Math.pow(2,o.z)*zn,d=[o.x*zn,o.y*zn],m=[];if(!n)return m;for(const S of n){const T=[];for(const I of S){const z=[I.x+d[0],I.y+d[1]];_n(e,z),T.push(z)}m.push(T)}if(e[2]-e[0]<=u/2){(_=e)[0]=_[1]=1/0,_[2]=_[3]=-1/0;for(const S of m)for(const T of S)uh(T,e,r,u)}var _;return m}class Ss{constructor(e,r){this.type=ir,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(xs(e[1])){const o=e[1];if(o.type==="FeatureCollection")for(let u=0;u<o.features.length;++u){const d=o.features[u].geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Ss(o,o.features[u].geometry)}else if(o.type==="Feature"){const u=o.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new Ss(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new Ss(o,o)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,o){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(o.type==="Polygon"){const _=kl(o.coordinates,d,m),S=Es(r.geometry(),u,d,m);if(!$n(u,d))return!1;for(const T of S)if(!si(T,_))return!1}if(o.type==="MultiPolygon"){const _=Uu(o.coordinates,d,m),S=Es(r.geometry(),u,d,m);if(!$n(u,d))return!1;for(const T of S)if(!mi(T,_))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,o){const u=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=r.canonicalID();if(!m)return!1;if(o.type==="Polygon"){const _=kl(o.coordinates,d,m),S=lu(r.geometry(),u,d,m);if(!$n(u,d))return!1;for(const T of S)if(!Sn(T,_))return!1}if(o.type==="MultiPolygon"){const _=Uu(o.coordinates,d,m),S=lu(r.geometry(),u,d,m);if(!$n(u,d))return!1;for(const T of S)if(!Al(T,_))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var ju=Ss;function Vu(n){if(n instanceof gt&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof ju)return!1;let e=!0;return n.eachChild(r=>{e&&!Vu(r)&&(e=!1)}),e}function tl(n){if(n instanceof gt&&n.name==="feature-state")return!1;let e=!0;return n.eachChild(r=>{e&&!tl(r)&&(e=!1)}),e}function Dl(n,e){if(n instanceof gt&&e.indexOf(n.name)>=0)return!1;let r=!0;return n.eachChild(o=>{r&&!Dl(o,e)&&(r=!1)}),r}class $u{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const o=e[1];return r.scope.has(o)?new $u(o,r.scope.get(o)):r.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Dd=$u;class Gu{constructor(e,r=[],o,u=new Tl,d=[]){this.registry=e,this.path=r,this.key=r.map(m=>`[${m}]`).join(""),this.scope=u,this.errors=d,this.expectedType=o}parse(e,r,o,u,d={}){return r?this.concat(r,o,u)._parse(e,d):this._parse(e,d)}_parse(e,r){function o(u,d,m){return m==="assert"?new Va(d,[u]):m==="coerce"?new el(d,[u]):u}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=e[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const d=this.registry[u];if(d){let m=d.parse(e,this);if(!m)return null;if(this.expectedType){const _=this.expectedType,S=m.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||S.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(_,S))return null}else m=o(m,_,r.typeAnnotation||"coerce");else m=o(m,_,r.typeAnnotation||"assert")}if(!(m instanceof ws)&&m.type.kind!=="resolvedImage"&&Rd(m)){const _=new Ie;try{m=new ws(m.type,m.evaluate(_))}catch(S){return this.error(S.message),null}}return m}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,o){const u=typeof e=="number"?this.path.concat(e):this.path,d=o?this.scope.concat(o):this.scope;return new Gu(this.registry,u,r||null,d,this.errors)}error(e,...r){const o=`${this.key}${r.map(u=>`[${u}]`).join("")}`;this.errors.push(new Ro(o,e))}checkSubtype(e,r){const o=yr(e,r);return o&&this.error(o),o}}var lf=Gu;function Rd(n){if(n instanceof Dd)return Rd(n.boundExpression);if(n instanceof gt&&n.name==="error"||n instanceof Yt||n instanceof ju)return!1;const e=n instanceof el||n instanceof Va;let r=!0;return n.eachChild(o=>{r=e?r&&Rd(o):r&&o instanceof ws}),!!r&&Vu(n)&&Dl(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Lo(n,e){const r=n.length-1;let o,u,d=0,m=r,_=0;for(;d<=m;)if(_=Math.floor((d+m)/2),o=n[_],u=n[_+1],o<=e){if(_===r||e<u)return _;d=_+1}else{if(!(o>e))throw new ca("Input is not a number.");m=_-1}return 0}class uf{constructor(e,r,o){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[u,d]of o)this.labels.push(u),this.outputs.push(d)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const o=r.parse(e[1],1,Zt);if(!o)return null;const u=[];let d=null;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);for(let m=1;m<e.length;m+=2){const _=m===1?-1/0:e[m],S=e[m+1],T=m,I=m+1;if(typeof _!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(u.length&&u[u.length-1][0]>=_)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const z=r.parse(S,I,d);if(!z)return null;d=d||z.type,u.push([_,z])}return new uf(d,o,u)}evaluate(e){const r=this.labels,o=this.outputs;if(r.length===1)return o[0].evaluate(e);const u=this.input.evaluate(e);if(u<=r[0])return o[0].evaluate(e);const d=r.length;return u>=r[d-1]?o[d-1].evaluate(e):o[Lo(r,u)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e}}var ch=uf;function Sr(n,e,r){return n*(1-r)+e*r}var uu=Object.freeze({__proto__:null,array:function(n,e,r){return n.map((o,u)=>Sr(o,e[u],r))},color:function(n,e,r){return new pr(Sr(n.r,e.r,r),Sr(n.g,e.g,r),Sr(n.b,e.b,r),Sr(n.a,e.a,r))},number:Sr});const tm=.95047,qu=1.08883,Id=4/29,ha=6/29,es=3*ha*ha,fa=ha*ha*ha,nl=Math.PI/180,Ld=180/Math.PI;function Hu(n){return n>fa?Math.pow(n,1/3):n/es+Id}function zd(n){return n>ha?n*n*n:es*(n-Id)}function cu(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function cf(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function nm(n){const e=cf(n.r),r=cf(n.g),o=cf(n.b),u=Hu((.4124564*e+.3575761*r+.1804375*o)/tm),d=Hu((.2126729*e+.7151522*r+.072175*o)/1);return{l:116*d-16,a:500*(u-d),b:200*(d-Hu((.0193339*e+.119192*r+.9503041*o)/qu)),alpha:n.a}}function hf(n){let e=(n.l+16)/116,r=isNaN(n.a)?e:e+n.a/500,o=isNaN(n.b)?e:e-n.b/200;return e=1*zd(e),r=tm*zd(r),o=qu*zd(o),new pr(cu(3.2404542*r-1.5371385*e-.4985314*o),cu(-.969266*r+1.8760108*e+.041556*o),cu(.0556434*r-.2040259*e+1.0572252*o),n.alpha)}function Yg(n,e,r){const o=e-n;return n+r*(o>180||o<-180?o-360*Math.round(o/360):o)}const hh={forward:nm,reverse:hf,interpolate:function(n,e,r){return{l:Sr(n.l,e.l,r),a:Sr(n.a,e.a,r),b:Sr(n.b,e.b,r),alpha:Sr(n.alpha,e.alpha,r)}}},Wu={forward:function(n){const{l:e,a:r,b:o}=nm(n),u=Math.atan2(o,r)*Ld;return{h:u<0?u+360:u,c:Math.sqrt(r*r+o*o),l:e,alpha:n.a}},reverse:function(n){const e=n.h*nl,r=n.c;return hf({l:n.l,a:Math.cos(e)*r,b:Math.sin(e)*r,alpha:n.alpha})},interpolate:function(n,e,r){return{h:Yg(n.h,e.h,r),c:Sr(n.c,e.c,r),l:Sr(n.l,e.l,r),alpha:Sr(n.alpha,e.alpha,r)}}};var ff=Object.freeze({__proto__:null,hcl:Wu,lab:hh});class fh{constructor(e,r,o,u,d){this.type=e,this.operator=r,this.interpolation=o,this.input=u,this.labels=[],this.outputs=[];for(const[m,_]of d)this.labels.push(m),this.outputs.push(_)}static interpolationFactor(e,r,o,u){let d=0;if(e.name==="exponential")d=Pd(r,e.base,o,u);else if(e.name==="linear")d=Pd(r,1,o,u);else if(e.name==="cubic-bezier"){const m=e.controlPoints;d=new Nt(m[0],m[1],m[2],m[3]).solve(Pd(r,1,o,u))}return d}static parse(e,r){let[o,u,d,...m]=e;if(!Array.isArray(u)||u.length===0)return r.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const T=u[1];if(typeof T!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:T}}else{if(u[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const T=u.slice(1);if(T.length!==4||T.some(I=>typeof I!="number"||I<0||I>1))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:T}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(d=r.parse(d,2,Zt),!d)return null;const _=[];let S=null;o==="interpolate-hcl"||o==="interpolate-lab"?S=Ia:r.expectedType&&r.expectedType.kind!=="value"&&(S=r.expectedType);for(let T=0;T<m.length;T+=2){const I=m[T],z=m[T+1],O=T+3,j=T+4;if(typeof I!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(_.length&&_[_.length-1][0]>=I)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const V=r.parse(z,j,S);if(!V)return null;S=S||V.type,_.push([I,V])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new fh(S,o,u,d,_):r.error(`Type ${Qr(S)} is not interpolatable.`)}evaluate(e){const r=this.labels,o=this.outputs;if(r.length===1)return o[0].evaluate(e);const u=this.input.evaluate(e);if(u<=r[0])return o[0].evaluate(e);const d=r.length;if(u>=r[d-1])return o[d-1].evaluate(e);const m=Lo(r,u),_=fh.interpolationFactor(this.interpolation,u,r[m],r[m+1]),S=o[m].evaluate(e),T=o[m+1].evaluate(e);return this.operator==="interpolate"?uu[this.type.kind.toLowerCase()](S,T,_):this.operator==="interpolate-hcl"?Wu.reverse(Wu.interpolate(Wu.forward(S),Wu.forward(T),_)):hh.reverse(hh.interpolate(hh.forward(S),hh.forward(T),_))}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const r=[this.operator,e,this.input.serialize()];for(let o=0;o<this.labels.length;o++)r.push(this.labels[o],this.outputs[o].serialize());return r}}function Pd(n,e,r,o){const u=o-r,d=n-r;return u===0?0:e===1?d/u:(Math.pow(e,d)-1)/(Math.pow(e,u)-1)}var Ts=fh;class dh{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expectected at least one argument.");let o=null;const u=r.expectedType;u&&u.kind!=="value"&&(o=u);const d=[];for(const _ of e.slice(1)){const S=r.parse(_,1+d.length,o,void 0,{typeAnnotation:"omit"});if(!S)return null;o=o||S.type,d.push(S)}const m=u&&d.some(_=>yr(u,_.type));return new dh(m?ar:o,d)}evaluate(e){let r,o=null,u=0;for(const d of this.args){if(u++,o=d.evaluate(e),o&&o instanceof oa&&!o.available&&(r||(r=o),o=null,u===this.args.length))return r;if(o!==null)break}return o}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Rl=dh;class Zu{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let d=1;d<e.length-1;d+=2){const m=e[d];if(typeof m!="string")return r.error(`Expected string, but found ${typeof m} instead.`,d);if(/[^a-zA-Z0-9_]/.test(m))return r.error("Variable names must contain only alphanumeric characters or '_'.",d);const _=r.parse(e[d+1],d+1);if(!_)return null;o.push([m,_])}const u=r.parse(e[e.length-1],e.length-1,r.expectedType,o);return u?new Zu(o,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[r,o]of this.bindings)e.push(r,o.serialize());return e.push(this.result.serialize()),e}}var Od=Zu;class df{constructor(e,r,o){this.type=e,this.index=r,this.input=o}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=r.parse(e[1],1,Zt),u=r.parse(e[2],2,ja(r.expectedType||ar));return o&&u?new df(u.type.itemType,o,u):null}evaluate(e){const r=this.index.evaluate(e),o=this.input.evaluate(e);if(r<0)throw new ca(`Array index out of bounds: ${r} < 0.`);if(r>=o.length)throw new ca(`Array index out of bounds: ${r} > ${o.length-1}.`);if(r!==Math.floor(r))throw new ca(`Array index must be an integer, but found ${r} instead.`);return o[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Kg=df;class Bd{constructor(e,r){this.type=ir,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=r.parse(e[1],1,ar),u=r.parse(e[2],2,ar);return o&&u?Ks(o.type,[ir,rr,Zt,Ra,ar])?new Bd(o,u):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(o.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(o==null)return!1;if(!Js(r,["boolean","string","number","null"]))throw new ca(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(pi(r))} instead.`);if(!Js(o,["string","array"]))throw new ca(`Expected second argument to be of type array or string, but found ${Qr(pi(o))} instead.`);return o.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var pf=Bd;class ph{constructor(e,r,o){this.type=Zt,this.needle=e,this.haystack=r,this.fromIndex=o}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=r.parse(e[1],1,ar),u=r.parse(e[2],2,ar);if(!o||!u)return null;if(!Ks(o.type,[ir,rr,Zt,Ra,ar]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(o.type)} instead`);if(e.length===4){const d=r.parse(e[3],3,Zt);return d?new ph(o,u,d):null}return new ph(o,u)}evaluate(e){const r=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!Js(r,["boolean","string","number","null"]))throw new ca(`Expected first argument to be of type boolean, string, number or null, but found ${Qr(pi(r))} instead.`);if(!Js(o,["string","array"]))throw new ca(`Expected second argument to be of type array or string, but found ${Qr(pi(o))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(e);return o.indexOf(r,u)}return o.indexOf(r)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var rm=ph;class Fd{constructor(e,r,o,u,d,m){this.inputType=e,this.type=r,this.input=o,this.cases=u,this.outputs=d,this.otherwise=m}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let o,u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);const d={},m=[];for(let T=2;T<e.length-1;T+=2){let I=e[T];const z=e[T+1];Array.isArray(I)||(I=[I]);const O=r.concat(T);if(I.length===0)return O.error("Expected at least one branch label.");for(const V of I){if(typeof V!="number"&&typeof V!="string")return O.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return O.error("Numeric branch labels must be integer values.");if(o){if(O.checkSubtype(o,pi(V)))return null}else o=pi(V);if(d[String(V)]!==void 0)return O.error("Branch labels must be unique.");d[String(V)]=m.length}const j=r.parse(z,T,u);if(!j)return null;u=u||j.type,m.push(j)}const _=r.parse(e[1],1,ar);if(!_)return null;const S=r.parse(e[e.length-1],e.length-1,u);return S?_.type.kind!=="value"&&r.concat(1).checkSubtype(o,_.type)?null:new Fd(o,u,_,d,m,S):null}evaluate(e){const r=this.input.evaluate(e);return(pi(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),o=[],u={};for(const m of r){const _=u[this.cases[m]];_===void 0?(u[this.cases[m]]=o.length,o.push([this.cases[m],[m]])):o[_][1].push(m)}const d=m=>this.inputType.kind==="number"?Number(m):m;for(const[m,_]of o)e.push(_.length===1?d(_[0]):_.map(d)),e.push(this.outputs[m].serialize());return e.push(this.otherwise.serialize()),e}}var Jg=Fd;class Nd{constructor(e,r,o){this.type=e,this.branches=r,this.otherwise=o}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let o;r.expectedType&&r.expectedType.kind!=="value"&&(o=r.expectedType);const u=[];for(let m=1;m<e.length-1;m+=2){const _=r.parse(e[m],m,ir);if(!_)return null;const S=r.parse(e[m+1],m+1,o);if(!S)return null;u.push([_,S]),o=o||S.type}const d=r.parse(e[e.length-1],e.length-1,o);return d?new Nd(o,u,d):null}evaluate(e){for(const[r,o]of this.branches)if(r.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,o]of this.branches)e(r),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,r])=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(r=>{e.push(r.serialize())}),e}}var Ud=Nd;class mh{constructor(e,r,o,u){this.type=e,this.input=r,this.beginIndex=o,this.endIndex=u}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=r.parse(e[1],1,ar),u=r.parse(e[2],2,Zt);if(!o||!u)return null;if(!Ks(o.type,[ja(ar),rr,ar]))return r.error(`Expected first argument to be of type array or string, but found ${Qr(o.type)} instead`);if(e.length===4){const d=r.parse(e[3],3,Zt);return d?new mh(o.type,o,u,d):null}return new mh(o.type,o,u)}evaluate(e){const r=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!Js(r,["string","array"]))throw new ca(`Expected first argument to be of type array or string, but found ${Qr(pi(r))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(e);return r.slice(o,u)}return r.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var jd=mh;function mf(n,e){return n==="=="||n==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function im(n,e,r,o){return o.compare(e,r)===0}function Xu(n,e,r){const o=n!=="=="&&n!=="!=";return class qA{constructor(d,m,_){this.type=ir,this.lhs=d,this.rhs=m,this.collator=_,this.hasUntypedArgument=d.type.kind==="value"||m.type.kind==="value"}static parse(d,m){if(d.length!==3&&d.length!==4)return m.error("Expected two or three arguments.");const _=d[0];let S=m.parse(d[1],1,ar);if(!S)return null;if(!mf(_,S.type))return m.concat(1).error(`"${_}" comparisons are not supported for type '${Qr(S.type)}'.`);let T=m.parse(d[2],2,ar);if(!T)return null;if(!mf(_,T.type))return m.concat(2).error(`"${_}" comparisons are not supported for type '${Qr(T.type)}'.`);if(S.type.kind!==T.type.kind&&S.type.kind!=="value"&&T.type.kind!=="value")return m.error(`Cannot compare types '${Qr(S.type)}' and '${Qr(T.type)}'.`);o&&(S.type.kind==="value"&&T.type.kind!=="value"?S=new Va(T.type,[S]):S.type.kind!=="value"&&T.type.kind==="value"&&(T=new Va(S.type,[T])));let I=null;if(d.length===4){if(S.type.kind!=="string"&&T.type.kind!=="string"&&S.type.kind!=="value"&&T.type.kind!=="value")return m.error("Cannot use collator to compare non-string types.");if(I=m.parse(d[3],3,Ya),!I)return null}return new qA(S,T,I)}evaluate(d){const m=this.lhs.evaluate(d),_=this.rhs.evaluate(d);if(o&&this.hasUntypedArgument){const S=pi(m),T=pi(_);if(S.kind!==T.kind||S.kind!=="string"&&S.kind!=="number")throw new ca(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${S.kind}, ${T.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const S=pi(m),T=pi(_);if(S.kind!=="string"||T.kind!=="string")return e(d,m,_)}return this.collator?r(d,m,_,this.collator.evaluate(d)):e(d,m,_)}eachChild(d){d(this.lhs),d(this.rhs),this.collator&&d(this.collator)}outputDefined(){return!0}serialize(){const d=[n];return this.eachChild(m=>{d.push(m.serialize())}),d}}}const Qg=Xu("==",function(n,e,r){return e===r},im),Vd=Xu("!=",function(n,e,r){return e!==r},function(n,e,r,o){return!im(0,e,r,o)}),hu=Xu("<",function(n,e,r){return e<r},function(n,e,r,o){return o.compare(e,r)<0}),gf=Xu(">",function(n,e,r){return e>r},function(n,e,r,o){return o.compare(e,r)>0}),am=Xu("<=",function(n,e,r){return e<=r},function(n,e,r,o){return o.compare(e,r)<=0}),fu=Xu(">=",function(n,e,r){return e>=r},function(n,e,r,o){return o.compare(e,r)>=0});class yf{constructor(e,r,o,u,d,m){this.type=rr,this.number=e,this.locale=r,this.currency=o,this.unit=u,this.minFractionDigits=d,this.maxFractionDigits=m}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const o=r.parse(e[1],1,Zt);if(!o)return null;const u=e[2];if(typeof u!="object"||Array.isArray(u))return r.error("NumberFormat options argument must be an object.");let d=null;if(u.locale&&(d=r.parse(u.locale,1,rr),!d))return null;let m=null;if(u.currency&&(m=r.parse(u.currency,1,rr),!m))return null;let _=null;if(u.unit&&(_=r.parse(u.unit,1,rr),!_))return null;let S=null;if(u["min-fraction-digits"]&&(S=r.parse(u["min-fraction-digits"],1,Zt),!S))return null;let T=null;return u["max-fraction-digits"]&&(T=r.parse(u["max-fraction-digits"],1,Zt),!T)?null:new yf(o,d,m,_,S,T)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Yu{constructor(e){this.type=Zt,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=r.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Qr(o.type)} instead.`):new Yu(o):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new ca(`Expected value to be of type string or array, but found ${Qr(pi(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(r=>{e.push(r.serialize())}),e}}const om={"==":Qg,"!=":Vd,">":gf,"<":hu,">=":fu,"<=":am,array:Va,at:Kg,boolean:Va,case:Ud,coalesce:Rl,collator:Yt,format:go,image:su,in:pf,"index-of":rm,interpolate:Ts,"interpolate-hcl":Ts,"interpolate-lab":Ts,length:Yu,let:Od,literal:ws,match:Jg,number:Va,"number-format":yf,object:Va,slice:jd,step:ch,string:Va,"to-boolean":el,"to-color":el,"to-number":el,"to-string":el,var:Dd,within:ju};function sm(n,[e,r,o,u]){e=e.evaluate(n),r=r.evaluate(n),o=o.evaluate(n);const d=u?u.evaluate(n):1,m=of(e,r,o,d);if(m)throw new ca(m);return new pr(e/255*d,r/255*d,o/255*d,d)}function rl(n,e){return n in e}function gh(n,e){const r=e[n];return r===void 0?null:r}function zo(n){return{type:n}}gt.register(om,{error:[{kind:"error"},[rr],(n,[e])=>{throw new ca(e.evaluate(n))}],typeof:[rr,[ar],(n,[e])=>Qr(pi(e.evaluate(n)))],"to-rgba":[ja(Zt,4),[Ia],(n,[e])=>e.evaluate(n).toArray()],rgb:[Ia,[Zt,Zt,Zt],sm],rgba:[Ia,[Zt,Zt,Zt,Zt],sm],has:{type:ir,overloads:[[[rr],(n,[e])=>rl(e.evaluate(n),n.properties())],[[rr,uo],(n,[e,r])=>rl(e.evaluate(n),r.evaluate(n))]]},get:{type:ar,overloads:[[[rr],(n,[e])=>gh(e.evaluate(n),n.properties())],[[rr,uo],(n,[e,r])=>gh(e.evaluate(n),r.evaluate(n))]]},"feature-state":[ar,[rr],(n,[e])=>gh(e.evaluate(n),n.featureState||{})],properties:[uo,[],n=>n.properties()],"geometry-type":[rr,[],n=>n.geometryType()],id:[ar,[],n=>n.id()],zoom:[Zt,[],n=>n.globals.zoom],pitch:[Zt,[],n=>n.globals.pitch||0],"distance-from-center":[Zt,[],n=>n.distanceFromCenter()],"heatmap-density":[Zt,[],n=>n.globals.heatmapDensity||0],"line-progress":[Zt,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[Zt,[],n=>n.globals.skyRadialProgress||0],accumulated:[ar,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[Zt,zo(Zt),(n,e)=>{let r=0;for(const o of e)r+=o.evaluate(n);return r}],"*":[Zt,zo(Zt),(n,e)=>{let r=1;for(const o of e)r*=o.evaluate(n);return r}],"-":{type:Zt,overloads:[[[Zt,Zt],(n,[e,r])=>e.evaluate(n)-r.evaluate(n)],[[Zt],(n,[e])=>-e.evaluate(n)]]},"/":[Zt,[Zt,Zt],(n,[e,r])=>e.evaluate(n)/r.evaluate(n)],"%":[Zt,[Zt,Zt],(n,[e,r])=>e.evaluate(n)%r.evaluate(n)],ln2:[Zt,[],()=>Math.LN2],pi:[Zt,[],()=>Math.PI],e:[Zt,[],()=>Math.E],"^":[Zt,[Zt,Zt],(n,[e,r])=>Math.pow(e.evaluate(n),r.evaluate(n))],sqrt:[Zt,[Zt],(n,[e])=>Math.sqrt(e.evaluate(n))],log10:[Zt,[Zt],(n,[e])=>Math.log(e.evaluate(n))/Math.LN10],ln:[Zt,[Zt],(n,[e])=>Math.log(e.evaluate(n))],log2:[Zt,[Zt],(n,[e])=>Math.log(e.evaluate(n))/Math.LN2],sin:[Zt,[Zt],(n,[e])=>Math.sin(e.evaluate(n))],cos:[Zt,[Zt],(n,[e])=>Math.cos(e.evaluate(n))],tan:[Zt,[Zt],(n,[e])=>Math.tan(e.evaluate(n))],asin:[Zt,[Zt],(n,[e])=>Math.asin(e.evaluate(n))],acos:[Zt,[Zt],(n,[e])=>Math.acos(e.evaluate(n))],atan:[Zt,[Zt],(n,[e])=>Math.atan(e.evaluate(n))],min:[Zt,zo(Zt),(n,e)=>Math.min(...e.map(r=>r.evaluate(n)))],max:[Zt,zo(Zt),(n,e)=>Math.max(...e.map(r=>r.evaluate(n)))],abs:[Zt,[Zt],(n,[e])=>Math.abs(e.evaluate(n))],round:[Zt,[Zt],(n,[e])=>{const r=e.evaluate(n);return r<0?-Math.round(-r):Math.round(r)}],floor:[Zt,[Zt],(n,[e])=>Math.floor(e.evaluate(n))],ceil:[Zt,[Zt],(n,[e])=>Math.ceil(e.evaluate(n))],"filter-==":[ir,[rr,ar],(n,[e,r])=>n.properties()[e.value]===r.value],"filter-id-==":[ir,[ar],(n,[e])=>n.id()===e.value],"filter-type-==":[ir,[rr],(n,[e])=>n.geometryType()===e.value],"filter-<":[ir,[rr,ar],(n,[e,r])=>{const o=n.properties()[e.value],u=r.value;return typeof o==typeof u&&o<u}],"filter-id-<":[ir,[ar],(n,[e])=>{const r=n.id(),o=e.value;return typeof r==typeof o&&r<o}],"filter->":[ir,[rr,ar],(n,[e,r])=>{const o=n.properties()[e.value],u=r.value;return typeof o==typeof u&&o>u}],"filter-id->":[ir,[ar],(n,[e])=>{const r=n.id(),o=e.value;return typeof r==typeof o&&r>o}],"filter-<=":[ir,[rr,ar],(n,[e,r])=>{const o=n.properties()[e.value],u=r.value;return typeof o==typeof u&&o<=u}],"filter-id-<=":[ir,[ar],(n,[e])=>{const r=n.id(),o=e.value;return typeof r==typeof o&&r<=o}],"filter->=":[ir,[rr,ar],(n,[e,r])=>{const o=n.properties()[e.value],u=r.value;return typeof o==typeof u&&o>=u}],"filter-id->=":[ir,[ar],(n,[e])=>{const r=n.id(),o=e.value;return typeof r==typeof o&&r>=o}],"filter-has":[ir,[ar],(n,[e])=>e.value in n.properties()],"filter-has-id":[ir,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[ir,[ja(rr)],(n,[e])=>e.value.indexOf(n.geometryType())>=0],"filter-id-in":[ir,[ja(ar)],(n,[e])=>e.value.indexOf(n.id())>=0],"filter-in-small":[ir,[rr,ja(ar)],(n,[e,r])=>r.value.indexOf(n.properties()[e.value])>=0],"filter-in-large":[ir,[rr,ja(ar)],(n,[e,r])=>function(o,u,d,m){for(;d<=m;){const _=d+m>>1;if(u[_]===o)return!0;u[_]>o?m=_-1:d=_+1}return!1}(n.properties()[e.value],r.value,0,r.value.length-1)],all:{type:ir,overloads:[[[ir,ir],(n,[e,r])=>e.evaluate(n)&&r.evaluate(n)],[zo(ir),(n,e)=>{for(const r of e)if(!r.evaluate(n))return!1;return!0}]]},any:{type:ir,overloads:[[[ir,ir],(n,[e,r])=>e.evaluate(n)||r.evaluate(n)],[zo(ir),(n,e)=>{for(const r of e)if(r.evaluate(n))return!0;return!1}]]},"!":[ir,[ir],(n,[e])=>!e.evaluate(n)],"is-supported-script":[ir,[rr],(n,[e])=>{const r=n.globals&&n.globals.isSupportedScript;return!r||r(e.evaluate(n))}],upcase:[rr,[rr],(n,[e])=>e.evaluate(n).toUpperCase()],downcase:[rr,[rr],(n,[e])=>e.evaluate(n).toLowerCase()],concat:[rr,zo(ar),(n,e)=>e.map(r=>Cl(r.evaluate(n))).join("")],"resolved-locale":[rr,[Ya],(n,[e])=>e.evaluate(n).resolvedLocale()]});var Ku=om;function $a(n){return{result:"success",value:n}}function Il(n){return{result:"error",value:n}}function Ju(n){return n["property-type"]==="data-driven"}function vf(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function _f(n){return!!n.expression&&n.expression.interpolated}function Ir(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function yh(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function $d(n){return n}function Qu(n,e){const r=e.type==="color",o=n.stops&&typeof n.stops[0][0]=="object",u=o||!(o||n.property!==void 0),d=n.type||(_f(e)?"exponential":"interval");if(r&&((n=mo({},n)).stops&&(n.stops=n.stops.map(T=>[T[0],pr.parse(T[1])])),n.default=pr.parse(n.default?n.default:e.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!ff[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let m,_,S;if(d==="exponential")m=il;else if(d==="interval")m=Ll;else if(d==="categorical"){m=lm,_=Object.create(null);for(const T of n.stops)_[T[0]]=T[1];S=typeof n.stops[0][0]}else{if(d!=="identity")throw new Error(`Unknown function type "${d}"`);m=um}if(o){const T={},I=[];for(let j=0;j<n.stops.length;j++){const V=n.stops[j],Z=V[0].zoom;T[Z]===void 0&&(T[Z]={zoom:Z,type:n.type,property:n.property,default:n.default,stops:[]},I.push(Z)),T[Z].stops.push([V[0].value,V[1]])}const z=[];for(const j of I)z.push([T[j].zoom,Qu(T[j],e)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:Ts.interpolationFactor.bind(void 0,O),zoomStops:z.map(j=>j[0]),evaluate:({zoom:j},V)=>il({stops:z,base:n.base},e,j).evaluate(j,V)}}if(u){const T=d==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:Ts.interpolationFactor.bind(void 0,T),zoomStops:n.stops.map(I=>I[0]),evaluate:({zoom:I})=>m(n,e,I,_,S)}}return{kind:"source",evaluate(T,I){const z=I&&I.properties?I.properties[n.property]:void 0;return z===void 0?Cs(n.default,e.default):m(n,e,z,_,S)}}}function Cs(n,e,r){return n!==void 0?n:e!==void 0?e:r!==void 0?r:void 0}function lm(n,e,r,o,u){return Cs(typeof r===u?o[r]:void 0,n.default,e.default)}function Ll(n,e,r){if(Ir(r)!=="number")return Cs(n.default,e.default);const o=n.stops.length;if(o===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[o-1][0])return n.stops[o-1][1];const u=Lo(n.stops.map(d=>d[0]),r);return n.stops[u][1]}function il(n,e,r){const o=n.base!==void 0?n.base:1;if(Ir(r)!=="number")return Cs(n.default,e.default);const u=n.stops.length;if(u===1||r<=n.stops[0][0])return n.stops[0][1];if(r>=n.stops[u-1][0])return n.stops[u-1][1];const d=Lo(n.stops.map(I=>I[0]),r),m=function(I,z,O,j){const V=j-O,Z=I-O;return V===0?0:z===1?Z/V:(Math.pow(z,Z)-1)/(Math.pow(z,V)-1)}(r,o,n.stops[d][0],n.stops[d+1][0]),_=n.stops[d][1],S=n.stops[d+1][1];let T=uu[e.type]||$d;if(n.colorSpace&&n.colorSpace!=="rgb"){const I=ff[n.colorSpace];T=(z,O)=>I.reverse(I.interpolate(I.forward(z),I.forward(O),m))}return typeof _.evaluate=="function"?{evaluate(...I){const z=_.evaluate.apply(void 0,I),O=S.evaluate.apply(void 0,I);if(z!==void 0&&O!==void 0)return T(z,O,m)}}:T(_,S,m)}function um(n,e,r){return e.type==="color"?r=pr.parse(r):e.type==="formatted"?r=Mi.fromString(r.toString()):e.type==="resolvedImage"?r=oa.fromString(r.toString()):Ir(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0),Cs(r,n.default,e.default)}class xf{constructor(e,r){this.expression=e,this._warningHistory={},this._evaluator=new Ie,this._defaultValue=r?function(o){return o.type==="color"&&(yh(o.default)||Array.isArray(o.default))?new pr(0,0,0,0):o.type==="color"?pr.parse(o.default)||null:o.default===void 0?null:o.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(e,r,o,u,d,m,_,S){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=o,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(e,r,o,u,d,m,_,S){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=o||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=d||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=_||null,this._evaluator.featureDistanceData=S||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new ca(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function zl(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Ku}function Pl(n,e){const r=new lf(Ku,[],e?function(u){const d={color:Ia,string:rr,number:Zt,enum:rr,boolean:ir,formatted:Io,resolvedImage:_s};return u.type==="array"?ja(d[u.value]||ar,u.length):d[u.type]}(e):void 0),o=r.parse(n,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?$a(new xf(o,e)):Il(r.errors)}class Ol{constructor(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!tl(r.expression)}evaluateWithoutErrorHandling(e,r,o,u,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,o,u,d,m)}evaluate(e,r,o,u,d,m){return this._styleExpression.evaluate(e,r,o,u,d,m)}}class Ms{constructor(e,r,o,u){this.kind=e,this.zoomStops=o,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!tl(r.expression),this.interpolationType=u}evaluateWithoutErrorHandling(e,r,o,u,d,m){return this._styleExpression.evaluateWithoutErrorHandling(e,r,o,u,d,m)}evaluate(e,r,o,u,d,m){return this._styleExpression.evaluate(e,r,o,u,d,m)}interpolationFactor(e,r,o){return this.interpolationType?Ts.interpolationFactor(this.interpolationType,e,r,o):0}}function ec(n,e){if((n=Pl(n,e)).result==="error")return n;const r=n.value.expression,o=Vu(r);if(!o&&!Ju(e))return Il([new Ro("","data expressions not supported")]);const u=Dl(r,["zoom","pitch","distance-from-center"]);if(!u&&!vf(e))return Il([new Ro("","zoom expressions not supported")]);const d=vh(r);return d||u?d instanceof Ro?Il([d]):d instanceof Ts&&!_f(e)?Il([new Ro("",'"interpolate" expressions cannot be used with this property')]):$a(d?new Ms(o?"camera":"composite",n.value,d.labels,d instanceof Ts?d.interpolation:void 0):new Ol(o?"constant":"source",n.value)):Il([new Ro("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class bf{constructor(e,r){this._parameters=e,this._specification=r,mo(this,Qu(this._parameters,this._specification))}static deserialize(e){return new bf(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function vh(n){let e=null;if(n instanceof Od)e=vh(n.result);else if(n instanceof Rl){for(const r of n.args)if(e=vh(r),e)break}else(n instanceof ch||n instanceof Ts)&&n.input instanceof gt&&n.input.name==="zoom"&&(e=n);return e instanceof Ro||n.eachChild(r=>{const o=vh(r);o instanceof Ro?e=o:!e&&o?e=new Ro("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new Ro("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}class nn{constructor(e,r,o,u){this.message=(e?`${e}: `:"")+o,u&&(this.identifier=u),r!=null&&r.__line__&&(this.line=r.__line__)}}function Po(n){const e=n.key,r=n.value,o=n.valueSpec||{},u=n.objectElementValidators||{},d=n.style,m=n.styleSpec;let _=[];const S=Ir(r);if(S!=="object")return[new nn(e,r,`object expected, ${S} found`)];for(const T in r){const I=T.split(".")[0];let z;u[I]?z=u[I]:o[I]?z=da:u["*"]?z=u["*"]:o["*"]&&(z=da),z?_=_.concat(z({key:(e&&`${e}.`)+T,value:r[T],valueSpec:o[I]||o["*"],style:d,styleSpec:m,object:r,objectKey:T},r)):_.push(new nn(e,r[T],`unknown property "${T}"`))}for(const T in o)u[T]||o[T].required&&o[T].default===void 0&&r[T]===void 0&&_.push(new nn(e,r,`missing required property "${T}"`));return _}function Gd(n){const e=n.value,r=n.valueSpec,o=n.style,u=n.styleSpec,d=n.key,m=n.arrayElementValidator||da;if(Ir(e)!=="array")return[new nn(d,e,`array expected, ${Ir(e)} found`)];if(r.length&&e.length!==r.length)return[new nn(d,e,`array length ${r.length} expected, length ${e.length} found`)];if(r["min-length"]&&e.length<r["min-length"])return[new nn(d,e,`array length at least ${r["min-length"]} expected, length ${e.length} found`)];let _={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};u.$version<7&&(_.function=r.function),Ir(r.value)==="object"&&(_=r.value);let S=[];for(let T=0;T<e.length;T++)S=S.concat(m({array:e,arrayIndex:T,value:e[T],valueSpec:_,style:o,styleSpec:u,key:`${d}[${T}]`}));return S}function tc(n){const e=n.key,r=n.value,o=n.valueSpec;let u=Ir(r);if(u==="number"&&r!=r&&(u="NaN"),u!=="number")return[new nn(e,r,`number expected, ${u} found`)];if("minimum"in o){let d=o.minimum;if(Ir(o.minimum)==="array"&&(d=o.minimum[n.arrayIndex]),r<d)return[new nn(e,r,`${r} is less than the minimum value ${d}`)]}if("maximum"in o){let d=o.maximum;if(Ir(o.maximum)==="array"&&(d=o.maximum[n.arrayIndex]),r>d)return[new nn(e,r,`${r} is greater than the maximum value ${d}`)]}return[]}function du(n){const e=n.valueSpec,r=Oi(n.value.type);let o,u,d,m={};const _=r!=="categorical"&&n.value.property===void 0,S=!_,T=Ir(n.value.stops)==="array"&&Ir(n.value.stops[0])==="array"&&Ir(n.value.stops[0][0])==="object",I=Po({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(j){if(r==="identity")return[new nn(j.key,j.value,'identity function may not have a "stops" property')];let V=[];const Z=j.value;return V=V.concat(Gd({key:j.key,value:Z,valueSpec:j.valueSpec,style:j.style,styleSpec:j.styleSpec,arrayElementValidator:z})),Ir(Z)==="array"&&Z.length===0&&V.push(new nn(j.key,Z,"array must have at least one stop")),V},default:function(j){return da({key:j.key,value:j.value,valueSpec:e,style:j.style,styleSpec:j.styleSpec})}}});return r==="identity"&&_&&I.push(new nn(n.key,n.value,'missing required property "property"')),r==="identity"||n.value.stops||I.push(new nn(n.key,n.value,'missing required property "stops"')),r==="exponential"&&n.valueSpec.expression&&!_f(n.valueSpec)&&I.push(new nn(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(S&&!Ju(n.valueSpec)?I.push(new nn(n.key,n.value,"property functions not supported")):_&&!vf(n.valueSpec)&&I.push(new nn(n.key,n.value,"zoom functions not supported"))),r!=="categorical"&&!T||n.value.property!==void 0||I.push(new nn(n.key,n.value,'"property" property is required')),I;function z(j){let V=[];const Z=j.value,ne=j.key;if(Ir(Z)!=="array")return[new nn(ne,Z,`array expected, ${Ir(Z)} found`)];if(Z.length!==2)return[new nn(ne,Z,`array length 2 expected, length ${Z.length} found`)];if(T){if(Ir(Z[0])!=="object")return[new nn(ne,Z,`object expected, ${Ir(Z[0])} found`)];if(Z[0].zoom===void 0)return[new nn(ne,Z,"object stop key must have zoom")];if(Z[0].value===void 0)return[new nn(ne,Z,"object stop key must have value")];const fe=Oi(Z[0].zoom);if(typeof fe!="number")return[new nn(ne,Z[0].zoom,"stop zoom values must be numbers")];if(d&&d>fe)return[new nn(ne,Z[0].zoom,"stop zoom values must appear in ascending order")];fe!==d&&(d=fe,u=void 0,m={}),V=V.concat(Po({key:`${ne}[0]`,value:Z[0],valueSpec:{zoom:{}},style:j.style,styleSpec:j.styleSpec,objectElementValidators:{zoom:tc,value:O}}))}else V=V.concat(O({key:`${ne}[0]`,value:Z[0],valueSpec:{},style:j.style,styleSpec:j.styleSpec},Z));return zl(ea(Z[1]))?V.concat([new nn(`${ne}[1]`,Z[1],"expressions are not allowed in function stops.")]):V.concat(da({key:`${ne}[1]`,value:Z[1],valueSpec:e,style:j.style,styleSpec:j.styleSpec}))}function O(j,V){const Z=Ir(j.value),ne=Oi(j.value),fe=j.value!==null?j.value:V;if(o){if(Z!==o)return[new nn(j.key,fe,`${Z} stop domain type must match previous stop domain type ${o}`)]}else o=Z;if(Z!=="number"&&Z!=="string"&&Z!=="boolean"&&typeof ne!="number"&&typeof ne!="string"&&typeof ne!="boolean")return[new nn(j.key,fe,"stop domain value must be a number, string, or boolean")];if(Z!=="number"&&r!=="categorical"){let be=`number expected, ${Z} found`;return Ju(e)&&r===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nn(j.key,fe,be)]}return r!=="categorical"||Z!=="number"||typeof ne=="number"&&isFinite(ne)&&Math.floor(ne)===ne?r!=="categorical"&&Z==="number"&&typeof ne=="number"&&typeof u=="number"&&u!==void 0&&ne<u?[new nn(j.key,fe,"stop domain values must appear in ascending order")]:(u=ne,r==="categorical"&&ne in m?[new nn(j.key,fe,"stop domain values must be unique")]:(m[ne]=!0,[])):[new nn(j.key,fe,`integer expected, found ${String(ne)}`)]}}function Sa(n){const e=(n.expressionContext==="property"?ec:Pl)(ea(n.value),n.valueSpec);if(e.result==="error")return e.value.map(o=>new nn(`${n.key}${o.key}`,n.value,o.message));const r=e.value.expression||e.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!r.outputDefined())return[new nn(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!tl(r))return[new nn(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter")return nc(r,n);if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Dl(r,["zoom","feature-state"]))return[new nn(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!Vu(r))return[new nn(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nc(n,e){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(e.valueSpec&&e.valueSpec.expression)for(const u of e.valueSpec.expression.parameters)r.delete(u);if(r.size===0)return[];const o=[];return n instanceof gt&&r.has(n.name)?[new nn(e.key,e.value,`["${n.name}"] expression is not supported in a filter for a ${e.object.type} layer with id: ${e.object.id}`)]:(n.eachChild(u=>{o.push(...nc(u,e))}),o)}function wf(n){const e=n.key,r=n.value,o=n.valueSpec,u=[];return Array.isArray(o.values)?o.values.indexOf(Oi(r))===-1&&u.push(new nn(e,r,`expected one of [${o.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(o.values).indexOf(Oi(r))===-1&&u.push(new nn(e,r,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(r)} found`)),u}function qd(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const e of n.slice(1))if(!qd(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function Ef(n,e="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};qd(n)||(n=ac(n));const r=n;let o=!0;try{o=function(T){if(!As(T))return T;let I=ea(T);return ic(I),I=rc(I),I}(r)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(r,null,2)}
        `)}const u=ct[`filter_${e}`],d=Pl(o,u);let m=null;if(d.result==="error")throw new Error(d.value.map(T=>`${T.key}: ${T.message}`).join(", "));m=(T,I,z)=>d.value.evaluate(T,I,{},z);let _=null,S=null;if(o!==r){const T=Pl(r,u);if(T.result==="error")throw new Error(T.value.map(I=>`${I.key}: ${I.message}`).join(", "));_=(I,z,O,j,V)=>T.value.evaluate(I,z,{},O,void 0,void 0,j,V),S=!Vu(T.value.expression)}return{filter:m,dynamicFilter:_||void 0,needGeometry:Tf(o),needFeature:!!S}}function rc(n){if(!Array.isArray(n))return n;const e=function(r){if(Sf.has(r[0])){for(let o=1;o<r.length;o++)if(As(r[o]))return!0}return r}(n);return e===!0?e:e.map(r=>rc(r))}function ic(n){let e=!1;const r=[];if(n[0]==="case"){for(let o=1;o<n.length-1;o+=2)e=e||As(n[o]),r.push(n[o+1]);r.push(n[n.length-1])}else if(n[0]==="match"){e=e||As(n[1]);for(let o=2;o<n.length-1;o+=2)r.push(n[o+1]);r.push(n[n.length-1])}else if(n[0]==="step"){e=e||As(n[1]);for(let o=1;o<n.length-1;o+=2)r.push(n[o+1])}e&&(n.length=0,n.push("any",...r));for(let o=1;o<n.length;o++)ic(n[o])}function As(n){if(!Array.isArray(n))return!1;if((e=n[0])==="pitch"||e==="distance-from-center")return!0;var e;for(let r=1;r<n.length;r++)if(As(n[r]))return!0;return!1}const Sf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function cm(n,e){return n<e?-1:n>e?1:0}function Tf(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let e=1;e<n.length;e++)if(Tf(n[e]))return!0;return!1}function ac(n){if(!n)return!0;const e=n[0];return n.length<=1?e!=="any":e==="=="?Bl(n[1],n[2],"=="):e==="!="?lc(Bl(n[1],n[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Bl(n[1],n[2],e):e==="any"?(r=n.slice(1),["any"].concat(r.map(ac))):e==="all"?["all"].concat(n.slice(1).map(ac)):e==="none"?["all"].concat(n.slice(1).map(ac).map(lc)):e==="in"?oc(n[1],n.slice(2)):e==="!in"?lc(oc(n[1],n.slice(2))):e==="has"?sc(n[1]):e==="!has"?lc(sc(n[1])):e!=="within"||n;var r}function Bl(n,e,r){switch(n){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,n,e]}}function oc(n,e){if(e.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(r=>typeof r!=typeof e[0])?["filter-in-large",n,["literal",e.sort(cm)]]:["filter-in-small",n,["literal",e]]}}function sc(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function lc(n){return["!",n]}function _h(n){return qd(ea(n.value))?Sa(mo({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):pu(n)}function pu(n){const e=n.value,r=n.key;if(Ir(e)!=="array")return[new nn(r,e,`array expected, ${Ir(e)} found`)];const o=n.styleSpec;let u,d=[];if(e.length<1)return[new nn(r,e,"filter array must have at least 1 element")];switch(d=d.concat(wf({key:`${r}[0]`,value:e[0],valueSpec:o.filter_operator,style:n.style,styleSpec:n.styleSpec})),Oi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&Oi(e[1])==="$type"&&d.push(new nn(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&d.push(new nn(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(u=Ir(e[1]),u!=="string"&&d.push(new nn(`${r}[1]`,e[1],`string expected, ${u} found`)));for(let m=2;m<e.length;m++)u=Ir(e[m]),Oi(e[1])==="$type"?d=d.concat(wf({key:`${r}[${m}]`,value:e[m],valueSpec:o.geometry_type,style:n.style,styleSpec:n.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&d.push(new nn(`${r}[${m}]`,e[m],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let m=1;m<e.length;m++)d=d.concat(pu({key:`${r}[${m}]`,value:e[m],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":u=Ir(e[1]),e.length!==2?d.push(new nn(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="string"&&d.push(new nn(`${r}[1]`,e[1],`string expected, ${u} found`));break;case"within":u=Ir(e[1]),e.length!==2?d.push(new nn(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):u!=="object"&&d.push(new nn(`${r}[1]`,e[1],`object expected, ${u} found`))}return d}function Hd(n,e){const r=n.key,o=n.style,u=n.styleSpec,d=n.value,m=n.objectKey,_=u[`${e}_${n.layerType}`];if(!_)return[];const S=m.match(/^(.*)-transition$/);if(e==="paint"&&S&&_[S[1]]&&_[S[1]].transition)return da({key:r,value:d,valueSpec:u.transition,style:o,styleSpec:u});const T=n.valueSpec||_[m];if(!T)return[new nn(r,d,`unknown property "${m}"`)];let I;if(Ir(d)==="string"&&Ju(T)&&!T.tokens&&(I=/^{([^}]+)}$/.exec(d))){const O=`\`{ "type": "identity", "property": ${I?JSON.stringify(I[1]):'"_"'} }\``;return[new nn(r,d,`"${m}" does not support interpolation syntax
Use an identity property function instead: ${O}.`)]}const z=[];return n.layerType==="symbol"&&(m==="text-field"&&o&&!o.glyphs&&z.push(new nn(r,d,'use of "text-field" requires a style "glyphs" property')),m==="text-font"&&yh(ea(d))&&Oi(d.type)==="identity"&&z.push(new nn(r,d,'"text-font" does not support identity functions'))),z.concat(da({key:n.key,value:d,valueSpec:T,style:o,styleSpec:u,expressionContext:"property",propertyType:e,propertyKey:m}))}function hm(n){return Hd(n,"paint")}function Wd(n){return Hd(n,"layout")}function Cf(n){let e=[];const r=n.value,o=n.key,u=n.style,d=n.styleSpec;r.type||r.ref||e.push(new nn(o,r,'either "type" or "ref" is required'));let m=Oi(r.type);const _=Oi(r.ref);if(r.id){const S=Oi(r.id);for(let T=0;T<n.arrayIndex;T++){const I=u.layers[T];Oi(I.id)===S&&e.push(new nn(o,r.id,`duplicate layer id "${r.id}", previously used at line ${I.id.__line__}`))}}if("ref"in r){let S;["type","source","source-layer","filter","layout"].forEach(T=>{T in r&&e.push(new nn(o,r[T],`"${T}" is prohibited for ref layers`))}),u.layers.forEach(T=>{Oi(T.id)===_&&(S=T)}),S?S.ref?e.push(new nn(o,r.ref,"ref cannot reference another ref layer")):m=Oi(S.type):typeof _=="string"&&e.push(new nn(o,r.ref,`ref layer "${_}" not found`))}else if(m!=="background"&&m!=="sky")if(r.source){const S=u.sources&&u.sources[r.source],T=S&&Oi(S.type);S?T==="vector"&&m==="raster"?e.push(new nn(o,r.source,`layer "${r.id}" requires a raster source`)):T==="raster"&&m!=="raster"?e.push(new nn(o,r.source,`layer "${r.id}" requires a vector source`)):T!=="vector"||r["source-layer"]?T==="raster-dem"&&m!=="hillshade"?e.push(new nn(o,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):m!=="line"||!r.paint||!r.paint["line-gradient"]&&!r.paint["line-trim-offset"]||T==="geojson"&&S.lineMetrics||e.push(new nn(o,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new nn(o,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new nn(o,r.source,`source "${r.source}" not found`))}else e.push(new nn(o,r,'missing required property "source"'));return e=e.concat(Po({key:o,value:r,valueSpec:d.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>da({key:`${o}.type`,value:r.type,valueSpec:d.layer.type,style:n.style,styleSpec:n.styleSpec,object:r,objectKey:"type"}),filter:S=>_h(mo({layerType:m},S)),layout:S=>Po({layer:r,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>Wd(mo({layerType:m},T))}}),paint:S=>Po({layer:r,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>hm(mo({layerType:m},T))}})}})),e}function yo(n){const e=n.value,r=n.key,o=Ir(e);return o!=="string"?[new nn(r,e,`string expected, ${o} found`)]:[]}const fm={promoteId:function({key:n,value:e}){if(Ir(e)==="string")return yo({key:n,value:e});{const r=[];for(const o in e)r.push(...yo({key:`${n}.${o}`,value:e[o]}));return r}}};function dm(n){const e=n.value,r=n.key,o=n.styleSpec,u=n.style;if(!e.type)return[new nn(r,e,'"type" is required')];const d=Oi(e.type);let m;switch(d){case"vector":case"raster":case"raster-dem":return m=Po({key:r,value:e,valueSpec:o[`source_${d.replace("-","_")}`],style:n.style,styleSpec:o,objectElementValidators:fm}),m;case"geojson":if(m=Po({key:r,value:e,valueSpec:o.source_geojson,style:u,styleSpec:o,objectElementValidators:fm}),e.cluster)for(const _ in e.clusterProperties){const[S,T]=e.clusterProperties[_],I=typeof S=="string"?[S,["accumulated"],["get",_]]:S;m.push(...Sa({key:`${r}.${_}.map`,value:T,expressionContext:"cluster-map"})),m.push(...Sa({key:`${r}.${_}.reduce`,value:I,expressionContext:"cluster-reduce"}))}return m;case"video":return Po({key:r,value:e,valueSpec:o.source_video,style:u,styleSpec:o});case"image":return Po({key:r,value:e,valueSpec:o.source_image,style:u,styleSpec:o});case"canvas":return[new nn(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wf({key:`${r}.type`,value:e.type,valueSpec:{values:Zn(o)},style:u,styleSpec:o})}}function Zn(n){return n.source.reduce((e,r)=>{const o=n[r];return o.type.type==="enum"&&(e=e.concat(Object.keys(o.type.values))),e},[])}function mu(n){const e=n.value,r=n.styleSpec,o=r.light,u=n.style;let d=[];const m=Ir(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new nn("light",e,`object expected, ${m} found`)]),d;for(const _ in e){const S=_.match(/^(.*)-transition$/);d=d.concat(S&&o[S[1]]&&o[S[1]].transition?da({key:_,value:e[_],valueSpec:r.transition,style:u,styleSpec:r}):o[_]?da({key:_,value:e[_],valueSpec:o[_],style:u,styleSpec:r}):[new nn(_,e[_],`unknown property "${_}"`)])}return d}function ta(n){const e=n.value,r=n.key,o=n.style,u=n.styleSpec,d=u.terrain;let m=[];const _=Ir(e);if(e===void 0)return m;if(_!=="object")return m=m.concat([new nn("terrain",e,`object expected, ${_} found`)]),m;for(const S in e){const T=S.match(/^(.*)-transition$/);m=m.concat(T&&d[T[1]]&&d[T[1]].transition?da({key:S,value:e[S],valueSpec:u.transition,style:o,styleSpec:u}):d[S]?da({key:S,value:e[S],valueSpec:d[S],style:o,styleSpec:u}):[new nn(S,e[S],`unknown property "${S}"`)])}if(e.source){const S=o.sources&&o.sources[e.source],T=S&&Oi(S.type);S?T!=="raster-dem"&&m.push(new nn(r,e.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):m.push(new nn(r,e.source,`source "${e.source}" not found`))}else m.push(new nn(r,e,'terrain is missing required property "source"'));return m}function Ar(n){const e=n.value,r=n.style,o=n.styleSpec,u=o.fog;let d=[];const m=Ir(e);if(e===void 0)return d;if(m!=="object")return d=d.concat([new nn("fog",e,`object expected, ${m} found`)]),d;for(const _ in e){const S=_.match(/^(.*)-transition$/);d=d.concat(S&&u[S[1]]&&u[S[1]].transition?da({key:_,value:e[_],valueSpec:o.transition,style:r,styleSpec:o}):u[_]?da({key:_,value:e[_],valueSpec:u[_],style:r,styleSpec:o}):[new nn(_,e[_],`unknown property "${_}"`)])}return d}const Fl={"*":()=>[],array:Gd,boolean:function(n){const e=n.value,r=n.key,o=Ir(e);return o!=="boolean"?[new nn(r,e,`boolean expected, ${o} found`)]:[]},number:tc,color:function(n){const e=n.key,r=n.value,o=Ir(r);return o!=="string"?[new nn(e,r,`color expected, ${o} found`)]:lr(r)===null?[new nn(e,r,`color expected, "${r}" found`)]:[]},enum:wf,filter:_h,function:du,layer:Cf,object:Po,source:dm,light:mu,terrain:ta,fog:Ar,string:yo,formatted:function(n){return yo(n).length===0?[]:Sa(n)},resolvedImage:function(n){return yo(n).length===0?[]:Sa(n)},projection:function(n){const e=n.value,r=n.styleSpec,o=r.projection,u=n.style;let d=[];const m=Ir(e);if(m==="object")for(const _ in e)d=d.concat(da({key:_,value:e[_],valueSpec:o[_],style:u,styleSpec:r}));else m!=="string"&&(d=d.concat([new nn("projection",e,`object or string expected, ${m} found`)]));return d}};function da(n){const e=n.value,r=n.valueSpec,o=n.styleSpec;return r.expression&&yh(Oi(e))?du(n):r.expression&&zl(ea(e))?Sa(n):r.type&&Fl[r.type]?Fl[r.type](n):Po(mo({},n,{valueSpec:r.type?o[r.type]:r}))}function Zd(n){const e=n.value,r=n.key,o=yo(n);return o.length||(e.indexOf("{fontstack}")===-1&&o.push(new nn(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new nn(r,e,'"glyphs" url must include a "{range}" token'))),o}function Ur(n,e=ct){return Ta(da({key:"",value:n,valueSpec:e.$root,styleSpec:e,style:n,objectElementValidators:{glyphs:Zd,"*":()=>[]}}))}const al=n=>Ta(hm(n)),Nl=n=>Ta(Wd(n));function Ta(n){return n.slice().sort((e,r)=>e.line&&r.line?e.line-r.line:0)}function Oo(n,e){let r=!1;if(e&&e.length)for(const o of e)n.fire(new po(new Error(o.message))),r=!0;return r}var ol=vo,La=3;function vo(n,e,r){var o=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var u=new Int32Array(this.arrayBuffer);n=u[0],this.d=(e=u[1])+2*(r=u[2]);for(var d=0;d<this.d*this.d;d++){var m=u[La+d],_=u[La+d+1];o.push(m===_?null:u.subarray(m,_))}var S=u[La+o.length+1];this.keys=u.subarray(u[La+o.length],S),this.bboxes=u.subarray(S),this.insert=this._insertReadonly}else{this.d=e+2*r;for(var T=0;T<this.d*this.d;T++)o.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=n,this.padding=r,this.scale=e/n,this.uid=0;var I=r/e*n;this.min=-I,this.max=n+I}vo.prototype.insert=function(n,e,r,o,u){this._forEachCell(e,r,o,u,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(e),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(u)},vo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},vo.prototype._insertCell=function(n,e,r,o,u,d){this.cells[u].push(d)},vo.prototype.query=function(n,e,r,o,u){var d=this.min,m=this.max;if(n<=d&&e<=d&&m<=r&&m<=o&&!u)return Array.prototype.slice.call(this.keys);var _=[];return this._forEachCell(n,e,r,o,this._queryCell,_,{},u),_},vo.prototype._queryCell=function(n,e,r,o,u,d,m,_){var S=this.cells[u];if(S!==null)for(var T=this.keys,I=this.bboxes,z=0;z<S.length;z++){var O=S[z];if(m[O]===void 0){var j=4*O;(_?_(I[j+0],I[j+1],I[j+2],I[j+3]):n<=I[j+2]&&e<=I[j+3]&&r>=I[j+0]&&o>=I[j+1])?(m[O]=!0,d.push(T[O])):m[O]=!1}}},vo.prototype._forEachCell=function(n,e,r,o,u,d,m,_){for(var S=this._convertToCellCoord(n),T=this._convertToCellCoord(e),I=this._convertToCellCoord(r),z=this._convertToCellCoord(o),O=S;O<=I;O++)for(var j=T;j<=z;j++){var V=this.d*j+O;if((!_||_(this._convertFromCellCoord(O),this._convertFromCellCoord(j),this._convertFromCellCoord(O+1),this._convertFromCellCoord(j+1)))&&u.call(this,n,e,r,o,V,d,m,_))return}},vo.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},vo.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},vo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,e=La+this.cells.length+1+1,r=0,o=0;o<this.cells.length;o++)r+=this.cells[o].length;var u=new Int32Array(e+r+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var d=e,m=0;m<n.length;m++){var _=n[m];u[La+m]=d,u.set(_,d),d+=_.length}return u[La+n.length]=d,u.set(this.keys,d),u[La+n.length+1]=d+=this.keys.length,u.set(this.bboxes,d),d+=this.bboxes.length,u.buffer};var gu=Et(ol);const Mf={};function an(n,e,r={}){Object.defineProperty(n,"_classRegistryKey",{value:e,writeable:!1}),Mf[e]={klass:n,omit:r.omit||[]}}an(Object,"Object"),gu.serialize=function(n,e){const r=n.toArrayBuffer();return e&&e.push(r),{buffer:r}},gu.deserialize=function(n){return new gu(n.buffer)},Object.defineProperty(gu,"name",{value:"Grid"}),an(gu,"Grid"),an(pr,"Color"),an(Error,"Error"),an(fr,"AJAXError"),an(oa,"ResolvedImage"),an(bf,"StylePropertyFunction"),an(xf,"StyleExpression",{omit:["_evaluator"]}),an(Ms,"ZoomDependentExpression"),an(Ol,"ZoomConstantExpression"),an(gt,"CompoundExpression",{omit:["_evaluate"]});for(const n in Ku)Mf[Ku[n]._classRegistryKey]||an(Ku[n],`Expression${n}`);function za(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function xh(n){return N.ImageBitmap&&n instanceof N.ImageBitmap}function yu(n,e){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(za(n)||xh(n))return e&&e.push(n),n;if(ArrayBuffer.isView(n)){const r=n;return e&&e.push(r.buffer),r}if(n instanceof N.ImageData)return e&&e.push(n.data.buffer),n;if(Array.isArray(n)){const r=[];for(const o of n)r.push(yu(o,e));return r}if(typeof n=="object"){const r=n.constructor,o=r._classRegistryKey;if(!o)throw new Error(`can't serialize object of unregistered class ${o}`);const u=r.serialize?r.serialize(n,e):{};if(!r.serialize){for(const d in n)n.hasOwnProperty(d)&&(Mf[o].omit.indexOf(d)>=0||(u[d]=yu(n[d],e)));n instanceof Error&&(u.message=n.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(u.$name=o),u}throw new Error("can't serialize object of type "+typeof n)}function sl(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||za(n)||xh(n)||ArrayBuffer.isView(n)||n instanceof N.ImageData)return n;if(Array.isArray(n))return n.map(sl);if(typeof n=="object"){const e=n.$name||"Object",{klass:r}=Mf[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(n);const o=Object.create(r.prototype);for(const u of Object.keys(n))u!=="$name"&&(o[u]=sl(n[u]));return o}throw new Error("can't deserialize object of type "+typeof n)}const Xt={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function bh(n){for(const e of n)if(Eh(e.charCodeAt(0)))return!0;return!1}function ll(n){for(const e of n)if(!wh(e.charCodeAt(0)))return!1;return!0}function wh(n){return!(Xt.Arabic(n)||Xt["Arabic Supplement"](n)||Xt["Arabic Extended-A"](n)||Xt["Arabic Presentation Forms-A"](n)||Xt["Arabic Presentation Forms-B"](n))}function Eh(n){return!(n!==746&&n!==747&&(n<4352||!(Xt["Bopomofo Extended"](n)||Xt.Bopomofo(n)||Xt["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||Xt["CJK Compatibility Ideographs"](n)||Xt["CJK Compatibility"](n)||Xt["CJK Radicals Supplement"](n)||Xt["CJK Strokes"](n)||!(!Xt["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||Xt["CJK Unified Ideographs Extension A"](n)||Xt["CJK Unified Ideographs"](n)||Xt["Enclosed CJK Letters and Months"](n)||Xt["Hangul Compatibility Jamo"](n)||Xt["Hangul Jamo Extended-A"](n)||Xt["Hangul Jamo Extended-B"](n)||Xt["Hangul Jamo"](n)||Xt["Hangul Syllables"](n)||Xt.Hiragana(n)||Xt["Ideographic Description Characters"](n)||Xt.Kanbun(n)||Xt["Kangxi Radicals"](n)||Xt["Katakana Phonetic Extensions"](n)||Xt.Katakana(n)&&n!==12540||!(!Xt["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!Xt["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||Xt["Unified Canadian Aboriginal Syllabics"](n)||Xt["Unified Canadian Aboriginal Syllabics Extended"](n)||Xt["Vertical Forms"](n)||Xt["Yijing Hexagram Symbols"](n)||Xt["Yi Syllables"](n)||Xt["Yi Radicals"](n))))}function Af(n){return!(Eh(n)||function(e){return!!(Xt["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||Xt["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||Xt["Letterlike Symbols"](e)||Xt["Number Forms"](e)||Xt["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||Xt["Control Pictures"](e)&&e!==9251||Xt["Optical Character Recognition"](e)||Xt["Enclosed Alphanumerics"](e)||Xt["Geometric Shapes"](e)||Xt["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Xt["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Xt["CJK Symbols and Punctuation"](e)||Xt.Katakana(e)||Xt["Private Use Area"](e)||Xt["CJK Compatibility Forms"](e)||Xt["Small Form Variants"](e)||Xt["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(n))}function uc(n){return n>=1424&&n<=2303||Xt["Arabic Presentation Forms-A"](n)||Xt["Arabic Presentation Forms-B"](n)}function cc(n,e){return!(!e&&uc(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||Xt.Khmer(n))}function ul(n){for(const e of n)if(uc(e.charCodeAt(0)))return!0;return!1}const Xd="deferred",cl="loading",kf="loaded";let vu=null,f="unavailable",i=null;const l=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(f="error"),vu&&vu(n)};function p(){v.fire(new Yo("pluginStateChange",{pluginStatus:f,pluginURL:i}))}const v=new Ys,b=function(){return f},M=function(){if(f!==Xd||!i)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");f=cl,p(),i&&Jr({url:i},n=>{n?l(n):(f=kf,p())})},D={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>f===kf||D.applyArabicShaping!=null,isLoading:()=>f===cl,setState(n){f=n.pluginStatus,i=n.pluginURL},isParsed:()=>D.applyArabicShaping!=null&&D.processBidirectionalText!=null&&D.processStyledBidirectionalText!=null,getPluginURL:()=>i};class L{constructor(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.transition=r.transition,this.pitch=r.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(r,o){for(const u of r)if(!cc(u.charCodeAt(0),o))return!1;return!0}(e,D.isLoaded())}}class F{constructor(e,r){this.property=e,this.value=r,this.expression=function(o,u){if(yh(o))return new bf(o,u);if(zl(o)){const d=ec(o,u);if(d.result==="error")throw new Error(d.value.map(m=>`${m.key}: ${m.message}`).join(", "));return d.value}{let d=o;return typeof o=="string"&&u.type==="color"&&(d=pr.parse(o)),{kind:"constant",evaluate:()=>d}}}(r===void 0?e.specification.default:r,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,r,o){return this.property.possiblyEvaluate(this,e,r,o)}}class B{constructor(e){this.property=e,this.value=new F(e,void 0)}transitioned(e,r){return new te(this.property,this.value,r,Vn({},e.transition,this.transition),e.now)}untransitioned(){return new te(this.property,this.value,null,{},0)}}class q{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Zr(this._values[e].value.value)}setValue(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new B(this._values[e].property)),this._values[e].value=new F(this._values[e].property,r===null?void 0:Zr(r))}getTransition(e){return Zr(this._values[e].transition)}setTransition(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new B(this._values[e].property)),this._values[e].transition=Zr(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const o=this.getValue(r);o!==void 0&&(e[r]=o);const u=this.getTransition(r);u!==void 0&&(e[`${r}-transition`]=u)}return e}transitioned(e,r){const o=new oe(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].transitioned(e,r._values[u]);return o}untransitioned(){const e=new oe(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class te{constructor(e,r,o,u,d){const m=u.delay||0,_=u.duration||0;d=d||0,this.property=e,this.value=r,this.begin=d+m,this.end=this.begin+_,e.specification.transition&&(u.delay||u.duration)&&(this.prior=o)}possiblyEvaluate(e,r,o){const u=e.now||0,d=this.value.possiblyEvaluate(e,r,o),m=this.prior;if(m){if(u>this.end)return this.prior=null,d;if(this.value.isDataDriven())return this.prior=null,d;if(u<this.begin)return m.possiblyEvaluate(e,r,o);{const _=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(m.possiblyEvaluate(e,r,o),d,Hn(_))}}return d}}class oe{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,o){const u=new ce(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,r,o);return u}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ue{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Zr(this._values[e].value)}setValue(e,r){this._values[e]=new F(this._values[e].property,r===null?void 0:Zr(r))}serialize(){const e={};for(const r of Object.keys(this._values)){const o=this.getValue(r);o!==void 0&&(e[r]=o)}return e}possiblyEvaluate(e,r,o){const u=new ce(this._properties);for(const d of Object.keys(this._values))u._values[d]=this._values[d].possiblyEvaluate(e,r,o);return u}}class se{constructor(e,r,o){this.property=e,this.value=r,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,o,u){return this.property.evaluate(this.value,this.parameters,e,r,o,u)}}class ce{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class W{constructor(e){this.specification=e}possiblyEvaluate(e,r){return e.expression.evaluate(r)}interpolate(e,r,o){const u=uu[this.specification.type];return u?u(e,r,o):e}}class ae{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,o,u){return new se(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},o,u)}:e.expression,r)}interpolate(e,r,o){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new se(this,{kind:"constant",value:void 0},e.parameters);const u=uu[this.specification.type];return u?new se(this,{kind:"constant",value:u(e.value.value,r.value.value,o)},e.parameters):e}evaluate(e,r,o,u,d,m){return e.kind==="constant"?e.value:e.evaluate(r,o,u,d,m)}}class ge{constructor(e){this.specification=e}possiblyEvaluate(e,r,o,u){return!!e.expression.evaluate(r,null,{},o,u)}interpolate(){return!1}}class ve{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const r=new L(0,{});for(const o in e){const u=e[o];u.specification.overridable&&this.overridableProperties.push(o);const d=this.defaultPropertyValues[o]=new F(u,void 0),m=this.defaultTransitionablePropertyValues[o]=new B(u);this.defaultTransitioningPropertyValues[o]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=d.possiblyEvaluate(r)}}}function De(n,e){return 256*(n=It(Math.floor(n),0,255))+It(Math.floor(e),0,255)}an(ae,"DataDrivenProperty"),an(W,"DataConstantProperty"),an(ge,"ColorRampProperty");const Ae={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class de{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Be{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Oe(n,e=1){let r=0,o=0;return{members:n.map(u=>{const d=Ae[u.type].BYTES_PER_ELEMENT,m=r=Ke(r,Math.max(e,d)),_=u.components||1;return o=Math.max(o,d),r+=d*_,{name:u.name,type:u.type,components:_,offset:m}}),size:Ke(r,Math.max(o,e)),alignment:e}}function Ke(n,e){return Math.ceil(n/e)*e}class Ot extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,r)}emplace(e,r,o){const u=2*e;return this.int16[u+0]=r,this.int16[u+1]=o,e}}Ot.prototype.bytesPerElement=4,an(Ot,"StructArrayLayout2i4");class We extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,o)}emplace(e,r,o,u){const d=3*e;return this.int16[d+0]=r,this.int16[d+1]=o,this.int16[d+2]=u,e}}We.prototype.bytesPerElement=6,an(We,"StructArrayLayout3i6");class _t extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,o,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,o,u)}emplace(e,r,o,u,d){const m=4*e;return this.int16[m+0]=r,this.int16[m+1]=o,this.int16[m+2]=u,this.int16[m+3]=d,e}}_t.prototype.bytesPerElement=8,an(_t,"StructArrayLayout4i8");class tt extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m,_){const S=this.length;return this.resize(S+1),this.emplace(S,e,r,o,u,d,m,_)}emplace(e,r,o,u,d,m,_,S){const T=6*e,I=12*e,z=3*e;return this.int16[T+0]=r,this.int16[T+1]=o,this.uint8[I+4]=u,this.uint8[I+5]=d,this.uint8[I+6]=m,this.uint8[I+7]=_,this.float32[z+2]=S,e}}tt.prototype.bytesPerElement=12,an(tt,"StructArrayLayout2i4ub1f12");class xt extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,o,u)}emplace(e,r,o,u,d){const m=4*e;return this.float32[m+0]=r,this.float32[m+1]=o,this.float32[m+2]=u,this.float32[m+3]=d,e}}xt.prototype.bytesPerElement=16,an(xt,"StructArrayLayout4f16");class Ze extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,o,u,d)}emplace(e,r,o,u,d,m){const _=6*e,S=3*e;return this.uint16[_+0]=r,this.uint16[_+1]=o,this.uint16[_+2]=u,this.uint16[_+3]=d,this.float32[S+2]=m,e}}Ze.prototype.bytesPerElement=12,an(Ze,"StructArrayLayout4ui1f12");class vt extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,o,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,o,u)}emplace(e,r,o,u,d){const m=4*e;return this.uint16[m+0]=r,this.uint16[m+1]=o,this.uint16[m+2]=u,this.uint16[m+3]=d,e}}vt.prototype.bytesPerElement=8,an(vt,"StructArrayLayout4ui8");class Ft extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,o,u,d,m)}emplace(e,r,o,u,d,m,_){const S=6*e;return this.int16[S+0]=r,this.int16[S+1]=o,this.int16[S+2]=u,this.int16[S+3]=d,this.int16[S+4]=m,this.int16[S+5]=_,e}}Ft.prototype.bytesPerElement=12,an(Ft,"StructArrayLayout6i12");class Tt extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m,_,S,T,I,z,O){const j=this.length;return this.resize(j+1),this.emplace(j,e,r,o,u,d,m,_,S,T,I,z,O)}emplace(e,r,o,u,d,m,_,S,T,I,z,O,j){const V=12*e;return this.int16[V+0]=r,this.int16[V+1]=o,this.int16[V+2]=u,this.int16[V+3]=d,this.uint16[V+4]=m,this.uint16[V+5]=_,this.uint16[V+6]=S,this.uint16[V+7]=T,this.int16[V+8]=I,this.int16[V+9]=z,this.int16[V+10]=O,this.int16[V+11]=j,e}}Tt.prototype.bytesPerElement=24,an(Tt,"StructArrayLayout4i4ui4i24");class Pt extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,o,u,d,m)}emplace(e,r,o,u,d,m,_){const S=10*e,T=5*e;return this.int16[S+0]=r,this.int16[S+1]=o,this.int16[S+2]=u,this.float32[T+2]=d,this.float32[T+3]=m,this.float32[T+4]=_,e}}Pt.prototype.bytesPerElement=20,an(Pt,"StructArrayLayout3i3f20");class pn extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}pn.prototype.bytesPerElement=4,an(pn,"StructArrayLayout1ul4");class Xn extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m,_,S,T,I,z,O,j){const V=this.length;return this.resize(V+1),this.emplace(V,e,r,o,u,d,m,_,S,T,I,z,O,j)}emplace(e,r,o,u,d,m,_,S,T,I,z,O,j,V){const Z=20*e,ne=10*e;return this.int16[Z+0]=r,this.int16[Z+1]=o,this.int16[Z+2]=u,this.int16[Z+3]=d,this.int16[Z+4]=m,this.float32[ne+3]=_,this.float32[ne+4]=S,this.float32[ne+5]=T,this.float32[ne+6]=I,this.int16[Z+14]=z,this.uint32[ne+8]=O,this.uint16[Z+18]=j,this.uint16[Z+19]=V,e}}Xn.prototype.bytesPerElement=40,an(Xn,"StructArrayLayout5i4f1i1ul2ui40");class sn extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m,_){const S=this.length;return this.resize(S+1),this.emplace(S,e,r,o,u,d,m,_)}emplace(e,r,o,u,d,m,_,S){const T=8*e;return this.int16[T+0]=r,this.int16[T+1]=o,this.int16[T+2]=u,this.int16[T+4]=d,this.int16[T+5]=m,this.int16[T+6]=_,this.int16[T+7]=S,e}}sn.prototype.bytesPerElement=16,an(sn,"StructArrayLayout3i2i2i16");class In extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,o,u,d)}emplace(e,r,o,u,d,m){const _=4*e,S=8*e;return this.float32[_+0]=r,this.float32[_+1]=o,this.float32[_+2]=u,this.int16[S+6]=d,this.int16[S+7]=m,e}}In.prototype.bytesPerElement=16,an(In,"StructArrayLayout2f1f2i16");class vr extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,o,u)}emplace(e,r,o,u,d){const m=12*e,_=3*e;return this.uint8[m+0]=r,this.uint8[m+1]=o,this.float32[_+1]=u,this.float32[_+2]=d,e}}vr.prototype.bytesPerElement=12,an(vr,"StructArrayLayout2ub2f12");class mr extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,o)}emplace(e,r,o,u){const d=3*e;return this.float32[d+0]=r,this.float32[d+1]=o,this.float32[d+2]=u,e}}mr.prototype.bytesPerElement=12,an(mr,"StructArrayLayout3f12");class gn extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,o){const u=this.length;return this.resize(u+1),this.emplace(u,e,r,o)}emplace(e,r,o,u){const d=3*e;return this.uint16[d+0]=r,this.uint16[d+1]=o,this.uint16[d+2]=u,e}}gn.prototype.bytesPerElement=6,an(gn,"StructArrayLayout3ui6");class jr extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne,fe,be,he,we,Ce){const Te=this.length;return this.resize(Te+1),this.emplace(Te,e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne,fe,be,he,we,Ce)}emplace(e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne,fe,be,he,we,Ce,Te){const Je=30*e,He=15*e,mt=60*e;return this.int16[Je+0]=r,this.int16[Je+1]=o,this.int16[Je+2]=u,this.float32[He+2]=d,this.float32[He+3]=m,this.uint16[Je+8]=_,this.uint16[Je+9]=S,this.uint32[He+5]=T,this.uint32[He+6]=I,this.uint32[He+7]=z,this.uint16[Je+16]=O,this.uint16[Je+17]=j,this.uint16[Je+18]=V,this.float32[He+10]=Z,this.float32[He+11]=ne,this.uint8[mt+48]=fe,this.uint8[mt+49]=be,this.uint8[mt+50]=he,this.uint32[He+13]=we,this.int16[Je+28]=Ce,this.uint8[mt+58]=Te,e}}jr.prototype.bytesPerElement=60,an(jr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ni extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne,fe,be,he,we,Ce,Te,Je,He,mt,Bt,nt,bt,wt,At){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne,fe,be,he,we,Ce,Te,Je,He,mt,Bt,nt,bt,wt,At)}emplace(e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne,fe,be,he,we,Ce,Te,Je,He,mt,Bt,nt,bt,wt,At,Ut){const ht=38*e,Kt=19*e;return this.int16[ht+0]=r,this.int16[ht+1]=o,this.int16[ht+2]=u,this.float32[Kt+2]=d,this.float32[Kt+3]=m,this.int16[ht+8]=_,this.int16[ht+9]=S,this.int16[ht+10]=T,this.int16[ht+11]=I,this.int16[ht+12]=z,this.int16[ht+13]=O,this.uint16[ht+14]=j,this.uint16[ht+15]=V,this.uint16[ht+16]=Z,this.uint16[ht+17]=ne,this.uint16[ht+18]=fe,this.uint16[ht+19]=be,this.uint16[ht+20]=he,this.uint16[ht+21]=we,this.uint16[ht+22]=Ce,this.uint16[ht+23]=Te,this.uint16[ht+24]=Je,this.uint16[ht+25]=He,this.uint16[ht+26]=mt,this.uint16[ht+27]=Bt,this.uint16[ht+28]=nt,this.uint32[Kt+15]=bt,this.float32[Kt+16]=wt,this.float32[Kt+17]=At,this.float32[Kt+18]=Ut,e}}ni.prototype.bytesPerElement=76,an(ni,"StructArrayLayout3i2f6i15ui1ul3f76");class li extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}li.prototype.bytesPerElement=4,an(li,"StructArrayLayout1f4");class ui extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,o,u,d){const m=this.length;return this.resize(m+1),this.emplace(m,e,r,o,u,d)}emplace(e,r,o,u,d,m){const _=5*e;return this.float32[_+0]=r,this.float32[_+1]=o,this.float32[_+2]=u,this.float32[_+3]=d,this.float32[_+4]=m,e}}ui.prototype.bytesPerElement=20,an(ui,"StructArrayLayout5f20");class Ga extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,o,u){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,o,u)}emplace(e,r,o,u,d){const m=6*e;return this.uint32[3*e+0]=r,this.uint16[m+2]=o,this.uint16[m+3]=u,this.uint16[m+4]=d,e}}Ga.prototype.bytesPerElement=12,an(Ga,"StructArrayLayout1ul3ui12");class Ca extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,r)}emplace(e,r,o){const u=2*e;return this.uint16[u+0]=r,this.uint16[u+1]=o,e}}Ca.prototype.bytesPerElement=4,an(Ca,"StructArrayLayout2ui4");class Bo extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}Bo.prototype.bytesPerElement=2,an(Bo,"StructArrayLayout1ui2");class ks extends Be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const o=this.length;return this.resize(o+1),this.emplace(o,e,r)}emplace(e,r,o){const u=2*e;return this.float32[u+0]=r,this.float32[u+1]=o,e}}ks.prototype.bytesPerElement=8,an(ks,"StructArrayLayout2f8");class Di extends de{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Di.prototype.size=40;class ci extends Xn{get(e){return new Di(this,e)}}an(ci,"CollisionBoxArray");class Lr extends de{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Lr.prototype.size=60;class sa extends jr{get(e){return new Lr(this,e)}}an(sa,"PlacedSymbolArray");class Ja extends de{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ja.prototype.size=76;class gi extends ni{get(e){return new Ja(this,e)}}an(gi,"SymbolInstanceArray");class xn extends li{getoffsetX(e){return this.float32[1*e+0]}}an(xn,"GlyphOffsetArray");class Er extends Ot{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}an(Er,"SymbolLineVertexArray");class zr extends de{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}zr.prototype.size=12;class Li extends Ga{get(e){return new zr(this,e)}}an(Li,"FeatureIndexArray");class Ma extends Ca{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}an(Ma,"FillExtrusionCentroidArray");const hl=Oe([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),_u=Oe([{name:"a_dash",components:4,type:"Uint16"}]);var Df={exports:{}},Sh={exports:{}};Sh.exports=function(n,e){var r,o,u,d,m,_,S,T;for(o=n.length-(r=3&n.length),u=e,m=3432918353,_=461845907,T=0;T<o;)S=255&n.charCodeAt(T)|(255&n.charCodeAt(++T))<<8|(255&n.charCodeAt(++T))<<16|(255&n.charCodeAt(++T))<<24,++T,u=27492+(65535&(d=5*(65535&(u=(u^=S=(65535&(S=(S=(65535&S)*m+(((S>>>16)*m&65535)<<16)&4294967295)<<15|S>>>17))*_+(((S>>>16)*_&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(d>>>16)&65535)<<16);switch(S=0,r){case 3:S^=(255&n.charCodeAt(T+2))<<16;case 2:S^=(255&n.charCodeAt(T+1))<<8;case 1:u^=S=(65535&(S=(S=(65535&(S^=255&n.charCodeAt(T)))*m+(((S>>>16)*m&65535)<<16)&4294967295)<<15|S>>>17))*_+(((S>>>16)*_&65535)<<16)&4294967295}return u^=n.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0};var Th=Sh.exports,qt={exports:{}};qt.exports=function(n,e){for(var r,o=n.length,u=e^o,d=0;o>=4;)r=1540483477*(65535&(r=255&n.charCodeAt(d)|(255&n.charCodeAt(++d))<<8|(255&n.charCodeAt(++d))<<16|(255&n.charCodeAt(++d))<<24))+((1540483477*(r>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),o-=4,++d;switch(o){case 3:u^=(255&n.charCodeAt(d+2))<<16;case 2:u^=(255&n.charCodeAt(d+1))<<8;case 1:u=1540483477*(65535&(u^=255&n.charCodeAt(d)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};var Pa=Th,ur=qt.exports;Df.exports=Pa,Df.exports.murmur3=Pa,Df.exports.murmur2=ur;var hc=Et(Df.exports);class Ds{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,o,u){this.ids.push(fc(e)),this.positions.push(r,o,u)}getPositions(e){const r=fc(e);let o=0,u=this.ids.length-1;for(;o<u;){const m=o+u>>1;this.ids[m]>=r?u=m:o=m+1}const d=[];for(;this.ids[o]===r;)d.push({index:this.positions[3*o],start:this.positions[3*o+1],end:this.positions[3*o+2]}),o++;return d}static serialize(e,r){const o=new Float64Array(e.ids),u=new Uint32Array(e.positions);return Rs(o,u,0,o.length-1),r&&r.push(o.buffer,u.buffer),{ids:o,positions:u}}static deserialize(e){const r=new Ds;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function fc(n){const e=+n;return!isNaN(e)&&Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:hc(String(n))}function Rs(n,e,r,o){for(;r<o;){const u=n[r+o>>1];let d=r-1,m=o+1;for(;;){do d++;while(n[d]<u);do m--;while(n[m]>u);if(d>=m)break;dc(n,d,m),dc(e,3*d,3*m),dc(e,3*d+1,3*m+1),dc(e,3*d+2,3*m+2)}m-r<o-m?(Rs(n,e,r,m),r=m+1):(Rs(n,e,m+1,o),o=m)}}function dc(n,e,r){const o=n[e];n[e]=n[r],n[r]=o}an(Ds,"FeaturePositionMap");class Fo{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,r){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,r),this.initialized=!0),!!this.location}}class pc extends Fo{constructor(e){super(e),this.current=0}set(e,r,o){this.fetchUniformLocation(e,r)&&this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class pm extends Fo{constructor(e){super(e),this.current=[0,0,0,0]}set(e,r,o){this.fetchUniformLocation(e,r)&&(o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3])))}}class mm extends Fo{constructor(e){super(e),this.current=pr.transparent}set(e,r,o){this.fetchUniformLocation(e,r)&&(o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a)))}}const ey=new Float32Array(16),ty=new Float32Array(9),ny=new Float32Array(4);function Yd(n){return[De(255*n.r,255*n.g),De(255*n.b,255*n.a)]}class Ch{constructor(e,r,o){this.value=e,this.uniformNames=r.map(u=>`u_${u}`),this.type=o}setUniform(e,r,o,u,d){r.set(e,d,u.constantOr(this.value))}getBinding(e,r){return this.type==="color"?new mm(e):new pc(e)}}class mc{constructor(e,r){this.uniformNames=r.map(o=>`u_${o}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,r,o,u,d){const m=d==="u_pattern"||d==="u_dash"?this.pattern:d==="u_pixel_ratio"?this.pixelRatio:null;m&&r.set(e,d,m)}getBinding(e,r){return r==="u_pattern"||r==="u_dash"?new pm(e):new pc(e)}}class fl{constructor(e,r,o,u){this.expression=e,this.type=o,this.maxValue=0,this.paintVertexAttributes=r.map(d=>({name:`a_${d}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(e,r,o,u,d,m){const _=this.paintVertexArray.length,S=this.expression.evaluate(new L(0),r,{},d,u,m);this.paintVertexArray.resize(e),this._setPaintValue(_,e,S)}updatePaintArray(e,r,o,u,d){const m=this.expression.evaluate({zoom:0},o,u,void 0,d);this._setPaintValue(e,r,m)}_setPaintValue(e,r,o){if(this.type==="color"){const u=Yd(o);for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,u[0],u[1])}else{for(let u=e;u<r;u++)this.paintVertexArray.emplace(u,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ts{constructor(e,r,o,u,d,m){this.expression=e,this.uniformNames=r.map(_=>`u_${_}_t`),this.type=o,this.useIntegerZoom=u,this.zoom=d,this.maxValue=0,this.paintVertexAttributes=r.map(_=>({name:`a_${_}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new m}populatePaintArray(e,r,o,u,d,m){const _=this.expression.evaluate(new L(this.zoom),r,{},d,u,m),S=this.expression.evaluate(new L(this.zoom+1),r,{},d,u,m),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,_,S)}updatePaintArray(e,r,o,u,d){const m=this.expression.evaluate({zoom:this.zoom},o,u,void 0,d),_=this.expression.evaluate({zoom:this.zoom+1},o,u,void 0,d);this._setPaintValue(e,r,m,_)}_setPaintValue(e,r,o,u){if(this.type==="color"){const d=Yd(o),m=Yd(u);for(let _=e;_<r;_++)this.paintVertexArray.emplace(_,d[0],d[1],m[0],m[1])}else{for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,o,u);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(u))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r,o,u,d){const m=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,_=It(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);r.set(e,d,_)}getBinding(e,r){return new pc(e)}}class Ul{constructor(e,r,o,u,d){this.expression=e,this.layerId=d,this.paintVertexAttributes=(o==="array"?_u:hl).members;for(let m=0;m<r.length;++m);this.paintVertexArray=new u}populatePaintArray(e,r,o){const u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(u,e,r.patterns&&r.patterns[this.layerId],o)}updatePaintArray(e,r,o,u,d,m){this._setPaintValues(e,r,o.patterns&&o.patterns[this.layerId],m)}_setPaintValues(e,r,o,u){if(!u||!o)return;const d=u[o];if(!d)return;const{tl:m,br:_,pixelRatio:S}=d;for(let T=e;T<r;T++)this.paintVertexArray.emplace(T,m[0],m[1],_[0],_[1],S)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jl{constructor(e,r,o=()=>!0){this.binders={},this._buffers=[];const u=[];for(const d in e.paint._values){if(!o(d))continue;const m=e.paint.get(d);if(!(m instanceof se&&Ju(m.property.specification)))continue;const _=iy(d,e.type),S=m.value,T=m.property.specification.type,I=!!m.property.useIntegerZoom,z=d==="line-dasharray"||d.endsWith("pattern"),O=d==="line-dasharray"&&e.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||O)if(S.kind==="source"||O||z){const j=ym(d,T,"source");this.binders[d]=z?new Ul(S,_,T,j,e.id):new fl(S,_,T,j),u.push(`/a_${d}`)}else{const j=ym(d,T,"composite");this.binders[d]=new ts(S,_,T,I,r,j),u.push(`/z_${d}`)}else this.binders[d]=z?new mc(S.value,_):new Ch(S.value,_,T),u.push(`/u_${d}`)}this.cacheKey=u.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof fl||r instanceof ts?r.maxValue:0}populatePaintArrays(e,r,o,u,d,m){for(const _ in this.binders){const S=this.binders[_];(S instanceof fl||S instanceof ts||S instanceof Ul)&&S.populatePaintArray(e,r,o,u,d,m)}}setConstantPatternPositions(e){for(const r in this.binders){const o=this.binders[r];o instanceof mc&&o.setConstantPatternPositions(e)}}updatePaintArrays(e,r,o,u,d,m){let _=!1;for(const S in e){const T=r.getPositions(S);for(const I of T){const z=o.feature(I.index);for(const O in this.binders){const j=this.binders[O];if((j instanceof fl||j instanceof ts||j instanceof Ul)&&j.expression.isStateDependent===!0){const V=u.paint.get(O);j.expression=V.value,j.updatePaintArray(I.start,I.end,z,e[S],d,m),_=!0}}}}return _}defines(){const e=[];for(const r in this.binders){const o=this.binders[r];(o instanceof Ch||o instanceof mc)&&e.push(...o.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof fl||o instanceof ts||o instanceof Ul)for(let u=0;u<o.paintVertexAttributes.length;u++)e.push(o.paintVertexAttributes[u].name)}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const o=this.binders[r];if(o instanceof Ch||o instanceof mc||o instanceof ts)for(const u of o.uniformNames)e.push(u)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const r=[];for(const o in this.binders){const u=this.binders[o];if(u instanceof Ch||u instanceof mc||u instanceof ts)for(const d of u.uniformNames)r.push({name:d,property:o,binding:u.getBinding(e,d)})}return r}setUniforms(e,r,o,u,d){for(const{name:m,property:_,binding:S}of o)this.binders[_].setUniform(e,S,d,u.get(_),m)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const r=this.binders[e];(r instanceof fl||r instanceof ts||r instanceof Ul)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const r in this.binders){const o=this.binders[r];(o instanceof fl||o instanceof ts||o instanceof Ul)&&o.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof fl||r instanceof ts||r instanceof Ul)&&r.destroy()}}}class xu{constructor(e,r,o=()=>!0){this.programConfigurations={};for(const u of e)this.programConfigurations[u.id]=new jl(u,r,o);this.needsUpload=!1,this._featureMap=new Ds,this._bufferOffset=0}populatePaintArrays(e,r,o,u,d,m,_){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(e,r,u,d,m,_);r.id!==void 0&&this._featureMap.add(r.id,o,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,o,u,d){for(const m of o)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(e,this._featureMap,r,m,u,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const ry={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function iy(n,e){return ry[n]||[n.replace(`${e}-`,"").replace(/-/g,"_")]}const gm={"line-pattern":{source:Ze,composite:Ze},"fill-pattern":{source:Ze,composite:Ze},"fill-extrusion-pattern":{source:Ze,composite:Ze},"line-dasharray":{source:vt,composite:vt}},Rf={color:{source:ks,composite:xt},number:{source:li,composite:ks}};function ym(n,e,r){const o=gm[n];return o&&o[r]||Rf[e][r]}an(Ch,"ConstantBinder"),an(mc,"PatternConstantBinder"),an(fl,"SourceExpressionBinder"),an(Ul,"PatternCompositeBinder"),an(ts,"CompositeExpressionBinder"),an(jl,"ProgramConfiguration",{omit:["_buffers"]}),an(xu,"ProgramConfigurationSet");const vm="-transition";class ns extends Ys{constructor(e,r){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&e.type!=="sky"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),r.layout&&(this._unevaluatedLayout=new ue(r.layout)),r.paint)){this._transitionablePaint=new q(r.paint);for(const o in e.paint)this.setPaintProperty(o,e.paint[o],{validate:!1});for(const o in e.layout)this.setLayoutProperty(o,e.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ce(r.paint)}}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,r,o={}){r!=null&&this._validate(Nl,`layers.${this.id}.layout.${e}`,e,r,o)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,r):this.visibility=r)}getPaintProperty(e){return xi(e,vm)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,o={}){if(r!=null&&this._validate(al,`layers.${this.id}.paint.${e}`,e,r,o))return!1;if(xi(e,vm))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const u=this._transitionablePaint._values[e],d=u.value.isDataDriven(),m=u.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const _=this._transitionablePaint._values[e].value,S=_.isDataDriven(),T=xi(e,"pattern")||e==="line-dasharray";return S||d||T||this._handleOverridablePaintPropertyUpdate(e,m,_)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,r,o){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,r){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Yr(e,(r,o)=>!(r===void 0||o==="layout"&&!Object.keys(r).length||o==="paint"&&!Object.keys(r).length))}_validate(e,r,o,u,d={}){return(!d||d.validate!==!1)&&Oo(this,e.call(Ur,{key:r,layerType:this.type,objectKey:o,value:u,styleSpec:ct,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof se&&Ju(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ef(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ay=Oe([{name:"a_pos",components:2,type:"Int16"}],4),p_=Oe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Bi{constructor(e=[]){this.segments=e}prepareSegment(e,r,o,u){let d=this.segments[this.segments.length-1];return e>Bi.MAX_VERTEX_ARRAY_LENGTH&&Wn(`Max vertices per segment is ${Bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!d||d.vertexLength+e>Bi.MAX_VERTEX_ARRAY_LENGTH||d.sortKey!==u)&&(d={vertexOffset:r.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},u!==void 0&&(d.sortKey=u),this.segments.push(d)),d}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,o,u){return new Bi([{vertexOffset:e,primitiveOffset:r,vertexLength:o,primitiveLength:u,vaos:{},sortKey:0}])}}Bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,an(Bi,"SegmentVector");var kn=8192;class Is{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof Vr?new Vr(e.lng,e.lat):Vr.convert(e),this}setSouthWest(e){return this._sw=e instanceof Vr?new Vr(e.lng,e.lat):Vr.convert(e),this}extend(e){const r=this._sw,o=this._ne;let u,d;if(e instanceof Vr)u=e,d=e;else{if(!(e instanceof Is))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Is.convert(e)):this.extend(Vr.convert(e)):typeof e=="object"&&e!==null&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Vr.convert(e)):this;if(u=e._sw,d=e._ne,!u||!d)return this}return r||o?(r.lng=Math.min(u.lng,r.lng),r.lat=Math.min(u.lat,r.lat),o.lng=Math.max(d.lng,o.lng),o.lat=Math.max(d.lat,o.lat)):(this._sw=new Vr(u.lng,u.lat),this._ne=new Vr(d.lng,d.lat)),this}getCenter(){return new Vr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Vr(this.getWest(),this.getNorth())}getSouthEast(){return new Vr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:o}=Vr.convert(e);let u=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=o&&o<=this._ne.lat&&u}static convert(e){return!e||e instanceof Is?e:new Is(e)}}var Vl=1e-6,$i=typeof Float32Array<"u"?Float32Array:Array;function m_(){var n=new $i(9);return $i!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function Fi(n,e,r){var o=e[0],u=e[1],d=e[2],m=e[3],_=e[4],S=e[5],T=e[6],I=e[7],z=e[8],O=r[0],j=r[1],V=r[2],Z=r[3],ne=r[4],fe=r[5],be=r[6],he=r[7],we=r[8];return n[0]=O*o+j*m+V*T,n[1]=O*u+j*_+V*I,n[2]=O*d+j*S+V*z,n[3]=Z*o+ne*m+fe*T,n[4]=Z*u+ne*_+fe*I,n[5]=Z*d+ne*S+fe*z,n[6]=be*o+he*m+we*T,n[7]=be*u+he*_+we*I,n[8]=be*d+he*S+we*z,n}function No(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function If(n,e){var r=e[0],o=e[1],u=e[2],d=e[3],m=e[4],_=e[5],S=e[6],T=e[7],I=e[8],z=e[9],O=e[10],j=e[11],V=e[12],Z=e[13],ne=e[14],fe=e[15],be=r*_-o*m,he=r*S-u*m,we=r*T-d*m,Ce=o*S-u*_,Te=o*T-d*_,Je=u*T-d*S,He=I*Z-z*V,mt=I*ne-O*V,Bt=I*fe-j*V,nt=z*ne-O*Z,bt=z*fe-j*Z,wt=O*fe-j*ne,At=be*wt-he*bt+we*nt+Ce*Bt-Te*mt+Je*He;return At?(n[0]=(_*wt-S*bt+T*nt)*(At=1/At),n[1]=(u*bt-o*wt-d*nt)*At,n[2]=(Z*Je-ne*Te+fe*Ce)*At,n[3]=(O*Te-z*Je-j*Ce)*At,n[4]=(S*Bt-m*wt-T*mt)*At,n[5]=(r*wt-u*Bt+d*mt)*At,n[6]=(ne*we-V*Je-fe*he)*At,n[7]=(I*Je-O*we+j*he)*At,n[8]=(m*bt-_*Bt+T*He)*At,n[9]=(o*Bt-r*bt-d*He)*At,n[10]=(V*Te-Z*we+fe*be)*At,n[11]=(z*we-I*Te-j*be)*At,n[12]=(_*mt-m*nt-S*He)*At,n[13]=(r*nt-o*mt+u*He)*At,n[14]=(Z*he-V*Ce-ne*be)*At,n[15]=(I*Ce-z*he+O*be)*At,n):null}function dl(n,e,r){var o=e[0],u=e[1],d=e[2],m=e[3],_=e[4],S=e[5],T=e[6],I=e[7],z=e[8],O=e[9],j=e[10],V=e[11],Z=e[12],ne=e[13],fe=e[14],be=e[15],he=r[0],we=r[1],Ce=r[2],Te=r[3];return n[0]=he*o+we*_+Ce*z+Te*Z,n[1]=he*u+we*S+Ce*O+Te*ne,n[2]=he*d+we*T+Ce*j+Te*fe,n[3]=he*m+we*I+Ce*V+Te*be,n[4]=(he=r[4])*o+(we=r[5])*_+(Ce=r[6])*z+(Te=r[7])*Z,n[5]=he*u+we*S+Ce*O+Te*ne,n[6]=he*d+we*T+Ce*j+Te*fe,n[7]=he*m+we*I+Ce*V+Te*be,n[8]=(he=r[8])*o+(we=r[9])*_+(Ce=r[10])*z+(Te=r[11])*Z,n[9]=he*u+we*S+Ce*O+Te*ne,n[10]=he*d+we*T+Ce*j+Te*fe,n[11]=he*m+we*I+Ce*V+Te*be,n[12]=(he=r[12])*o+(we=r[13])*_+(Ce=r[14])*z+(Te=r[15])*Z,n[13]=he*u+we*S+Ce*O+Te*ne,n[14]=he*d+we*T+Ce*j+Te*fe,n[15]=he*m+we*I+Ce*V+Te*be,n}function gc(n,e,r){var o,u,d,m,_,S,T,I,z,O,j,V,Z=r[0],ne=r[1],fe=r[2];return e===n?(n[12]=e[0]*Z+e[4]*ne+e[8]*fe+e[12],n[13]=e[1]*Z+e[5]*ne+e[9]*fe+e[13],n[14]=e[2]*Z+e[6]*ne+e[10]*fe+e[14],n[15]=e[3]*Z+e[7]*ne+e[11]*fe+e[15]):(u=e[1],d=e[2],m=e[3],_=e[4],S=e[5],T=e[6],I=e[7],z=e[8],O=e[9],j=e[10],V=e[11],n[0]=o=e[0],n[1]=u,n[2]=d,n[3]=m,n[4]=_,n[5]=S,n[6]=T,n[7]=I,n[8]=z,n[9]=O,n[10]=j,n[11]=V,n[12]=o*Z+_*ne+z*fe+e[12],n[13]=u*Z+S*ne+O*fe+e[13],n[14]=d*Z+T*ne+j*fe+e[14],n[15]=m*Z+I*ne+V*fe+e[15]),n}function Mh(n,e,r){var o=r[0],u=r[1],d=r[2];return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=e[3]*o,n[4]=e[4]*u,n[5]=e[5]*u,n[6]=e[6]*u,n[7]=e[7]*u,n[8]=e[8]*d,n[9]=e[9]*d,n[10]=e[10]*d,n[11]=e[11]*d,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function oy(n,e,r){var o=Math.sin(r),u=Math.cos(r),d=e[4],m=e[5],_=e[6],S=e[7],T=e[8],I=e[9],z=e[10],O=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=d*u+T*o,n[5]=m*u+I*o,n[6]=_*u+z*o,n[7]=S*u+O*o,n[8]=T*u-d*o,n[9]=I*u-m*o,n[10]=z*u-_*o,n[11]=O*u-S*o,n}function _m(n,e,r){var o=Math.sin(r),u=Math.cos(r),d=e[0],m=e[1],_=e[2],S=e[3],T=e[8],I=e[9],z=e[10],O=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=d*u-T*o,n[1]=m*u-I*o,n[2]=_*u-z*o,n[3]=S*u-O*o,n[8]=d*o+T*u,n[9]=m*o+I*u,n[10]=_*o+z*u,n[11]=S*o+O*u,n}function g_(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function xm(n,e,r){var o,u,d,m=r[0],_=r[1],S=r[2],T=Math.hypot(m,_,S);return T<Vl?null:(m*=T=1/T,_*=T,S*=T,o=Math.sin(e),u=Math.cos(e),n[0]=m*m*(d=1-u)+u,n[1]=_*m*d+S*o,n[2]=S*m*d-_*o,n[3]=0,n[4]=m*_*d-S*o,n[5]=_*_*d+u,n[6]=S*_*d+m*o,n[7]=0,n[8]=m*S*d+_*o,n[9]=_*S*d-m*o,n[10]=S*S*d+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});var Q0=dl;function Kd(){var n=new $i(3);return $i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function sy(n){var e=new $i(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function Jd(n){return Math.hypot(n[0],n[1],n[2])}function Lf(n,e,r){var o=new $i(3);return o[0]=n,o[1]=e,o[2]=r,o}function Ls(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function ly(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function uy(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n}function zf(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n[2]=Math.min(e[2],r[2]),n}function Qd(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n[2]=Math.max(e[2],r[2]),n}function Oa(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function bu(n,e,r,o){return n[0]=e[0]+r[0]*o,n[1]=e[1]+r[1]*o,n[2]=e[2]+r[2]*o,n}function pa(n,e){var r=e[0],o=e[1],u=e[2],d=r*r+o*o+u*u;return d>0&&(d=1/Math.sqrt(d)),n[0]=e[0]*d,n[1]=e[1]*d,n[2]=e[2]*d,n}function Uo(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function _o(n,e,r){var o=e[0],u=e[1],d=e[2],m=r[0],_=r[1],S=r[2];return n[0]=u*S-d*_,n[1]=d*m-o*S,n[2]=o*_-u*m,n}function Ri(n,e,r){var o=e[0],u=e[1],d=e[2],m=r[3]*o+r[7]*u+r[11]*d+r[15];return n[0]=(r[0]*o+r[4]*u+r[8]*d+r[12])/(m=m||1),n[1]=(r[1]*o+r[5]*u+r[9]*d+r[13])/m,n[2]=(r[2]*o+r[6]*u+r[10]*d+r[14])/m,n}function wr(n,e,r){var o=r[0],u=r[1],d=r[2],m=e[0],_=e[1],S=e[2],T=u*S-d*_,I=d*m-o*S,z=o*_-u*m,O=u*z-d*I,j=d*T-o*z,V=o*I-u*T,Z=2*r[3];return I*=Z,z*=Z,j*=2,V*=2,n[0]=m+(T*=Z)+(O*=2),n[1]=_+I+j,n[2]=S+z+V,n}var yc,zs=ly,kS=uy,eb=Jd;function bm(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n}function Pf(n,e){var r=e[0],o=e[1],u=e[2],d=e[3],m=r*r+o*o+u*u+d*d;return m>0&&(m=1/Math.sqrt(m)),n[0]=r*m,n[1]=o*m,n[2]=u*m,n[3]=d*m,n}function Ah(n,e,r){var o=e[0],u=e[1],d=e[2],m=e[3];return n[0]=r[0]*o+r[4]*u+r[8]*d+r[12]*m,n[1]=r[1]*o+r[5]*u+r[9]*d+r[13]*m,n[2]=r[2]*o+r[6]*u+r[10]*d+r[14]*m,n[3]=r[3]*o+r[7]*u+r[11]*d+r[15]*m,n}function cy(){var n=new $i(4);return $i!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function y_(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function wm(n,e,r){r*=.5;var o=e[0],u=e[1],d=e[2],m=e[3],_=Math.sin(r),S=Math.cos(r);return n[0]=o*S+m*_,n[1]=u*S+d*_,n[2]=d*S-u*_,n[3]=m*S-o*_,n}function v_(n,e,r){r*=.5;var o=e[0],u=e[1],d=e[2],m=e[3],_=Math.sin(r),S=Math.cos(r);return n[0]=o*S-d*_,n[1]=u*S+m*_,n[2]=d*S+o*_,n[3]=m*S-u*_,n}Kd(),yc=new $i(4),$i!=Float32Array&&(yc[0]=0,yc[1]=0,yc[2]=0,yc[3]=0);var __=Pf;Kd(),Lf(1,0,0),Lf(0,1,0),cy(),cy(),m_();const x_=Oe([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:hy}=x_,jo=Oe([{name:"a_pos_3",components:3,type:"Int16"}]);var rs=Oe([{name:"a_pos",type:"Int16",components:2}]);class pl{constructor(e,r){this.pos=e,this.dir=r}intersectsPlane(e,r,o){const u=Uo(r,this.dir);if(Math.abs(u)<1e-6)return!1;const d=((e[0]-this.pos[0])*r[0]+(e[1]-this.pos[1])*r[1]+(e[2]-this.pos[2])*r[2])/u;return o[0]=this.pos[0]+this.dir[0]*d,o[1]=this.pos[1]+this.dir[1]*d,o[2]=this.pos[2]+this.dir[2]*d,!0}closestPointOnSphere(e,r,o){if(function(j,V){var Z=j[0],ne=j[1],fe=j[2],be=V[0],he=V[1],we=V[2];return Math.abs(Z-be)<=Vl*Math.max(1,Math.abs(Z),Math.abs(be))&&Math.abs(ne-he)<=Vl*Math.max(1,Math.abs(ne),Math.abs(he))&&Math.abs(fe-we)<=Vl*Math.max(1,Math.abs(fe),Math.abs(we))}(this.pos,e)||r===0)return o[0]=o[1]=o[2]=0,!1;const[u,d,m]=this.dir,_=this.pos[0]-e[0],S=this.pos[1]-e[1],T=this.pos[2]-e[2],I=u*u+d*d+m*m,z=2*(_*u+S*d+T*m),O=z*z-4*I*(_*_+S*S+T*T-r*r);if(O<0){const j=Math.max(-z/2,0),V=_+u*j,Z=S+d*j,ne=T+m*j,fe=Math.hypot(V,Z,ne);return o[0]=V*r/fe,o[1]=Z*r/fe,o[2]=ne*r/fe,!1}{const j=(-z-Math.sqrt(O))/(2*I);if(j<0){const V=Math.hypot(_,S,T);return o[0]=_*r/V,o[1]=S*r/V,o[2]=T*r/V,!1}return o[0]=_+u*j,o[1]=S+d*j,o[2]=T+m*j,!0}}}class Of{constructor(e,r,o,u,d){this.TL=e,this.TR=r,this.BR=o,this.BL=u,this.horizon=d}static fromInvProjectionMatrix(e,r,o){const u=[-1,1,1],d=[1,1,1],m=[1,-1,1],_=[-1,-1,1],S=Ri(u,u,e),T=Ri(d,d,e),I=Ri(m,m,e),z=Ri(_,_,e);return new Of(S,T,I,z,r/o)}}class kh{constructor(e,r){this.points=e,this.planes=r}static fromInvProjectionMatrix(e,r,o,u){const d=Math.pow(2,o),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const T=Ah([],S,e),I=1/T[3]/r*d;return function(z,O,j){return z[0]=O[0]*j[0],z[1]=O[1]*j[1],z[2]=O[2]*j[2],z[3]=O[3]*j[3],z}(T,T,[I,I,u?1/T[3]:I,I])}),_=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const T=pa([],_o([],zs([],m[S[0]],m[S[1]]),zs([],m[S[2]],m[S[1]]))),I=-Uo(T,m[S[1]]);return T.concat(I)});return new kh(m,_)}}class Gi{static fromPoints(e){const r=[1/0,1/0,1/0],o=[-1/0,-1/0,-1/0];for(const u of e)zf(r,r,u),Qd(o,o,u);return new Gi(r,o)}static applyTransform(e,r){const o=e.getCorners();for(let u=0;u<o.length;++u)Ri(o[u],o[u],r);return Gi.fromPoints(o)}constructor(e,r){this.min=e,this.max=r,this.center=Oa([],Ls([],this.min,this.max),.5)}quadrant(e){const r=[e%2==0,e<2],o=sy(this.min),u=sy(this.max);for(let d=0;d<r.length;d++)o[d]=r[d]?this.min[d]:this.center[d],u[d]=r[d]?this.center[d]:this.max[d];return u[2]=this.max[2],new Gi(o,u)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,r=this.max;return[[e[0],e[1],e[2]],[r[0],e[1],e[2]],[r[0],r[1],e[2]],[e[0],r[1],e[2]],[e[0],e[1],r[2]],[r[0],e[1],r[2]],[r[0],r[1],r[2]],[e[0],r[1],r[2]]]}intersects(e){const r=this.getCorners();let o=!0;for(let u=0;u<e.planes.length;u++){const d=e.planes[u];let m=0;for(let _=0;_<r.length;_++)m+=Uo(d,r[_])+d[3]>=0;if(m===0)return 0;m!==r.length&&(o=!1)}if(o)return 2;for(let u=0;u<3;u++){let d=Number.MAX_VALUE,m=-Number.MAX_VALUE;for(let _=0;_<e.points.length;_++){const S=e.points[_][u]-this.min[u];d=Math.min(d,S),m=Math.max(m,S)}if(m<0||d>this.max[u]-this.min[u])return 0}return 1}}const Aa=5,b_=6,$l=kn/Math.PI/2,tb=16383,wu=64,Bf=[wu,32,16],xo=-$l,is=$l,nb=[new Gi([xo,xo,xo],[is,is,is]),new Gi([xo,xo,xo],[0,0,is]),new Gi([0,xo,xo],[is,0,is]),new Gi([xo,0,xo],[0,is,is]),new Gi([0,0,xo],[is,is,is])];function Em(n){return n*$l/xc}function Sm(n,e,r,o=!0){const u=Oa([],n._camera.position,n.worldSize),d=[e,r,1,1];Ah(d,d,n.pixelMatrixInverse),bm(d,d,1/d[3]);const m=pa([],zs([],d,u)),_=n.globeMatrix,S=[_[12],_[13],_[14]],T=zs([],S,u),I=Jd(T),z=pa([],T),O=n.worldSize/(2*Math.PI),j=Uo(z,m),V=Math.asin(O/I);if(V<Math.acos(j)){if(!o)return null;const Bt=[],nt=[];Oa(Bt,m,I/j),pa(nt,zs(nt,Bt,T)),pa(m,Ls(m,T,Oa(m,nt,Math.tan(V)*I)))}const Z=[];new pl(u,m).closestPointOnSphere(S,O,Z);const ne=pa([],Xi(_,0)),fe=pa([],Xi(_,1)),be=pa([],Xi(_,2)),he=Uo(ne,Z),we=Uo(fe,Z),Ce=Uo(be,Z),Te=$t(Math.asin(-we/O));let Je=$t(Math.atan2(he,Ce));Je=n.center.lng+function(Bt,nt){const bt=(nt-Bt+180)%360-180;return bt<-180?bt+360:bt}(n.center.lng,Je);const He=bo(Je),mt=It(Bs(Te),0,1);return new Vf(He,mt)}class rb{constructor(e,r,o){this.a=zs([],e,o),this.b=zs([],r,o),this.center=o;const u=pa([],this.a),d=pa([],this.b);this.angle=Math.acos(Uo(u,d))}}function Tm(n,e){if(n.angle===0)return null;let r;return r=n.a[e]===0?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[e]/n.a[e]/Math.sin(n.angle)-1/Math.tan(n.angle)),r<0||r>1?null:function(o,u,d,m){const _=Math.sin(d);return o*(Math.sin((1-m)*d)/_)+u*(Math.sin(m*d)/_)}(n.a[e],n.b[e],n.angle,It(r,0,1))+n.center[e]}function Gl(n){if(n.z<=1)return nb[n.z+2*n.y+n.x];const e=Nf(Ff(n));return Gi.fromPoints(e)}function vc(n,e,r){return Oa(n,n,1-r),bu(n,n,e,r)}function w_(n,e){const r=jf(e.zoom);if(r===0)return Gl(n);const o=Ff(n),u=Nf(o),d=bo(o.getWest())*e.worldSize,m=bo(o.getEast())*e.worldSize,_=Bs(o.getNorth())*e.worldSize,S=Bs(o.getSouth())*e.worldSize,T=[d,_,0],I=[m,_,0],z=[d,S,0],O=[m,S,0],j=If([],e.globeMatrix);return Ri(T,T,j),Ri(I,I,j),Ri(z,z,j),Ri(O,O,j),u[0]=vc(u[0],z,r),u[1]=vc(u[1],O,r),u[2]=vc(u[2],I,r),u[3]=vc(u[3],T,r),Gi.fromPoints(u)}function fy(n,e,r){for(const o of n)Ri(o,o,e),Oa(o,o,r)}function ib(n,e,r){const o=e/n.worldSize,u=n.globeMatrix;if(r.z<=1){const He=Gl(r).getCorners();return fy(He,u,o),Gi.fromPoints(He)}const d=Ff(r),m=Nf(d);fy(m,u,o);const _=Number.MAX_VALUE,S=[-_,-_,-_],T=[_,_,_];if(d.contains(n.center)){for(const Bt of m)zf(T,T,Bt),Qd(S,S,Bt);S[2]=0;const He=n.point,mt=[He.x*o,He.y*o,0];return zf(T,T,mt),Qd(S,S,mt),new Gi(T,S)}const I=[u[12]*o,u[13]*o,u[14]*o],z=d.getCenter(),O=It(n.center.lat,-Ha,Ha),j=It(z.lat,-Ha,Ha),V=bo(n.center.lng),Z=Bs(O);let ne=V-bo(z.lng);const fe=Z-Bs(j);ne>.5?ne-=1:ne<-.5&&(ne+=1);let be=0;Math.abs(ne)>Math.abs(fe)?be=ne>=0?1:3:(be=fe>=0?0:2,bu(I,I,[u[4]*o,u[5]*o,u[6]*o],-Math.sin(et(fe>=0?d.getSouth():d.getNorth()))*$l));const he=m[be],we=m[(be+1)%4],Ce=new rb(he,we,I),Te=[Tm(Ce,0)||he[0],Tm(Ce,1)||he[1],Tm(Ce,2)||he[2]],Je=jf(n.zoom);if(Je>0){const He=function({x:Bt,y:nt,z:bt},wt,At,Ut,ht){const Kt=1/(1<<bt);let on=Bt*Kt,Qt=on+Kt,Qn=nt*Kt,Vt=Qn+Kt,Cn=0;const er=(on+Qt)/2-Ut;return er>.5?Cn=-1:er<-.5&&(Cn=1),on=((on+Cn)*wt-(Ut*=wt))*At+Ut,Qt=((Qt+Cn)*wt-Ut)*At+Ut,Qn=(Qn*wt-(ht*=wt))*At+ht,Vt=(Vt*wt-ht)*At+ht,[[on,Vt,0],[Qt,Vt,0],[Qt,Qn,0],[on,Qn,0]]}(r,e,n._pixelsPerMercatorPixel,V,Z);for(let Bt=0;Bt<m.length;Bt++)vc(m[Bt],He[Bt],Je);const mt=Ls([],He[be],He[(be+1)%4]);Oa(mt,mt,.5),vc(Te,mt,Je)}for(const He of m)zf(T,T,He),Qd(S,S,He);return T[2]=Math.min(he[2],we[2]),zf(T,T,Te),Qd(S,S,Te),new Gi(T,S)}function Ff({x:n,y:e,z:r}){const o=1/(1<<r),u=new Vr(ss(n*o),qa((e+1)*o)),d=new Vr(ss((n+1)*o),qa(e*o));return new Is(u,d)}function Nf(n){const e=et(n.getNorth()),r=et(n.getSouth()),o=Math.cos(e),u=Math.cos(r),d=Math.sin(e),m=Math.sin(r),_=n.getWest(),S=n.getEast();return[as(u,m,_),as(u,m,S),as(o,d,S),as(o,d,_)]}function as(n,e,r,o=$l){return r=et(r),[n*Math.sin(r)*o,-e*o,n*Math.cos(r)*o]}function os(n,e,r){return as(Math.cos(et(n)),Math.sin(et(n)),e,r)}function Ps(n,e,r,o){const u=1<<r.z,d=(n/kn+r.x)/u;return os(qa((e/kn+r.y)/u),ss(d),o)}function _c({min:n,max:e}){return tb/Math.max(e[0]-n[0],e[1]-n[1],e[2]-n[2])}const Uf=new Float64Array(16);function Os(n){const e=_c(n),r=g_(Uf,[e,e,e]);return gc(r,r,((o=[])[0]=-(u=n.min)[0],o[1]=-u[1],o[2]=-u[2],o));var o,u}function dy(n){const e=(o=n.min,(r=Uf)[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=o[0],r[13]=o[1],r[14]=o[2],r[15]=1,r);var r,o;const u=1/_c(n);return Mh(e,e,[u,u,u])}function E_(n,e,r,o,u){const d=function(S){const T=kn/(2*Math.PI);return S/(2*Math.PI)/T}(r),m=[n,e,-r/(2*Math.PI)],_=No(new Float64Array(16));return gc(_,_,m),Mh(_,_,[d,d,d]),oy(_,_,et(-u)),_m(_,_,et(-o)),_}function jf(n){return Ee(Aa,b_,n)}function py(n,e){const r=os(e.lat,e.lng),o=function(V){const Z=os(V._center.lat,V._center.lng);let ne=_o([],Lf(0,1,0),Z);const fe=xm([],-V.angle,Z);ne=Ri(ne,ne,fe),xm(fe,-V._pitch,ne);const be=pa([],Z);return Oa(be,be,Em(V.cameraToCenterDistance/V.pixelsPerMeter)),Ri(be,be,fe),Ls([],Z,be)}(n);return m=(u=ly([],o,r))[0],_=u[1],S=u[2],T=(d=r)[0],I=d[1],z=d[2],j=(O=Math.sqrt(m*m+_*_+S*S)*Math.sqrt(T*T+I*I+z*z))&&Uo(u,d)/O,Math.acos(Math.min(Math.max(j,-1),1));var u,d,m,_,S,T,I,z,O,j}function Dh(n,e){return py(n,e)>Math.PI/2*1.01}const S_=et(85),T_=Math.cos(S_),ab=Math.sin(S_),xc=63710088e-1,my=2*Math.PI*xc;class bc{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new bc(Fn(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,o=this.lat*r,u=e.lat*r,d=Math.sin(o)*Math.sin(u)+Math.cos(o)*Math.cos(u)*Math.cos((e.lng-this.lng)*r);return xc*Math.acos(Math.min(d,1))}toBounds(e=0){const r=360*e/40075017,o=r/Math.cos(Math.PI/180*this.lat);return new Is(new bc(this.lng-o,this.lat-r),new bc(this.lng+o,this.lat+r))}toEcef(e){const r=Em(e);return os(this.lat,this.lng,$l+r)}static convert(e){if(e instanceof bc)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new bc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new bc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var Vr=bc;function Rh(n){return my*Math.cos(n*Math.PI/180)}function bo(n){return(180+n)/360}function Bs(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Fs(n,e){return n/Rh(e)}function ss(n){return 360*n-180}function qa(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function C_(n,e){return n*Rh(qa(e))}const Ha=85.051129;function Cm(n){return 1/Math.cos(n*Math.PI/180)}class Vf{constructor(e,r,o=0){this.x=+e,this.y=+r,this.z=+o}static fromLngLat(e,r=0){const o=Vr.convert(e);return new Vf(bo(o.lng),Bs(o.lat),Fs(r,o.lat))}toLngLat(){return new Vr(ss(this.x),qa(this.y))}toAltitude(){return C_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/my*Cm(qa(this.y))}}function $f(n,e,r,o,u,d,m,_,S){const T=(e+o)/2,I=(r+u)/2,z=new ut(T,I);_(z),function(O,j,V,Z,ne,fe){const be=V-ne,he=Z-fe;return Math.abs((Z-j)*be-(V-O)*he)/Math.hypot(be,he)}(z.x,z.y,d.x,d.y,m.x,m.y)>=S?($f(n,e,r,T,I,d,z,_,S),$f(n,T,I,o,u,z,m,_,S)):n.push(m)}function Mm(n,e,r){let o=n[0],u=o.x,d=o.y;e(o);const m=[o];for(let _=1;_<n.length;_++){const S=n[_],{x:T,y:I}=S;e(S),$f(m,u,d,T,I,o,S,e,r),u=T,d=I,o=S}return m}function Am(n,e,r,o){if(o(e,r)){const u=e.add(r)._mult(.5);Am(n,e,u,o),Am(n,u,r,o)}else n.push(r)}function ob(n,e){let r=n[0];const o=[r];for(let u=1;u<n.length;u++){const d=n[u];Am(o,r,d,e),r=d}return o}const gy=Math.pow(2,14)-1,M_=-gy-1;function sb(n,e){const r=Math.round(n.x*e),o=Math.round(n.y*e);return n.x=It(r,M_,gy),n.y=It(o,M_,gy),(r<n.x||r>n.x+1||o<n.y||o>n.y+1)&&Wn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function ls(n,e,r){const o=n.loadGeometry(),u=n.extent,d=kn/u;if(e&&r&&r.projection.isReprojectedInTileSpace){const m=1<<e.z,{scale:_,x:S,y:T,projection:I}=r,z=O=>{const j=ss((e.x+O.x/u)/m),V=qa((e.y+O.y/u)/m),Z=I.project(j,V);O.x=(Z.x*_-S)*u,O.y=(Z.y*_-T)*u};for(let O=0;O<o.length;O++)if(n.type!==1)o[O]=Mm(o[O],z,1);else{const j=[];for(const V of o[O])V.x<0||V.x>=u||V.y<0||V.y>=u||(z(V),j.push(V));o[O]=j}}for(const m of o)for(const _ of m)sb(_,d);return o}function Eu(n,e){return{type:n.type,id:n.id,properties:n.properties,geometry:e?ls(n):[]}}function wc(n,e,r,o,u){n.emplaceBack(2*e+(o+1)/2,2*r+(u+1)/2)}function km(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class yy{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new Ot,this.indexArray=new gn,this.segments=new Bi,this.programConfigurations=new xu(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,o,u){const d=this.layers[0],m=[];let _=null;d.type==="circle"&&(_=d.layout.get("circle-sort-key"));for(const{feature:T,id:I,index:z,sourceLayerIndex:O}of e){const j=this.layers[0]._featureFilter.needGeometry,V=Eu(T,j);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),V,o))continue;const Z=_?_.evaluate(V,{},o):void 0,ne={id:I,properties:T.properties,type:T.type,sourceLayerIndex:O,index:z,geometry:j?V.geometry:ls(T,o,u),patterns:{},sortKey:Z};m.push(ne)}_&&m.sort((T,I)=>T.sortKey-I.sortKey);let S=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new Ft,S=u.projection);for(const T of m){const{geometry:I,index:z,sourceLayerIndex:O}=T,j=e[z].feature;this.addFeature(T,I,z,r.availableImages,o,S),r.featureIndex.insert(j,I,z,O,this.index)}}update(e,r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ay.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,p_.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,r,o,u,d,m){for(const _ of r)for(const S of _){const T=S.x,I=S.y;if(T<0||T>=kn||I<0||I>=kn)continue;if(m){const j=m.projectTilePoint(T,I,d),V=m.upVector(d,T,I),Z=this.globeExtVertexArray;km(Z,j,V),km(Z,j,V),km(Z,j,V),km(Z,j,V)}const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),O=z.vertexLength;wc(this.layoutVertexArray,T,I,-1,-1),wc(this.layoutVertexArray,T,I,1,-1),wc(this.layoutVertexArray,T,I,1,1),wc(this.layoutVertexArray,T,I,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,{},u,d)}}function vy(n,e){for(let r=0;r<n.length;r++)if(Ih(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(Ih(n,e[r]))return!0;return!!Rm(n,e)}function A_(n,e,r){return!!Ih(n,e)||!!Ec(e,n,r)}function ep(n,e){if(n.length===1)return Gf(e,n[0]);for(let r=0;r<e.length;r++){const o=e[r];for(let u=0;u<o.length;u++)if(Ih(n,o[u]))return!0}for(let r=0;r<n.length;r++)if(Gf(e,n[r]))return!0;for(let r=0;r<e.length;r++)if(Rm(n,e[r]))return!0;return!1}function Dm(n,e,r){if(n.length>1){if(Rm(n,e))return!0;for(let o=0;o<e.length;o++)if(Ec(e[o],n,r))return!0}for(let o=0;o<n.length;o++)if(Ec(n[o],e,r))return!0;return!1}function Rm(n,e){if(n.length===0||e.length===0)return!1;for(let r=0;r<n.length-1;r++){const o=n[r],u=n[r+1];for(let d=0;d<e.length-1;d++)if(us(o,u,e[d],e[d+1]))return!0}return!1}function us(n,e,r,o){return Dr(n,r,o)!==Dr(e,r,o)&&Dr(n,e,r)!==Dr(n,e,o)}function Ec(n,e,r){const o=r*r;if(e.length===1)return n.distSqr(e[0])<o;for(let u=1;u<e.length;u++)if(Im(n,e[u-1],e[u])<o)return!0;return!1}function Im(n,e,r){const o=e.distSqr(r);if(o===0)return n.distSqr(e);const u=((n.x-e.x)*(r.x-e.x)+(n.y-e.y)*(r.y-e.y))/o;return n.distSqr(u<0?e:u>1?r:r.sub(e)._mult(u)._add(e))}function Gf(n,e){let r,o,u,d=!1;for(let m=0;m<n.length;m++){r=n[m];for(let _=0,S=r.length-1;_<r.length;S=_++)o=r[_],u=r[S],o.y>e.y!=u.y>e.y&&e.x<(u.x-o.x)*(e.y-o.y)/(u.y-o.y)+o.x&&(d=!d)}return d}function Ih(n,e){let r=!1;for(let o=0,u=n.length-1;o<n.length;u=o++){const d=n[o],m=n[u];d.y>e.y!=m.y>e.y&&e.x<(m.x-d.x)*(e.y-d.y)/(m.y-d.y)+d.x&&(r=!r)}return r}function Lm(n,e,r,o,u){for(const m of n)if(e<=m.x&&r<=m.y&&o>=m.x&&u>=m.y)return!0;const d=[new ut(e,r),new ut(e,u),new ut(o,u),new ut(o,r)];if(n.length>2){for(const m of d)if(Ih(n,m))return!0}for(let m=0;m<n.length-1;m++)if(_y(n[m],n[m+1],d))return!0;return!1}function _y(n,e,r){const o=r[0],u=r[2];if(n.x<o.x&&e.x<o.x||n.x>u.x&&e.x>u.x||n.y<o.y&&e.y<o.y||n.y>u.y&&e.y>u.y)return!1;const d=Dr(n,e,r[0]);return d!==Dr(n,e,r[1])||d!==Dr(n,e,r[2])||d!==Dr(n,e,r[3])}function ql(n,e,r){const o=e.paint.get(n).value;return o.kind==="constant"?o.value:r.programConfigurations.get(e.id).getMaxValue(n)}function zm(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function tp(n,e,r,o,u){if(!e[0]&&!e[1])return n;const d=ut.convert(e)._mult(u);r==="viewport"&&d._rotate(-o);const m=[];for(let _=0;_<n.length;_++)m.push(n[_].sub(d));return m}function xy(n,e,r,o){const u=ut.convert(n)._mult(o);return e==="viewport"&&u._rotate(-r),u}an(yy,"CircleBucket",{omit:["layers"]});const lb=new ve({"circle-sort-key":new ae(ct.layout_circle["circle-sort-key"])});var ub={paint:new ve({"circle-radius":new ae(ct.paint_circle["circle-radius"]),"circle-color":new ae(ct.paint_circle["circle-color"]),"circle-blur":new ae(ct.paint_circle["circle-blur"]),"circle-opacity":new ae(ct.paint_circle["circle-opacity"]),"circle-translate":new W(ct.paint_circle["circle-translate"]),"circle-translate-anchor":new W(ct.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new W(ct.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new W(ct.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ae(ct.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ae(ct.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ae(ct.paint_circle["circle-stroke-opacity"])}),layout:lb};function k_(n,e,r,o,u,d,m,_,S){if(d&&n.queryGeometry.isAboveHorizon)return!1;d&&(S*=n.pixelToTileUnitsFactor);const T=n.tileID.canonical,I=r.projection.upVectorScale(T,r.center.lat,r.worldSize).metersToTile;for(const z of e)for(const O of z){const j=O.add(_),V=u&&r.elevation?r.elevation.exaggeration()*u.getElevationAt(j.x,j.y,!0):0,Z=r.projection.projectTilePoint(j.x,j.y,T);if(V>0){const he=r.projection.upVector(T,j.x,j.y);Z.x+=he[0]*I*V,Z.y+=he[1]*I*V,Z.z+=he[2]*I*V}const ne=d?j:by(Z.x,Z.y,Z.z,o),fe=d?n.tilespaceRays.map(he=>hb(he,V)):n.queryGeometry.screenGeometry,be=Ah([],[Z.x,Z.y,Z.z,1],o);if(!m&&d?S*=be[3]/r.cameraToCenterDistance:m&&!d&&(S*=r.cameraToCenterDistance/be[3]),d){const he=qa((O.y/kn+T.y)/(1<<T.z));S/=r.projection.pixelsPerMeter(he,1)/Fs(1,he)}if(A_(fe,ne,S))return!0}return!1}function by(n,e,r,o){const u=Ah([],[n,e,r,1],o);return new ut(u[0]/u[3],u[1]/u[3])}const D_=Lf(0,0,0),cb=Lf(0,0,1);function hb(n,e){const r=Kd();return D_[2]=e,n.intersectsPlane(D_,cb,r),new ut(r[0],r[1])}class R_ extends yy{}function I_(n,{width:e,height:r},o,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==e*r*o)throw new RangeError("mismatched image size")}else u=new Uint8Array(e*r*o);return n.width=e,n.height=r,n.data=u,n}function wy(n,e,r){const{width:o,height:u}=e;o===n.width&&u===n.height||(Ey(n,e,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,o),height:Math.min(n.height,u)},r),n.width=o,n.height=u,n.data=e.data)}function Ey(n,e,r,o,u,d){if(u.width===0||u.height===0)return e;if(u.width>n.width||u.height>n.height||r.x>n.width-u.width||r.y>n.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>e.width||u.height>e.height||o.x>e.width-u.width||o.y>e.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const m=n.data,_=e.data;for(let S=0;S<u.height;S++){const T=((r.y+S)*n.width+r.x)*d,I=((o.y+S)*e.width+o.x)*d;for(let z=0;z<u.width*d;z++)_[I+z]=m[T+z]}return e}an(R_,"HeatmapBucket",{omit:["layers"]});class Su{constructor(e,r){I_(this,e,1,r)}resize(e){wy(this,new Su(e),1)}clone(){return new Su({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,o,u,d){Ey(e,r,o,u,d,1)}}class Vo{constructor(e,r){I_(this,e,4,r)}resize(e){wy(this,new Vo(e),4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Vo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,o,u,d){Ey(e,r,o,u,d,4)}}an(Su,"AlphaImage"),an(Vo,"RGBAImage");var fb={paint:new ve({"heatmap-radius":new ae(ct.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ae(ct.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new W(ct.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ge(ct.paint_heatmap["heatmap-color"]),"heatmap-opacity":new W(ct.paint_heatmap["heatmap-opacity"])})};function Sy(n){const e={},r=n.resolution||256,o=n.clips?n.clips.length:1,u=n.image||new Vo({width:r,height:o}),d=(m,_,S)=>{e[n.evaluationKey]=S;const T=n.expression.evaluate(e);u.data[m+_+0]=Math.floor(255*T.r/T.a),u.data[m+_+1]=Math.floor(255*T.g/T.a),u.data[m+_+2]=Math.floor(255*T.b/T.a),u.data[m+_+3]=Math.floor(255*T.a)};if(n.clips)for(let m=0,_=0;m<o;++m,_+=4*r)for(let S=0,T=0;S<r;S++,T+=4){const I=S/(r-1),{start:z,end:O}=n.clips[m];d(_,T,z*(1-I)+O*I)}else for(let m=0,_=0;m<r;m++,_+=4)d(0,_,m/(r-1));return u}var db={paint:new ve({"hillshade-illumination-direction":new W(ct.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new W(ct.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new W(ct.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new W(ct.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new W(ct.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new W(ct.paint_hillshade["hillshade-accent-color"])})};const Ty=Oe([{name:"a_pos",components:2,type:"Int16"}],4),{members:pb}=Ty;var Cy={exports:{}};function Pm(n,e,r){r=r||2;var o,u,d,m,_,S,T,I=e&&e.length,z=I?e[0]*r:n.length,O=My(n,0,z,r,!0),j=[];if(!O||O.next===O.prev)return j;if(I&&(O=function(Z,ne,fe,be){var he,we,Ce,Te=[];for(he=0,we=ne.length;he<we;he++)(Ce=My(Z,ne[he]*be,he<we-1?ne[he+1]*be:Z.length,be,!1))===Ce.next&&(Ce.steiner=!0),Te.push(xb(Ce));for(Te.sort(_b),he=0;he<Te.length;he++)fe=L_(Te[he],fe);return fe}(n,e,O,r)),n.length>80*r){o=d=n[0],u=m=n[1];for(var V=r;V<z;V+=r)(_=n[V])<o&&(o=_),(S=n[V+1])<u&&(u=S),_>d&&(d=_),S>m&&(m=S);T=(T=Math.max(d-o,m-u))!==0?32767/T:0}return np(O,j,r,o,u,T,0),j}function My(n,e,r,o,u){var d,m;if(u===Iy(n,e,r,o)>0)for(d=e;d<r;d+=o)m=Ry(d,n[d],n[d+1],m);else for(d=r-o;d>=e;d-=o)m=Ry(d,n[d],n[d+1],m);return m&&Om(m,m.next)&&(qf(m),m=m.next),m}function Lh(n,e){if(!n)return n;e||(e=n);var r,o=n;do if(r=!1,o.steiner||!Om(o,o.next)&&na(o.prev,o,o.next)!==0)o=o.next;else{if(qf(o),(o=e=o.prev)===o.next)break;r=!0}while(r||o!==e);return e}function np(n,e,r,o,u,d,m){if(n){!m&&d&&function(I,z,O,j){var V=I;do V.z===0&&(V.z=zh(V.x,V.y,z,O,j)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==I);V.prevZ.nextZ=null,V.prevZ=null,function(Z){var ne,fe,be,he,we,Ce,Te,Je,He=1;do{for(fe=Z,Z=null,we=null,Ce=0;fe;){for(Ce++,be=fe,Te=0,ne=0;ne<He&&(Te++,be=be.nextZ);ne++);for(Je=He;Te>0||Je>0&&be;)Te!==0&&(Je===0||!be||fe.z<=be.z)?(he=fe,fe=fe.nextZ,Te--):(he=be,be=be.nextZ,Je--),we?we.nextZ=he:Z=he,he.prevZ=we,we=he;fe=be}we.nextZ=null,He*=2}while(Ce>1)}(V)}(n,o,u,d);for(var _,S,T=n;n.prev!==n.next;)if(_=n.prev,S=n.next,d?gb(n,o,u,d):mb(n))e.push(_.i/r|0),e.push(n.i/r|0),e.push(S.i/r|0),qf(n),n=S.next,T=S.next;else if((n=S)===T){m?m===1?np(n=yb(Lh(n),e,r),e,r,o,u,d,2):m===2&&vb(n,e,r,o,u,d):np(Lh(n),e,r,o,u,d,1);break}}}function mb(n){var e=n.prev,r=n,o=n.next;if(na(e,r,o)>=0)return!1;for(var u=e.x,d=r.x,m=o.x,_=e.y,S=r.y,T=o.y,I=u<d?u<m?u:m:d<m?d:m,z=_<S?_<T?_:T:S<T?S:T,O=u>d?u>m?u:m:d>m?d:m,j=_>S?_>T?_:T:S>T?S:T,V=o.next;V!==e;){if(V.x>=I&&V.x<=O&&V.y>=z&&V.y<=j&&Ph(u,_,d,S,m,T,V.x,V.y)&&na(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function gb(n,e,r,o){var u=n.prev,d=n,m=n.next;if(na(u,d,m)>=0)return!1;for(var _=u.x,S=d.x,T=m.x,I=u.y,z=d.y,O=m.y,j=_<S?_<T?_:T:S<T?S:T,V=I<z?I<O?I:O:z<O?z:O,Z=_>S?_>T?_:T:S>T?S:T,ne=I>z?I>O?I:O:z>O?z:O,fe=zh(j,V,e,r,o),be=zh(Z,ne,e,r,o),he=n.prevZ,we=n.nextZ;he&&he.z>=fe&&we&&we.z<=be;){if(he.x>=j&&he.x<=Z&&he.y>=V&&he.y<=ne&&he!==u&&he!==m&&Ph(_,I,S,z,T,O,he.x,he.y)&&na(he.prev,he,he.next)>=0||(he=he.prevZ,we.x>=j&&we.x<=Z&&we.y>=V&&we.y<=ne&&we!==u&&we!==m&&Ph(_,I,S,z,T,O,we.x,we.y)&&na(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;he&&he.z>=fe;){if(he.x>=j&&he.x<=Z&&he.y>=V&&he.y<=ne&&he!==u&&he!==m&&Ph(_,I,S,z,T,O,he.x,he.y)&&na(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;we&&we.z<=be;){if(we.x>=j&&we.x<=Z&&we.y>=V&&we.y<=ne&&we!==u&&we!==m&&Ph(_,I,S,z,T,O,we.x,we.y)&&na(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function yb(n,e,r){var o=n;do{var u=o.prev,d=o.next.next;!Om(u,d)&&ky(u,o,o.next,d)&&rp(u,d)&&rp(d,u)&&(e.push(u.i/r|0),e.push(o.i/r|0),e.push(d.i/r|0),qf(o),qf(o.next),o=n=d),o=o.next}while(o!==n);return Lh(o)}function vb(n,e,r,o,u,d){var m=n;do{for(var _=m.next.next;_!==m.prev;){if(m.i!==_.i&&z_(m,_)){var S=Dy(m,_);return m=Lh(m,m.next),S=Lh(S,S.next),np(m,e,r,o,u,d,0),void np(S,e,r,o,u,d,0)}_=_.next}m=m.next}while(m!==n)}function _b(n,e){return n.x-e.x}function L_(n,e){var r=function(u,d){var m,_=d,S=u.x,T=u.y,I=-1/0;do{if(T<=_.y&&T>=_.next.y&&_.next.y!==_.y){var z=_.x+(T-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(z<=S&&z>I&&(I=z,m=_.x<_.next.x?_:_.next,z===S))return m}_=_.next}while(_!==d);if(!m)return null;var O,j=m,V=m.x,Z=m.y,ne=1/0;_=m;do S>=_.x&&_.x>=V&&S!==_.x&&Ph(T<Z?S:I,T,V,Z,T<Z?I:S,T,_.x,_.y)&&(O=Math.abs(T-_.y)/(S-_.x),rp(_,u)&&(O<ne||O===ne&&(_.x>m.x||_.x===m.x&&Ay(m,_)))&&(m=_,ne=O)),_=_.next;while(_!==j);return m}(n,e);if(!r)return e;var o=Dy(r,n);return Lh(o,o.next),Lh(r,r.next)}function Ay(n,e){return na(n.prev,n,e.prev)<0&&na(e.next,n,n.next)<0}function zh(n,e,r,o,u){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-r)*u|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-o)*u|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function xb(n){var e=n,r=n;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==n);return r}function Ph(n,e,r,o,u,d,m,_){return(u-m)*(e-_)>=(n-m)*(d-_)&&(n-m)*(o-_)>=(r-m)*(e-_)&&(r-m)*(d-_)>=(u-m)*(o-_)}function z_(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(r,o){var u=r;do{if(u.i!==r.i&&u.next.i!==r.i&&u.i!==o.i&&u.next.i!==o.i&&ky(u,u.next,r,o))return!0;u=u.next}while(u!==r);return!1}(n,e)&&(rp(n,e)&&rp(e,n)&&function(r,o){var u=r,d=!1,m=(r.x+o.x)/2,_=(r.y+o.y)/2;do u.y>_!=u.next.y>_&&u.next.y!==u.y&&m<(u.next.x-u.x)*(_-u.y)/(u.next.y-u.y)+u.x&&(d=!d),u=u.next;while(u!==r);return d}(n,e)&&(na(n.prev,n,e.prev)||na(n,e.prev,e))||Om(n,e)&&na(n.prev,n,n.next)>0&&na(e.prev,e,e.next)>0)}function na(n,e,r){return(e.y-n.y)*(r.x-e.x)-(e.x-n.x)*(r.y-e.y)}function Om(n,e){return n.x===e.x&&n.y===e.y}function ky(n,e,r,o){var u=Fm(na(n,e,r)),d=Fm(na(n,e,o)),m=Fm(na(r,o,n)),_=Fm(na(r,o,e));return u!==d&&m!==_||!(u!==0||!Bm(n,r,e))||!(d!==0||!Bm(n,o,e))||!(m!==0||!Bm(r,n,o))||!(_!==0||!Bm(r,e,o))}function Bm(n,e,r){return e.x<=Math.max(n.x,r.x)&&e.x>=Math.min(n.x,r.x)&&e.y<=Math.max(n.y,r.y)&&e.y>=Math.min(n.y,r.y)}function Fm(n){return n>0?1:n<0?-1:0}function rp(n,e){return na(n.prev,n,n.next)<0?na(n,e,n.next)>=0&&na(n,n.prev,e)>=0:na(n,e,n.prev)<0||na(n,n.next,e)<0}function Dy(n,e){var r=new Sc(n.i,n.x,n.y),o=new Sc(e.i,e.x,e.y),u=n.next,d=e.prev;return n.next=e,e.prev=n,r.next=u,u.prev=r,o.next=r,r.prev=o,d.next=o,o.prev=d,o}function Ry(n,e,r,o){var u=new Sc(n,e,r);return o?(u.next=o.next,u.prev=o,o.next.prev=u,o.next=u):(u.prev=u,u.next=u),u}function qf(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Sc(n,e,r){this.i=n,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Iy(n,e,r,o){for(var u=0,d=e,m=r-o;d<r;d+=o)u+=(n[m]-n[d])*(n[d+1]+n[m+1]),m=d;return u}Cy.exports=Pm,Cy.exports.default=Pm,Pm.deviation=function(n,e,r,o){var u=e&&e.length,d=Math.abs(Iy(n,0,u?e[0]*r:n.length,r));if(u)for(var m=0,_=e.length;m<_;m++)d-=Math.abs(Iy(n,e[m]*r,m<_-1?e[m+1]*r:n.length,r));var S=0;for(m=0;m<o.length;m+=3){var T=o[m]*r,I=o[m+1]*r,z=o[m+2]*r;S+=Math.abs((n[T]-n[z])*(n[I+1]-n[T+1])-(n[T]-n[I])*(n[z+1]-n[T+1]))}return d===0&&S===0?0:Math.abs((S-d)/d)},Pm.flatten=function(n){for(var e=n[0][0].length,r={vertices:[],holes:[],dimensions:e},o=0,u=0;u<n.length;u++){for(var d=0;d<n[u].length;d++)for(var m=0;m<e;m++)r.vertices.push(n[u][d][m]);u>0&&r.holes.push(o+=n[u-1].length)}return r};var Ly=Et(Cy.exports);function bb(n,e,r,o,u){P_(n,e,r,o||n.length-1,u||wb)}function P_(n,e,r,o,u){for(;o>r;){if(o-r>600){var d=o-r+1,m=e-r+1,_=Math.log(d),S=.5*Math.exp(2*_/3),T=.5*Math.sqrt(_*S*(d-S)/d)*(m-d/2<0?-1:1);P_(n,e,Math.max(r,Math.floor(e-m*S/d+T)),Math.min(o,Math.floor(e+(d-m)*S/d+T)),u)}var I=n[e],z=r,O=o;for(ip(n,r,e),u(n[o],I)>0&&ip(n,r,o);z<O;){for(ip(n,z,O),z++,O--;u(n[z],I)<0;)z++;for(;u(n[O],I)>0;)O--}u(n[r],I)===0?ip(n,r,O):ip(n,++O,o),O<=e&&(r=O+1),e<=O&&(o=O-1)}}function ip(n,e,r){var o=n[e];n[e]=n[r],n[r]=o}function wb(n,e){return n<e?-1:n>e?1:0}function Nm(n,e){const r=n.length;if(r<=1)return[n];const o=[];let u,d;for(let m=0;m<r;m++){const _=aa(n[m]);_!==0&&(n[m].area=Math.abs(_),d===void 0&&(d=_<0),d===_<0?(u&&o.push(u),u=[n[m]]):u.push(n[m]))}if(u&&o.push(u),e>1)for(let m=0;m<o.length;m++)o[m].length<=e||(bb(o[m],e,1,o[m].length-1,Eb),o[m]=o[m].slice(0,e));return o}function Eb(n,e){return e.area-n.area}function zy(n,e,r){const o=r.patternDependencies;let u=!1;for(const d of e){const m=d.paint.get(`${n}-pattern`);m.isConstant()||(u=!0);const _=m.constantOr(null);_&&(u=!0,o[_]=!0)}return u}function Um(n,e,r,o,u){const d=u.patternDependencies;for(const m of e){const _=m.paint.get(`${n}-pattern`).value;if(_.kind!=="constant"){let S=_.evaluate({zoom:o},r,{},u.availableImages);S=S&&S.name?S.name:S,d[S]=!0,r.patterns[m.id]=S}}return r}class Tc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ot,this.indexArray=new gn,this.indexArray2=new Ca,this.programConfigurations=new xu(e.layers,e.zoom),this.segments=new Bi,this.segments2=new Bi,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.projection=e.projection}populate(e,r,o,u){this.hasPattern=zy("fill",this.layers,r);const d=this.layers[0].layout.get("fill-sort-key"),m=[];for(const{feature:_,id:S,index:T,sourceLayerIndex:I}of e){const z=this.layers[0]._featureFilter.needGeometry,O=Eu(_,z);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),O,o))continue;const j=d?d.evaluate(O,{},o,r.availableImages):void 0,V={id:S,properties:_.properties,type:_.type,sourceLayerIndex:I,index:T,geometry:z?O.geometry:ls(_,o,u),patterns:{},sortKey:j};m.push(V)}d&&m.sort((_,S)=>_.sortKey-S.sortKey);for(const _ of m){const{geometry:S,index:T,sourceLayerIndex:I}=_;if(this.hasPattern){const z=Um("fill",this.layers,_,this.zoom,r);this.patternFeatures.push(z)}else this.addFeature(_,S,T,o,{},r.availableImages);r.featureIndex.insert(e[T].feature,S,T,I,this.index)}}update(e,r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,o,u)}addFeatures(e,r,o,u,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pb),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,o,u,d,m=[]){for(const _ of Nm(r,500)){let S=0;for(const V of _)S+=V.length;const T=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),I=T.vertexLength,z=[],O=[];for(const V of _){if(V.length===0)continue;V!==_[0]&&O.push(z.length/2);const Z=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),ne=Z.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(ne+V.length-1,ne),z.push(V[0].x),z.push(V[0].y);for(let fe=1;fe<V.length;fe++)this.layoutVertexArray.emplaceBack(V[fe].x,V[fe].y),this.indexArray2.emplaceBack(ne+fe-1,ne+fe),z.push(V[fe].x),z.push(V[fe].y);Z.vertexLength+=V.length,Z.primitiveLength+=V.length}const j=Ly(z,O);for(let V=0;V<j.length;V+=3)this.indexArray.emplaceBack(I+j[V],I+j[V+1],I+j[V+2]);T.vertexLength+=S,T.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,d,m,u)}}an(Tc,"FillBucket",{omit:["layers","patternFeatures"]});const ap=new ve({"fill-sort-key":new ae(ct.layout_fill["fill-sort-key"])});var Sb={paint:new ve({"fill-antialias":new W(ct.paint_fill["fill-antialias"]),"fill-opacity":new ae(ct.paint_fill["fill-opacity"]),"fill-color":new ae(ct.paint_fill["fill-color"]),"fill-outline-color":new ae(ct.paint_fill["fill-outline-color"]),"fill-translate":new W(ct.paint_fill["fill-translate"]),"fill-translate-anchor":new W(ct.paint_fill["fill-translate-anchor"]),"fill-pattern":new ae(ct.paint_fill["fill-pattern"])}),layout:ap};const Tb=Oe([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Cb=Oe([{name:"a_centroid_pos",components:2,type:"Uint16"}]),jm=Oe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Mb}=Tb;var op={},Ab=Mn,Py=Oh;function Oh(n,e,r,o,u){this.properties={},this.extent=r,this.type=0,this._pbf=n,this._geometry=-1,this._keys=o,this._values=u,n.readFields(kb,this,e)}function kb(n,e,r){n==1?e.id=r.readVarint():n==2?function(o,u){for(var d=o.readVarint()+o.pos;o.pos<d;){var m=u._keys[o.readVarint()],_=u._values[o.readVarint()];u.properties[m]=_}}(r,e):n==3?e.type=r.readVarint():n==4&&(e._geometry=r.pos)}function Db(n){for(var e,r,o=0,u=0,d=n.length,m=d-1;u<d;m=u++)o+=((r=n[m]).x-(e=n[u]).x)*(e.y+r.y);return o}Oh.types=["Unknown","Point","LineString","Polygon"],Oh.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var e,r=n.readVarint()+n.pos,o=1,u=0,d=0,m=0,_=[];n.pos<r;){if(u<=0){var S=n.readVarint();o=7&S,u=S>>3}if(u--,o===1||o===2)d+=n.readSVarint(),m+=n.readSVarint(),o===1&&(e&&_.push(e),e=[]),e.push(new Ab(d,m));else{if(o!==7)throw new Error("unknown command "+o);e&&e.push(e[0].clone())}}return e&&_.push(e),_},Oh.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var e=n.readVarint()+n.pos,r=1,o=0,u=0,d=0,m=1/0,_=-1/0,S=1/0,T=-1/0;n.pos<e;){if(o<=0){var I=n.readVarint();r=7&I,o=I>>3}if(o--,r===1||r===2)(u+=n.readSVarint())<m&&(m=u),u>_&&(_=u),(d+=n.readSVarint())<S&&(S=d),d>T&&(T=d);else if(r!==7)throw new Error("unknown command "+r)}return[m,S,_,T]},Oh.prototype.toGeoJSON=function(n,e,r){var o,u,d=this.extent*Math.pow(2,r),m=this.extent*n,_=this.extent*e,S=this.loadGeometry(),T=Oh.types[this.type];function I(j){for(var V=0;V<j.length;V++){var Z=j[V];j[V]=[360*(Z.x+m)/d-180,360/Math.PI*Math.atan(Math.exp((180-360*(Z.y+_)/d)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(o=0;o<S.length;o++)z[o]=S[o][0];I(S=z);break;case 2:for(o=0;o<S.length;o++)I(S[o]);break;case 3:for(S=function(j){var V=j.length;if(V<=1)return[j];for(var Z,ne,fe=[],be=0;be<V;be++){var he=Db(j[be]);he!==0&&(ne===void 0&&(ne=he<0),ne===he<0?(Z&&fe.push(Z),Z=[j[be]]):Z.push(j[be]))}return Z&&fe.push(Z),fe}(S),o=0;o<S.length;o++)for(u=0;u<S[o].length;u++)I(S[o][u])}S.length===1?S=S[0]:T="Multi"+T;var O={type:"Feature",geometry:{type:T,coordinates:S},properties:this.properties};return"id"in this&&(O.id=this.id),O};var Rb=Py,O_=B_;function B_(n,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(Ib,this,e),this.length=this._features.length}function Ib(n,e,r){n===15?e.version=r.readVarint():n===1?e.name=r.readString():n===5?e.extent=r.readVarint():n===2?e._features.push(r.pos):n===3?e._keys.push(r.readString()):n===4&&e._values.push(function(o){for(var u=null,d=o.readVarint()+o.pos;o.pos<d;){var m=o.readVarint()>>3;u=m===1?o.readString():m===2?o.readFloat():m===3?o.readDouble():m===4?o.readVarint64():m===5?o.readVarint():m===6?o.readSVarint():m===7?o.readBoolean():null}return u}(r))}B_.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var e=this._pbf.readVarint()+this._pbf.pos;return new Rb(this._pbf,e,this.extent,this._keys,this._values)};var Lb=O_;function zb(n,e,r){if(n===3){var o=new Lb(r,r.readVarint()+r.pos);o.length&&(e[o.name]=o)}}var Oy=op.VectorTile=function(n,e){this.layers=n.readFields(zb,{},e)},Vm=op.VectorTileFeature=Py;function co(n,e,r,o){const u=[],d=o===0?(m,_,S,T,I,z)=>{m.push(new ut(z,S+(z-_)/(T-_)*(I-S)))}:(m,_,S,T,I,z)=>{m.push(new ut(_+(z-S)/(I-S)*(T-_),z))};for(const m of n){const _=[];for(const S of m){if(S.length<=2)continue;const T=[];for(let O=0;O<S.length-1;O++){const j=S[O].x,V=S[O].y,Z=S[O+1].x,ne=S[O+1].y,fe=o===0?j:V,be=o===0?Z:ne;fe<e?be>e&&d(T,j,V,Z,ne,e):fe>r?be<r&&d(T,j,V,Z,ne,r):T.push(S[O]),be<e&&fe>=e&&d(T,j,V,Z,ne,e),be>r&&fe<=r&&d(T,j,V,Z,ne,r)}let I=S[S.length-1];const z=o===0?I.x:I.y;z>=e&&z<=r&&T.push(I),T.length&&(I=T[T.length-1],T[0].x===I.x&&T[0].y===I.y||T.push(T[0]),_.push(T))}_.length&&u.push(_)}return u}op.VectorTileLayer=O_;const sp=Vm.types,F_=Math.pow(2,13);function lp(n,e,r,o,u,d,m,_){n.emplaceBack((e<<1)+m,(r<<1)+d,(Math.floor(o*F_)<<1)+u,Math.round(_))}function Hf(n,e,r){n.emplaceBack(e.x,e.y,e.z,r[0]*16384,r[1]*16384,r[2]*16384)}class N_{constructor(){this.acc=new ut(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ut(e.x,e.y),this.max=new ut(e.x,e.y))}append(e,r){this.currentPolyCount.edges++,this.acc._add(e);const o=this.min,u=this.max;e.x<o.x?o.x=e.x:e.x>u.x&&(u.x=e.x),e.y<o.y?o.y=e.y:e.y>u.y&&(u.y=e.y),((e.x===0||e.x===kn)&&e.x===r.x)!=((e.y===0||e.y===kn)&&e.y===r.y)&&this.processBorderOverlap(e,r),r.x<0!=e.x<0&&this.addBorderIntersection(0,Sr(r.y,e.y,(0-r.x)/(e.x-r.x))),r.x>kn!=e.x>kn&&this.addBorderIntersection(1,Sr(r.y,e.y,(kn-r.x)/(e.x-r.x))),r.y<0!=e.y<0&&this.addBorderIntersection(2,Sr(r.x,e.x,(0-r.y)/(e.y-r.y))),r.y>kn!=e.y>kn&&this.addBorderIntersection(3,Sr(r.x,e.x,(kn-r.y)/(e.y-r.y)))}addBorderIntersection(e,r){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const o=this.borders[e];r<o[0]&&(o[0]=r),r>o[1]&&(o[1]=r)}processBorderOverlap(e,r){if(e.x===r.x){if(e.y===r.y)return;const o=e.x===0?0:1;this.addBorderIntersection(o,r.y),this.addBorderIntersection(o,e.y)}else{const o=e.y===0?2:3;this.addBorderIntersection(o,r.x),this.addBorderIntersection(o,e.x)}}centroid(){const e=this.polyCount.reduce((r,o)=>r+o.edges,0);return e!==0?this.acc.div(e)._round():new ut(0,0)}span(){return new ut(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,r)=>e+ +(r[0]!==Number.MAX_VALUE),0)}}class up{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new _t,this.centroidVertexArray=new Ma,this.indexArray=new gn,this.programConfigurations=new xu(e.layers,e.zoom),this.segments=new Bi,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id),this.enableTerrain=e.enableTerrain}populate(e,r,o,u){this.features=[],this.hasPattern=zy("fill-extrusion",this.layers,r),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(d){const m=Math.exp(Math.PI*(1-d.y/(1<<d.z)*2));return 80150034*m/(m*m+1)/kn/(1<<d.z)}(o),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:d,id:m,index:_,sourceLayerIndex:S}of e){const T=this.layers[0]._featureFilter.needGeometry,I=Eu(d,T);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),I,o))continue;const z={id:m,sourceLayerIndex:S,index:_,geometry:T?I.geometry:ls(d,o,u),properties:d.properties,type:d.type,patterns:{}},O=this.layoutVertexArray.length;this.hasPattern?this.features.push(Um("fill-extrusion",this.layers,z,this.zoom,r)):this.addFeature(z,z.geometry,_,o,{},r.availableImages,u),r.featureIndex.insert(d,z.geometry,_,S,this.index,O)}this.sortBorders()}addFeatures(e,r,o,u,d){for(const m of this.features){const{geometry:_}=m;this.addFeature(m,_,m.index,r,o,u,d)}this.sortBorders()}update(e,r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Mb),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,jm.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Cb.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,o,u,d,m,_){const S=[new ut(0,0),new ut(kn,kn)],T=_.projection,I=T.name==="globe",z=this.enableTerrain&&!I?new N_:null,O=sp[e.type]==="Polygon";I&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Ft);const j=Nm(r,500);for(let fe=j.length-1;fe>=0;fe--){const be=j[fe];(be.length===0||(V=be[0]).every(he=>he.x<=0)||V.every(he=>he.x>=kn)||V.every(he=>he.y<=0)||V.every(he=>he.y>=kn))&&j.splice(fe,1)}var V;let Z;if(I)Z=G_(j,S,u);else{Z=[];for(const fe of j)Z.push({polygon:fe,bounds:S})}const ne=O?this.edgeRadius:0;for(const{polygon:fe,bounds:be}of Z){let he=0,we=0;for(const Te of fe)O&&!Te[0].equals(Te[Te.length-1])&&Te.push(Te[0]),we+=O?Te.length-1:Te.length;const Ce=this.segments.prepareSegment((O?5:4)*we,this.layoutVertexArray,this.indexArray);if(O){const Te=[],Je=[];he=Ce.vertexLength;for(const mt of fe){let Bt,nt;mt.length&&mt!==fe[0]&&Je.push(Te.length/2),Bt=mt[1].sub(mt[0])._perp()._unit();for(let bt=1;bt<mt.length;bt++){const wt=mt[bt],At=mt[bt===mt.length-1?1:bt+1];let{x:Ut,y:ht}=wt;if(ne){nt=At.sub(wt)._perp()._unit();const Kt=Bt.add(nt)._unit(),on=ne*Math.min(4,1/(Bt.x*Kt.x+Bt.y*Kt.y));Ut+=on*Kt.x,ht+=on*Kt.y,Bt=nt}lp(this.layoutVertexArray,Ut,ht,0,0,1,1,0),Ce.vertexLength++,Te.push(wt.x,wt.y),I&&Hf(this.layoutVertexExtArray,T.projectTilePoint(Ut,ht,u),T.upVector(u,Ut,ht))}}const He=Ly(Te,Je);for(let mt=0;mt<He.length;mt+=3)this.indexArray.emplaceBack(he+He[mt],he+He[mt+2],he+He[mt+1]),Ce.primitiveLength++}for(const Te of fe){z&&Te.length&&z.startRing(Te[0]);let Je,He,mt,Bt=Te.length>4&&$_(Te[Te.length-2],Te[0],Te[1]),nt=ne?j_(Te[Te.length-2],Te[0],Te[1],ne):0;He=Te[1].sub(Te[0])._perp()._unit();let bt=!0;for(let wt=1,At=0;wt<Te.length;wt++){let Ut=Te[wt-1],ht=Te[wt];const Kt=Te[wt===Te.length-1?1:wt+1];if(z&&O&&z.currentPolyCount.top++,V_(ht,Ut,be)){ne&&(He=Kt.sub(ht)._perp()._unit(),bt=!bt);continue}z&&z.append(ht,Ut);const on=ht.sub(Ut)._perp(),Qt=on.x/(Math.abs(on.x)+Math.abs(on.y)),Qn=on.y>0?1:0,Vt=Ut.dist(ht);if(At+Vt>32768&&(At=0),ne){mt=Kt.sub(ht)._perp()._unit();let Yn=By(Ut,ht,Kt,U_(He,mt),ne);isNaN(Yn)&&(Yn=0);const Pn=ht.sub(Ut)._unit();Ut=Ut.add(Pn.mult(nt))._round(),ht=ht.add(Pn.mult(-Yn))._round(),nt=Yn,He=mt}const Cn=Ce.vertexLength,er=Te.length>4&&$_(Ut,ht,Kt);let kr=Fy(At,Bt,bt);if(lp(this.layoutVertexArray,Ut.x,Ut.y,Qt,Qn,0,0,kr),lp(this.layoutVertexArray,Ut.x,Ut.y,Qt,Qn,0,1,kr),At+=Vt,kr=Fy(At,er,!bt),Bt=er,lp(this.layoutVertexArray,ht.x,ht.y,Qt,Qn,0,0,kr),lp(this.layoutVertexArray,ht.x,ht.y,Qt,Qn,0,1,kr),Ce.vertexLength+=4,this.indexArray.emplaceBack(Cn+0,Cn+1,Cn+2),this.indexArray.emplaceBack(Cn+1,Cn+3,Cn+2),Ce.primitiveLength+=2,ne){const Yn=he+(wt===1?Te.length-2:wt-2),Pn=wt===1?he:Yn+1;if(this.indexArray.emplaceBack(Cn+1,Yn,Cn+3),this.indexArray.emplaceBack(Yn,Pn,Cn+3),Ce.primitiveLength+=2,Je===void 0&&(Je=Cn),!V_(Kt,Te[wt],be)){const vi=wt===Te.length-1?Je:Ce.vertexLength;this.indexArray.emplaceBack(Cn+2,Cn+3,vi),this.indexArray.emplaceBack(Cn+3,vi+1,vi),this.indexArray.emplaceBack(Cn+3,Pn,vi+1),Ce.primitiveLength+=3}bt=!bt}if(I){const Yn=this.layoutVertexExtArray,Pn=T.projectTilePoint(Ut.x,Ut.y,u),vi=T.projectTilePoint(ht.x,ht.y,u),Gn=T.upVector(u,Ut.x,Ut.y),tr=T.upVector(u,ht.x,ht.y);Hf(Yn,Pn,Gn),Hf(Yn,Pn,Gn),Hf(Yn,vi,tr),Hf(Yn,vi,tr)}}O&&(he+=Te.length-1)}}if(z&&z.polyCount.length>0){if(z.borders){z.vertexArrayOffset=this.centroidVertexArray.length;const fe=z.borders,be=this.featuresOnBorder.push(z)-1;for(let he=0;he<4;he++)fe[he][0]!==Number.MAX_VALUE&&this.borders[he].push(be)}this.encodeCentroid(z.borders?void 0:z.centroid(),z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,d,m,u)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((r,o)=>this.featuresOnBorder[r].borders[e][0]-this.featuresOnBorder[o].borders[e][0])}encodeCentroid(e,r,o=!0){let u,d;if(e)if(e.y!==0){const _=r.span()._mult(this.tileToMeter);u=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(_.x/10)),d=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(_.y/10))}else u=Math.ceil(7*(e.x+450)),d=0;else u=0,d=+o;let m=o?this.centroidVertexArray.length:r.vertexArrayOffset;for(const _ of r.polyCount){o&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*_.edges+_.top);for(let S=0;S<_.top;S++)this.centroidVertexArray.emplace(m++,u,d);for(let S=0;S<2*_.edges;S++)this.centroidVertexArray.emplace(m++,0,d),this.centroidVertexArray.emplace(m++,u,d)}}}function U_(n,e){const r=n.add(e)._unit();return n.x*r.x+n.y*r.y}function j_(n,e,r,o){const u=e.sub(n)._perp()._unit(),d=r.sub(e)._perp()._unit();return By(n,e,r,U_(u,d),o)}function By(n,e,r,o,u){const d=Math.sqrt(1-o*o);return Math.min(n.dist(e)/3,e.dist(r)/3,u*d/o)}function V_(n,e,r){return n.x<r[0].x&&e.x<r[0].x||n.x>r[1].x&&e.x>r[1].x||n.y<r[0].y&&e.y<r[0].y||n.y>r[1].y&&e.y>r[1].y}function $_(n,e,r){if(n.x<0||n.x>=kn||e.x<0||e.x>=kn||r.x<0||r.x>=kn)return!1;const o=r.sub(e),u=o.perp(),d=n.sub(e);return(o.x*d.x+o.y*d.y)/Math.sqrt((o.x*o.x+o.y*o.y)*(d.x*d.x+d.y*d.y))>-.866&&u.x*d.x+u.y*d.y<0}function Fy(n,e,r){const o=e?2|n:-3&n;return r?1|o:-2&o}function $m(){const n=Math.PI/32,e=Math.tan(n),r=xc;return r*Math.sqrt(1+2*e*e)-r}function G_(n,e,r){const o=1<<r.z,u=ss(r.x/o),d=ss((r.x+1)/o),m=qa(r.y/o),_=qa((r.y+1)/o);return function(S,T,I,z,O=0,j){const V=[];if(!S.length||!I||!z)return V;const Z=(Te,Je)=>{for(const He of Te)V.push({polygon:He,bounds:Je})},ne=Math.ceil(Math.log2(I)),fe=Math.ceil(Math.log2(z)),be=ne-fe,he=[];for(let Te=0;Te<Math.abs(be);Te++)he.push(be>0?0:1);for(let Te=0;Te<Math.min(ne,fe);Te++)he.push(0),he.push(1);let we=S;if(we=co(we,T[0].y-O,T[1].y+O,1),we=co(we,T[0].x-O,T[1].x+O,0),!we.length)return V;const Ce=[];for(he.length?Ce.push({polygons:we,bounds:T,depth:0}):Z(we,T);Ce.length;){const Te=Ce.pop(),Je=Te.depth,He=he[Je],mt=Te.bounds[0],Bt=Te.bounds[1],nt=He===0?mt.x:mt.y,bt=He===0?Bt.x:Bt.y,wt=j?j(He,nt,bt):.5*(nt+bt),At=co(Te.polygons,nt-O,wt+O,He),Ut=co(Te.polygons,wt-O,bt+O,He);if(At.length){const ht=[mt,new ut(He===0?wt:Bt.x,He===1?wt:Bt.y)];he.length>Je+1?Ce.push({polygons:At,bounds:ht,depth:Je+1}):Z(At,ht)}if(Ut.length){const ht=[new ut(He===0?wt:mt.x,He===1?wt:mt.y),Bt];he.length>Je+1?Ce.push({polygons:Ut,bounds:ht,depth:Je+1}):Z(Ut,ht)}}return V}(n,e,Math.ceil((d-u)/11.25),Math.ceil((m-_)/11.25),1,(S,T,I)=>{if(S===0)return .5*(T+I);{const z=qa((r.y+T/kn)/o);return(Bs(.5*(qa((r.y+I/kn)/o)+z))*o-r.y)*kn}})}an(up,"FillExtrusionBucket",{omit:["layers","features"]}),an(N_,"PartMetadata");const Pb=new ve({"fill-extrusion-edge-radius":new W(ct["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Ob={paint:new ve({"fill-extrusion-opacity":new W(ct["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ae(ct["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new W(ct["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new W(ct["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ae(ct["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ae(ct["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ae(ct["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new W(ct["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new W(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new W(ct["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new W(ct["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Pb};function q_(n,e,r){var o=2*Math.PI*6378137/256/Math.pow(2,r);return[n*o-2*Math.PI*6378137/2,e*o-2*Math.PI*6378137/2]}class Gm{constructor(e,r,o){this.z=e,this.x=r,this.y=o,this.key=Bh(0,e,e,r,o)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r){const o=function(d,m,_){var S=q_(256*d,256*(m=Math.pow(2,_)-m-1),_),T=q_(256*(d+1),256*(m+1),_);return S[0]+","+S[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),u=function(d,m,_){let S,T="";for(let I=d;I>0;I--)S=1<<I-1,T+=(m&S?1:0)+(_&S?2:0);return T}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",o)}toString(){return`${this.z}/${this.x}/${this.y}`}}class H_{constructor(e,r){this.wrap=e,this.canonical=r,this.key=Bh(e,r.z,r.z,r.x,r.y)}}class _a{constructor(e,r,o,u,d){this.overscaledZ=e,this.wrap=r,this.canonical=new Gm(o,+u,+d),this.key=r===0&&e===o?this.canonical.key:Bh(r,e,o,u,d)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const r=this.canonical.z-e;return e>this.canonical.z?new _a(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _a(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(e,r=!0){if(this.overscaledZ===e&&r)return this.key;if(e>this.canonical.z)return Bh(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y);{const o=this.canonical.z-e;return Bh(this.wrap*+r,e,e,this.canonical.x>>o,this.canonical.y>>o)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new _a(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,o=2*this.canonical.x,u=2*this.canonical.y;return[new _a(r,this.wrap,r,o,u),new _a(r,this.wrap,r,o+1,u),new _a(r,this.wrap,r,o,u+1),new _a(r,this.wrap,r,o+1,u+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new _a(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new _a(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new H_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Bh(n,e,r,o,u){const d=1<<Math.min(r,22);let m=d*(u%d)+o%d;return n&&r<22&&(m+=d*d*((n<0?-2*n-1:2*n)%(1<<2*(22-r)))),16*(32*m+r)+(e-r)}an(Gm,"CanonicalTileID"),an(_a,"OverscaledTileID",{omit:["projMatrix"]});class Hl extends ut{constructor(e,r,o){super(e,r),this.z=o}}function Fh(n,e){return n.x*e.x+n.y*e.y}function W_(n,e){if(n.length===1){let r=0;const o=e[r++];let u;for(;!u||o.equals(u);)if(u=e[r++],!u)return 1/0;for(;r<e.length;r++){const d=e[r],m=n[0],_=u.sub(o),S=d.sub(o),T=m.sub(o),I=Fh(_,_),z=Fh(_,S),O=Fh(S,S),j=Fh(T,_),V=Fh(T,S),Z=I*O-z*z,ne=(O*j-z*V)/Z,fe=(I*V-z*j)/Z,be=o.z*(1-ne-fe)+u.z*ne+d.z*fe;if(isFinite(be))return be}return 1/0}{let r=1/0;for(const o of e)r=Math.min(r,o.z);return r}}function Z_(n,e,r,o,u,d,m,_){const S=m*u.getElevationAt(n,e,!0,!0),T=d[0]!==0,I=T?d[1]===0?m*(d[0]/7-450):m*function(z,O,j){const V=Math.floor(O[0]/8),Z=Math.floor(O[1]/8),ne=10*(O[0]-8*V),fe=10*(O[1]-8*Z),be=z.getElevationAt(V,Z,!0,!0),he=z.getMeterToDEM(j),we=Math.floor(.5*(ne*he-1)),Ce=Math.floor(.5*(fe*he-1)),Te=z.tileCoordToPixel(V,Z),Je=2*we+1,He=2*Ce+1,mt=function(Ut,ht,Kt,on,Qt){return[Ut.getElevationAtPixel(ht,Kt,!0),Ut.getElevationAtPixel(ht+Qt,Kt,!0),Ut.getElevationAtPixel(ht,Kt+Qt,!0),Ut.getElevationAtPixel(ht+on,Kt+Qt,!0)]}(z,Te.x-we,Te.y-Ce,Je,He),Bt=Math.abs(mt[0]-mt[1]),nt=Math.abs(mt[2]-mt[3]),bt=Math.abs(mt[0]-mt[2])+Math.abs(mt[1]-mt[3]),wt=Math.min(.25,.5*he*(Bt+nt)/Je),At=Math.min(.25,.5*he*bt/He);return be+Math.max(wt*ne,At*fe)}(u,d,_):S;return{base:S+(r===0)?-1:r,top:T?Math.max(I+o,S+r+2):S+o}}const X_=Oe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Bb}=X_,qm=Oe([{name:"a_packed",components:4,type:"Float32"}]),{members:Wf}=qm,Ny=Vm.types,Y_=Math.cos(Math.PI/180*37.5);class Nh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(r=>r.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(r=>{this.gradients[r.id]={}}),this.layoutVertexArray=new tt,this.layoutVertexArray2=new xt,this.indexArray=new gn,this.programConfigurations=new xu(e.layers,e.zoom),this.segments=new Bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(r=>r.isStateDependent()).map(r=>r.id)}populate(e,r,o,u){this.hasPattern=zy("line",this.layers,r);const d=this.layers[0].layout.get("line-sort-key"),m=[];for(const{feature:I,id:z,index:O,sourceLayerIndex:j}of e){const V=this.layers[0]._featureFilter.needGeometry,Z=Eu(I,V);if(!this.layers[0]._featureFilter.filter(new L(this.zoom),Z,o))continue;const ne=d?d.evaluate(Z,{},o):void 0,fe={id:z,properties:I.properties,type:I.type,sourceLayerIndex:j,index:O,geometry:V?Z.geometry:ls(I,o,u),patterns:{},sortKey:ne};m.push(fe)}d&&m.sort((I,z)=>I.sortKey-z.sortKey);const{lineAtlas:_,featureIndex:S}=r,T=this.addConstantDashes(_);for(const I of m){const{geometry:z,index:O,sourceLayerIndex:j}=I;if(T&&this.addFeatureDashes(I,_),this.hasPattern){const V=Um("line",this.layers,I,this.zoom,r);this.patternFeatures.push(V)}else this.addFeature(I,z,O,o,_.positions,r.availableImages);S.insert(e[O].feature,z,O,j,this.index)}}addConstantDashes(e){let r=!1;for(const o of this.layers){const u=o.paint.get("line-dasharray").value,d=o.layout.get("line-cap").value;if(u.kind!=="constant"||d.kind!=="constant")r=!0;else{const m=d.value,_=u.value;if(!_)continue;e.addDash(_,m)}}return r}addFeatureDashes(e,r){const o=this.zoom;for(const u of this.layers){const d=u.paint.get("line-dasharray").value,m=u.layout.get("line-cap").value;if(d.kind==="constant"&&m.kind==="constant")continue;let _,S;if(d.kind==="constant"){if(_=d.value,!_)continue}else _=d.evaluate({zoom:o},e);S=m.kind==="constant"?m.value:m.evaluate({zoom:o},e),r.addDash(_,S),e.patterns[u.id]=r.getKey(_,S)}}update(e,r,o,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,o,u)}addFeatures(e,r,o,u,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,r,o,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Wf)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bb),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,o,u,d,m){const _=this.layers[0].layout,S=_.get("line-join").evaluate(e,{}),T=_.get("line-cap").evaluate(e,{}),I=_.get("line-miter-limit"),z=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const O of r)this.addLine(O,e,S,T,I,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,d,m,u)}addLine(e,r,o,u,d,m){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<e.length-1;fe++)this.totalDistance+=e[fe].dist(e[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const _=Ny[r.type]==="Polygon";let S=e.length;for(;S>=2&&e[S-1].equals(e[S-2]);)S--;let T=0;for(;T<S-1&&e[T].equals(e[T+1]);)T++;if(S<(_?3:2))return;o==="bevel"&&(d=1.05);const I=this.overscaling<=16?15*kn/(512*this.overscaling):0,z=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let O,j,V,Z,ne;this.e1=this.e2=-1,_&&(O=e[S-2],ne=e[T].sub(O)._unit()._perp());for(let fe=T;fe<S;fe++){if(V=fe===S-1?_?e[T+1]:void 0:e[fe+1],V&&e[fe].equals(V))continue;ne&&(Z=ne),O&&(j=O),O=e[fe],ne=V?V.sub(O)._unit()._perp():Z,Z=Z||ne;let be=Z.add(ne);be.x===0&&be.y===0||be._unit();const he=Z.x*ne.x+Z.y*ne.y,we=be.x*ne.x+be.y*ne.y,Ce=we!==0?1/we:1/0,Te=2*Math.sqrt(2-2*we),Je=we<Y_&&j&&V,He=Z.x*ne.y-Z.y*ne.x>0;if(Je&&fe>T){const nt=O.dist(j);if(nt>2*I){const bt=O.sub(O.sub(j)._mult(I/nt)._round());this.updateDistance(j,bt),this.addCurrentVertex(bt,Z,0,0,z),j=bt}}const mt=j&&V;let Bt=mt?o:_?"butt":u;if(mt&&Bt==="round"&&(Ce<m?Bt="miter":Ce<=2&&(Bt="fakeround")),Bt==="miter"&&Ce>d&&(Bt="bevel"),Bt==="bevel"&&(Ce>2&&(Bt="flipbevel"),Ce<d&&(Bt="miter")),j&&this.updateDistance(j,O),Bt==="miter")be._mult(Ce),this.addCurrentVertex(O,be,0,0,z);else if(Bt==="flipbevel"){if(Ce>100)be=ne.mult(-1);else{const nt=Ce*Z.add(ne).mag()/Z.sub(ne).mag();be._perp()._mult(nt*(He?-1:1))}this.addCurrentVertex(O,be,0,0,z),this.addCurrentVertex(O,be.mult(-1),0,0,z)}else if(Bt==="bevel"||Bt==="fakeround"){const nt=-Math.sqrt(Ce*Ce-1),bt=He?nt:0,wt=He?0:nt;if(j&&this.addCurrentVertex(O,Z,bt,wt,z),Bt==="fakeround"){const At=Math.round(180*Te/Math.PI/20);for(let Ut=1;Ut<At;Ut++){let ht=Ut/At;if(ht!==.5){const on=ht-.5;ht+=ht*on*(ht-1)*((1.0904+he*(he*(3.55645-1.43519*he)-3.2452))*on*on+(.848013+he*(.215638*he-1.06021)))}const Kt=ne.sub(Z)._mult(ht)._add(Z)._unit()._mult(He?-1:1);this.addHalfVertex(O,Kt.x,Kt.y,!1,He,0,z)}}V&&this.addCurrentVertex(O,ne,-bt,-wt,z)}else if(Bt==="butt")this.addCurrentVertex(O,be,0,0,z);else if(Bt==="square"){const nt=j?1:-1;j||this.addCurrentVertex(O,be,nt,nt,z),this.addCurrentVertex(O,be,0,0,z),j&&this.addCurrentVertex(O,be,nt,nt,z)}else Bt==="round"&&(j&&(this.addCurrentVertex(O,Z,0,0,z),this.addCurrentVertex(O,Z,1,1,z,!0)),V&&(this.addCurrentVertex(O,ne,-1,-1,z,!0),this.addCurrentVertex(O,ne,0,0,z)));if(Je&&fe<S-1){const nt=O.dist(V);if(nt>2*I){const bt=O.add(V.sub(O)._mult(I/nt)._round());this.updateDistance(O,bt),this.addCurrentVertex(bt,ne,0,0,z),O=bt}}}}addCurrentVertex(e,r,o,u,d,m=!1){const _=r.y*u-r.x,S=-r.y-r.x*u;this.addHalfVertex(e,r.x+r.y*o,r.y-r.x*o,m,!1,o,d),this.addHalfVertex(e,_,S,m,!0,-u,d)}addHalfVertex({x:e,y:r},o,u,d,m,_,S){this.layoutVertexArray.emplaceBack((e<<1)+(d?1:0),(r<<1)+(m?1:0),Math.round(63*o)+128,Math.round(63*u)+128,1+(_===0?0:_<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),S.primitiveLength++),m?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}}an(Nh,"LineBucket",{omit:["layers","patternFeatures"]});const K_=new ve({"line-cap":new ae(ct.layout_line["line-cap"]),"line-join":new ae(ct.layout_line["line-join"]),"line-miter-limit":new W(ct.layout_line["line-miter-limit"]),"line-round-limit":new W(ct.layout_line["line-round-limit"]),"line-sort-key":new ae(ct.layout_line["line-sort-key"])});var Uy={paint:new ve({"line-opacity":new ae(ct.paint_line["line-opacity"]),"line-color":new ae(ct.paint_line["line-color"]),"line-translate":new W(ct.paint_line["line-translate"]),"line-translate-anchor":new W(ct.paint_line["line-translate-anchor"]),"line-width":new ae(ct.paint_line["line-width"]),"line-gap-width":new ae(ct.paint_line["line-gap-width"]),"line-offset":new ae(ct.paint_line["line-offset"]),"line-blur":new ae(ct.paint_line["line-blur"]),"line-dasharray":new ae(ct.paint_line["line-dasharray"]),"line-pattern":new ae(ct.paint_line["line-pattern"]),"line-gradient":new ge(ct.paint_line["line-gradient"]),"line-trim-offset":new W(ct.paint_line["line-trim-offset"])}),layout:K_};const jy=new class extends ae{possiblyEvaluate(n,e){return e=new L(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,transition:e.transition}),super.possiblyEvaluate(n,e)}evaluate(n,e,r,o){return e=Vn({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(n,e,r,o)}}(Uy.paint.properties["line-width"].specification);function Vy(n,e){return e>0?e+2*n:n}jy.useIntegerZoom=!0;const J_=Oe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Q_=Oe([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Cc=Oe([{name:"a_projected_pos",components:4,type:"Float32"}],4);Oe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Fb=Oe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Nb=Oe([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Oe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ex=Oe([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cp=Oe([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Oe([{name:"triangle",components:3,type:"Uint16"}]),Oe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Oe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Oe([{type:"Float32",name:"offsetX"}]),Oe([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var xa=24;const Ns=128;function $y(n,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new L(n+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:u}=r;let d=0;for(;d<o.length&&o[d]<=n;)d++;d=Math.max(0,d-1);let m=d;for(;m<o.length&&o[m]<n+1;)m++;m=Math.min(o.length-1,m);const _=o[d],S=o[m];return r.kind==="composite"?{kind:"composite",minZoom:_,maxZoom:S,interpolationType:u}:{kind:"camera",minZoom:_,maxZoom:S,minSize:r.evaluate(new L(_)),maxSize:r.evaluate(new L(S)),interpolationType:u}}}function hp(n,{uSize:e,uSizeT:r},{lowerSize:o,upperSize:u}){return n.kind==="source"?o/Ns:n.kind==="composite"?Sr(o/Ns,u/Ns,r):e}function Zf(n,e){let r=0,o=0;if(n.kind==="constant")o=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:u,minZoom:d,maxZoom:m}=n,_=u?It(Ts.interpolationFactor(u,e,d,m),0,1):0;n.kind==="camera"?o=Sr(n.minSize,n.maxSize,_):r=_}return{uSizeT:r,uSize:o}}var Ki=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Ns,evaluateSizeForFeature:hp,evaluateSizeForZoom:Zf,getSizeData:$y});function Gy(n,e,r){return n.sections.forEach(o=>{o.text=function(u,d,m){const _=d.layout.get("text-transform").evaluate(m,{});return _==="uppercase"?u=u.toLocaleUpperCase():_==="lowercase"&&(u=u.toLocaleLowerCase()),D.applyArabicShaping&&(u=D.applyArabicShaping(u)),u}(o.text,e,r)}),n}const Mc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function fp(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}function tx(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}var qy=yi,Hm=function(n,e,r,o,u){var d,m,_=8*u-o-1,S=(1<<_)-1,T=S>>1,I=-7,z=u-1,O=-1,j=n[e+z];for(z+=O,d=j&(1<<-I)-1,j>>=-I,I+=_;I>0;d=256*d+n[e+z],z+=O,I-=8);for(m=d&(1<<-I)-1,d>>=-I,I+=o;I>0;m=256*m+n[e+z],z+=O,I-=8);if(d===0)d=1-T;else{if(d===S)return m?NaN:1/0*(j?-1:1);m+=Math.pow(2,o),d-=T}return(j?-1:1)*m*Math.pow(2,d-o)},Xf=function(n,e,r,o,u,d){var m,_,S,T=8*d-u-1,I=(1<<T)-1,z=I>>1,O=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,j=0,V=1,Z=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(_=isNaN(e)?1:0,m=I):(m=Math.floor(Math.log(e)/Math.LN2),e*(S=Math.pow(2,-m))<1&&(m--,S*=2),(e+=m+z>=1?O/S:O*Math.pow(2,1-z))*S>=2&&(m++,S/=2),m+z>=I?(_=0,m=I):m+z>=1?(_=(e*S-1)*Math.pow(2,u),m+=z):(_=e*Math.pow(2,z-1)*Math.pow(2,u),m=0));u>=8;n[r+j]=255&_,j+=V,_/=256,u-=8);for(m=m<<u|_,T+=u;T>0;n[r+j]=255&m,j+=V,m/=256,T-=8);n[r+j-V]|=128*Z};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function yi(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}yi.Varint=0,yi.Fixed64=1,yi.Bytes=2,yi.Fixed32=5;var Yf=4294967296,Uh=1/Yf,nx=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Wl(n){return n.type===yi.Bytes?n.readVarint()+n.pos:n.pos+1}function Kf(n,e,r){return r?4294967296*e+(n>>>0):4294967296*(e>>>0)+(n>>>0)}function rx(n,e,r){var o=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(o);for(var u=r.pos-1;u>=n;u--)r.buf[u+o]=r.buf[u]}function $o(n,e){for(var r=0;r<n.length;r++)e.writeVarint(n[r])}function dp(n,e){for(var r=0;r<n.length;r++)e.writeSVarint(n[r])}function Wm(n,e){for(var r=0;r<n.length;r++)e.writeFloat(n[r])}function Ac(n,e){for(var r=0;r<n.length;r++)e.writeDouble(n[r])}function ix(n,e){for(var r=0;r<n.length;r++)e.writeBoolean(n[r])}function jh(n,e){for(var r=0;r<n.length;r++)e.writeFixed32(n[r])}function Vh(n,e){for(var r=0;r<n.length;r++)e.writeSFixed32(n[r])}function Zm(n,e){for(var r=0;r<n.length;r++)e.writeFixed64(n[r])}function Hy(n,e){for(var r=0;r<n.length;r++)e.writeSFixed64(n[r])}function $h(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+16777216*n[e+3]}function Zl(n,e,r){n[r]=e,n[r+1]=e>>>8,n[r+2]=e>>>16,n[r+3]=e>>>24}function Wy(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16)+(n[e+3]<<24)}yi.prototype={destroy:function(){this.buf=null},readFields:function(n,e,r){for(r=r||this.length;this.pos<r;){var o=this.readVarint(),u=o>>3,d=this.pos;this.type=7&o,n(u,e,this),this.pos===d&&this.skip(o)}return e},readMessage:function(n,e){return this.readFields(n,e,this.readVarint()+this.pos)},readFixed32:function(){var n=$h(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Wy(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=$h(this.buf,this.pos)+$h(this.buf,this.pos+4)*Yf;return this.pos+=8,n},readSFixed64:function(){var n=$h(this.buf,this.pos)+Wy(this.buf,this.pos+4)*Yf;return this.pos+=8,n},readFloat:function(){var n=Hm(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=Hm(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var e,r,o=this.buf;return e=127&(r=o[this.pos++]),r<128?e:(e|=(127&(r=o[this.pos++]))<<7,r<128?e:(e|=(127&(r=o[this.pos++]))<<14,r<128?e:(e|=(127&(r=o[this.pos++]))<<21,r<128?e:function(u,d,m){var _,S,T=m.buf;if(_=(112&(S=T[m.pos++]))>>4,S<128||(_|=(127&(S=T[m.pos++]))<<3,S<128)||(_|=(127&(S=T[m.pos++]))<<10,S<128)||(_|=(127&(S=T[m.pos++]))<<17,S<128)||(_|=(127&(S=T[m.pos++]))<<24,S<128)||(_|=(1&(S=T[m.pos++]))<<31,S<128))return Kf(u,_,d);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=o[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,e=this.pos;return this.pos=n,n-e>=12&&nx?function(r,o,u){return nx.decode(r.subarray(o,u))}(this.buf,e,n):function(r,o,u){for(var d="",m=o;m<u;){var _,S,T,I=r[m],z=null,O=I>239?4:I>223?3:I>191?2:1;if(m+O>u)break;O===1?I<128&&(z=I):O===2?(192&(_=r[m+1]))==128&&(z=(31&I)<<6|63&_)<=127&&(z=null):O===3?(S=r[m+2],(192&(_=r[m+1]))==128&&(192&S)==128&&((z=(15&I)<<12|(63&_)<<6|63&S)<=2047||z>=55296&&z<=57343)&&(z=null)):O===4&&(S=r[m+2],T=r[m+3],(192&(_=r[m+1]))==128&&(192&S)==128&&(192&T)==128&&((z=(15&I)<<18|(63&_)<<12|(63&S)<<6|63&T)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,O=1):z>65535&&(z-=65536,d+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),d+=String.fromCharCode(z),m+=O}return d}(this.buf,e,n)},readBytes:function(){var n=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,n);return this.pos=n,e},readPackedVarint:function(n,e){if(this.type!==yi.Bytes)return n.push(this.readVarint(e));var r=Wl(this);for(n=n||[];this.pos<r;)n.push(this.readVarint(e));return n},readPackedSVarint:function(n){if(this.type!==yi.Bytes)return n.push(this.readSVarint());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==yi.Bytes)return n.push(this.readBoolean());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==yi.Bytes)return n.push(this.readFloat());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==yi.Bytes)return n.push(this.readDouble());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==yi.Bytes)return n.push(this.readFixed32());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==yi.Bytes)return n.push(this.readSFixed32());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==yi.Bytes)return n.push(this.readFixed64());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==yi.Bytes)return n.push(this.readSFixed64());var e=Wl(this);for(n=n||[];this.pos<e;)n.push(this.readSFixed64());return n},skip:function(n){var e=7&n;if(e===yi.Varint)for(;this.buf[this.pos++]>127;);else if(e===yi.Bytes)this.pos=this.readVarint()+this.pos;else if(e===yi.Fixed32)this.pos+=4;else{if(e!==yi.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(n,e){this.writeVarint(n<<3|e)},realloc:function(n){for(var e=this.length||16;e<this.pos+n;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),Zl(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),Zl(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),Zl(this.buf,-1&n,this.pos),Zl(this.buf,Math.floor(n*Uh),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),Zl(this.buf,-1&n,this.pos),Zl(this.buf,Math.floor(n*Uh),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(e,r){var o,u;if(e>=0?(o=e%4294967296|0,u=e/4294967296|0):(u=~(-e/4294967296),4294967295^(o=~(-e%4294967296))?o=o+1|0:(o=0,u=u+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),function(d,m,_){_.buf[_.pos++]=127&d|128,d>>>=7,_.buf[_.pos++]=127&d|128,d>>>=7,_.buf[_.pos++]=127&d|128,d>>>=7,_.buf[_.pos++]=127&d|128,_.buf[_.pos]=127&(d>>>=7)}(o,0,r),function(d,m){var _=(7&d)<<4;m.buf[m.pos++]|=_|((d>>>=3)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d|((d>>>=7)?128:0),d&&(m.buf[m.pos++]=127&d)))))}(u,r)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var e=this.pos;this.pos=function(o,u,d){for(var m,_,S=0;S<u.length;S++){if((m=u.charCodeAt(S))>55295&&m<57344){if(!_){m>56319||S+1===u.length?(o[d++]=239,o[d++]=191,o[d++]=189):_=m;continue}if(m<56320){o[d++]=239,o[d++]=191,o[d++]=189,_=m;continue}m=_-55296<<10|m-56320|65536,_=null}else _&&(o[d++]=239,o[d++]=191,o[d++]=189,_=null);m<128?o[d++]=m:(m<2048?o[d++]=m>>6|192:(m<65536?o[d++]=m>>12|224:(o[d++]=m>>18|240,o[d++]=m>>12&63|128),o[d++]=m>>6&63|128),o[d++]=63&m|128)}return d}(this.buf,n,this.pos);var r=this.pos-e;r>=128&&rx(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(n){this.realloc(4),Xf(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),Xf(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var e=n.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=n[r]},writeRawMessage:function(n,e){this.pos++;var r=this.pos;n(e,this);var o=this.pos-r;o>=128&&rx(r,o,this),this.pos=r-1,this.writeVarint(o),this.pos+=o},writeMessage:function(n,e,r){this.writeTag(n,yi.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(n,e){e.length&&this.writeMessage(n,$o,e)},writePackedSVarint:function(n,e){e.length&&this.writeMessage(n,dp,e)},writePackedBoolean:function(n,e){e.length&&this.writeMessage(n,ix,e)},writePackedFloat:function(n,e){e.length&&this.writeMessage(n,Wm,e)},writePackedDouble:function(n,e){e.length&&this.writeMessage(n,Ac,e)},writePackedFixed32:function(n,e){e.length&&this.writeMessage(n,jh,e)},writePackedSFixed32:function(n,e){e.length&&this.writeMessage(n,Vh,e)},writePackedFixed64:function(n,e){e.length&&this.writeMessage(n,Zm,e)},writePackedSFixed64:function(n,e){e.length&&this.writeMessage(n,Hy,e)},writeBytesField:function(n,e){this.writeTag(n,yi.Bytes),this.writeBytes(e)},writeFixed32Field:function(n,e){this.writeTag(n,yi.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(n,e){this.writeTag(n,yi.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(n,e){this.writeTag(n,yi.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(n,e){this.writeTag(n,yi.Fixed64),this.writeSFixed64(e)},writeVarintField:function(n,e){this.writeTag(n,yi.Varint),this.writeVarint(e)},writeSVarintField:function(n,e){this.writeTag(n,yi.Varint),this.writeSVarint(e)},writeStringField:function(n,e){this.writeTag(n,yi.Bytes),this.writeString(e)},writeFloatField:function(n,e){this.writeTag(n,yi.Fixed32),this.writeFloat(e)},writeDoubleField:function(n,e){this.writeTag(n,yi.Fixed64),this.writeDouble(e)},writeBooleanField:function(n,e){this.writeVarintField(n,!!e)}};var Gh=Et(qy);const Xm=3;function ax(n,e,r){e.glyphs=[],n===1&&r.readMessage(Ub,e)}function Ub(n,e,r){if(n===3){const{id:o,bitmap:u,width:d,height:m,left:_,top:S,advance:T}=r.readMessage(jb,{});e.glyphs.push({id:o,bitmap:new Su({width:d+2*Xm,height:m+2*Xm},u),metrics:{width:d,height:m,left:_,top:S,advance:T}})}else n===4?e.ascender=r.readSVarint():n===5&&(e.descender=r.readSVarint())}function jb(n,e,r){n===1?e.id=r.readVarint():n===2?e.bitmap=r.readBytes():n===3?e.width=r.readVarint():n===4?e.height=r.readVarint():n===5?e.left=r.readSVarint():n===6?e.top=r.readSVarint():n===7&&(e.advance=r.readVarint())}const pp=Xm;function Jf(n){let e=0,r=0;for(const m of n)e+=m.w*m.h,r=Math.max(r,m.w);n.sort((m,_)=>_.h-m.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let u=0,d=0;for(const m of n)for(let _=o.length-1;_>=0;_--){const S=o[_];if(!(m.w>S.w||m.h>S.h)){if(m.x=S.x,m.y=S.y,d=Math.max(d,m.y+m.h),u=Math.max(u,m.x+m.w),m.w===S.w&&m.h===S.h){const T=o.pop();_<o.length&&(o[_]=T)}else m.h===S.h?(S.x+=m.w,S.w-=m.w):m.w===S.w?(S.y+=m.h,S.h-=m.h):(o.push({x:S.x+m.w,y:S.y,w:S.w-m.w,h:m.h}),S.y+=m.h,S.h-=m.h);break}}return{w:u,h:d,fill:e/(u*d)||0}}const ho=1;class Zy{constructor(e,{pixelRatio:r,version:o,stretchX:u,stretchY:d,content:m}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=u,this.stretchY=d,this.content=m,this.version=o}get tl(){return[this.paddedRect.x+ho,this.paddedRect.y+ho]}get br(){return[this.paddedRect.x+this.paddedRect.w-ho,this.paddedRect.y+this.paddedRect.h-ho]}get displaySize(){return[(this.paddedRect.w-2*ho)/this.pixelRatio,(this.paddedRect.h-2*ho)/this.pixelRatio]}}class mp{constructor(e,r){const o={},u={};this.haveRenderCallbacks=[];const d=[];this.addImages(e,o,d),this.addImages(r,u,d);const{w:m,h:_}=Jf(d),S=new Vo({width:m||1,height:_||1});for(const T in e){const I=e[T],z=o[T].paddedRect;Vo.copy(I.data,S,{x:0,y:0},{x:z.x+ho,y:z.y+ho},I.data)}for(const T in r){const I=r[T],z=u[T].paddedRect,O=z.x+ho,j=z.y+ho,V=I.data.width,Z=I.data.height;Vo.copy(I.data,S,{x:0,y:0},{x:O,y:j},I.data),Vo.copy(I.data,S,{x:0,y:Z-1},{x:O,y:j-1},{width:V,height:1}),Vo.copy(I.data,S,{x:0,y:0},{x:O,y:j+Z},{width:V,height:1}),Vo.copy(I.data,S,{x:V-1,y:0},{x:O-1,y:j},{width:1,height:Z}),Vo.copy(I.data,S,{x:0,y:0},{x:O+V,y:j},{width:1,height:Z})}this.image=S,this.iconPositions=o,this.patternPositions=u}addImages(e,r,o){for(const u in e){const d=e[u],m={x:0,y:0,w:d.data.width+2*ho,h:d.data.height+2*ho};o.push(m),r[u]=new Zy(m,d),d.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(e,r){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(o=>e.hasImage(o)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const o in e.updatedImages)this.patchUpdatedImage(this.iconPositions[o],e.getImage(o),r),this.patchUpdatedImage(this.patternPositions[o],e.getImage(o),r)}patchUpdatedImage(e,r,o){if(!e||!r||e.version===r.version)return;e.version=r.version;const[u,d]=e.tl;o.update(r.data,void 0,{x:u,y:d})}}an(Zy,"ImagePosition"),an(mp,"ImageAtlas");const cs={horizontal:1,vertical:2,horizontalOnly:3},ox=-17;class gp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,r){const o=new gp;return o.scale=e||1,o.fontStack=r,o}static forImage(e){const r=new gp;return r.imageName=e,r}}class Qf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,r){const o=new Qf;for(let u=0;u<e.sections.length;u++){const d=e.sections[u];d.image?o.addImageSection(d):o.addTextSection(d,r)}return o}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(r,o){let u="";for(let d=0;d<r.length;d++){const m=r.charCodeAt(d+1)||null,_=r.charCodeAt(d-1)||null;u+=!o&&(m&&Af(m)&&!Mc[r[d+1]]||_&&Af(_)&&!Mc[r[d-1]])||!Mc[r[d]]?r[d]:Mc[r[d]]}return u}(this.text,e)}trim(){let e=0;for(let o=0;o<this.text.length&&Ym[this.text.charCodeAt(o)];o++)e++;let r=this.text.length;for(let o=this.text.length-1;o>=0&&o>=e&&Ym[this.text.charCodeAt(o)];o--)r--;this.text=this.text.substring(e,r),this.sectionIndex=this.sectionIndex.slice(e,r)}substring(e,r){const o=new Qf;return o.text=this.text.substring(e,r),o.sectionIndex=this.sectionIndex.slice(e,r),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,r)=>Math.max(e,this.sections[r].scale),0)}addTextSection(e,r){this.text+=e.text,this.sections.push(gp.forText(e.scale,e.fontStack||r));const o=this.sections.length-1;for(let u=0;u<e.text.length;++u)this.sectionIndex.push(o)}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void Wn("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCharCode(o),this.sections.push(gp.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Wn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xy(n,e,r,o,u,d,m,_,S,T,I,z,O,j,V){const Z=Qf.fromFeature(n,u);z===cs.vertical&&Z.verticalizePunctuation(O);let ne=[];const fe=function(Te,Je,He,mt,Bt,nt){if(!Te)return[];const bt=[],wt=function(Kt,on,Qt,Qn,Vt,Cn){let er=0;for(let kr=0;kr<Kt.length();kr++){const Yn=Kt.getSection(kr);er+=sx(Kt.getCharCode(kr),Yn,Qn,Vt,on,Cn)}return er/Math.max(1,Math.ceil(er/Qt))}(Te,Je,He,mt,Bt,nt),At=Te.text.indexOf("")>=0;let Ut=0;for(let Kt=0;Kt<Te.length();Kt++){const on=Te.getSection(Kt),Qt=Te.getCharCode(Kt);if(Ym[Qt]||(Ut+=sx(Qt,on,mt,Bt,Je,nt)),Kt<Te.length()-1){const Qn=!((ht=Qt)<11904||!(Xt["Bopomofo Extended"](ht)||Xt.Bopomofo(ht)||Xt["CJK Compatibility Forms"](ht)||Xt["CJK Compatibility Ideographs"](ht)||Xt["CJK Compatibility"](ht)||Xt["CJK Radicals Supplement"](ht)||Xt["CJK Strokes"](ht)||Xt["CJK Symbols and Punctuation"](ht)||Xt["CJK Unified Ideographs Extension A"](ht)||Xt["CJK Unified Ideographs"](ht)||Xt["Enclosed CJK Letters and Months"](ht)||Xt["Halfwidth and Fullwidth Forms"](ht)||Xt.Hiragana(ht)||Xt["Ideographic Description Characters"](ht)||Xt["Kangxi Radicals"](ht)||Xt["Katakana Phonetic Extensions"](ht)||Xt.Katakana(ht)||Xt["Vertical Forms"](ht)||Xt["Yi Radicals"](ht)||Xt["Yi Syllables"](ht)));(Vb[Qt]||Qn||on.imageName)&&bt.push(Km(Kt+1,Ut,wt,bt,$b(Qt,Te.getCharCode(Kt+1),Qn&&At),!1))}}var ht;return Jm(Km(Te.length(),Ut,wt,bt,0,!0))}(Z,T,d,e,o,j),{processBidirectionalText:be,processStyledBidirectionalText:he}=D;if(be&&Z.sections.length===1){const Te=be(Z.toString(),fe);for(const Je of Te){const He=new Qf;He.text=Je,He.sections=Z.sections;for(let mt=0;mt<Je.length;mt++)He.sectionIndex.push(0);ne.push(He)}}else if(he){const Te=he(Z.text,Z.sectionIndex,fe);for(const Je of Te){const He=new Qf;He.text=Je[0],He.sectionIndex=Je[1],He.sections=Z.sections,ne.push(He)}}else ne=function(Te,Je){const He=[],mt=Te.text;let Bt=0;for(const nt of Je)He.push(Te.substring(Bt,nt)),Bt=nt;return Bt<mt.length&&He.push(Te.substring(Bt,mt.length)),He}(Z,fe);const we=[],Ce={positionedLines:we,text:Z.toString(),top:I[1],bottom:I[1],left:I[0],right:I[0],writingMode:z,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Te,Je,He,mt,Bt,nt,bt,wt,At,Ut,ht,Kt){let on=0,Qt=0,Qn=0;const Vt=wt==="right"?1:wt==="left"?0:.5;let Cn=!1;for(const Gn of Bt){const tr=Gn.getSections();for(const cr of tr){if(cr.imageName)continue;const ri=Je[cr.fontStack];if(ri&&(Cn=ri.ascender!==void 0&&ri.descender!==void 0,!Cn))break}if(!Cn)break}let er=0;for(const Gn of Bt){Gn.trim();const tr=Gn.getMaxScale(),cr=(tr-1)*xa,ri={positionedGlyphs:[],lineOffset:0};Te.positionedLines[er]=ri;const _i=ri.positionedGlyphs;let hi=0;if(!Gn.length()){Qt+=nt,++er;continue}let Ni=0,Gr=0;for(let Pr=0;Pr<Gn.length();Pr++){const qi=Gn.getSection(Pr),Ui=Gn.getSectionIndex(Pr),wi=Gn.getCharCode(Pr);let Tr=qi.scale,ji=null,qr=null,ma=null,Hi=xa,ka=0;const ga=!(At===cs.horizontal||!ht&&!Eh(wi)||ht&&(Ym[wi]||(kr=wi,Xt.Arabic(kr)||Xt["Arabic Supplement"](kr)||Xt["Arabic Extended-A"](kr)||Xt["Arabic Presentation Forms-A"](kr)||Xt["Arabic Presentation Forms-B"](kr))));if(qi.imageName){const Wa=mt[qi.imageName];if(!Wa)continue;ma=qi.imageName,Te.iconsInText=Te.iconsInText||!0,qr=Wa.paddedRect;const ya=Wa.displaySize;Tr=Tr*xa/Kt,ji={width:ya[0],height:ya[1],left:ho,top:-pp,advance:ga?ya[1]:ya[0],localGlyph:!1},ka=Cn?-ji.height*Tr:ox+tr*xa-ya[1]*Tr,Hi=ji.advance;const fs=(ga?ya[0]:ya[1])*Tr-xa*tr;fs>0&&fs>hi&&(hi=fs)}else{const Wa=He[qi.fontStack];if(!Wa)continue;Wa[wi]&&(qr=Wa[wi]);const ya=Je[qi.fontStack];if(!ya)continue;const fs=ya.glyphs[wi];if(!fs)continue;if(ji=fs.metrics,Hi=wi!==8203?xa:0,Cn){const Vc=ya.ascender!==void 0?Math.abs(ya.ascender):0,ud=ya.descender!==void 0?Math.abs(ya.descender):0,Pp=(Vc+ud)*Tr;Ni<Pp&&(Ni=Pp,Gr=(Vc-ud)/2*Tr),ka=-Vc*Tr}else ka=ox+(tr-Tr)*xa}ga?(Te.verticalizable=!0,_i.push({glyph:wi,imageName:ma,x:on,y:Qt+ka,vertical:ga,scale:Tr,localGlyph:ji.localGlyph,fontStack:qi.fontStack,sectionIndex:Ui,metrics:ji,rect:qr}),on+=Hi*Tr+Ut):(_i.push({glyph:wi,imageName:ma,x:on,y:Qt+ka,vertical:ga,scale:Tr,localGlyph:ji.localGlyph,fontStack:qi.fontStack,sectionIndex:Ui,metrics:ji,rect:qr}),on+=ji.advance*Tr+Ut)}_i.length!==0&&(Qn=Math.max(on-Ut,Qn),Cn?Qm(_i,Vt,hi,Gr,nt*tr/2):Qm(_i,Vt,hi,0,nt/2)),on=0;const la=nt*tr+hi;ri.lineOffset=Math.max(hi,cr),Qt+=la,++er}var kr;const Yn=Qt,{horizontalAlign:Pn,verticalAlign:vi}=yp(bt);(function(Gn,tr,cr,ri,_i,hi){const Ni=(tr-cr)*_i,Gr=-hi*ri;for(const la of Gn)for(const Pr of la.positionedGlyphs)Pr.x+=Ni,Pr.y+=Gr})(Te.positionedLines,Vt,Pn,vi,Qn,Yn),Te.top+=-vi*Yn,Te.bottom=Te.top+Yn,Te.left+=-Pn*Qn,Te.right=Te.left+Qn,Te.hasBaseline=Cn}(Ce,e,r,o,ne,m,_,S,z,T,O,V),!function(Te){for(const Je of Te)if(Je.positionedGlyphs.length!==0)return!1;return!0}(we)&&Ce}const Ym={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function sx(n,e,r,o,u,d){if(e.imageName){const m=o[e.imageName];return m?m.displaySize[0]*e.scale*xa/d+u:0}{const m=r[e.fontStack],_=m&&m.glyphs[n];return _?_.metrics.advance*e.scale+u:0}}function lx(n,e,r,o){const u=Math.pow(n-e,2);return o?n<e?u/2:2*u:u+Math.abs(r)*r}function $b(n,e,r){let o=0;return n===10&&(o-=1e4),r&&(o+=150),n!==40&&n!==65288||(o+=50),e!==41&&e!==65289||(o+=50),o}function Km(n,e,r,o,u,d){let m=null,_=lx(e,r,u,d);for(const S of o){const T=lx(e-S.x,r,u,d)+S.badness;T<=_&&(m=S,_=T)}return{index:n,x:e,priorBreak:m,badness:_}}function Jm(n){return n?Jm(n.priorBreak).concat(n.index):[]}function yp(n){let e=.5,r=.5;switch(n){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Qm(n,e,r,o,u){if(!(e||r||o||u))return;const d=n.length-1,m=n[d],_=(m.x+m.metrics.advance*m.scale)*e;for(let S=0;S<=d;S++)n[S].x-=_,n[S].y+=r+o+u}function Gb(n,e,r){const{horizontalAlign:o,verticalAlign:u}=yp(r),d=e[0]-n.displaySize[0]*o,m=e[1]-n.displaySize[1]*u;return{image:n,top:m,bottom:m+n.displaySize[1],left:d,right:d+n.displaySize[0]}}function ed(n,e,r,o,u,d){const m=n.image;let _;if(m.content){const ne=m.content,fe=m.pixelRatio||1;_=[ne[0]/fe,ne[1]/fe,m.displaySize[0]-ne[2]/fe,m.displaySize[1]-ne[3]/fe]}const S=e.left*d,T=e.right*d;let I,z,O,j;r==="width"||r==="both"?(j=u[0]+S-o[3],z=u[0]+T+o[1]):(j=u[0]+(S+T-m.displaySize[0])/2,z=j+m.displaySize[0]);const V=e.top*d,Z=e.bottom*d;return r==="height"||r==="both"?(I=u[1]+V-o[0],O=u[1]+Z+o[2]):(I=u[1]+(V+Z-m.displaySize[1])/2,O=I+m.displaySize[1]),{image:m,top:I,right:z,bottom:O,left:j,collisionPadding:_}}class hs extends ut{constructor(e,r,o,u,d){super(e,r),this.angle=u,this.z=o,d!==void 0&&(this.segment=d)}clone(){return new hs(this.x,this.y,this.z,this.angle,this.segment)}}function ux(n,e,r,o,u){if(e.segment===void 0)return!0;let d=e,m=e.segment+1,_=0;for(;_>-r/2;){if(m--,m<0)return!1;_-=n[m].dist(d),d=n[m]}_+=n[m].dist(n[m+1]),m++;const S=[];let T=0;for(;_<r/2;){const I=n[m],z=n[m+1];if(!z)return!1;let O=n[m-1].angleTo(I)-I.angleTo(z);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:_,angleDelta:O}),T+=O;_-S[0].distance>o;)T-=S.shift().angleDelta;if(T>u)return!1;m++,_+=I.dist(z)}return!0}function Yy(n){let e=0;for(let r=0;r<n.length-1;r++)e+=n[r].dist(n[r+1]);return e}function cx(n,e,r){return n?.6*e*r:0}function hx(n,e){return Math.max(n?n.right-n.left:0,e?e.right-e.left:0)}function fx(n,e,r,o,u,d){const m=cx(r,u,d),_=hx(r,o)*d;let S=0;const T=Yy(n)/2;for(let I=0;I<n.length-1;I++){const z=n[I],O=n[I+1],j=z.dist(O);if(S+j>T){const V=(T-S)/j,Z=Sr(z.x,O.x,V),ne=Sr(z.y,O.y,V),fe=new hs(Z,ne,0,O.angleTo(z),I);return!m||ux(n,fe,_,m,e)?fe:void 0}S+=j}}function qb(n,e,r,o,u,d,m,_,S){const T=cx(o,d,m),I=hx(o,u),z=I*m,O=n[0].x===0||n[0].x===S||n[0].y===0||n[0].y===S;return e-z<e/4&&(e=z+e/4),dx(n,O?e/2*_%e:(I/2+2*d)*m*_%e,e,T,r,z,O,!1,S)}function dx(n,e,r,o,u,d,m,_,S){const T=d/2,I=Yy(n);let z=0,O=e-r,j=[];for(let V=0;V<n.length-1;V++){const Z=n[V],ne=n[V+1],fe=Z.dist(ne),be=ne.angleTo(Z);for(;O+r<z+fe;){O+=r;const he=(O-z)/fe,we=Sr(Z.x,ne.x,he),Ce=Sr(Z.y,ne.y,he);if(we>=0&&we<S&&Ce>=0&&Ce<S&&O-T>=0&&O+T<=I){const Te=new hs(we,Ce,0,be,V);Te._round(),o&&!ux(n,Te,d,o,u)||j.push(Te)}}z+=fe}return _||j.length||m||(j=dx(n,z/2,r,o,u,d,m,!0,S)),j}function Ky(n,e,r,o,u){const d=[];for(let m=0;m<n.length;m++){const _=n[m];let S;for(let T=0;T<_.length-1;T++){let I=_[T],z=_[T+1];I.x<e&&z.x<e||(I.x<e?I=new ut(e,I.y+(e-I.x)/(z.x-I.x)*(z.y-I.y))._round():z.x<e&&(z=new ut(e,I.y+(e-I.x)/(z.x-I.x)*(z.y-I.y))._round()),I.y<r&&z.y<r||(I.y<r?I=new ut(I.x+(r-I.y)/(z.y-I.y)*(z.x-I.x),r)._round():z.y<r&&(z=new ut(I.x+(r-I.y)/(z.y-I.y)*(z.x-I.x),r)._round()),I.x>=o&&z.x>=o||(I.x>=o?I=new ut(o,I.y+(o-I.x)/(z.x-I.x)*(z.y-I.y))._round():z.x>=o&&(z=new ut(o,I.y+(o-I.x)/(z.x-I.x)*(z.y-I.y))._round()),I.y>=u&&z.y>=u||(I.y>=u?I=new ut(I.x+(u-I.y)/(z.y-I.y)*(z.x-I.x),u)._round():z.y>=u&&(z=new ut(I.x+(u-I.y)/(z.y-I.y)*(z.x-I.x),u)._round()),S&&I.equals(S[S.length-1])||(S=[I],d.push(S)),S.push(z)))))}}return d}an(hs,"Anchor");const kc=1e20;function vp(n,e,r,o,u,d,m,_,S){for(let T=e;T<e+o;T++)_p(n,r*d+T,d,u,m,_,S);for(let T=r;T<r+u;T++)_p(n,T*d+e,1,o,m,_,S)}function _p(n,e,r,o,u,d,m){d[0]=0,m[0]=-kc,m[1]=kc,u[0]=n[e];for(let _=1,S=0,T=0;_<o;_++){u[_]=n[e+_*r];const I=_*_;do{const z=d[S];T=(u[_]-u[z]+I-z*z)/(_-z)/2}while(T<=m[S]&&--S>-1);S++,d[S]=_,m[S]=T,m[S+1]=kc}for(let _=0,S=0;_<o;_++){for(;m[S+1]<_;)S++;const T=d[S],I=_-T;n[e+_*r]=u[T]+I*I}}const wo=2,qh={none:0,ideographs:1,all:2};class td{constructor(e,r,o){this.requestManager=e,this.localGlyphMode=r,this.localFontFamily=o,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,r){const o=[];for(const u in e)for(const d of e[u])o.push({stack:u,id:d});An(o,({stack:u,id:d},m)=>{let _=this.entries[u];_||(_=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=_.glyphs[d];if(S!==void 0)return void m(null,{stack:u,id:d,glyph:S});if(S=this._tinySDF(_,u,d),S)return _.glyphs[d]=S,void m(null,{stack:u,id:d,glyph:S});const T=Math.floor(d/256);if(256*T>65535)return void m(new Error("glyphs > 65535 not supported"));if(_.ranges[T])return void m(null,{stack:u,id:d,glyph:S});let I=_.requests[T];I||(I=_.requests[T]=[],td.loadGlyphRange(u,T,this.url,this.requestManager,(z,O)=>{if(O){_.ascender=O.ascender,_.descender=O.descender;for(const j in O.glyphs)this._doesCharSupportLocalGlyph(+j)||(_.glyphs[+j]=O.glyphs[+j]);_.ranges[T]=!0}for(const j of I)j(z,O);delete _.requests[T]})),I.push((z,O)=>{z?m(z):O&&m(null,{stack:u,id:d,glyph:O.glyphs[d]||null})})},(u,d)=>{if(u)r(u);else if(d){const m={};for(const{stack:_,id:S,glyph:T}of d)m[_]===void 0&&(m[_]={}),m[_].glyphs===void 0&&(m[_].glyphs={}),m[_].glyphs[S]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},m[_].ascender=this.entries[_].ascender,m[_].descender=this.entries[_].descender;r(null,m)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==qh.none&&(this.localGlyphMode===qh.all?!!this.localFontFamily:!!this.localFontFamily&&(Xt["CJK Unified Ideographs"](e)||Xt["Hangul Syllables"](e)||Xt.Hiragana(e)||Xt.Katakana(e)||Xt["CJK Symbols and Punctuation"](e)))}_tinySDF(e,r,o){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(o))return;let d=e.tinySDF;if(!d){let Z="400";/bold/i.test(r)?Z="900":/medium/i.test(r)?Z="500":/light/i.test(r)&&(Z="200"),d=e.tinySDF=new td.TinySDF({fontFamily:u,fontWeight:Z,fontSize:24*wo,buffer:3*wo,radius:8*wo}),d.fontWeight=Z}if(this.localGlyphs[d.fontWeight][o])return this.localGlyphs[d.fontWeight][o];const m=String.fromCharCode(o),{data:_,width:S,height:T,glyphWidth:I,glyphHeight:z,glyphLeft:O,glyphTop:j,glyphAdvance:V}=d.draw(m);return this.localGlyphs[d.fontWeight][o]={id:o,bitmap:new Su({width:S,height:T},_),metrics:{width:I/wo,height:z/wo,left:O/wo,top:j/wo-27,advance:V/wo,localGlyph:!0}}}}td.loadGlyphRange=function(n,e,r,o,u){const d=256*e,m=d+255,_=o.transformRequest(o.normalizeGlyphsURL(r).replace("{fontstack}",n).replace("{range}",`${d}-${m}`),dr.Glyphs);Jr(_,(S,T)=>{if(S)u(S);else if(T){const I={},z=function(O){return new Gh(O).readFields(ax,{})}(T);for(const O of z.glyphs)I[O.id]=O;u(null,{glyphs:I,ascender:z.ascender,descender:z.descender})}})},td.TinySDF=class{constructor({fontSize:n=24,buffer:e=3,radius:r=8,cutoff:o=.25,fontFamily:u="sans-serif",fontWeight:d="normal",fontStyle:m="normal"}={}){this.buffer=e,this.cutoff=o,this.radius=r;const _=this.size=n+4*e,S=this._createCanvas(_),T=this.ctx=S.getContext("2d",{willReadFrequently:!0});T.font=`${m} ${d} ${n}px ${u}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_)}_createCanvas(n){const e=document.createElement("canvas");return e.width=e.height=n,e}draw(n){const{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:o,actualBoundingBoxLeft:u,actualBoundingBoxRight:d}=this.ctx.measureText(n),m=Math.ceil(r),_=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(d-u))),S=Math.min(this.size-this.buffer,m+Math.ceil(o)),T=_+2*this.buffer,I=S+2*this.buffer,z=Math.max(T*I,0),O=new Uint8ClampedArray(z),j={data:O,width:T,height:I,glyphWidth:_,glyphHeight:S,glyphTop:m,glyphLeft:0,glyphAdvance:e};if(_===0||S===0)return j;const{ctx:V,buffer:Z,gridInner:ne,gridOuter:fe}=this;V.clearRect(Z,Z,_,S),V.fillText(n,Z,Z+m);const be=V.getImageData(Z,Z,_,S);fe.fill(kc,0,z),ne.fill(0,0,z);for(let he=0;he<S;he++)for(let we=0;we<_;we++){const Ce=be.data[4*(he*_+we)+3]/255;if(Ce===0)continue;const Te=(he+Z)*T+we+Z;if(Ce===1)fe[Te]=0,ne[Te]=kc;else{const Je=.5-Ce;fe[Te]=Je>0?Je*Je:0,ne[Te]=Je<0?Je*Je:0}}vp(fe,0,0,T,I,T,this.f,this.v,this.z),vp(ne,Z,Z,_,S,T,this.f,this.v,this.z);for(let he=0;he<z;he++){const we=Math.sqrt(fe[he])-Math.sqrt(ne[he]);O[he]=Math.round(255-255*(we/this.radius+this.cutoff))}return j}};const Dc=ho;function eg(n,e,r,o){const u=[],d=n.image,m=d.pixelRatio,_=d.paddedRect.w-2*Dc,S=d.paddedRect.h-2*Dc,T=n.right-n.left,I=n.bottom-n.top,z=d.stretchX||[[0,_]],O=d.stretchY||[[0,S]],j=(nt,bt)=>nt+bt[1]-bt[0],V=z.reduce(j,0),Z=O.reduce(j,0),ne=_-V,fe=S-Z;let be=0,he=V,we=0,Ce=Z,Te=0,Je=ne,He=0,mt=fe;if(d.content&&o){const nt=d.content;be=tg(z,0,nt[0]),we=tg(O,0,nt[1]),he=tg(z,nt[0],nt[2]),Ce=tg(O,nt[1],nt[3]),Te=nt[0]-be,He=nt[1]-we,Je=nt[2]-nt[0]-he,mt=nt[3]-nt[1]-Ce}const Bt=(nt,bt,wt,At)=>{const Ut=Jy(nt.stretch-be,he,T,n.left),ht=ng(nt.fixed-Te,Je,nt.stretch,V),Kt=Jy(bt.stretch-we,Ce,I,n.top),on=ng(bt.fixed-He,mt,bt.stretch,Z),Qt=Jy(wt.stretch-be,he,T,n.left),Qn=ng(wt.fixed-Te,Je,wt.stretch,V),Vt=Jy(At.stretch-we,Ce,I,n.top),Cn=ng(At.fixed-He,mt,At.stretch,Z),er=new ut(Ut,Kt),kr=new ut(Qt,Kt),Yn=new ut(Qt,Vt),Pn=new ut(Ut,Vt),vi=new ut(ht/m,on/m),Gn=new ut(Qn/m,Cn/m),tr=e*Math.PI/180;if(tr){const _i=Math.sin(tr),hi=Math.cos(tr),Ni=[hi,-_i,_i,hi];er._matMult(Ni),kr._matMult(Ni),Pn._matMult(Ni),Yn._matMult(Ni)}const cr=nt.stretch+nt.fixed,ri=bt.stretch+bt.fixed;return{tl:er,tr:kr,bl:Pn,br:Yn,tex:{x:d.paddedRect.x+Dc+cr,y:d.paddedRect.y+Dc+ri,w:wt.stretch+wt.fixed-cr,h:At.stretch+At.fixed-ri},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vi,pixelOffsetBR:Gn,minFontScaleX:Je/m/T,minFontScaleY:mt/m/I,isSDF:r}};if(o&&(d.stretchX||d.stretchY)){const nt=px(z,ne,V),bt=px(O,fe,Z);for(let wt=0;wt<nt.length-1;wt++){const At=nt[wt],Ut=nt[wt+1];for(let ht=0;ht<bt.length-1;ht++)u.push(Bt(At,bt[ht],Ut,bt[ht+1]))}}else u.push(Bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:_+1},{fixed:0,stretch:S+1}));return u}function tg(n,e,r){let o=0;for(const u of n)o+=Math.max(e,Math.min(r,u[1]))-Math.max(e,Math.min(r,u[0]));return o}function px(n,e,r){const o=[{fixed:-Dc,stretch:0}];for(const[u,d]of n){const m=o[o.length-1];o.push({fixed:u-m.stretch,stretch:m.stretch}),o.push({fixed:u-m.stretch,stretch:m.stretch+(d-u)})}return o.push({fixed:e+Dc,stretch:r}),o}function Jy(n,e,r,o){return n/e*r+o}function ng(n,e,r,o){return n-e*r/o}function Hb(n,e,r,o){const u=e+n.positionedLines[o].lineOffset;return o===0?r+u/2:r+(u+(e+n.positionedLines[o-1].lineOffset))/2}class Wb{constructor(e=[],r=Zb){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:o}=this,u=r[e];for(;e>0;){const d=e-1>>1,m=r[d];if(o(u,m)>=0)break;r[e]=m,e=d}r[e]=u}_down(e){const{data:r,compare:o}=this,u=this.length>>1,d=r[e];for(;e<u;){let m=1+(e<<1),_=r[m];const S=m+1;if(S<this.length&&o(r[S],_)<0&&(m=S,_=r[S]),o(_,d)>=0)break;r[e]=_,e=m}r[e]=d}}function Zb(n,e){return n<e?-1:n>e?1:0}function Xb(n,e=1,r=!1){let o=1/0,u=1/0,d=-1/0,m=-1/0;const _=n[0];for(let j=0;j<_.length;j++){const V=_[j];(!j||V.x<o)&&(o=V.x),(!j||V.y<u)&&(u=V.y),(!j||V.x>d)&&(d=V.x),(!j||V.y>m)&&(m=V.y)}const S=Math.min(d-o,m-u);let T=S/2;const I=new Wb([],Yb);if(S===0)return new ut(o,u);for(let j=o;j<d;j+=S)for(let V=u;V<m;V+=S)I.push(new Rc(j+T,V+T,T,n));let z=function(j){let V=0,Z=0,ne=0;const fe=j[0];for(let be=0,he=fe.length,we=he-1;be<he;we=be++){const Ce=fe[be],Te=fe[we],Je=Ce.x*Te.y-Te.x*Ce.y;Z+=(Ce.x+Te.x)*Je,ne+=(Ce.y+Te.y)*Je,V+=3*Je}return new Rc(Z/V,ne/V,0,j)}(n),O=I.length;for(;I.length;){const j=I.pop();(j.d>z.d||!z.d)&&(z=j,r&&console.log("found best %d after %d probes",Math.round(1e4*j.d)/1e4,O)),j.max-z.d<=e||(T=j.h/2,I.push(new Rc(j.p.x-T,j.p.y-T,T,n)),I.push(new Rc(j.p.x+T,j.p.y-T,T,n)),I.push(new Rc(j.p.x-T,j.p.y+T,T,n)),I.push(new Rc(j.p.x+T,j.p.y+T,T,n)),O+=4)}return r&&(console.log(`num probes: ${O}`),console.log(`best distance: ${z.d}`)),z.p}function Yb(n,e){return e.max-n.max}class Rc{constructor(e,r,o,u){this.p=new ut(e,r),this.h=o,this.d=function(d,m){let _=!1,S=1/0;for(let T=0;T<m.length;T++){const I=m[T];for(let z=0,O=I.length,j=O-1;z<O;j=z++){const V=I[z],Z=I[j];V.y>d.y!=Z.y>d.y&&d.x<(Z.x-V.x)*(d.y-V.y)/(Z.y-V.y)+V.x&&(_=!_),S=Math.min(S,Im(d,V,Z))}}return(_?1:-1)*Math.sqrt(S)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}}const nd=7,Qy=Number.POSITIVE_INFINITY,ev=Math.sqrt(2);function mx(n,[e,r]){let o=0,u=0;if(r===Qy){e<0&&(e=0);const d=e/ev;switch(n){case"top-right":case"top-left":u=d-nd;break;case"bottom-right":case"bottom-left":u=-d+nd;break;case"bottom":u=-e+nd;break;case"top":u=e-nd}switch(n){case"top-right":case"bottom-right":o=-d;break;case"top-left":case"bottom-left":o=d;break;case"left":o=e;break;case"right":o=-e}}else{switch(e=Math.abs(e),r=Math.abs(r),n){case"top-right":case"top-left":case"top":u=r-nd;break;case"bottom-right":case"bottom-left":case"bottom":u=-r+nd}switch(n){case"top-right":case"bottom-right":case"right":o=-e;break;case"top-left":case"bottom-left":case"left":o=e}}return[o,u]}function tv(n,e,r,o,u,d,m,_,S,T){n.createArrays(),n.tilePixelRatio=kn/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const I=n.layers[0].layout,z=n.layers[0]._unevaluatedLayout._values,O={};if(n.textSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ne}=n.textSizeData;O.compositeTextSizes=[z["text-size"].possiblyEvaluate(new L(Z),_),z["text-size"].possiblyEvaluate(new L(ne),_)]}if(n.iconSizeData.kind==="composite"){const{minZoom:Z,maxZoom:ne}=n.iconSizeData;O.compositeIconSizes=[z["icon-size"].possiblyEvaluate(new L(Z),_),z["icon-size"].possiblyEvaluate(new L(ne),_)]}O.layoutTextSize=z["text-size"].possiblyEvaluate(new L(S+1),_),O.layoutIconSize=z["icon-size"].possiblyEvaluate(new L(S+1),_),O.textMaxSize=z["text-size"].possiblyEvaluate(new L(18),_);const j=I.get("text-rotation-alignment")==="map"&&I.get("symbol-placement")!=="point",V=I.get("text-size");for(const Z of n.features){const ne=I.get("text-font").evaluate(Z,{},_).join(","),fe=V.evaluate(Z,{},_),be=O.layoutTextSize.evaluate(Z,{},_),he=(O.layoutIconSize.evaluate(Z,{},_),{horizontal:{},vertical:void 0}),we=Z.text;let Ce,Te=[0,0];if(we){const mt=we.toString(),Bt=I.get("text-letter-spacing").evaluate(Z,{},_)*xa,nt=I.get("text-line-height").evaluate(Z,{},_)*xa,bt=ll(mt)?Bt:0,wt=I.get("text-anchor").evaluate(Z,{},_),At=I.get("text-variable-anchor");if(!At){const Qt=I.get("text-radial-offset").evaluate(Z,{},_);Te=Qt?mx(wt,[Qt*xa,Qy]):I.get("text-offset").evaluate(Z,{},_).map(Qn=>Qn*xa)}let Ut=j?"center":I.get("text-justify").evaluate(Z,{},_);const ht=I.get("symbol-placement")==="point",Kt=ht?I.get("text-max-width").evaluate(Z,{},_)*xa:1/0,on=Qt=>{n.allowVerticalPlacement&&bh(mt)&&(he.vertical=Xy(we,e,r,u,ne,Kt,nt,wt,Qt,bt,Te,cs.vertical,!0,be,fe))};if(!j&&At){const Qt=Ut==="auto"?At.map(Vt=>rg(Vt)):[Ut];let Qn=!1;for(let Vt=0;Vt<Qt.length;Vt++){const Cn=Qt[Vt];if(!he.horizontal[Cn])if(Qn)he.horizontal[Cn]=he.horizontal[0];else{const er=Xy(we,e,r,u,ne,Kt,nt,"center",Cn,bt,Te,cs.horizontal,!1,be,fe);er&&(he.horizontal[Cn]=er,Qn=er.positionedLines.length===1)}}on("left")}else{if(Ut==="auto"&&(Ut=rg(wt)),ht||I.get("text-writing-mode").indexOf("horizontal")>=0||!bh(mt)){const Qt=Xy(we,e,r,u,ne,Kt,nt,wt,Ut,bt,Te,cs.horizontal,!1,be,fe);Qt&&(he.horizontal[Ut]=Qt)}on(ht?"left":Ut)}}let Je=!1;if(Z.icon&&Z.icon.name){const mt=o[Z.icon.name];mt&&(Ce=Gb(u[Z.icon.name],I.get("icon-offset").evaluate(Z,{},_),I.get("icon-anchor").evaluate(Z,{},_)),Je=mt.sdf,n.sdfIcons===void 0?n.sdfIcons=mt.sdf:n.sdfIcons!==mt.sdf&&Wn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(mt.pixelRatio!==n.pixelRatio||I.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const He=nv(he.horizontal)||he.vertical;n.iconsInText||(n.iconsInText=!!He&&He.iconsInText),(He||Ce)&&Kb(n,Z,he,Ce,o,O,be,0,Te,Je,m,_,T)}d&&n.generateCollisionDebugBuffers(S,n.collisionBoxArray)}function rg(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Kb(n,e,r,o,u,d,m,_,S,T,I,z,O){let j=d.textMaxSize.evaluate(e,{},z);j===void 0&&(j=m);const V=n.layers[0].layout,Z=V.get("icon-offset").evaluate(e,{},z),ne=nv(r.horizontal)||r.vertical,fe=O.name==="globe",be=xa,he=m/be,we=n.tilePixelRatio*j/be,Ce=(wt=n.overscaling,n.zoom>18&&wt>2&&(wt>>=1),Math.max(kn/(512*wt),1)*V.get("symbol-spacing")),Te=V.get("text-padding")*n.tilePixelRatio,Je=V.get("icon-padding")*n.tilePixelRatio,He=et(V.get("text-max-angle")),mt=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Bt=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",nt=V.get("symbol-placement"),bt=Ce/2;var wt;const At=V.get("icon-text-fit");let Ut;o&&At!=="none"&&(n.allowVerticalPlacement&&r.vertical&&(Ut=ed(o,r.vertical,At,V.get("icon-text-fit-padding"),Z,he)),ne&&(o=ed(o,ne,At,V.get("icon-text-fit-padding"),Z,he)));const ht=(Kt,on,Qt)=>{if(on.x<0||on.x>=kn||on.y<0||on.y>=kn)return;let Qn=null;if(fe){const{x:Vt,y:Cn,z:er}=O.projectTilePoint(on.x,on.y,Qt);Qn={anchor:new hs(Vt,Cn,er,0,void 0),up:O.upVector(Qt,on.x,on.y)}}(function(Vt,Cn,er,kr,Yn,Pn,vi,Gn,tr,cr,ri,_i,hi,Ni,Gr,la,Pr,qi,Ui,wi,Tr,ji,qr,ma,Hi){const ka=Vt.addToLineVertexArray(Cn,kr);let ga,Wa,ya,fs,Vc,ud,Pp,cd=0,Op=0,Bp=0,vv=0,yg=-1,$c=-1;const vl={};let Tx=hc("");const Xh=er?er.anchor:Cn;let Fp=0,Np=0;if(tr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Fp,Np]=tr.layout.get("text-offset").evaluate(Tr,{},Hi).map(Qa=>Qa*xa):(Fp=tr.layout.get("text-radial-offset").evaluate(Tr,{},Hi)*xa,Np=Qy),Vt.allowVerticalPlacement&&Yn.vertical){const Qa=Yn.vertical;if(Gr)ud=rv(Qa),Gn&&(Pp=rv(Gn));else{const eo=tr.layout.get("text-rotate").evaluate(Tr,{},Hi)+90;ya=ig(cr,Xh,Cn,ri,_i,hi,Qa,Ni,eo,la),Gn&&(fs=ig(cr,Xh,Cn,ri,_i,hi,Gn,qi,eo))}}if(Pn){const Qa=tr.layout.get("icon-rotate").evaluate(Tr,{},Hi),eo=tr.layout.get("icon-text-fit")!=="none",hd=eg(Pn,Qa,qr,eo),vg=Gn?eg(Gn,Qa,qr,eo):void 0;Wa=ig(cr,Xh,Cn,ri,_i,hi,Pn,qi,Qa),cd=4*hd.length;const xv=Vt.iconSizeData;let Au=null;xv.kind==="source"?(Au=[Ns*tr.layout.get("icon-size").evaluate(Tr,{},Hi)],Au[0]>Ic&&Wn(`${Vt.layerIds[0]}: Value for "icon-size" is >= ${xp}. Reduce your "icon-size".`)):xv.kind==="composite"&&(Au=[Ns*ji.compositeIconSizes[0].evaluate(Tr,{},Hi),Ns*ji.compositeIconSizes[1].evaluate(Tr,{},Hi)],(Au[0]>Ic||Au[1]>Ic)&&Wn(`${Vt.layerIds[0]}: Value for "icon-size" is >= ${xp}. Reduce your "icon-size".`)),Vt.addSymbols(Vt.icon,hd,Au,wi,Ui,Tr,!1,er,Cn,ka.lineStartIndex,ka.lineLength,-1,ma,Hi),yg=Vt.icon.placedSymbolArray.length-1,vg&&(Op=4*vg.length,Vt.addSymbols(Vt.icon,vg,Au,wi,Ui,Tr,cs.vertical,er,Cn,ka.lineStartIndex,ka.lineLength,-1,ma,Hi),$c=Vt.icon.placedSymbolArray.length-1)}for(const Qa in Yn.horizontal){const eo=Yn.horizontal[Qa];ga||(Tx=hc(eo.text),Gr?Vc=rv(eo):ga=ig(cr,Xh,Cn,ri,_i,hi,eo,Ni,tr.layout.get("text-rotate").evaluate(Tr,{},Hi),la));const hd=eo.positionedLines.length===1;if(Bp+=gx(Vt,er,Cn,eo,vi,tr,Gr,Tr,la,ka,Yn.vertical?cs.horizontal:cs.horizontalOnly,hd?Object.keys(Yn.horizontal):[Qa],vl,yg,ji,ma,Hi),hd)break}Yn.vertical&&(vv+=gx(Vt,er,Cn,Yn.vertical,vi,tr,Gr,Tr,la,ka,cs.vertical,["vertical"],vl,$c,ji,ma,Hi));let _l=-1;const Gc=(Qa,eo)=>Qa?Math.max(Qa,eo):eo;_l=Gc(Vc,_l),_l=Gc(ud,_l),_l=Gc(Pp,_l);const _v=_l>-1?1:0;Vt.glyphOffsetArray.length>=zc.MAX_GLYPHS&&Wn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tr.sortKey!==void 0&&Vt.addToSortKeyRanges(Vt.symbolInstances.length,Tr.sortKey),Vt.symbolInstances.emplaceBack(Xh.x,Xh.y,Xh.z,Cn.x,Cn.y,vl.right>=0?vl.right:-1,vl.center>=0?vl.center:-1,vl.left>=0?vl.left:-1,vl.vertical>=0?vl.vertical:-1,yg,$c,Tx,ga!==void 0?ga:Vt.collisionBoxArray.length,ga!==void 0?ga+1:Vt.collisionBoxArray.length,ya!==void 0?ya:Vt.collisionBoxArray.length,ya!==void 0?ya+1:Vt.collisionBoxArray.length,Wa!==void 0?Wa:Vt.collisionBoxArray.length,Wa!==void 0?Wa+1:Vt.collisionBoxArray.length,fs||Vt.collisionBoxArray.length,fs?fs+1:Vt.collisionBoxArray.length,ri,Bp,vv,cd,Op,_v,0,Fp,Np,_l)})(n,on,Qn,Kt,r,o,u,Ut,n.layers[0],n.collisionBoxArray,e.index,e.sourceLayerIndex,n.index,Te,mt,S,0,Je,Bt,Z,e,d,T,I,z)};if(nt==="line")for(const Kt of Ky(e.geometry,0,0,kn,kn)){const on=qb(Kt,Ce,He,r.vertical||ne,o,be,we,n.overscaling,kn);for(const Qt of on)ne&&Jb(n,ne.text,bt,Qt)||ht(Kt,Qt,z)}else if(nt==="line-center"){for(const Kt of e.geometry)if(Kt.length>1){const on=fx(Kt,He,r.vertical||ne,o,be,we);on&&ht(Kt,on,z)}}else if(e.type==="Polygon")for(const Kt of Nm(e.geometry,0)){const on=Xb(Kt,16);ht(Kt[0],new hs(on.x,on.y,0,0,void 0),z)}else if(e.type==="LineString")for(const Kt of e.geometry)ht(Kt,new hs(Kt[0].x,Kt[0].y,0,0,void 0),z);else if(e.type==="Point")for(const Kt of e.geometry)for(const on of Kt)ht([on],new hs(on.x,on.y,0,0,void 0),z)}const xp=255,Ic=xp*Ns;function gx(n,e,r,o,u,d,m,_,S,T,I,z,O,j,V,Z,ne){const fe=function(we,Ce,Te,Je,He,mt,Bt,nt){const bt=[];if(Ce.positionedLines.length===0)return bt;const wt=Je.layout.get("text-rotate").evaluate(mt,{})*Math.PI/180,At=function(Qt){const Qn=Qt[0],Vt=Qt[1],Cn=Qn*Vt;return Cn>0?[Qn,-Vt]:Cn<0?[-Qn,Vt]:Qn===0?[Vt,Qn]:[Vt,-Qn]}(Te);let Ut=Math.abs(Ce.top-Ce.bottom);for(const Qt of Ce.positionedLines)Ut-=Qt.lineOffset;const ht=Ce.positionedLines.length,Kt=Ut/ht;let on=Ce.top-Te[1];for(let Qt=0;Qt<ht;++Qt){const Qn=Ce.positionedLines[Qt];on=Hb(Ce,Kt,on,Qt);for(const Vt of Qn.positionedGlyphs){if(!Vt.rect)continue;const Cn=Vt.rect||{};let er=pp+1,kr=!0,Yn=1,Pn=0;if(Vt.imageName){const qr=Bt[Vt.imageName];if(!qr)continue;if(qr.sdf){Wn("SDF images are not supported in formatted text and will be ignored.");continue}kr=!1,Yn=qr.pixelRatio,er=ho/Yn}const vi=(He||nt)&&Vt.vertical,Gn=Vt.metrics.advance*Vt.scale/2,tr=Vt.metrics,cr=Vt.rect;if(cr===null)continue;nt&&Ce.verticalizable&&(Pn=Vt.imageName?Gn-Vt.metrics.width*Vt.scale/2:0);const ri=He?[Vt.x+Gn,Vt.y]:[0,0];let _i=[0,0],hi=[0,0],Ni=!1;He||(vi?(hi=[Vt.x+Gn+At[0],Vt.y+At[1]-Pn],Ni=!0):_i=[Vt.x+Gn+Te[0],Vt.y+Te[1]-Pn]);const Gr=cr.w*Vt.scale/(Yn*(Vt.localGlyph?wo:1)),la=cr.h*Vt.scale/(Yn*(Vt.localGlyph?wo:1));let Pr,qi,Ui,wi;if(vi){const qr=Vt.y-on,ma=new ut(-Gn,Gn-qr),Hi=-Math.PI/2,ka=new ut(...hi);Pr=new ut(-Gn+_i[0],_i[1]),Pr._rotateAround(Hi,ma)._add(ka),Pr.x+=-qr+Gn,Pr.y-=(tr.left-er)*Vt.scale;const ga=Vt.imageName?tr.advance*Vt.scale:xa*Vt.scale,Wa=String.fromCharCode(Vt.glyph);fp(Wa)?Pr.x+=(1-er)*Vt.scale:tx(Wa)?Pr.x+=ga-tr.height*Vt.scale+(-er-1)*Vt.scale:Pr.x+=Vt.imageName||tr.width+2*er===cr.w&&tr.height+2*er===cr.h?(ga-la)/2:(ga-(tr.height+2*er)*Vt.scale)/2,qi=new ut(Pr.x,Pr.y-Gr),Ui=new ut(Pr.x+la,Pr.y),wi=new ut(Pr.x+la,Pr.y-Gr)}else{const qr=(tr.left-er)*Vt.scale-Gn+_i[0],ma=(-tr.top-er)*Vt.scale+_i[1],Hi=qr+Gr,ka=ma+la;Pr=new ut(qr,ma),qi=new ut(Hi,ma),Ui=new ut(qr,ka),wi=new ut(Hi,ka)}if(wt){let qr;qr=He?new ut(0,0):Ni?new ut(At[0],At[1]):new ut(Te[0],Te[1]),Pr._rotateAround(wt,qr),qi._rotateAround(wt,qr),Ui._rotateAround(wt,qr),wi._rotateAround(wt,qr)}const Tr=new ut(0,0),ji=new ut(0,0);bt.push({tl:Pr,tr:qi,bl:Ui,br:wi,tex:Cn,writingMode:Ce.writingMode,glyphOffset:ri,sectionIndex:Vt.sectionIndex,isSDF:kr,pixelOffsetTL:Tr,pixelOffsetBR:ji,minFontScaleX:0,minFontScaleY:0})}}return bt}(0,o,S,d,m,_,u,n.allowVerticalPlacement),be=n.textSizeData;let he=null;be.kind==="source"?(he=[Ns*d.layout.get("text-size").evaluate(_,{},ne)],he[0]>Ic&&Wn(`${n.layerIds[0]}: Value for "text-size" is >= ${xp}. Reduce your "text-size".`)):be.kind==="composite"&&(he=[Ns*V.compositeTextSizes[0].evaluate(_,{},ne),Ns*V.compositeTextSizes[1].evaluate(_,{},ne)],(he[0]>Ic||he[1]>Ic)&&Wn(`${n.layerIds[0]}: Value for "text-size" is >= ${xp}. Reduce your "text-size".`)),n.addSymbols(n.text,fe,he,S,m,_,I,e,r,T.lineStartIndex,T.lineLength,j,Z,ne);for(const we of z)O[we]=n.text.placedSymbolArray.length-1;return 4*fe.length}function nv(n){for(const e in n)return n[e];return null}function ig(n,e,r,o,u,d,m,_,S,T){let I=m.top,z=m.bottom,O=m.left,j=m.right;const V=m.collisionPadding;if(V&&(O-=V[0],I-=V[1],j+=V[2],z+=V[3]),S){const Z=new ut(O,I),ne=new ut(j,I),fe=new ut(O,z),be=new ut(j,z),he=et(S);let we=new ut(0,0);T&&(we=new ut(T[0],T[1])),Z._rotateAround(he,we),ne._rotateAround(he,we),fe._rotateAround(he,we),be._rotateAround(he,we),O=Math.min(Z.x,ne.x,fe.x,be.x),j=Math.max(Z.x,ne.x,fe.x,be.x),I=Math.min(Z.y,ne.y,fe.y,be.y),z=Math.max(Z.y,ne.y,fe.y,be.y)}return n.emplaceBack(e.x,e.y,e.z,r.x,r.y,O,I,j,z,_,o,u,d),n.length-1}function rv(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const e=n.bottom-n.top;return e>0?Math.max(10,e):null}function Jb(n,e,r,o){const u=n.compareText;if(e in u){const d=u[e];for(let m=d.length-1;m>=0;m--)if(o.dist(d[m])<r)return!0}else u[e]=[];return u[e].push(o),!1}function yx(n,e){const r=n.fovAboveCenter,o=n.elevation?n.elevation.getMinElevationBelowMSL()*e:0,u=(n._camera.position[2]*n.worldSize-o)/Math.cos(n._pitch),d=Math.sin(r)*u/Math.sin(Math.max(Math.PI/2-n._pitch-r,.01)),m=Math.sin(n._pitch)*d+u;return Math.min(1.01*m,u*(1/n._horizonShift))}function Hh(n,e){if(!e.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:e};const r=Math.pow(2,-n.z),o=n.x*r,u=(n.x+1)*r,d=n.y*r,m=(n.y+1)*r,_=ss(o),S=ss(u),T=qa(d),I=qa(m),z=e.project(_,T),O=e.project(S,T),j=e.project(S,I),V=e.project(_,I);let Z=Math.min(z.x,O.x,j.x,V.x),ne=Math.min(z.y,O.y,j.y,V.y),fe=Math.max(z.x,O.x,j.x,V.x),be=Math.max(z.y,O.y,j.y,V.y);const he=r/16;function we(Te,Je,He,mt,Bt,nt){const bt=(He+Bt)/2,wt=(mt+nt)/2,At=e.project(ss(bt),qa(wt)),Ut=Math.max(0,Z-At.x,ne-At.y,At.x-fe,At.y-be);Z=Math.min(Z,At.x),fe=Math.max(fe,At.x),ne=Math.min(ne,At.y),be=Math.max(be,At.y),Ut>he&&(we(Te,At,He,mt,bt,wt),we(At,Je,bt,wt,Bt,nt))}we(z,O,o,d,u,d),we(O,j,u,d,u,m),we(j,V,u,m,o,m),we(V,z,o,m,o,d),Z-=he,ne-=he,fe+=he,be+=he;const Ce=1/Math.max(fe-Z,be-ne);return{scale:Ce,x:Z*Ce,y:ne*Ce,x2:fe*Ce,y2:be*Ce,projection:e}}const Qb=No(new Float32Array(16));class Lc{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,r){return{x:0,y:0,z:0}}unproject(e,r){return new Vr(0,0)}projectTilePoint(e,r,o){return{x:e,y:r,z:0}}locationPoint(e,r,o=!0){return e._coordinatePoint(e.locationCoordinate(r),o)}pixelsPerMeter(e,r){return Fs(1,e)*r}pixelSpaceConversion(e,r,o){return 1}farthestPixelDistance(e){return yx(e,e.pixelsPerMeter)}pointCoordinate(e,r,o,u){const d=e.horizonLineFromTop(!1),m=new ut(r,Math.max(d,o));return e.rayIntersectionCoordinate(e.pointRayIntersection(m,u))}pointCoordinate3D(e,r,o){const u=new ut(r,o);if(e.elevation)return e.elevation.pointCoordinate(u);{const d=this.pointCoordinate(e,u.x,u.y,0);return[d.x,d.y,d.z]}}isPointAboveHorizon(e,r){if(e.elevation)return!this.pointCoordinate3D(e,r.x,r.y);const o=e.horizonLineFromTop();return r.y<o}createInversionMatrix(e,r){return Qb}createTileMatrix(e,r,o){let u,d,m;const _=o.canonical,S=No(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=Hh(_,this);u=1,d=T.x+o.wrap*T.scale,m=T.y,Mh(S,S,[u/T.scale,u/T.scale,e.pixelsPerMeter/r])}else u=r/e.zoomScale(_.z),d=(_.x+Math.pow(2,_.z)*o.wrap)*u,m=_.y*u;return gc(S,S,[d,m,0]),Mh(S,S,[u/kn,u/kn,1]),S}upVector(e,r,o){return[0,0,1]}upVectorScale(e,r,o){return{metersToTile:1}}}class iv extends Lc{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[r,o]=this.parallels=e.parallels||[29.5,45.5],u=Math.sin(et(r));this.n=(u+Math.sin(et(o)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(e,r){const{n:o,c:u,r0:d}=this,m=et(e-this.center[0]),_=et(r),S=Math.sqrt(u-2*o*Math.sin(_))/o;return{x:S*Math.sin(m*o),y:S*Math.cos(m*o)-d,z:0}}unproject(e,r){const{n:o,c:u,r0:d}=this,m=d+r;let _=Math.atan2(e,Math.abs(m))*Math.sign(m);m*o<0&&(_-=Math.PI*Math.sign(e)*Math.sign(m));const S=et(this.center[0])*o;_=Fn(_,-Math.PI-S,Math.PI-S);const T=It($t(_/o)+this.center[0],-180,180),I=Math.asin(It((u-(e*e+m*m)*o*o)/(2*o),-1,1)),z=It($t(I),-Ha,Ha);return new Vr(T,z)}}const bp=1.340264,wp=-.081106,Ep=893e-6,Sp=.003796,ag=Math.sqrt(3)/2;class e1 extends Lc{project(e,r){r=r/180*Math.PI,e=e/180*Math.PI;const o=Math.asin(ag*Math.sin(r)),u=o*o,d=u*u*u;return{x:.5*(e*Math.cos(o)/(ag*(bp+3*wp*u+d*(7*Ep+9*Sp*u)))/Math.PI+.5),y:1-.5*(o*(bp+wp*u+d*(Ep+Sp*u))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let o=r=(2*(1-r)-1)*Math.PI,u=o*o,d=u*u*u;for(let I,z,O,j=0;j<12&&(z=o*(bp+wp*u+d*(Ep+Sp*u))-r,O=bp+3*wp*u+d*(7*Ep+9*Sp*u),I=z/O,o=It(o-I,-Math.PI/3,Math.PI/3),u=o*o,d=u*u*u,!(Math.abs(I)<1e-12));++j);const m=ag*e*(bp+3*wp*u+d*(7*Ep+9*Sp*u))/Math.cos(o),_=Math.asin(Math.sin(o)/ag),S=It(180*m/Math.PI,-180,180),T=It(180*_/Math.PI,-Ha,Ha);return new Vr(S,T)}}class t1 extends Lc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){return{x:.5+e/360,y:.5-r/360,z:0}}unproject(e,r){const o=360*(e-.5),u=It(360*(.5-r),-Ha,Ha);return new Vr(o,u)}}const rd=Math.PI/2;function og(n){return Math.tan((rd+n)/2)}class vx extends Lc{constructor(e){super(e),this.center=e.center||[0,30];const[r,o]=this.parallels=e.parallels||[30,30];let u=et(r),d=et(o);this.southernCenter=u+d<0,this.southernCenter&&(u=-u,d=-d);const m=Math.cos(u),_=og(u);this.n=u===d?Math.sin(u):Math.log(m/Math.cos(d))/Math.log(og(d)/_),this.f=m*Math.pow(og(u),this.n)/this.n}project(e,r){r=et(r),this.southernCenter&&(r=-r),e=et(e-this.center[0]);const o=1e-6,{n:u,f:d}=this;d>0?r<-rd+o&&(r=-rd+o):r>rd-o&&(r=rd-o);const m=d/Math.pow(og(r),u);let _=m*Math.sin(u*e),S=d-m*Math.cos(u*e);return _=.5*(_/Math.PI+.5),S=.5*(S/Math.PI+.5),{x:_,y:this.southernCenter?S:1-S,z:0}}unproject(e,r){e=(2*e-.5)*Math.PI,this.southernCenter&&(r=1-r),r=(2*(1-r)-.5)*Math.PI;const{n:o,f:u}=this,d=u-r,m=Math.sign(d),_=Math.sign(o)*Math.sqrt(e*e+d*d);let S=Math.atan2(e,Math.abs(d))*m;d*o<0&&(S-=Math.PI*Math.sign(e)*m);const T=It($t(S/o)+this.center[0],-180,180),I=It($t(2*Math.atan(Math.pow(u/_,1/o))-rd),-Ha,Ha);return new Vr(T,this.southernCenter?-I:I)}}class sg extends Lc{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,r){return{x:bo(e),y:Bs(r),z:0}}unproject(e,r){const o=ss(e),u=qa(r);return new Vr(o,u)}}const _x=et(Ha);class n1 extends Lc{project(e,r){const o=(r=et(r))*r,u=o*o;return{x:.5*((e=et(e))*(.8707-.131979*o+u*(u*(.003971*o-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(r*(1.007226+o*(.015085+u*(.028874*o-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(e,r){e=(2*e-.5)*Math.PI;let o=r=(2*(1-r)-1)*Math.PI,u=25,d=0,m=o*o;do{m=o*o;const T=m*m;d=(o*(1.007226+m*(.015085+T*(.028874*m-.044475-.005916*T)))-r)/(1.007226+m*(.045255+T*(.259866*m-.311325-.005916*11*T))),o=It(o-d,-_x,_x)}while(Math.abs(d)>1e-6&&--u>0);m=o*o;const _=It($t(e/(.8707+m*(m*(m*m*m*(.003971-.001529*m)-.013791)-.131979))),-180,180),S=$t(o);return new Vr(_,S)}}const Tp=et(Ha);class Cp extends Lc{project(e,r){r=et(r),e=et(e);const o=Math.cos(r),u=2/Math.PI,d=Math.acos(o*Math.cos(e/2)),m=Math.sin(d)/d,_=.5*(e*u+2*o*Math.sin(e/2)/m)||0,S=.5*(r+Math.sin(r)/m)||0;return{x:.5*(_/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(e,r){let o=e=(2*e-.5)*Math.PI,u=r=(2*(1-r)-1)*Math.PI,d=25;const m=1e-6;let _=0,S=0;do{const T=Math.cos(u),I=Math.sin(u),z=2*I*T,O=I*I,j=T*T,V=Math.cos(o/2),Z=Math.sin(o/2),ne=2*V*Z,fe=Z*Z,be=1-j*V*V,he=be?1/be:0,we=be?Math.acos(T*V)*Math.sqrt(1/be):0,Ce=.5*(2*we*T*Z+2*o/Math.PI)-e,Te=.5*(we*I+u)-r,Je=.5*he*(j*fe+we*T*V*O)+1/Math.PI,He=he*(ne*z/4-we*I*Z),mt=.125*he*(z*Z-we*I*j*ne),Bt=.5*he*(O*V+we*fe*T)+.5,nt=He*mt-Bt*Je;_=(Te*He-Ce*Bt)/nt,S=(Ce*mt-Te*Je)/nt,o=It(o-_,-Math.PI,Math.PI),u=It(u-S,-Tp,Tp)}while((Math.abs(_)>m||Math.abs(S)>m)&&--d>0);return new Vr($t(o),$t(u))}}class xx extends Lc{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(et(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,r){const{scale:o,cosPhi:u}=this;return{x:et(e)*u*o+.5,y:-Math.sin(et(r))/u*o+.5,z:0}}unproject(e,r){const{scale:o,cosPhi:u}=this,d=-(r-.5)/o,m=It($t((e-.5)/o)/u,-180,180),_=Math.asin(It(d*u,-1,1)),S=It($t(_),-Ha,Ha);return new Vr(m,S)}}class r1 extends sg{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,r,o){const u=Ps(e,r,o);return Ri(u,u,Os(Gl(o))),{x:u[0],y:u[1],z:u[2]}}locationPoint(e,r){const o=os(r.lat,r.lng),u=pa([],o),d=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(r),e._centerAltitude):e._centerAltitude;bu(o,o,u,Fs(1,0)*kn*d);const m=No(new Float64Array(16));return dl(m,e.pixelMatrix,e.globeMatrix),Ri(o,o,m),new ut(o[0],o[1])}pixelsPerMeter(e,r){return Fs(1,0)*r}pixelSpaceConversion(e,r,o){const u=Fs(1,e)*r,d=Sr(Fs(1,45)*r,u,o);return this.pixelsPerMeter(e,r)/d}createTileMatrix(e,r,o){const u=dy(Gl(o.canonical));return dl(new Float64Array(16),e.globeMatrix,u)}createInversionMatrix(e,r){const{center:o}=e,u=Os(Gl(r));return _m(u,u,et(o.lng)),oy(u,u,et(o.lat)),Mh(u,u,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(e,r,o,u){return Sm(e,r,o,!0)||new Vf(0,0)}pointCoordinate3D(e,r,o){const u=this.pointCoordinate(e,r,o,0);return[u.x,u.y,u.z]}isPointAboveHorizon(e,r){return!Sm(e,r.x,r.y,!1)}farthestPixelDistance(e){const r=function(u,d){const m=u.cameraToCenterDistance,_=u._centerAltitude*d,S=u._camera,T=u._camera.forward(),I=Ls([],Oa([],T,-m),[0,0,_]),z=u.worldSize/(2*Math.PI),O=[0,0,-z],j=u.width/u.height,V=Math.tan(u.fovAboveCenter),Z=Oa([],S.up(),V),ne=Oa([],S.right(),V*j),fe=pa([],Ls([],Ls([],T,Z),ne)),be=[];let he;if(new pl(I,fe).closestPointOnSphere(O,z,be)){const we=Ls([],be,O),Ce=zs([],we,I);he=Math.cos(u.fovAboveCenter)*Jd(Ce)}else{const we=zs([],I,O),Ce=zs([],O,I);pa(Ce,Ce);const Te=Jd(we)-z;he=Math.sqrt(Te*(Te+2*z));const Je=Math.acos(he/(z+Te))-Math.acos(Uo(T,Ce));he*=Math.cos(Je)}return 1.01*he}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),o=jf(e.zoom);if(o>0){const u=yx(e,Fs(1,e.center.lat)*e.worldSize),d=e.worldSize/(2*Math.PI),m=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Sr(r,u+d*(1-Math.cos(m)),Math.pow(o,10))}return r}upVector(e,r,o){return Ps(r,o,e,1)}upVectorScale(e){return{metersToTile:Em(_c(Gl(e)))}}}function bx(n){const e=n.parallels,r=!!e&&Math.abs(e[0]+e[1])<.01;switch(n.name){case"mercator":return new sg(n);case"equirectangular":return new t1(n);case"naturalEarth":return new n1(n);case"equalEarth":return new e1(n);case"winkelTripel":return new Cp(n);case"albers":return r?new xx(n):new iv(n);case"lambertConformalConic":return r?new xx(n):new vx(n);case"globe":return new r1(n)}throw new Error(`Invalid projection name: ${n.name}`)}const i1=Vm.types,a1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function lg(n,e,r,o,u,d,m,_,S,T,I,z,O){const j=_?Math.min(Ic,Math.round(_[0])):0,V=_?Math.min(Ic,Math.round(_[1])):0;n.emplaceBack(e,r,Math.round(32*o),Math.round(32*u),d,m,(j<<1)+(S?1:0),V,16*T,16*I,256*z,256*O)}function ug(n,e,r,o,u,d,m){n.emplaceBack(e,r,o,u,d,m)}function Mp(n,e,r,o,u){n.emplaceBack(e,r,o,u),n.emplaceBack(e,r,o,u),n.emplaceBack(e,r,o,u),n.emplaceBack(e,r,o,u)}function o1(n){for(const e of n.sections)if(ul(e.text))return!0;return!1}class av{constructor(e){this.layoutVertexArray=new Tt,this.indexArray=new gn,this.programConfigurations=e,this.segments=new Bi,this.dynamicLayoutVertexArray=new xt,this.opacityVertexArray=new pn,this.placedSymbolArray=new sa,this.globeExtVertexArray=new Pt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,o,u){this.isEmpty()||(o&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,J_.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Cc.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,a1,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Q_.members,!0)),this.opacityVertexBuffer.itemSize=1),(o||u)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}an(av,"SymbolBuffers");class ov{constructor(e,r,o){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new o,this.segments=new Bi,this.collisionVertexArray=new vr,this.collisionVertexArrayExt=new mr}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Fb.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Nb.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}an(ov,"CollisionBuffers");class zc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(m=>m.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=No([]),this.placementViewportMatrix=No([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$y(this.zoom,r["text-size"]),this.iconSizeData=$y(this.zoom,r["icon-size"]);const o=this.layers[0].layout,u=o.get("symbol-sort-key"),d=o.get("symbol-z-order");this.canOverlap=o.get("text-allow-overlap")||o.get("icon-allow-overlap")||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=d!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(d==="viewport-y"||d==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=o.get("text-writing-mode").map(m=>cs[m]),this.stateDependentLayerIds=this.layers.filter(m=>m.isStateDependent()).map(m=>m.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new av(new xu(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new av(new xu(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new xn,this.lineVertexArray=new Er,this.symbolInstances=new gi}calculateGlyphDependencies(e,r,o,u,d){for(let m=0;m<e.length;m++)if(r[e.charCodeAt(m)]=!0,u&&d){const _=Mc[e.charAt(m)];_&&(r[_.charCodeAt(0)]=!0)}}populate(e,r,o,u){const d=this.layers[0],m=d.layout,_=this.projection.name==="globe",S=m.get("text-font"),T=m.get("text-field"),I=m.get("icon-image"),z=(T.value.kind!=="constant"||T.value.value instanceof Mi&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),O=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,j=m.get("symbol-sort-key");if(this.features=[],!z&&!O)return;const V=r.iconDependencies,Z=r.glyphDependencies,ne=r.availableImages,fe=new L(this.zoom);for(const{feature:be,id:he,index:we,sourceLayerIndex:Ce}of e){const Te=d._featureFilter.needGeometry,Je=Eu(be,Te);if(!d._featureFilter.filter(fe,Je,o))continue;if(Te||(Je.geometry=ls(be,o,u)),_&&be.type!==1&&o.z<=5){const nt=Je.geometry,bt=.98078528056,wt=(At,Ut)=>Uo(Ps(At.x,At.y,o,1),Ps(Ut.x,Ut.y,o,1))<bt;for(let At=0;At<nt.length;At++)nt[At]=ob(nt[At],wt)}let He,mt;if(z){const nt=d.getValueAndResolveTokens("text-field",Je,o,ne),bt=Mi.factory(nt);o1(bt)&&(this.hasRTLText=!0),(!this.hasRTLText||b()==="unavailable"||this.hasRTLText&&D.isParsed())&&(He=Gy(bt,d,Je))}if(O){const nt=d.getValueAndResolveTokens("icon-image",Je,o,ne);mt=nt instanceof oa?nt:oa.fromString(nt)}if(!He&&!mt)continue;const Bt=this.sortFeaturesByKey?j.evaluate(Je,{},o):void 0;if(this.features.push({id:he,text:He,icon:mt,index:we,sourceLayerIndex:Ce,geometry:Je.geometry,properties:be.properties,type:i1[be.type],sortKey:Bt}),mt&&(V[mt.name]=!0),He){const nt=S.evaluate(Je,{},o).join(","),bt=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(cs.vertical)>=0;for(const wt of He.sections)if(wt.image)V[wt.image.name]=!0;else{const At=bh(He.toString()),Ut=wt.fontStack||nt,ht=Z[Ut]=Z[Ut]||{};this.calculateGlyphDependencies(wt.text,ht,bt,this.allowVerticalPlacement,At)}}}m.get("symbol-placement")==="line"&&(this.features=function(be){const he={},we={},Ce=[];let Te=0;function Je(nt){Ce.push(be[nt]),Te++}function He(nt,bt,wt){const At=we[nt];return delete we[nt],we[bt]=At,Ce[At].geometry[0].pop(),Ce[At].geometry[0]=Ce[At].geometry[0].concat(wt[0]),At}function mt(nt,bt,wt){const At=he[bt];return delete he[bt],he[nt]=At,Ce[At].geometry[0].shift(),Ce[At].geometry[0]=wt[0].concat(Ce[At].geometry[0]),At}function Bt(nt,bt,wt){const At=wt?bt[0][bt[0].length-1]:bt[0][0];return`${nt}:${At.x}:${At.y}`}for(let nt=0;nt<be.length;nt++){const bt=be[nt],wt=bt.geometry,At=bt.text?bt.text.toString():null;if(!At){Je(nt);continue}const Ut=Bt(At,wt),ht=Bt(At,wt,!0);if(Ut in we&&ht in he&&we[Ut]!==he[ht]){const Kt=mt(Ut,ht,wt),on=He(Ut,ht,Ce[Kt].geometry);delete he[Ut],delete we[ht],we[Bt(At,Ce[on].geometry,!0)]=on,Ce[Kt].geometry=null}else Ut in we?He(Ut,ht,wt):ht in he?mt(Ut,ht,wt):(Je(nt),he[Ut]=Te-1,we[ht]=Te-1)}return Ce.filter(nt=>nt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((be,he)=>be.sortKey-he.sortKey)}update(e,r,o,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,o,u),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,o,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=bx(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const o=this.lineVertexArray.length;if(e.segment!==void 0)for(const{x:u,y:d}of r)this.lineVertexArray.emplaceBack(u,d);return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(e,r,o,u,d,m,_,S,T,I,z,O,j,V){const Z=e.indexArray,ne=e.layoutVertexArray,fe=e.globeExtVertexArray,be=e.segments.prepareSegment(4*r.length,ne,Z,this.canOverlap?m.sortKey:void 0),he=this.glyphOffsetArray.length,we=be.vertexLength,Ce=this.allowVerticalPlacement&&_===cs.vertical?Math.PI/2:0,Te=m.text&&m.text.sections;for(let He=0;He<r.length;He++){const{tl:mt,tr:Bt,bl:nt,br:bt,tex:wt,pixelOffsetTL:At,pixelOffsetBR:Ut,minFontScaleX:ht,minFontScaleY:Kt,glyphOffset:on,isSDF:Qt,sectionIndex:Qn}=r[He],Vt=be.vertexLength,Cn=on[1];if(lg(ne,T.x,T.y,mt.x,Cn+mt.y,wt.x,wt.y,o,Qt,At.x,At.y,ht,Kt),lg(ne,T.x,T.y,Bt.x,Cn+Bt.y,wt.x+wt.w,wt.y,o,Qt,Ut.x,At.y,ht,Kt),lg(ne,T.x,T.y,nt.x,Cn+nt.y,wt.x,wt.y+wt.h,o,Qt,At.x,Ut.y,ht,Kt),lg(ne,T.x,T.y,bt.x,Cn+bt.y,wt.x+wt.w,wt.y+wt.h,o,Qt,Ut.x,Ut.y,ht,Kt),S){const{x:er,y:kr,z:Yn}=S.anchor,[Pn,vi,Gn]=S.up;ug(fe,er,kr,Yn,Pn,vi,Gn),ug(fe,er,kr,Yn,Pn,vi,Gn),ug(fe,er,kr,Yn,Pn,vi,Gn),ug(fe,er,kr,Yn,Pn,vi,Gn),Mp(e.dynamicLayoutVertexArray,er,kr,Yn,Ce)}else Mp(e.dynamicLayoutVertexArray,T.x,T.y,T.z,Ce);Z.emplaceBack(Vt,Vt+1,Vt+2),Z.emplaceBack(Vt+1,Vt+2,Vt+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(on[0]),He!==r.length-1&&Qn===r[He+1].sectionIndex||e.programConfigurations.populatePaintArrays(ne.length,m,m.index,{},j,V,Te&&Te[Qn])}const Je=S?S.anchor:T;e.placedSymbolArray.emplaceBack(Je.x,Je.y,Je.z,T.x,T.y,he,this.glyphOffsetArray.length-he,we,I,z,T.segment,o?o[0]:0,o?o[1]:0,u[0],u[1],_,0,!1,0,O,0)}_commitLayoutVertex(e,r,o,u,d,m,_){e.emplaceBack(r,o,u,d,m,Math.round(_.x),Math.round(_.y))}_addCollisionDebugVertices(e,r,o,u,d,m,_){const S=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),T=S.vertexLength,I=_.tileAnchorX,z=_.tileAnchorY;for(let j=0;j<4;j++)o.collisionVertexArray.emplaceBack(0,0,0,0);o.collisionVertexArrayExt.emplaceBack(r,-e.padding,-e.padding),o.collisionVertexArrayExt.emplaceBack(r,e.padding,-e.padding),o.collisionVertexArrayExt.emplaceBack(r,e.padding,e.padding),o.collisionVertexArrayExt.emplaceBack(r,-e.padding,e.padding),this._commitLayoutVertex(o.layoutVertexArray,u,d,m,I,z,new ut(e.x1,e.y1)),this._commitLayoutVertex(o.layoutVertexArray,u,d,m,I,z,new ut(e.x2,e.y1)),this._commitLayoutVertex(o.layoutVertexArray,u,d,m,I,z,new ut(e.x2,e.y2)),this._commitLayoutVertex(o.layoutVertexArray,u,d,m,I,z,new ut(e.x1,e.y2)),S.vertexLength+=4;const O=o.indexArray;O.emplaceBack(T,T+1),O.emplaceBack(T+1,T+2),O.emplaceBack(T+2,T+3),O.emplaceBack(T+3,T),S.primitiveLength+=4}_addTextDebugCollisionBoxes(e,r,o,u,d,m){for(let _=u;_<d;_++){const S=o.get(_),T=this.getSymbolInstanceTextSize(e,m,r,_);this._addCollisionDebugVertices(S,T,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,m)}}_addIconDebugCollisionBoxes(e,r,o,u,d,m){for(let _=u;_<d;_++){const S=o.get(_),T=this.getSymbolInstanceIconSize(e,r,m.placedIconSymbolIndex);this._addCollisionDebugVertices(S,T,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,m)}}generateCollisionDebugBuffers(e,r){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ov(sn,ex.members,Ca),this.iconCollisionBox=new ov(sn,ex.members,Ca);const o=Zf(this.iconSizeData,e),u=Zf(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._addTextDebugCollisionBoxes(u,e,r,m.textBoxStartIndex,m.textBoxEndIndex,m),this._addTextDebugCollisionBoxes(u,e,r,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._addIconDebugCollisionBoxes(o,e,r,m.iconBoxStartIndex,m.iconBoxEndIndex,m),this._addIconDebugCollisionBoxes(o,e,r,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m)}}getSymbolInstanceTextSize(e,r,o,u){const d=this.text.placedSymbolArray.get(r.rightJustifiedTextSymbolIndex>=0?r.rightJustifiedTextSymbolIndex:r.centerJustifiedTextSymbolIndex>=0?r.centerJustifiedTextSymbolIndex:r.leftJustifiedTextSymbolIndex>=0?r.leftJustifiedTextSymbolIndex:r.verticalPlacedTextSymbolIndex>=0?r.verticalPlacedTextSymbolIndex:u),m=hp(this.textSizeData,e,d)/xa;return this.tilePixelRatio*m}getSymbolInstanceIconSize(e,r,o){const u=this.icon.placedSymbolArray.get(o),d=hp(this.iconSizeData,e,u);return this.tilePixelRatio*d}_commitDebugCollisionVertexUpdate(e,r,o){e.emplaceBack(r,-o,-o),e.emplaceBack(r,o,-o),e.emplaceBack(r,o,o),e.emplaceBack(r,-o,o)}_updateTextDebugCollisionBoxes(e,r,o,u,d,m){for(let _=u;_<d;_++){const S=o.get(_),T=this.getSymbolInstanceTextSize(e,m,r,_);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,S.padding)}}_updateIconDebugCollisionBoxes(e,r,o,u,d,m){for(let _=u;_<d;_++){const S=o.get(_),T=this.getSymbolInstanceIconSize(e,r,m);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,T,S.padding)}}updateCollisionDebugBuffers(e,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const o=Zf(this.iconSizeData,e),u=Zf(this.textSizeData,e);for(let d=0;d<this.symbolInstances.length;d++){const m=this.symbolInstances.get(d);this._updateTextDebugCollisionBoxes(u,e,r,m.textBoxStartIndex,m.textBoxEndIndex,m),this._updateTextDebugCollisionBoxes(u,e,r,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m),this._updateIconDebugCollisionBoxes(o,e,r,m.iconBoxStartIndex,m.iconBoxEndIndex,m.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(o,e,r,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex,m.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,r,o,u,d,m,_,S,T){const I={};if(r<o){const{x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we,featureIndex:Ce}=e.get(r);I.textBox={x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we},I.textFeatureIndex=Ce}if(u<d){const{x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we,featureIndex:Ce}=e.get(u);I.verticalTextBox={x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we},I.verticalTextFeatureIndex=Ce}if(m<_){const{x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we,featureIndex:Ce}=e.get(m);I.iconBox={x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we},I.iconFeatureIndex=Ce}if(S<T){const{x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we,featureIndex:Ce}=e.get(S);I.verticalIconBox={x1:z,y1:O,x2:j,y2:V,padding:Z,projectedAnchorX:ne,projectedAnchorY:fe,projectedAnchorZ:be,tileAnchorX:he,tileAnchorY:we},I.verticalIconFeatureIndex=Ce}return I}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const o=e.placedSymbolArray.get(r),u=o.vertexStartIndex+4*o.numGlyphs;for(let d=o.vertexStartIndex;d<u;d+=4)e.indexArray.emplaceBack(d,d+1,d+2),e.indexArray.emplaceBack(d+1,d+2,d+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),o=Math.cos(e),u=[],d=[],m=[];for(let _=0;_<this.symbolInstances.length;++_){m.push(_);const S=this.symbolInstances.get(_);u.push(0|Math.round(r*S.tileAnchorX+o*S.tileAnchorY)),d.push(S.featureIndex)}return m.sort((_,S)=>u[_]-u[S]||d[S]-d[_]),m}addToSortKeyRanges(e,r){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===r?o.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const o=this.symbolInstances.get(r);this.featureSortOrder.push(o.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:d,leftJustifiedTextSymbolIndex:m,verticalPlacedTextSymbolIndex:_,placedIconSymbolIndex:S,verticalPlacedIconSymbolIndex:T}=o;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),d>=0&&d!==u&&this.addIndicesForPlacedSymbol(this.text,d),m>=0&&m!==d&&m!==u&&this.addIndicesForPlacedSymbol(this.text,m),_>=0&&this.addIndicesForPlacedSymbol(this.text,_),S>=0&&this.addIndicesForPlacedSymbol(this.icon,S),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}an(zc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),zc.MAX_GLYPHS=65535,zc.addDynamicAttributes=Mp;const s1=new ve({"symbol-placement":new W(ct.layout_symbol["symbol-placement"]),"symbol-spacing":new W(ct.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new W(ct.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ae(ct.layout_symbol["symbol-sort-key"]),"symbol-z-order":new W(ct.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new W(ct.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new W(ct.layout_symbol["icon-ignore-placement"]),"icon-optional":new W(ct.layout_symbol["icon-optional"]),"icon-rotation-alignment":new W(ct.layout_symbol["icon-rotation-alignment"]),"icon-size":new ae(ct.layout_symbol["icon-size"]),"icon-text-fit":new W(ct.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new W(ct.layout_symbol["icon-text-fit-padding"]),"icon-image":new ae(ct.layout_symbol["icon-image"]),"icon-rotate":new ae(ct.layout_symbol["icon-rotate"]),"icon-padding":new W(ct.layout_symbol["icon-padding"]),"icon-keep-upright":new W(ct.layout_symbol["icon-keep-upright"]),"icon-offset":new ae(ct.layout_symbol["icon-offset"]),"icon-anchor":new ae(ct.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new W(ct.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new W(ct.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new W(ct.layout_symbol["text-rotation-alignment"]),"text-field":new ae(ct.layout_symbol["text-field"]),"text-font":new ae(ct.layout_symbol["text-font"]),"text-size":new ae(ct.layout_symbol["text-size"]),"text-max-width":new ae(ct.layout_symbol["text-max-width"]),"text-line-height":new ae(ct.layout_symbol["text-line-height"]),"text-letter-spacing":new ae(ct.layout_symbol["text-letter-spacing"]),"text-justify":new ae(ct.layout_symbol["text-justify"]),"text-radial-offset":new ae(ct.layout_symbol["text-radial-offset"]),"text-variable-anchor":new W(ct.layout_symbol["text-variable-anchor"]),"text-anchor":new ae(ct.layout_symbol["text-anchor"]),"text-max-angle":new W(ct.layout_symbol["text-max-angle"]),"text-writing-mode":new W(ct.layout_symbol["text-writing-mode"]),"text-rotate":new ae(ct.layout_symbol["text-rotate"]),"text-padding":new W(ct.layout_symbol["text-padding"]),"text-keep-upright":new W(ct.layout_symbol["text-keep-upright"]),"text-transform":new ae(ct.layout_symbol["text-transform"]),"text-offset":new ae(ct.layout_symbol["text-offset"]),"text-allow-overlap":new W(ct.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new W(ct.layout_symbol["text-ignore-placement"]),"text-optional":new W(ct.layout_symbol["text-optional"])});var sv={paint:new ve({"icon-opacity":new ae(ct.paint_symbol["icon-opacity"]),"icon-color":new ae(ct.paint_symbol["icon-color"]),"icon-halo-color":new ae(ct.paint_symbol["icon-halo-color"]),"icon-halo-width":new ae(ct.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ae(ct.paint_symbol["icon-halo-blur"]),"icon-translate":new W(ct.paint_symbol["icon-translate"]),"icon-translate-anchor":new W(ct.paint_symbol["icon-translate-anchor"]),"text-opacity":new ae(ct.paint_symbol["text-opacity"]),"text-color":new ae(ct.paint_symbol["text-color"],{runtimeType:Ia,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new ae(ct.paint_symbol["text-halo-color"]),"text-halo-width":new ae(ct.paint_symbol["text-halo-width"]),"text-halo-blur":new ae(ct.paint_symbol["text-halo-blur"]),"text-translate":new W(ct.paint_symbol["text-translate"]),"text-translate-anchor":new W(ct.paint_symbol["text-translate-anchor"])}),layout:s1};class wx{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ra,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}an(wx,"FormatSectionOverride",{omit:["defaultValue"]});class cg extends ns{constructor(e){super(e,sv)}recalculate(e,r){super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const o=this.layout.get("text-writing-mode");if(o){const u=[];for(const d of o)u.indexOf(d)<0&&u.push(d);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,r,o,u){const d=this.layout.get(e).evaluate(r,{},o,u),m=this._unevaluatedLayout._values[e];return m.isDataDriven()||zl(m.value)||!d?d:function(_,S){return S.replace(/{([^{}]+)}/g,(T,I)=>I in _?String(_[I]):"")}(r.properties,d)}createBucket(e){return new zc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of sv.paint.overridableProperties){if(!cg.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),o=new wx(r),u=new xf(o,r.property.specification);let d=null;d=r.value.kind==="constant"||r.value.kind==="source"?new Ol("source",u):new Ms("composite",u,r.value.zoomStops,r.value._interpolationType),this.paint._values[e]=new se(r.property,d,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,o){return!(!this.layout||r.isDataDriven()||o.isDataDriven())&&cg.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const o=e.get("text-field"),u=sv.paint.properties[r];let d=!1;const m=_=>{for(const S of _)if(u.overrides&&u.overrides.hasOverride(S))return void(d=!0)};if(o.value.kind==="constant"&&o.value.value instanceof Mi)m(o.value.value.sections);else if(o.value.kind==="source"){const _=T=>{d||(T instanceof ws&&pi(T.value)===Io?m(T.value.sections):T instanceof go?m(T.sections):T.eachChild(_))},S=o.value;S._styleExpression&&_(S._styleExpression.expression)}return d}getProgramConfiguration(e){return new jl(this,e)}}var l1={paint:new ve({"background-color":new W(ct.paint_background["background-color"]),"background-pattern":new W(ct.paint_background["background-pattern"]),"background-opacity":new W(ct.paint_background["background-opacity"])})},u1={paint:new ve({"raster-opacity":new W(ct.paint_raster["raster-opacity"]),"raster-hue-rotate":new W(ct.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new W(ct.paint_raster["raster-brightness-min"]),"raster-brightness-max":new W(ct.paint_raster["raster-brightness-max"]),"raster-saturation":new W(ct.paint_raster["raster-saturation"]),"raster-contrast":new W(ct.paint_raster["raster-contrast"]),"raster-resampling":new W(ct.paint_raster["raster-resampling"]),"raster-fade-duration":new W(ct.paint_raster["raster-fade-duration"])})};class c1 extends ns{constructor(e){super(e,{}),this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var h1={paint:new ve({"sky-type":new W(ct.paint_sky["sky-type"]),"sky-atmosphere-sun":new W(ct.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new W(ct.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new W(ct.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new W(ct.paint_sky["sky-gradient-radius"]),"sky-gradient":new ge(ct.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new W(ct.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new W(ct.paint_sky["sky-atmosphere-color"]),"sky-opacity":new W(ct.paint_sky["sky-opacity"])})};function lv(n,e,r){const o=[0,0,1],u=y_([]);return v_(u,u,r?-et(n)+Math.PI:et(n)),wm(u,u,-et(e)),wr(o,o,u),pa(o,o)}const f1={circle:class extends ns{constructor(n){super(n,ub)}createBucket(n){return new yy(n)}queryRadius(n){const e=n;return ql("circle-radius",this,e)+ql("circle-stroke-width",this,e)+zm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,e,r,o,u,d,m,_){const S=xy(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(e,r)+this.paint.get("circle-stroke-width").evaluate(e,r);return k_(n,o,d,m,_,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,T)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new jl(this,n)}},heatmap:class extends ns{createBucket(n){return new R_(n)}constructor(n){super(n,fb),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return ql("heatmap-radius",this,n)}queryIntersectsFeature(n,e,r,o,u,d,m,_){const S=this.paint.get("heatmap-radius").evaluate(e,r);return k_(n,o,d,m,_,!0,!0,new ut(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new jl(this,n)}},hillshade:class extends ns{constructor(n){super(n,db)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ns{constructor(n){super(n,Sb)}getProgramIds(){const n=this.paint.get("fill-pattern"),e=n&&n.constantOr(1),r=[e?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&r.push(e&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),r}getProgramConfiguration(n){return new jl(this,n)}recalculate(n,e){super.recalculate(n,e);const r=this.paint._values["fill-outline-color"];r.value.kind==="constant"&&r.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Tc(n)}queryRadius(){return zm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,e,r,o,u,d){return!n.queryGeometry.isAboveHorizon&&ep(tp(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),o)}isTileClipped(){return!0}},"fill-extrusion":class extends ns{constructor(n){super(n,Ob)}createBucket(n){return new up(n)}queryRadius(){return zm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new jl(this,n)}queryIntersectsFeature(n,e,r,o,u,d,m,_,S){const T=xy(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),I=this.paint.get("fill-extrusion-height").evaluate(e,r),z=this.paint.get("fill-extrusion-base").evaluate(e,r),O=[0,0],j=_&&d.elevation,V=d.elevation?d.elevation.exaggeration():1,Z=n.tile.getBucket(this);if(j&&Z instanceof up){const we=Z.centroidVertexArray,Ce=S+1;Ce<we.length&&(O[0]=we.geta_centroid_pos0(Ce),O[1]=we.geta_centroid_pos1(Ce))}if(O[0]===0&&O[1]===1)return!1;d.projection.name==="globe"&&(o=G_([o],[new ut(0,0),new ut(kn,kn)],n.tileID.canonical).map(we=>we.polygon).flat());const ne=j?_:null,[fe,be]=function(we,Ce,Te,Je,He,mt,Bt,nt,bt,wt,At){return we.projection.name==="globe"?function(Ut,ht,Kt,on,Qt,Qn,Vt,Cn,er,kr,Yn){const Pn=[],vi=[],Gn=Ut.projection.upVectorScale(Yn,Ut.center.lat,Ut.worldSize).metersToTile,tr=[0,0,0,1],cr=[0,0,0,1],ri=(hi,Ni,Gr,la)=>{hi[0]=Ni,hi[1]=Gr,hi[2]=la,hi[3]=1},_i=$m();Kt>0&&(Kt+=_i),on+=_i;for(const hi of ht){const Ni=[],Gr=[];for(const la of hi){const Pr=la.x+Qt.x,qi=la.y+Qt.y,Ui=Ut.projection.projectTilePoint(Pr,qi,Yn),wi=Ut.projection.upVector(Yn,la.x,la.y);let Tr=Kt,ji=on;if(Vt){const qr=Z_(Pr,qi,Kt,on,Vt,Cn,er,kr);Tr+=qr.base,ji+=qr.top}Kt!==0?ri(tr,Ui.x+wi[0]*Gn*Tr,Ui.y+wi[1]*Gn*Tr,Ui.z+wi[2]*Gn*Tr):ri(tr,Ui.x,Ui.y,Ui.z),ri(cr,Ui.x+wi[0]*Gn*ji,Ui.y+wi[1]*Gn*ji,Ui.z+wi[2]*Gn*ji),Ri(tr,tr,Qn),Ri(cr,cr,Qn),Ni.push(new Hl(tr[0],tr[1],tr[2])),Gr.push(new Hl(cr[0],cr[1],cr[2]))}Pn.push(Ni),vi.push(Gr)}return[Pn,vi]}(we,Ce,Te,Je,He,mt,Bt,nt,bt,wt,At):Bt?function(Ut,ht,Kt,on,Qt,Qn,Vt,Cn,er){const kr=[],Yn=[],Pn=[0,0,0,1];for(const vi of Ut){const Gn=[],tr=[];for(const cr of vi){const ri=cr.x+on.x,_i=cr.y+on.y,hi=Z_(ri,_i,ht,Kt,Qn,Vt,Cn,er);Pn[0]=ri,Pn[1]=_i,Pn[2]=hi.base,Pn[3]=1,Ah(Pn,Pn,Qt),Pn[3]=Math.max(Pn[3],1e-5);const Ni=new Hl(Pn[0]/Pn[3],Pn[1]/Pn[3],Pn[2]/Pn[3]);Pn[0]=ri,Pn[1]=_i,Pn[2]=hi.top,Pn[3]=1,Ah(Pn,Pn,Qt),Pn[3]=Math.max(Pn[3],1e-5);const Gr=new Hl(Pn[0]/Pn[3],Pn[1]/Pn[3],Pn[2]/Pn[3]);Gn.push(Ni),tr.push(Gr)}kr.push(Gn),Yn.push(tr)}return[kr,Yn]}(Ce,Te,Je,He,mt,Bt,nt,bt,wt):function(Ut,ht,Kt,on,Qt){const Qn=[],Vt=[],Cn=Qt[8]*ht,er=Qt[9]*ht,kr=Qt[10]*ht,Yn=Qt[11]*ht,Pn=Qt[8]*Kt,vi=Qt[9]*Kt,Gn=Qt[10]*Kt,tr=Qt[11]*Kt;for(const cr of Ut){const ri=[],_i=[];for(const hi of cr){const Ni=hi.x+on.x,Gr=hi.y+on.y,la=Qt[0]*Ni+Qt[4]*Gr+Qt[12],Pr=Qt[1]*Ni+Qt[5]*Gr+Qt[13],qi=Qt[2]*Ni+Qt[6]*Gr+Qt[14],Ui=Qt[3]*Ni+Qt[7]*Gr+Qt[15],wi=la+Cn,Tr=Pr+er,ji=qi+kr,qr=Math.max(Ui+Yn,1e-5),ma=la+Pn,Hi=Pr+vi,ka=qi+Gn,ga=Math.max(Ui+tr,1e-5);ri.push(new Hl(wi/qr,Tr/qr,ji/qr)),_i.push(new Hl(ma/ga,Hi/ga,ka/ga))}Qn.push(ri),Vt.push(_i)}return[Qn,Vt]}(Ce,Te,Je,He,mt)}(d,o,z,I,T,m,ne,O,V,d.center.lat,n.tileID.canonical),he=n.queryGeometry;return function(we,Ce,Te){let Je=1/0;ep(Te,Ce)&&(Je=W_(Te,Ce[0]));for(let He=0;He<Ce.length;He++){const mt=Ce[He],Bt=we[He];for(let nt=0;nt<mt.length-1;nt++){const bt=mt[nt],wt=[bt,mt[nt+1],Bt[nt+1],Bt[nt],bt];vy(Te,wt)&&(Je=Math.min(Je,W_(Te,wt)))}}return Je!==1/0&&Je}(fe,be,he.isPointQuery()?he.screenBounds:he.screenGeometry)}},line:class extends ns{constructor(n){super(n,Uy),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof ch,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,e){super.recalculate(n,e),this.paint._values["line-floorwidth"]=jy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Nh(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new jl(this,n)}queryRadius(n){const e=n,r=Vy(ql("line-width",this,e),ql("line-gap-width",this,e)),o=ql("line-offset",this,e);return r/2+Math.abs(o)+zm(this.paint.get("line-translate"))}queryIntersectsFeature(n,e,r,o,u,d){if(n.queryGeometry.isAboveHorizon)return!1;const m=tp(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),d.angle,n.pixelToTileUnitsFactor),_=n.pixelToTileUnitsFactor/2*Vy(this.paint.get("line-width").evaluate(e,r),this.paint.get("line-gap-width").evaluate(e,r)),S=this.paint.get("line-offset").evaluate(e,r);return S&&(o=function(T,I){const z=[],O=new ut(0,0);for(let j=0;j<T.length;j++){const V=T[j],Z=[];for(let ne=0;ne<V.length;ne++){const fe=V[ne],be=V[ne+1],he=ne===0?O:fe.sub(V[ne-1])._unit()._perp(),we=ne===V.length-1?O:be.sub(fe)._unit()._perp(),Ce=he._add(we)._unit();Ce._mult(1/(Ce.x*we.x+Ce.y*we.y)),Z.push(Ce._mult(I)._add(fe))}z.push(Z)}return z}(o,S*n.pixelToTileUnitsFactor)),function(T,I,z){for(let O=0;O<I.length;O++){const j=I[O];if(T.length>=3){for(let V=0;V<j.length;V++)if(Ih(T,j[V]))return!0}if(Dm(T,j,z))return!0}return!1}(m,o,_)}isTileClipped(){return!0}},symbol:cg,background:class extends ns{constructor(n){super(n,l1)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ns{constructor(n){super(n,u1)}getProgramIds(){return["raster"]}},sky:class extends ns{constructor(n){super(n,h1),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="sky-gradient"?this._updateColorRamp():n!=="sky-atmosphere-sun"&&n!=="sky-atmosphere-halo-color"&&n!=="sky-atmosphere-color"&&n!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Sy({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const e=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==e.azimuthal||this._lightPosition.polar!==e.polar}return!1}getCenter(n,e){if(this.paint.get("sky-type")==="atmosphere"){const o=this.paint.get("sky-atmosphere-sun"),u=!o,d=n.style.light,m=d.properties.get("position");return u&&d.properties.get("anchor")==="viewport"&&Wn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?lv(m.azimuthal,90-m.polar,e):lv(o[0],90-o[1],e)}const r=this.paint.get("sky-gradient-center");return lv(r[0],90-r[1],e)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return n==="atmosphere"?["skyboxCapture","skybox"]:n==="gradient"?["skyboxGradient"]:null}}};class Ap{constructor(e,r,o,u){this.context=e,this.format=o,this.texture=e.gl.createTexture(),this.update(r,u)}update(e,r,o){const{width:u,height:d}=e,{context:m}=this,{gl:_}=m,{HTMLImageElement:S,HTMLCanvasElement:T,HTMLVideoElement:I,ImageData:z,ImageBitmap:O}=N;if(_.bindTexture(_.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===_.RGBA&&(!r||r.premultiply!==!1)),o||this.size&&this.size[0]===u&&this.size[1]===d){const{x:j,y:V}=o||{x:0,y:0};e instanceof S||e instanceof T||e instanceof I||e instanceof z||O&&e instanceof O?_.texSubImage2D(_.TEXTURE_2D,0,j,V,_.RGBA,_.UNSIGNED_BYTE,e):_.texSubImage2D(_.TEXTURE_2D,0,j,V,u,d,_.RGBA,_.UNSIGNED_BYTE,e.data)}else this.size=[u,d],e instanceof S||e instanceof T||e instanceof I||e instanceof z||O&&e instanceof O?_.texImage2D(_.TEXTURE_2D,0,this.format,this.format,_.UNSIGNED_BYTE,e):_.texImage2D(_.TEXTURE_2D,0,this.format,u,d,0,this.format,_.UNSIGNED_BYTE,e.data);this.useMipmap=!!(r&&r.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&_.generateMipmap(_.TEXTURE_2D)}bind(e,r){const{context:o}=this,{gl:u}=o;u.bindTexture(u.TEXTURE_2D,this.texture),e!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,e),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?e===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:e),this.filter=e),r!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,r),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class d1{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class id{constructor(){this.tasks={},this.taskQueue=[],Or(["process"],this),this.invoker=new d1(this.process),this.nextId=0}add(e,r){const o=this.nextId++,u=function({type:d,isSymbolTile:m,zoom:_}){return _=_||0,d==="message"?0:d!=="maybePrepare"||m?d!=="parseTile"||m?d==="parseTile"&&m?300-_:d==="maybePrepare"&&m?400-_:500:200-_:100-_}(r);if(u===0){bi();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[o]={fn:e,metadata:r,priority:u,id:o},this.taskQueue.push(o),this.invoker.trigger(),{cancel:()=>{delete this.tasks[o]}}}process(){bi();try{if(this.taskQueue=this.taskQueue.filter(o=>!!this.tasks[o]),!this.taskQueue.length)return;const e=this.pick();if(e===null)return;const r=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!r)return;r.fn()}finally{}}pick(){let e=null,r=1/0;for(let u=0;u<this.taskQueue.length;u++){const d=this.tasks[this.taskQueue[u]];d.priority<r&&(r=d.priority,e=u)}if(e===null)return null;const o=this.taskQueue[e];return this.taskQueue.splice(e,1),o}remove(){this.invoker.remove()}}class Wh{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const o=e[r];this._stringToNumber[o]=r,this._numberToString[r]=o}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const uv=["tile","layer","source","sourceLayer","state"];class ad{constructor(e,r,o,u,d){this.type="Feature",this._vectorTileFeature=e,this._z=r,this._x=o,this._y=u,this.properties=e.properties,this.id=d}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(e.id=this.id);for(const r of uv)this[r]!==void 0&&(e[r]=this[r]);return e}}const Go=32,Xl=33,Pc=new Uint16Array(8184);for(let n=0;n<2046;n++){let e=n+2,r=0,o=0,u=0,d=0,m=0,_=0;for(1&e?u=d=m=Go:r=o=_=Go;(e>>=1)>1;){const T=r+u>>1,I=o+d>>1;1&e?(u=r,d=o,r=m,o=_):(r=u,o=d,u=m,d=_),m=T,_=I}const S=4*n;Pc[S+0]=r,Pc[S+1]=o,Pc[S+2]=u,Pc[S+3]=d}const Yl=new Uint16Array(2178),Us=new Uint8Array(1089),Zh=new Uint16Array(1089);function cv(n){return n===0?-.03125:n===32?.03125:0}var od=Oe([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Oc={type:2,extent:kn,loadGeometry:()=>[[new ut(0,0),new ut(kn+1,0),new ut(kn+1,kn+1),new ut(0,kn+1),new ut(0,0)]]};class Kl{constructor(e,r,o,u,d){this.tileID=e,this.uid=Vi(),this.uses=0,this.tileSize=r,this.tileZoom=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=d,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(e){const r=e+this.timeAdded;r<nr.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Hh(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,r,o){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(u,d){const m={};if(!d)return m;for(const _ of u){const S=_.layerIds.map(T=>d.getLayer(T)).filter(Boolean);if(S.length!==0){_.layers=S,_.stateDependentLayerIds&&(_.stateDependentLayers=_.stateDependentLayerIds.map(T=>S.filter(I=>I.id===T)[0]));for(const T of S)m[T.id]=_}}return m}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const d=this.buckets[u];if(d instanceof zc){if(this.hasSymbolBuckets=!0,!o)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const d=this.buckets[u];if(d instanceof zc&&d.hasRTLText){this.hasRTLText=!0,D.isLoading()||D.isLoaded()||b()!=="deferred"||M();break}}this.queryPadding=0;for(const u in this.buckets){const d=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(u).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new ci}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const o in this.buckets){const u=this.buckets[o];u.uploadPending()&&u.upload(e)}const r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ap(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ap(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ap(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,o,u,d,m,_,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:_,transform:m,params:d,tileTransform:this.tileTransform},e,r,o):{}}querySourceFeatures(e,r){const o=this.latestFeatureIndex;if(!o||!o.rawTileData)return;const u=o.loadVTLayers(),d=r?r.sourceLayer:"",m=u._geojsonTileLayer||u[d];if(!m)return;const _=Ef(r&&r.filter),{z:S,x:T,y:I}=this.tileID.canonical,z={z:S,x:T,y:I};for(let O=0;O<m.length;O++){const j=m.feature(O);if(_.needGeometry){const ne=Eu(j,!0);if(!_.filter(new L(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!_.filter(new L(this.tileID.overscaledZ),j))continue;const V=o.getId(j,d),Z=new ad(j,S,T,I,V);Z.tile=z,e.push(Z)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const o=Kr(e.cacheControl);o["max-age"]&&(this.expirationTime=Date.now()+1e3*o["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const o=Date.now();let u=!1;if(this.expirationTime>o)u=!1;else if(r)if(this.expirationTime<r)u=!0;else{const d=this.expirationTime-r;d?this.expirationTime=o+Math.max(d,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0||!r)return;const o=this.latestFeatureIndex.loadVTLayers(),u=r.style.listImages();for(const d in this.buckets){if(!r.style.hasLayer(d))continue;const m=this.buckets[d],_=m.layers[0].sourceLayer||"_geojsonTileLayer",S=o[_],T=e[_];if(!S||!T||Object.keys(T).length===0)continue;if(m.update(T,S,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),m instanceof Nh||m instanceof Tc){const z=r.style._getSourceCache(m.layers[0].source);r._terrain&&r._terrain.enabled&&z&&m.programConfigurations.needsUpload&&r._terrain._clearRenderCacheForTile(z.id,this.tileID)}const I=r&&r.style&&r.style.getLayer(d);I&&(this.queryPadding=Math.max(this.queryPadding,I.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<nr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=nr.now()+e}setTexture(e,r){const o=r.context,u=o.gl;this.texture=this.texture||r.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Ap(o,e,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE))}setDependencies(e,r){const o={};for(const u of r)o[u]=!0;this.dependencies[e]=o}hasDependency(e,r){for(const o of e){const u=this.dependencies[o];if(u){for(const d of r)if(u[d])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,r){if(!r||r.name==="mercator"||this._tileDebugBuffer)return;const o=ls(Oc,this.tileID.canonical,this.tileTransform)[0],u=new Ot,d=new Bo;for(let m=0;m<o.length;m++){const{x:_,y:S}=o[m];u.emplaceBack(_,S),d.emplaceBack(m)}d.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(d),this._tileDebugBuffer=e.createVertexBuffer(u,rs.members),this._tileDebugSegments=Bi.simpleSegment(0,0,u.length,d.length)}_makeTileBoundsBuffers(e,r){if(this._tileBoundsBuffer||!r||r.name==="mercator")return;const o=ls(Oc,this.tileID.canonical,this.tileTransform)[0];let u,d;if(this.isRaster){const m=function(_,S){const T=Hh(_,S),I=Math.pow(2,_.z);for(let ne=0;ne<Xl;ne++)for(let fe=0;fe<Xl;fe++){const be=ss((_.x+(fe+cv(fe))/Go)/I),he=qa((_.y+(ne+cv(ne))/Go)/I),we=S.project(be,he),Ce=ne*Xl+fe;Yl[2*Ce+0]=Math.round((we.x*T.scale-T.x)*kn),Yl[2*Ce+1]=Math.round((we.y*T.scale-T.y)*kn)}Us.fill(0),Zh.fill(0);for(let ne=2045;ne>=0;ne--){const fe=4*ne,be=Pc[fe+0],he=Pc[fe+1],we=Pc[fe+2],Ce=Pc[fe+3],Te=be+we>>1,Je=he+Ce>>1,He=Te+Je-he,mt=Je+be-Te,Bt=he*Xl+be,nt=Ce*Xl+we,bt=Je*Xl+Te,wt=Math.hypot((Yl[2*Bt+0]+Yl[2*nt+0])/2-Yl[2*bt+0],(Yl[2*Bt+1]+Yl[2*nt+1])/2-Yl[2*bt+1])>=16;Us[bt]=Us[bt]||(wt?1:0),ne<1022&&(Us[bt]=Us[bt]||Us[(he+mt>>1)*Xl+(be+He>>1)]||Us[(Ce+mt>>1)*Xl+(we+He>>1)])}const z=new _t,O=new gn;let j=0;function V(ne,fe){const be=fe*Xl+ne;return Zh[be]===0&&(z.emplaceBack(Yl[2*be+0],Yl[2*be+1],ne*kn/Go,fe*kn/Go),Zh[be]=++j),Zh[be]-1}function Z(ne,fe,be,he,we,Ce){const Te=ne+be>>1,Je=fe+he>>1;if(Math.abs(ne-we)+Math.abs(fe-Ce)>1&&Us[Je*Xl+Te])Z(we,Ce,ne,fe,Te,Je),Z(be,he,we,Ce,Te,Je);else{const He=V(ne,fe),mt=V(be,he),Bt=V(we,Ce);O.emplaceBack(He,mt,Bt)}}return Z(0,0,Go,Go,Go,0),Z(Go,Go,0,0,0,Go),{vertices:z,indices:O}}(this.tileID.canonical,r);u=m.vertices,d=m.indices}else{u=new _t,d=new gn;for(const{x:_,y:S}of o)u.emplaceBack(_,S,0,0);const m=Ly(u.int16,void 0,4);for(let _=0;_<m.length;_+=3)d.emplaceBack(m[_],m[_+1],m[_+2])}this._tileBoundsBuffer=e.createVertexBuffer(u,od.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(d),this._tileBoundsSegments=Bi.simpleSegment(0,0,u.length,d.length)}_makeGlobeTileDebugBuffers(e,r){const o=r.projection;if(!o||o.name!=="globe"||r.freezeTileCoverage)return;const u=this.tileID.canonical,d=Os(w_(u,r)),m=jf(r.zoom);let _;m>0&&(_=If(new Float64Array(16),r.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,u,r,d,_,m),this._makeGlobeTileDebugTextBuffer(e,u,r,d,_,m)}_globePoint(e,r,o,u,d,m,_){let S=Ps(e,r,o);if(m){const T=1<<o.z,I=bo(u.center.lng),z=Bs(u.center.lat),O=(o.x+.5)/T-I;let j=0;O>.5?j=-1:O<-.5&&(j=1);let V=(e/kn+o.x)/T+j,Z=(r/kn+o.y)/T;V=(V-I)*u._pixelsPerMercatorPixel+I,Z=(Z-z)*u._pixelsPerMercatorPixel+z;const ne=[V*u.worldSize,Z*u.worldSize,0];Ri(ne,ne,m),S=vc(S,ne,_)}return Ri(S,S,d)}_makeGlobeTileDebugBorderBuffer(e,r,o,u,d,m){const _=new Ot,S=new Bo,T=new We,I=(O,j,V,Z,ne)=>{const fe=(V-O)/(ne-1),be=(Z-j)/(ne-1),he=_.length;for(let we=0;we<ne;we++){const Ce=O+we*fe,Te=j+we*be;_.emplaceBack(Ce,Te);const Je=this._globePoint(Ce,Te,r,o,u,d,m);T.emplaceBack(Je[0],Je[1],Je[2]),S.emplaceBack(he+we)}},z=kn;I(0,0,z,0,16),I(z,0,z,z,16),I(z,z,0,z,16),I(0,z,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(S),this._tileDebugBuffer=e.createVertexBuffer(_,rs.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(T,jo.members),this._tileDebugSegments=Bi.simpleSegment(0,0,_.length,S.length)}_makeGlobeTileDebugTextBuffer(e,r,o,u,d,m){const _=kn/4,S=new Ot,T=new gn,I=new We,z=25;T.reserve(32),S.reserve(z),I.reserve(z);const O=(j,V)=>z*j+V;for(let j=0;j<z;j++){const V=j*_;for(let Z=0;Z<z;Z++){const ne=Z*_;S.emplaceBack(ne,V);const fe=this._globePoint(ne,V,r,o,u,d,m);I.emplaceBack(fe[0],fe[1],fe[2])}}for(let j=0;j<4;j++)for(let V=0;V<4;V++){const Z=O(j,V),ne=O(j,V+1),fe=O(j+1,V),be=O(j+1,V+1);T.emplaceBack(Z,ne,fe),T.emplaceBack(fe,ne,be)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(T),this._tileDebugTextBuffer=e.createVertexBuffer(S,rs.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(I,jo.members),this._tileDebugTextSegments=Bi.simpleSegment(0,0,z,32)}}class sd{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,o){const u=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][u]=this.stateChanges[e][u]||{},Vn(this.stateChanges[e][u],o),this.deletedStates[e]===null){this.deletedStates[e]={};for(const d in this.state[e])d!==u&&(this.deletedStates[e][d]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][u]===null){this.deletedStates[e][u]={};for(const d in this.state[e][u])o[d]||(this.deletedStates[e][u][d]=null)}else for(const d in o)this.deletedStates[e]&&this.deletedStates[e][u]&&this.deletedStates[e][u][d]===null&&delete this.deletedStates[e][u][d]}removeFeatureState(e,r,o){if(this.deletedStates[e]===null)return;const u=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},o&&r!==void 0)this.deletedStates[e][u]!==null&&(this.deletedStates[e][u]=this.deletedStates[e][u]||{},this.deletedStates[e][u][o]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][u])for(o in this.deletedStates[e][u]={},this.stateChanges[e][u])this.deletedStates[e][u][o]=null;else this.deletedStates[e][u]=null;else this.deletedStates[e]=null}getState(e,r){const o=String(r),u=Vn({},(this.state[e]||{})[o],(this.stateChanges[e]||{})[o]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const d=this.deletedStates[e][r];if(d===null)return{};for(const m in d)delete u[m]}return u}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){const o={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const d={};for(const m in this.stateChanges[u])this.state[u][m]||(this.state[u][m]={}),Vn(this.state[u][m],this.stateChanges[u][m]),d[m]=this.state[u][m];o[u]=d}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const d={};if(this.deletedStates[u]===null)for(const m in this.state[u])d[m]={},this.state[u][m]={};else for(const m in this.deletedStates[u]){if(this.deletedStates[u][m]===null)this.state[u][m]={};else if(this.state[u][m])for(const _ of Object.keys(this.deletedStates[u][m]))delete this.state[u][m][_];d[m]=this.state[u][m]}o[u]=o[u]||{},Vn(o[u],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(o).length!==0)for(const u in e)e[u].setFeatureState(o,r)}}class kp{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,r){const o=this.toIdx(e,r);return{min:this.minimums[o],max:this.maximums[o]}}isLeaf(e,r){return this.leaves[this.toIdx(e,r)]}toIdx(e,r){return r*this.size+e}}function hg(n,e,r,o){let u=0,d=Number.MAX_VALUE;for(let m=0;m<3;m++)if(Math.abs(o[m])<1e-15){if(r[m]<n[m]||r[m]>e[m])return null}else{const _=1/o[m];let S=(n[m]-r[m])*_,T=(e[m]-r[m])*_;if(S>T){const I=S;S=T,T=I}if(S>u&&(u=S),T<d&&(d=T),u>d)return null}return u}function Ex(n,e,r,o,u,d,m,_,S,T,I){const z=o-n,O=u-e,j=d-r,V=m-n,Z=_-e,ne=S-r,fe=I[1]*ne-I[2]*Z,be=I[2]*V-I[0]*ne,he=I[0]*Z-I[1]*V,we=z*fe+O*be+j*he;if(Math.abs(we)<1e-15)return null;const Ce=1/we,Te=T[0]-n,Je=T[1]-e,He=T[2]-r,mt=(Te*fe+Je*be+He*he)*Ce;if(mt<0||mt>1)return null;const Bt=Je*j-He*O,nt=He*z-Te*j,bt=Te*O-Je*z,wt=(I[0]*Bt+I[1]*nt+I[2]*bt)*Ce;return wt<0||mt+wt>1?null:(V*Bt+Z*nt+ne*bt)*Ce}function hv(n,e,r){return(n-e)/(r-e)}function fv(n,e,r,o,u,d,m,_,S){const T=1<<r,I=d-o,z=m-u,O=(n+1)/T*I+o,j=(e+0)/T*z+u,V=(e+1)/T*z+u;_[0]=(n+0)/T*I+o,_[1]=j,S[0]=O,S[1]=V}class Dp{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const r=function(d){const m=Math.ceil(Math.log2(d.dim/8)),_=[];let S=Math.ceil(Math.pow(2,m));const T=1/S,I=(j,V,Z,ne,fe)=>{const be=ne?1:0,he=(j+1)*Z-be,we=V*Z,Ce=(V+1)*Z-be;fe[0]=j*Z,fe[1]=we,fe[2]=he,fe[3]=Ce};let z=new kp(S);const O=[];for(let j=0;j<S*S;j++){I(j%S,Math.floor(j/S),T,!1,O);const V=Jl(O[0],O[1],d),Z=Jl(O[2],O[1],d),ne=Jl(O[2],O[3],d),fe=Jl(O[0],O[3],d);z.minimums.push(Math.min(V,Z,ne,fe)),z.maximums.push(Math.max(V,Z,ne,fe)),z.leaves.push(1)}for(_.push(z),S/=2;S>=1;S/=2){const j=_[_.length-1];z=new kp(S);for(let V=0;V<S*S;V++){I(V%S,Math.floor(V/S),2,!0,O);const Z=j.getElevation(O[0],O[1]),ne=j.getElevation(O[2],O[1]),fe=j.getElevation(O[2],O[3]),be=j.getElevation(O[0],O[3]),he=j.isLeaf(O[0],O[1]),we=j.isLeaf(O[2],O[1]),Ce=j.isLeaf(O[2],O[3]),Te=j.isLeaf(O[0],O[3]),Je=Math.min(Z.min,ne.min,fe.min,be.min),He=Math.max(Z.max,ne.max,fe.max,be.max),mt=he&&we&&Ce&&Te;z.maximums.push(He),z.minimums.push(Je),z.leaves.push(He-Je<=5&&mt?1:0)}_.push(z)}return _}(this.dem),o=r.length-1,u=r[o];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(r,0,0,o,0)}raycastRoot(e,r,o,u,d,m,_=1){return hg([e,r,-100],[o,u,this.maximums[0]*_],d,m)}raycast(e,r,o,u,d,m,_=1){if(!this.nodeCount)return null;const S=this.raycastRoot(e,r,o,u,d,m,_);if(S==null)return null;const T=[],I=[],z=[],O=[],j=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;j.length>0;){const{idx:V,t:Z,nodex:ne,nodey:fe,depth:be}=j.pop();if(this.leaves[V]){fv(ne,fe,be,e,r,o,u,z,O);const we=1<<be,Ce=(ne+0)/we,Te=(ne+1)/we,Je=(fe+0)/we,He=(fe+1)/we,mt=Jl(Ce,Je,this.dem)*_,Bt=Jl(Te,Je,this.dem)*_,nt=Jl(Te,He,this.dem)*_,bt=Jl(Ce,He,this.dem)*_,wt=Ex(z[0],z[1],mt,O[0],z[1],Bt,O[0],O[1],nt,d,m),At=Ex(O[0],O[1],nt,z[0],O[1],bt,z[0],z[1],mt,d,m),Ut=Math.min(wt!==null?wt:Number.MAX_VALUE,At!==null?At:Number.MAX_VALUE);if(Ut!==Number.MAX_VALUE)return Ut;{const ht=bu([],d,m,Z);if(js(mt,Bt,bt,nt,hv(ht[0],z[0],O[0]),hv(ht[1],z[1],O[1]))>=ht[2])return Z}continue}let he=0;for(let we=0;we<this._siblingOffset.length;we++){fv((ne<<1)+this._siblingOffset[we][0],(fe<<1)+this._siblingOffset[we][1],be+1,e,r,o,u,z,O),z[2]=-100,O[2]=this.maximums[this.childOffsets[V]+we]*_;const Ce=hg(z,O,d,m);if(Ce!=null){const Te=Ce;T[we]=Te;let Je=!1;for(let He=0;He<he&&!Je;He++)Te>=T[I[He]]&&(I.splice(He,0,we),Je=!0);Je||(I[he]=we),he++}}for(let we=0;we<he;we++){const Ce=I[we];j.push({idx:this.childOffsets[V]+Ce,t:T[Ce],nodex:(ne<<1)+this._siblingOffset[Ce][0],nodey:(fe<<1)+this._siblingOffset[Ce][1],depth:be+1})}}return null}_addNode(e,r,o){return this.minimums.push(e),this.maximums.push(r),this.leaves.push(o),this.childOffsets.push(0),this.nodeCount++}_construct(e,r,o,u,d){if(e[u].isLeaf(r,o)===1)return;this.childOffsets[d]||(this.childOffsets[d]=this.nodeCount);const m=u-1,_=e[m];let S=0,T=0;for(let I=0;I<this._siblingOffset.length;I++){const z=2*r+this._siblingOffset[I][0],O=2*o+this._siblingOffset[I][1],j=_.getElevation(z,O),V=_.isLeaf(z,O),Z=this._addNode(j.min,j.max,V);V&&(S|=1<<I),T||(T=Z)}for(let I=0;I<this._siblingOffset.length;I++)S&1<<I||this._construct(e,2*r+this._siblingOffset[I][0],2*o+this._siblingOffset[I][1],m,T+I)}}function js(n,e,r,o,u,d){return Sr(Sr(n,r,d),Sr(e,o,d),u)}function Jl(n,e,r){const o=r.dim,u=It(n*o-.5,0,o-1),d=It(e*o-.5,0,o-1),m=Math.floor(u),_=Math.floor(d),S=Math.min(m+1,o-1),T=Math.min(_+1,o-1);return js(r.get(m,_),r.get(S,_),r.get(m,T),r.get(S,T),u-m,d-_)}const Rp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Tu(n,e,r){return(256*n*256+256*e+r)/10-1e4}function Bc(n,e,r){return 256*n+e+r/256-32768}class Ba{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,r,o,u=!1,d=!1){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(o&&o!=="mapbox"&&o!=="terrarium")return Wn(`"${o}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=r.height;const m=this.dim=r.height-2,_=new Uint32Array(r.data.buffer);if(this.pixels=new Uint8Array(r.data.buffer),this.encoding=o||"mapbox",this.borderReady=u,!u){for(let S=0;S<m;S++)_[this._idx(-1,S)]=_[this._idx(0,S)],_[this._idx(m,S)]=_[this._idx(m-1,S)],_[this._idx(S,-1)]=_[this._idx(S,0)],_[this._idx(S,m)]=_[this._idx(S,m-1)];_[this._idx(-1,-1)]=_[this._idx(0,0)],_[this._idx(m,-1)]=_[this._idx(m-1,0)],_[this._idx(-1,m)]=_[this._idx(0,m-1)],_[this._idx(m,m)]=_[this._idx(m-1,m-1)],d&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Dp(this)}get(e,r,o=!1){o&&(e=It(e,-1,this.dim),r=It(r,-1,this.dim));const u=4*this._idx(e,r);return(this.encoding==="terrarium"?Bc:Tu)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(e){return Rp[e]}get unpackVector(){return Rp[this.encoding]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)}static pack(e,r){const o=[0,0,0,0],u=Ba.getUnpackVector(r);let d=Math.floor((e+u[3])/u[2]);return o[2]=d%256,d=Math.floor(d/256),o[1]=d%256,d=Math.floor(d/256),o[0]=d,o}getPixels(){return new Vo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,r,o){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let u=r*this.dim,d=r*this.dim+this.dim,m=o*this.dim,_=o*this.dim+this.dim;switch(r){case-1:u=d-1;break;case 1:d=u+1}switch(o){case-1:m=_-1;break;case 1:_=m+1}const S=-r*this.dim,T=-o*this.dim;for(let I=m;I<_;I++)for(let z=u;z<d;z++){const O=4*this._idx(z,I),j=4*this._idx(z+S,I+T);this.pixels[O+0]=e.pixels[j+0],this.pixels[O+1]=e.pixels[j+1],this.pixels[O+2]=e.pixels[j+2],this.pixels[O+3]=e.pixels[j+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}an(Ba,"DEMData"),an(Dp,"DemMinMaxQuadTree",{omit:["dem"]});class fo{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(const e in this.data)for(const r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,o){const u=e.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const d={value:r,timeout:void 0};if(o!==void 0&&(d.timeout=setTimeout(()=>{this.remove(e,d)},o)),this.data[u].push(d),this.order.push(u),this.order.length>this.max){const m=this._getAndRemoveByKey(this.order[0]);m&&this.onRemove(m)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){const r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;const o=e.wrapped().key,u=r===void 0?0:this.data[o].indexOf(r),d=this.data[o][u];return this.data[o].splice(u,1),d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(d.value),this.order.splice(this.order.indexOf(o),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){const r=[];for(const o in this.data)for(const u of this.data[o])e(u.value)||r.push(u);for(const o of r)this.remove(o.value.tileID,o)}}class Fc{constructor(e,r,o){this.func=e,this.mask=r,this.range=o}}Fc.ReadOnly=!1,Fc.ReadWrite=!0,Fc.disabled=new Fc(519,Fc.ReadOnly,[0,1]);const Eo=7680;class ml{constructor(e,r,o,u,d,m){this.test=e,this.ref=r,this.mask=o,this.fail=u,this.depthFail=d,this.pass=m}}ml.disabled=new ml({func:519,mask:0},0,0,Eo,Eo,Eo);class Fa{constructor(e,r,o){this.blendFunction=e,this.blendColor=r,this.mask=o}}Fa.Replace=[1,0],Fa.disabled=new Fa(Fa.Replace,pr.transparent,[!1,!1,!1,!1]),Fa.unblended=new Fa(Fa.Replace,pr.transparent,[!0,!0,!0,!0]),Fa.alphaBlended=new Fa([1,771],pr.transparent,[!0,!0,!0,!0]);const Ip=1029,Nc=2305;class Vs{constructor(e,r,o){this.enable=e,this.mode=r,this.frontFace=o}}Vs.disabled=new Vs(!1,Ip,Nc),Vs.backCCW=new Vs(!0,Ip,Nc),Vs.backCW=new Vs(!0,Ip,2304),Vs.frontCW=new Vs(!0,1028,2304),Vs.frontCCW=new Vs(!0,1028,Nc);class $s extends Ys{constructor(e,r,o){super(),this.id=e,this._onlySymbols=o,r.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),r.on("error",()=>{this._sourceErrored=!0}),this._source=r,this._tiles={},this._cache=new fo(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=r.minTileCacheSize,this._maxTileCacheSize=r.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new sd,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(e){this.map=e,this._minTileCacheSize=this._minTileCacheSize===void 0&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const e in this._tiles){const r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,r){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,r)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const r in this._tiles){const o=this._tiles[r];o.upload(e),o.prepare(this.map.style.imageManager)}}getIds(){return Me(this._tiles).map(e=>e.tileID).sort(Lp).map(e=>e.key)}getRenderableIds(e){const r=[];for(const o in this._tiles)this._isIdRenderable(+o,e)&&r.push(this._tiles[o]);return e?r.sort((o,u)=>{const d=o.tileID,m=u.tileID,_=new ut(d.canonical.x,d.canonical.y)._rotate(this.transform.angle),S=new ut(m.canonical.x,m.canonical.y)._rotate(this.transform.angle);return d.overscaledZ-m.overscaledZ||S.y-_.y||S.x-_.x}).map(o=>o.tileID.key):r.map(o=>o.tileID).sort(Lp).map(o=>o.key)}hasRenderableParent(e){const r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(+e,"reloading")}}_reloadTile(e,r){const o=this._tiles[e];o&&(o.state!=="loading"&&(o.state=r),this._loadTile(o,this._tileLoaded.bind(this,o,e,r)))}_tileLoaded(e,r,o,u){if(u)if(e.state="errored",u.status!==404)this._source.fire(new po(u,{tile:e}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const d=this.map.painter.terrain;this.update(this.transform,d.getScaledDemTileSize(),!0),d.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=nr.now(),o==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this._source.type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new Yo("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const r=this.getRenderableIds();for(let u=0;u<r.length;u++){const d=r[u];if(e.neighboringTiles&&e.neighboringTiles[d]){const m=this.getTileByID(d);o(e,m),o(m,e)}}function o(u,d){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let m=d.tileID.canonical.x-u.tileID.canonical.x;const _=d.tileID.canonical.y-u.tileID.canonical.y,S=Math.pow(2,u.tileID.canonical.z),T=d.tileID.key;m===0&&_===0||Math.abs(_)>1||(Math.abs(m)>1&&(Math.abs(m+S)===1?m+=S:Math.abs(m-S)===1&&(m-=S)),d.dem&&u.dem&&(u.dem.backfillBorder(d.dem,m,_),u.neighboringTiles&&u.neighboringTiles[T]&&(u.neighboringTiles[T].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,o,u){for(const d in this._tiles){let m=this._tiles[d];if(u[d]||!m.hasData()||m.tileID.overscaledZ<=r||m.tileID.overscaledZ>o)continue;let _=m.tileID;for(;m&&m.tileID.overscaledZ>r+1;){const T=m.tileID.scaledTo(m.tileID.overscaledZ-1);m=this._tiles[T.key],m&&m.hasData()&&(_=T)}let S=_;for(;S.overscaledZ>r;)if(S=S.scaledTo(S.overscaledZ-1),e[S.key]){u[_.key]=_;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){const o=this._loadedParentTiles[e.key];return o&&o.tileID.overscaledZ>=r?o:null}for(let o=e.overscaledZ-1;o>=r;o--){const u=e.scaledTo(o),d=this._getLoadedTile(u);if(d)return d}}_getLoadedTile(e){const r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,r){r=r||this._source.tileSize;const o=Math.ceil(e.width/r)+1,u=Math.ceil(e.height/r)+1,d=Math.floor(o*u*5),m=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,d):d,_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(_)}handleWrapJump(e){const r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){const o={};for(const u in this._tiles){const d=this._tiles[u];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+r),o[d.tileID.key]=d}this._tiles=o;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(e,r,o){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!o)return;let u;this.updateCacheSize(e,r),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(_=>new _a(_.canonical.z,_.wrap,_.canonical.z,_.canonical.x,_.canonical.y)):(u=e.coveringTiles({tileSize:r||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!o,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(_=>this._source.hasTile(_)))):u=[];const d=this._updateRetainedTiles(u);if(gl(this._source.type)&&u.length!==0){const _={},S={},T=Object.keys(d);for(const z of T){const O=d[z],j=this._tiles[z];if(!j||j.fadeEndTime&&j.fadeEndTime<=nr.now())continue;const V=this.findLoadedParent(O,Math.max(O.overscaledZ-$s.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),_[V.tileID.key]=V.tileID),S[z]=O}const I=u[u.length-1].overscaledZ;for(const z in this._tiles){const O=this._tiles[z];if(d[z]||!O.hasData())continue;let j=O.tileID;for(;j.overscaledZ>I;){j=j.scaledTo(j.overscaledZ-1);const V=this._tiles[j.key];if(V&&V.hasData()&&S[j.key]){d[z]=O.tileID;break}}}for(const z in _)d[z]||(this._coveredTiles[z]=!0,d[z]=_[z])}for(const _ in d)this._tiles[_].clearFadeHold();const m=function(_,S){const T=[];for(const I in _)I in S||T.push(I);return T}(this._tiles,d);for(const _ of m){const S=this._tiles[_];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+_)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const r={};if(e.length===0)return r;const o={},u=e.reduce((T,I)=>Math.min(T,I.overscaledZ),1/0),d=e[0].overscaledZ,m=Math.max(d-$s.maxOverzooming,this._source.minzoom),_=Math.max(d+$s.maxUnderzooming,this._source.minzoom),S={};for(const T of e){const I=this._addTile(T);r[T.key]=T,I.hasData()||u<this._source.maxzoom&&(S[T.key]=T)}this._retainLoadedChildren(S,u,_,r);for(const T of e){let I=this._tiles[T.key];if(I.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const O=T.children(this._source.maxzoom)[0],j=this.getTile(O);if(j&&j.hasData()){r[O.key]=O;continue}}else{const O=T.children(this._source.maxzoom);if(r[O[0].key]&&r[O[1].key]&&r[O[2].key]&&r[O[3].key])continue}let z=I.wasRequested();for(let O=T.overscaledZ-1;O>=m;--O){const j=T.scaledTo(O);if(o[j.key]||(o[j.key]=!0,I=this.getTile(j),!I&&z&&(I=this._addTile(j)),I&&(r[j.key]=j,z=I.wasRequested(),I.hasData())))break}}return r}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const r=[];let o,u=this._tiles[e].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){o=this._loadedParentTiles[u.key];break}r.push(u.key);const d=u.scaledTo(u.overscaledZ-1);if(o=this._getLoadedTile(d),o)break;u=d}for(const d of r)this._loadedParentTiles[d]=o}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const o=!!r;if(!o){const u=this.map?this.map.painter:null;r=new Kl(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._loadTile(r,this._tileLoaded.bind(this,r,e.key,r.state))}return r?(r.uses++,this._tiles[e.key]=r,o||this._source.fire(new Yo("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r):null}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const o=r.getExpiryTimeout();o&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},o))}_removeTile(e){const r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,r,o){const u=[],d=this.transform;if(!d)return u;const m=d.projection.name==="globe",_=bo(d.center.lng);for(const S in this._tiles){const T=this._tiles[S];if(o&&T.clearQueryDebugViz(),T.holdingForFade())continue;let I;if(m){const z=T.tileID.canonical;if(z.z===0){const O=[Math.abs(It(_,...Uc(z,-1))-_),Math.abs(It(_,...Uc(z,1))-_)];I=[0,2*O.indexOf(Math.min(...O))-1]}else{const O=[Math.abs(It(_,...Uc(z,-1))-_),Math.abs(It(_,...Uc(z,0))-_),Math.abs(It(_,...Uc(z,1))-_)];I=[O.indexOf(Math.min(...O))-1]}}else I=[0];for(const z of I){const O=e.containsTile(T,d,r,z);O&&u.push(O)}}return u}getVisibleCoordinates(e){const r=this.getRenderableIds(e).map(o=>this._tiles[o].tileID);for(const o of r)o.projMatrix=this.transform.calculateProjMatrix(o.toUnwrapped());return r}hasTransition(){if(this._source.hasTransition())return!0;if(gl(this._source.type))for(const e in this._tiles){const r=this._tiles[e];if(r.fadeEndTime!==void 0&&r.fadeEndTime>=nr.now())return!0}return!1}setFeatureState(e,r,o){this._state.updateState(e=e||"_geojsonTileLayer",r,o)}removeFeatureState(e,r,o){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,o)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,o){const u=this._tiles[e];u&&u.setDependencies(r,o)}reloadTilesForDependencies(e,r){for(const o in this._tiles)this._tiles[o].hasDependency(e,r)&&this._reloadTile(+o,"reloading");this._cache.filter(o=>!o.hasDependency(e,r))}_preloadTiles(e,r){if(!this._sourceLoaded){const _=()=>{this._sourceLoaded&&(this._source.off("data",_),this._preloadTiles(e,r))};return void this._source.on("data",_)}const o=new Map,u=Array.isArray(e)?e:[e],d=this.map.painter.terrain,m=this.usedForTerrain&&d?d.getScaledDemTileSize():this._source.tileSize;for(const _ of u){const S=_.coveringTiles({tileSize:m,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of S)o.set(T.key,T);this.usedForTerrain&&_.updateElevation(!1)}An(Array.from(o.values()),(_,S)=>{const T=new Kl(_,this._source.tileSize*_.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,I=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),S(I,T)})},r)}}function Lp(n,e){const r=Math.abs(2*n.wrap)-+(n.wrap<0),o=Math.abs(2*e.wrap)-+(e.wrap<0);return n.overscaledZ-e.overscaledZ||o-r||e.canonical.y-n.canonical.y||e.canonical.x-n.canonical.x}function gl(n){return n==="raster"||n==="image"||n==="video"||n==="custom"}function Uc(n,e){const r=1<<n.z;return[n.x/r+e,(n.x+1)/r+e]}$s.maxOverzooming=10,$s.maxUnderzooming=3;class ld{constructor(e,r,o){this._demTile=e,this._dem=this._demTile.dem,this._scale=r,this._offset=o}static create(e,r,o){const u=o||e.findDEMTileFor(r);if(!u||!u.dem)return;const d=u.dem,m=u.tileID,_=1<<r.canonical.z-m.canonical.z;return new ld(u,u.tileSize/kn/_,[(r.canonical.x/_-m.canonical.x)*d.dim,(r.canonical.y/_-m.canonical.y)*d.dim])}tileCoordToPixel(e,r){const o=r*this._scale+this._offset[1],u=Math.floor(e*this._scale+this._offset[0]),d=Math.floor(o);return new ut(u,d)}getElevationAt(e,r,o,u){const d=e*this._scale+this._offset[0],m=r*this._scale+this._offset[1],_=Math.floor(d),S=Math.floor(m),T=this._dem;return u=!!u,o?Sr(Sr(T.get(_,S,u),T.get(_,S+1,u),m-S),Sr(T.get(_+1,S,u),T.get(_+1,S+1,u),m-S),d-_):T.get(_,S,u)}getElevationAtPixel(e,r,o){return this._dem.get(e,r,!!o)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*Fs(1,e)*this._dem.stride}}class dv{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new gu(kn,16,0),this.featureIndexArray=new Li,this.promoteId=r}insert(e,r,o,u,d,m=0){const _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,u,d,m);const S=this.grid;for(let T=0;T<r.length;T++){const I=r[T],z=[1/0,1/0,-1/0,-1/0];for(let O=0;O<I.length;O++){const j=I[O];z[0]=Math.min(z[0],j.x),z[1]=Math.min(z[1],j.y),z[2]=Math.max(z[2],j.x),z[3]=Math.max(z[3],j.y)}z[0]<kn&&z[1]<kn&&z[2]>=0&&z[3]>=0&&S.insert(_,z[0],z[1],z[2],z[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Oy(new Gh(this.rawTileData)).layers,this.sourceLayerCoder=new Wh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,r,o,u){this.loadVTLayers();const d=e.params||{},m=Ef(d.filter),_=e.tileResult,S=e.transform,T=_.bufferedTilespaceBounds,I=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(V,Z,ne,fe)=>Lm(_.bufferedTilespaceGeometry,V,Z,ne,fe));I.sort(fg);let z=null;S.elevation&&I.length>0&&(z=ld.create(S.elevation,this.tileID));const O={};let j;for(let V=0;V<I.length;V++){const Z=I[V];if(Z===j)continue;j=Z;const ne=this.featureIndexArray.get(Z);let fe=null;this.loadMatchingFeature(O,ne,m,d.layers,d.availableImages,r,o,u,(be,he,we,Ce=0)=>(fe||(fe=ls(be,this.tileID.canonical,e.tileTransform)),he.queryIntersectsFeature(_,be,we,fe,this.z,e.transform,e.pixelPosMatrix,z,Ce)))}return O}loadMatchingFeature(e,r,o,u,d,m,_,S,T){const{featureIndex:I,bucketIndex:z,sourceLayerIndex:O,layoutVertexArrayOffset:j}=r,V=this.bucketLayerIDs[z];if(u&&!function(be,he){for(let we=0;we<be.length;we++)if(he.indexOf(be[we])>=0)return!0;return!1}(u,V))return;const Z=this.sourceLayerCoder.decode(O),ne=this.vtLayers[Z].feature(I);if(o.needGeometry){const be=Eu(ne,!0);if(!o.filter(new L(this.tileID.overscaledZ),be,this.tileID.canonical))return}else if(!o.filter(new L(this.tileID.overscaledZ),ne))return;const fe=this.getId(ne,Z);for(let be=0;be<V.length;be++){const he=V[be];if(u&&u.indexOf(he)<0)continue;const we=m[he];if(!we)continue;let Ce={};fe!==void 0&&S&&(Ce=S.getState(we.sourceLayer||"_geojsonTileLayer",fe));const Te=Vn({},_[he]);Te.paint=pv(Te.paint,we.paint,ne,Ce,d),Te.layout=pv(Te.layout,we.layout,ne,Ce,d);const Je=!T||T(ne,we,Ce,j);if(!Je)continue;const He=new ad(ne,this.z,this.x,this.y,fe);He.layer=Te;let mt=e[he];mt===void 0&&(mt=e[he]=[]),mt.push({featureIndex:I,feature:He,intersectionZ:Je})}}lookupSymbolFeatures(e,r,o,u,d,m,_,S){const T={};this.loadVTLayers();const I=Ef(d);for(const z of e)this.loadMatchingFeature(T,{bucketIndex:o,sourceLayerIndex:u,featureIndex:z,layoutVertexArrayOffset:0},I,m,_,S,r);return T}loadFeature(e){const{featureIndex:r,sourceLayerIndex:o}=e;this.loadVTLayers();const u=this.sourceLayerCoder.decode(o),d=this.vtFeatures[u];if(d[r])return d[r];const m=this.vtLayers[u].feature(r);return d[r]=m,m}hasLayer(e){for(const r of this.bucketLayerIDs)for(const o of r)if(e===o)return!0;return!1}getId(e,r){let o=e.id;if(this.promoteId){const u=typeof this.promoteId=="string"?this.promoteId:this.promoteId[r];u!=null&&(o=e.properties[u]),typeof o=="boolean"&&(o=Number(o))}return o}}function pv(n,e,r,o,u){return Dn(n,(d,m)=>{const _=e instanceof ce?e.get(m):null;return _&&_.evaluate?_.evaluate(r,o,u):_})}function fg(n,e){return e-n}an(dv,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class mv{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.image=new Su({width:e,height:r}),this.positions={},this.uploaded=!1}getDash(e,r){const o=this.getKey(e,r);return this.positions[o]}trim(){const e=this.width,r=this.height=hr(this.nextRow);this.image.resize({width:e,height:r})}getKey(e,r){return e.join(",")+r}getDashRanges(e,r,o){const u=[];let d=e.length%2==1?-e[e.length-1]*o:0,m=e[0]*o,_=!0;u.push({left:d,right:m,isDash:_,zeroLength:e[0]===0});let S=e[0];for(let T=1;T<e.length;T++){_=!_;const I=e[T];d=S*o,S+=I,m=S*o,u.push({left:d,right:m,isDash:_,zeroLength:I===0})}return u}addRoundDash(e,r,o){const u=r/2;for(let d=-o;d<=o;d++){const m=this.width*(this.nextRow+o+d);let _=0,S=e[_];for(let T=0;T<this.width;T++){T/S.right>1&&(S=e[++_]);const I=Math.abs(T-S.left),z=Math.abs(T-S.right),O=Math.min(I,z);let j;const V=d/o*(u+1);if(S.isDash){const Z=u-Math.abs(V);j=Math.sqrt(O*O+Z*Z)}else j=u-Math.sqrt(O*O+V*V);this.image.data[m+T]=Math.max(0,Math.min(255,j+128))}}}addRegularDash(e,r){for(let S=e.length-1;S>=0;--S){const T=e[S],I=e[S+1];T.zeroLength?e.splice(S,1):I&&I.isDash===T.isDash&&(I.left=T.left,e.splice(S,1))}const o=e[0],u=e[e.length-1];o.isDash===u.isDash&&(o.left=u.left-this.width,u.right=o.right+this.width);const d=this.width*this.nextRow;let m=0,_=e[m];for(let S=0;S<this.width;S++){S/_.right>1&&(_=e[++m]);const T=Math.abs(S-_.left),I=Math.abs(S-_.right),z=Math.min(T,I);this.image.data[d+S]=Math.max(0,Math.min(255,(_.isDash?z:-z)+r+128))}}addDash(e,r){const o=this.getKey(e,r);if(this.positions[o])return this.positions[o];const u=r==="round",d=u?7:0,m=2*d+1;if(this.nextRow+m>this.height)return Wn("LineAtlas out of space"),null;e.length===0&&e.push(1);let _=0;for(let I=0;I<e.length;I++)e[I]<0&&(Wn("Negative value is found in line dasharray, replacing values with 0"),e[I]=0),_+=e[I];if(_!==0){const I=this.width/_,z=this.getDashRanges(e,this.width,I);u?this.addRoundDash(z,I,d):this.addRegularDash(z,r==="square"?.5*I:0)}const S=this.nextRow+d;this.nextRow+=m;const T={tl:[S,d],br:[_,0]};return this.positions[o]=T,T}}an(mv,"LineAtlas");const Sx=1*wo;class Cu{constructor(e){const r={},o=[];for(const _ in e){const S=e[_],T=r[_]={};for(const I in S.glyphs){const z=S.glyphs[+I];if(!z||z.bitmap.width===0||z.bitmap.height===0)continue;const O=z.metrics.localGlyph?Sx:1,j={x:0,y:0,w:z.bitmap.width+2*O,h:z.bitmap.height+2*O};o.push(j),T[I]=j}}const{w:u,h:d}=Jf(o),m=new Su({width:u||1,height:d||1});for(const _ in e){const S=e[_];for(const T in S.glyphs){const I=S.glyphs[+T];if(!I||I.bitmap.width===0||I.bitmap.height===0)continue;const z=r[_][T],O=I.metrics.localGlyph?Sx:1;Su.copy(I.bitmap,m,{x:0,y:0},{x:z.x+O,y:z.y+O},I.bitmap)}}this.image=m,this.positions=r}}an(Cu,"GlyphAtlas");class dg{constructor(e){this.tileID=new _a(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Hh(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,r,o,u,d){this.status="parsing",this.data=e,this.collisionBoxArray=new ci;const m=new Wh(Object.keys(e.layers).sort()),_=new dv(this.tileID,this.promoteId);_.bucketLayerIDs=[];const S={},T=new mv(256,256),I={featureIndex:_,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:o},z=r.familiesBySource[this.source];for(const Ce in z){const Te=e.layers[Ce];if(!Te)continue;let Je=!1,He=!1;for(const nt of z[Ce])nt[0].type==="symbol"?Je=!0:He=!0;if(this.isSymbolTile===!0&&!Je||this.isSymbolTile===!1&&!He)continue;Te.version===1&&Wn(`Vector tile source "${this.source}" layer "${Ce}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const mt=m.encode(Ce),Bt=[];for(let nt=0;nt<Te.length;nt++){const bt=Te.feature(nt),wt=_.getId(bt,Ce);Bt.push({feature:bt,id:wt,index:nt,sourceLayerIndex:mt})}for(const nt of z[Ce]){const bt=nt[0];this.isSymbolTile!==void 0&&bt.type==="symbol"!==this.isSymbolTile||bt.minzoom&&this.zoom<Math.floor(bt.minzoom)||bt.maxzoom&&this.zoom>=bt.maxzoom||bt.visibility!=="none"&&(yl(nt,this.zoom,o),(S[bt.id]=bt.createBucket({index:_.bucketLayerIDs.length,layers:nt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:mt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:o})).populate(Bt,I,this.tileID.canonical,this.tileTransform),_.bucketLayerIDs.push(nt.map(wt=>wt.id)))}}let O,j,V,Z;T.trim();const ne={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},fe=()=>{if(O)return d(O);if(j&&V&&Z){const Ce=new Cu(j),Te=new mp(V,Z);for(const Je in S){const He=S[Je];He instanceof zc?(yl(He.layers,this.zoom,o),tv(He,j,Ce.positions,V,Te.iconPositions,this.showCollisionBoxes,o,this.tileID.canonical,this.tileZoom,this.projection)):He.hasPattern&&(He instanceof Nh||He instanceof Tc||He instanceof up)&&(yl(He.layers,this.zoom,o),He.addFeatures(I,this.tileID.canonical,Te.patternPositions,o,this.tileTransform))}this.status="done",d(null,{buckets:Me(S).filter(Je=>!Je.isEmpty()),featureIndex:_,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ce.image,lineAtlas:T,imageAtlas:Te,glyphMap:this.returnDependencies?j:null,iconMap:this.returnDependencies?V:null,glyphPositions:this.returnDependencies?Ce.positions:null})}},be=Dn(I.glyphDependencies,Ce=>Object.keys(Ce).map(Number));Object.keys(be).length?u.send("getGlyphs",{uid:this.uid,stacks:be},(Ce,Te)=>{O||(O=Ce,j=Te,fe())},void 0,!1,ne):j={};const he=Object.keys(I.iconDependencies);he.length?u.send("getImages",{icons:he,source:this.source,tileID:this.tileID,type:"icons"},(Ce,Te)=>{O||(O=Ce,V=Te,fe())},void 0,!1,ne):V={};const we=Object.keys(I.patternDependencies);we.length?u.send("getImages",{icons:we,source:this.source,tileID:this.tileID,type:"patterns"},(Ce,Te)=>{O||(O=Ce,Z=Te,fe())},void 0,!1,ne):Z={},fe()}}function yl(n,e,r){const o=new L(e);for(const u of n)u.recalculate(o,r)}class pg{constructor(e){this.entries={},this.scheduler=e}request(e,r,o,u){const d=this.entries[e]=this.entries[e]||{callbacks:[]};if(d.result){const[m,_]=d.result;return this.scheduler?this.scheduler.add(()=>{u(m,_)},r):u(m,_),()=>{}}return d.callbacks.push(u),d.cancel||(d.cancel=o((m,_)=>{d.result=[m,_];for(const S of d.callbacks)this.scheduler?this.scheduler.add(()=>{S(m,_)},r):S(m,_);setTimeout(()=>delete this.entries[e],3e3)})),()=>{d.result||(d.callbacks=d.callbacks.filter(m=>m!==u),d.callbacks.length||(d.cancel(),delete this.entries[e]))}}}function mg(n,e,r){const o=JSON.stringify(n.request);return n.data&&(this.deduped.entries[o]={result:[null,n.data]}),this.deduped.request(o,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},u=>{const d=Jr(n.request,(m,_,S,T)=>{m?u(m):_&&u(null,{vectorTile:r?void 0:new Oy(new Gh(_)),rawData:_,cacheControl:S,expires:T})});return()=>{d.cancel(),u()}},e)}const gv=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class yv{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,o]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const u=o>>4;if(u!==1)throw new Error(`Got v${u} data when expected v1.`);const d=gv[15&o];if(!d)throw new Error("Unrecognized array type.");const[m]=new Uint16Array(e,2,1),[_]=new Uint32Array(e,4,1);return new yv(_,m,d,e)}constructor(e,r=64,o=Float64Array,u){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=o,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const d=gv.indexOf(this.ArrayType),m=2*e*this.ArrayType.BYTES_PER_ELEMENT,_=e*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-_%8)%8;if(d<0)throw new Error(`Unexpected typed array class: ${o}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+_+S,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+m+_+S),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+_+S,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+d]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=e,this.coords[this._pos++]=r,o}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return gg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,o,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:m,nodeSize:_}=this,S=[0,d.length-1,0],T=[];for(;S.length;){const I=S.pop()||0,z=S.pop()||0,O=S.pop()||0;if(z-O<=_){for(let ne=O;ne<=z;ne++){const fe=m[2*ne],be=m[2*ne+1];fe>=e&&fe<=o&&be>=r&&be<=u&&T.push(d[ne])}continue}const j=O+z>>1,V=m[2*j],Z=m[2*j+1];V>=e&&V<=o&&Z>=r&&Z<=u&&T.push(d[j]),(I===0?e<=V:r<=Z)&&(S.push(O),S.push(j-1),S.push(1-I)),(I===0?o>=V:u>=Z)&&(S.push(j+1),S.push(z),S.push(1-I))}return T}within(e,r,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:d,nodeSize:m}=this,_=[0,u.length-1,0],S=[],T=o*o;for(;_.length;){const I=_.pop()||0,z=_.pop()||0,O=_.pop()||0;if(z-O<=m){for(let ne=O;ne<=z;ne++)zp(d[2*ne],d[2*ne+1],e,r)<=T&&S.push(u[ne]);continue}const j=O+z>>1,V=d[2*j],Z=d[2*j+1];zp(V,Z,e,r)<=T&&S.push(u[j]),(I===0?e-o<=V:r-o<=Z)&&(_.push(O),_.push(j-1),_.push(1-I)),(I===0?e+o>=V:r+o>=Z)&&(_.push(j+1),_.push(z),_.push(1-I))}return S}}function gg(n,e,r,o,u,d){if(u-o<=r)return;const m=o+u>>1;Mu(n,e,m,o,u,d),gg(n,e,r,o,m-1,1-d),gg(n,e,r,m+1,u,1-d)}function Mu(n,e,r,o,u,d){for(;u>o;){if(u-o>600){const T=u-o+1,I=r-o+1,z=Math.log(T),O=.5*Math.exp(2*z/3),j=.5*Math.sqrt(z*O*(T-O)/T)*(I-T/2<0?-1:1);Mu(n,e,r,Math.max(o,Math.floor(r-I*O/T+j)),Math.min(u,Math.floor(r+(T-I)*O/T+j)),d)}const m=e[2*r+d];let _=o,S=u;for(Ql(n,e,o,r),e[2*u+d]>m&&Ql(n,e,o,u);_<S;){for(Ql(n,e,_,S),_++,S--;e[2*_+d]<m;)_++;for(;e[2*S+d]>m;)S--}e[2*o+d]===m?Ql(n,e,o,S):(S++,Ql(n,e,S,u)),S<=r&&(o=S+1),r<=S&&(u=S-1)}}function Ql(n,e,r,o){jc(n,r,o),jc(e,2*r,2*o),jc(e,2*r+1,2*o+1)}function jc(n,e,r){const o=n[e];n[e]=n[r],n[r]=o}function zp(n,e,r,o){const u=n-r,d=e-o;return u*u+d*d}s.ARRAY_TYPE=$i,s.AUTH_ERR_MSG=Se,s.Aabb=Gi,s.Actor=class{constructor(n,e,r){this.target=n,this.parent=e,this.mapId=r,this.callbacks={},this.cancelCallbacks={},Or(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=bi()?n:N,this.scheduler=new id}send(n,e,r,o,u=!1,d){const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);r&&(r.metadata=d,this.callbacks[m]=r);const _=Wi(this.globalScope)?void 0:[];return this.target.postMessage({id:m,type:n,hasCallback:!!r,targetMapId:o,mustQueue:u,sourceMapId:this.mapId,data:yu(e,_)},_),{cancel:()=>{r&&delete this.callbacks[m],this.target.postMessage({id:m,type:"<cancel>",targetMapId:o,sourceMapId:this.mapId})}}}receive(n){const e=n.data,r=e.id;if(r&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){const o=this.cancelCallbacks[r];delete this.cancelCallbacks[r],o&&o.cancel()}else if(e.mustQueue||bi()){const o=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add(()=>this.processTask(r,e),o&&o.metadata||{type:"message"})}else this.processTask(r,e)}processTask(n,e){if(e.type==="<response>"){const r=this.callbacks[n];delete this.callbacks[n],r&&(e.error?r(sl(e.error)):r(null,sl(e.data)))}else{const r=Wi(this.globalScope)?void 0:[],o=e.hasCallback?(d,m)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:d?yu(d):null,data:yu(m,r)},r)}:d=>{},u=sl(e.data);if(this.parent[e.type])this.parent[e.type](e.sourceMapId,u,o);else if(this.parent.getWorkerSource){const d=e.type.split(".");this.parent.getWorkerSource(e.sourceMapId,d[0],u.source)[d[1]](u,o)}else o(new Error(`Could not find function ${e.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=Gm,s.Color=pr,s.ColorMode=Fa,s.CullFaceMode=Vs,s.DEMData=Ba,s.DataConstantProperty=W,s.DedupedRequest=pg,s.DepthMode=Fc,s.EXTENT=kn,s.Elevation=class{isDataAvailableAtPoint(n){const e=this._source();if(this.isUsingMockSource()||!e||n.y<0||n.y>1)return!1;const r=e.getSource().maxzoom,o=1<<r,u=Math.floor(n.x),d=Math.floor((n.x-u)*o),m=Math.floor(n.y*o),_=this.findDEMTileFor(new _a(r,u,r,d,m));return!(!_||!_.dem)}getAtPointOrZero(n,e=0){return this.getAtPoint(n,e)||0}getAtPoint(n,e,r=!0){if(this.isUsingMockSource())return null;e==null&&(e=null);const o=this._source();if(!o||n.y<0||n.y>1)return e;const u=o.getSource().maxzoom,d=1<<u,m=Math.floor(n.x),_=n.x-m,S=new _a(u,m,u,Math.floor(_*d),Math.floor(n.y*d)),T=this.findDEMTileFor(S);if(!T||!T.dem)return e;const I=T.dem,z=1<<T.tileID.canonical.z,O=(_*z-T.tileID.canonical.x)*I.dim,j=(n.y*z-T.tileID.canonical.y)*I.dim,V=Math.floor(O),Z=Math.floor(j);return(r?this.exaggeration():1)*Sr(Sr(I.get(V,Z),I.get(V,Z+1),j-Z),Sr(I.get(V+1,Z),I.get(V+1,Z+1),j-Z),O-V)}getAtTileOffset(n,e,r){const o=1<<n.canonical.z;return this.getAtPointOrZero(new Vf(n.wrap+(n.canonical.x+e/kn)/o,(n.canonical.y+r/kn)/o))}getAtTileOffsetFunc(n,e,r,o){return u=>{const d=this.getAtTileOffset(n,u.x,u.y),m=o.upVector(n.canonical,u.x,u.y);return Oa(m,m,d*o.upVectorScale(n.canonical,e,r).metersToTile),m}}getForTilePoints(n,e,r,o){if(this.isUsingMockSource())return!1;const u=ld.create(this,n,o);return!!u&&(e.forEach(d=>{d[2]=this.exaggeration()*u.getElevationAt(d[0],d[1],r)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const e=this.findDEMTileFor(n);if(!e||!e.dem)return null;const r=e.dem.tree,o=e.tileID,u=1<<n.canonical.z-o.canonical.z;let d=n.canonical.x/u-o.canonical.x,m=n.canonical.y/u-o.canonical.y,_=0;for(let S=0;S<n.canonical.z-o.canonical.z&&!r.leaves[_];S++){d*=2,m*=2;const T=2*Math.floor(m)+Math.floor(d);_=r.childOffsets[_]+T,d%=1,m%=1}return{min:this.exaggeration()*r.minimums[_],max:this.exaggeration()*r.maximums[_]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,e,r){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=po,s.EvaluationParameters=L,s.Event=Yo,s.Evented=Ys,s.FillExtrusionBucket=up,s.Frustum=kh,s.FrustumCorners=Of,s.GLOBE_RADIUS=$l,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=b_,s.GLOBE_ZOOM_THRESHOLD_MIN=Aa,s.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_fillGridMeshWithLods(n,e){const r=new Ot,o=new gn,u=[],d=n+1+2,m=e[0]+1,_=e[0]+1+(1+e.length),S=(T,I,z)=>{let O=T===d-1?T-2:T===0?T:T-1;return O+=z?24575:0,[O,I]};for(let T=0;T<d;++T)r.emplaceBack(...S(T,0,!0));for(let T=0;T<m;++T)for(let I=0;I<d;++I)r.emplaceBack(...S(I,T,(I===0||I===d-1)&&!0));for(let T=0;T<e.length;++T){const I=e[T];for(let z=0;z<d;++z)r.emplaceBack(...S(z,I,!0))}for(let T=0;T<e.length;++T){const I=o.length,z=e[T]+1+2,O=new gn;for(let Z=0;Z<z-1;Z++){const ne=Z===z-2,fe=ne?d*(_-e.length+T-Z):d;for(let be=0;be<d-1;be++){const he=Z*d+be;Z===0||ne||be===0||be===d-2?(O.emplaceBack(he+1,he,he+fe),O.emplaceBack(he+fe,he+fe+1,he+1)):(o.emplaceBack(he+1,he,he+fe),o.emplaceBack(he+fe,he+fe+1,he+1))}}const j=Bi.simpleSegment(0,I,r.length,o.length-I);for(let Z=0;Z<O.uint16.length;Z+=3)o.emplaceBack(O.uint16[Z],O.uint16[Z+1],O.uint16[Z+2]);const V=Bi.simpleSegment(0,I,r.length,o.length-I);u.push({withoutSkirts:j,withSkirts:V})}return{vertices:r,indices:o,segments:u}}_createGrid(n){const e=this._fillGridMeshWithLods(wu,Bf);this._gridSegments=e.segments,this._gridBuffer=n.createVertexBuffer(e.vertices,rs.members),this._gridIndexBuffer=n.createIndexBuffer(e.indices,!0)}_createPoles(n){const e=new gn;for(let u=0;u<=wu;u++)e.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=n.createIndexBuffer(e,!0);const r=new ui,o=new ui;this._poleSegments=[];for(let u=0,d=0;u<Aa;u++){const m=360/(1<<u);r.emplaceBack(0,-$l,0,.5,0),o.emplaceBack(0,-$l,0,.5,1);for(let _=0;_<=wu;_++){const S=_/wu,T=Sr(0,m,S),[I,z,O]=as(T_,ab,T,$l);r.emplaceBack(I,z,O,S,0),o.emplaceBack(I,z,O,S,1)}this._poleSegments.push(Bi.simpleSegment(d,0,66,64)),d+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(r,hy,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(o,hy,!1)}getGridBuffers(n,e){return[this._gridBuffer,this._gridIndexBuffer,e?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,e){if(!this._wireframeSegments){const r=new Ca,o=wu,u=o+1+2,d=1;this._wireframeSegments=[];for(let m=0,_=0;m<Bf.length;m++){const S=Bf[m];for(let I=d;I<S+d;I++)for(let z=d;z<o+d;z++){const O=I*u+z;r.emplaceBack(O,O+1),r.emplaceBack(O,O+u),r.emplaceBack(O,O+u+1)}const T=S*o*3;this._wireframeSegments.push(Bi.simpleSegment(0,_,(S+1)*u,T)),_+=T}this._wireframeIndexBuffer=n.createIndexBuffer(r)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[e]]}},s.GlyphManager=td,s.ImagePosition=Zy,s.KDBush=yv,s.LivePerformanceUtils=Xr,s.LngLat=Vr,s.LngLatBounds=Is,s.LocalGlyphMode=qh,s.MAX_MERCATOR_LATITUDE=Ha,s.MercatorCoordinate=Vf,s.ONE_EM=xa,s.OverscaledTileID=_a,s.PerformanceMarkers=En,s.Point=ut,s.Properties=ve,s.RGBAImage=Vo,s.Ray=pl,s.RequestManager=class{constructor(n,e,r){this._transformRequestFn=n,this._customAccessToken=e,this._silenceAuthErrors=!!r,this._createSkuToken()}_createSkuToken(){const n=function(){let e="";for(let r=0;r<10;r++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Xe,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,e){return this._transformRequestFn&&this._transformRequestFn(n,e)||{url:n}}normalizeStyleURL(n,e){if(!ze(n))return n;const r=Gt(n);return r.path=`/styles/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeGlyphsURL(n,e){if(!ze(n))return n;const r=Gt(n);return r.path=`/fonts/v1${r.path}`,this._makeAPIURL(r,this._customAccessToken||e)}normalizeSourceURL(n,e,r,o){if(!ze(n))return n;const u=Gt(n);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),r&&u.params.push(`language=${r}`),o&&u.params.push(`worldview=${o}`),this._makeAPIURL(u,this._customAccessToken||e)}normalizeSpriteURL(n,e,r,o){const u=Gt(n);return ze(n)?(u.path=`/styles/v1${u.path}/sprite${e}${r}`,this._makeAPIURL(u,this._customAccessToken||o)):(u.path+=`${e}${r}`,kt(u))}normalizeTileURL(n,e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!ze(n))return n;const o=Gt(n);o.path=o.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${e||r&&o.authority!=="raster"&&r===512?"@2x":""}${J.supported?".webp":"$1"}`),o.authority==="raster"?o.path=`/${X.RASTER_URL_PREFIX}${o.path}`:(o.path=o.path.replace(/^.+\/v4\//,"/"),o.path=`/${X.TILE_URL_VERSION}${o.path}`);const u=this._customAccessToken||function(d){for(const m of d){const _=m.match(/^access_token=(.*)$/);if(_)return _[1]}return null}(o.params)||X.ACCESS_TOKEN;return X.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&o.params.push(`sku=${this._skuToken}`),this._makeAPIURL(o,u)}canonicalizeTileURL(n,e){const r=Gt(n);if(!r.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!r.path.match(/\.[\w]+$/))return n;let o="mapbox://";r.path.match(/^\/raster\/v1\//)?o+=`raster/${r.path.replace(`/${X.RASTER_URL_PREFIX}/`,"")}`:o+=`tiles/${r.path.replace(`/${X.TILE_URL_VERSION}/`,"")}`;let u=r.params;return e&&(u=u.filter(d=>!d.match(/^access_token=/))),u.length&&(o+=`?${u.join("&")}`),o}canonicalizeTileset(n,e){const r=!!e&&ze(e),o=[];for(const u of n.tiles||[])$e(u)?o.push(this.canonicalizeTileURL(u,r)):o.push(u);return o}_makeAPIURL(n,e){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",o=Gt(X.API_URL);if(n.protocol=o.protocol,n.authority=o.authority,n.protocol==="http"){const u=n.params.indexOf("secure");u>=0&&n.params.splice(u,1)}if(o.path!=="/"&&(n.path=`${o.path}${n.path}`),!X.REQUIRE_ACCESS_TOKEN)return kt(n);if(e=e||X.ACCESS_TOKEN,!this._silenceAuthErrors){if(!e)throw new Error(`An API access token is required to use Mapbox GL. ${r}`);if(e[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${r}`)}return n.params=n.params.filter(u=>u.indexOf("access_token")===-1),n.params.push(`access_token=${e||""}`),kt(n)}},s.ResourceType=dr,s.SegmentVector=Bi,s.SourceCache=$s,s.StencilMode=ml,s.StructArrayLayout1ui2=Bo,s.StructArrayLayout2f1f2i16=In,s.StructArrayLayout2i4=Ot,s.StructArrayLayout2ui4=Ca,s.StructArrayLayout3f12=mr,s.StructArrayLayout3ui6=gn,s.StructArrayLayout4i8=_t,s.StructArrayLayout5f20=ui,s.Texture=Ap,s.Tile=Kl,s.Transitionable=q,s.Uniform1f=pc,s.Uniform1i=class extends Fo{constructor(n){super(n),this.current=0}set(n,e,r){this.fetchUniformLocation(n,e)&&this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},s.Uniform2f=class extends Fo{constructor(n){super(n),this.current=[0,0]}set(n,e,r){this.fetchUniformLocation(n,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1])))}},s.Uniform3f=class extends Fo{constructor(n){super(n),this.current=[0,0,0]}set(n,e,r){this.fetchUniformLocation(n,e)&&(r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2])))}},s.Uniform4f=pm,s.UniformColor=mm,s.UniformMatrix2f=class extends Fo{constructor(n){super(n),this.current=ny}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let o=0;o<4;o++)if(r[o]!==this.current[o]){this.current=r,this.gl.uniformMatrix2fv(this.location,!1,r);break}}}},s.UniformMatrix3f=class extends Fo{constructor(n){super(n),this.current=ty}set(n,e,r){if(this.fetchUniformLocation(n,e)){for(let o=0;o<9;o++)if(r[o]!==this.current[o]){this.current=r,this.gl.uniformMatrix3fv(this.location,!1,r);break}}}},s.UniformMatrix4f=class extends Fo{constructor(n){super(n),this.current=ey}set(n,e,r){if(this.fetchUniformLocation(n,e)){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let o=1;o<16;o++)if(r[o]!==this.current[o]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}}},s.UnwrappedTileID=H_,s.ValidationError=nn,s.VectorTileFeature=Vm,s.VectorTileWorkerSource=class extends Ys{constructor(n,e,r,o,u){super(),this.actor=n,this.layerIndex=e,this.availableImages=r,this.loadVectorData=u||mg,this.loading={},this.loaded={},this.deduped=new pg(n.scheduler),this.isSpriteLoaded=o,this.scheduler=n.scheduler}loadTile(n,e){const r=n.uid,o=n&&n.request,u=o&&o.collectResourceTiming,d=this.loading[r]=new dg(n);d.abort=this.loadVectorData(n,(m,_)=>{const S=!this.loading[r];if(delete this.loading[r],S||m||!_)return d.status="done",S||(this.loaded[r]=d),e(m);const T=_.rawData,I={};_.expires&&(I.expires=_.expires),_.cacheControl&&(I.cacheControl=_.cacheControl),d.vectorTile=_.vectorTile||new Oy(new Gh(T));const z=()=>{d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,(O,j)=>{if(O||!j)return e(O);const V={};if(u){const Z=$r(o);Z.length>0&&(V.resourceTiming=JSON.parse(JSON.stringify(Z)))}e(null,Vn({rawTileData:T.slice(0)},j,I,V))})};this.isSpriteLoaded?z():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(z,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):z()}),this.loaded=this.loaded||{},this.loaded[r]=d})}reloadTile(n,e){const r=this.loaded,o=n.uid,u=this;if(r&&r[o]){const d=r[o];d.showCollisionBoxes=n.showCollisionBoxes,d.enableTerrain=!!n.enableTerrain,d.projection=n.projection,d.tileTransform=Hh(n.tileID.canonical,n.projection);const m=(_,S)=>{const T=d.reloadCallback;T&&(delete d.reloadCallback,d.parse(d.vectorTile,u.layerIndex,this.availableImages,u.actor,T)),e(_,S)};d.status==="parsing"?d.reloadCallback=m:d.status==="done"&&(d.vectorTile?d.parse(d.vectorTile,this.layerIndex,this.availableImages,this.actor,m):m())}}abortTile(n,e){const r=n.uid,o=this.loading[r];o&&(o.abort&&o.abort(),delete this.loading[r]),e()}removeTile(n,e){const r=this.loaded,o=n.uid;r&&r[o]&&delete r[o],e()}},s.WritingMode=cs,s.ZoomDependentExpression=Ms,s.add=Ls,s.addDynamicAttributes=Mp,s.adjoint=function(n,e){var r=e[0],o=e[1],u=e[2],d=e[3],m=e[4],_=e[5],S=e[6],T=e[7],I=e[8];return n[0]=m*I-_*T,n[1]=u*T-o*I,n[2]=o*_-u*m,n[3]=_*S-d*I,n[4]=r*I-u*S,n[5]=u*d-r*_,n[6]=d*T-m*S,n[7]=o*S-r*T,n[8]=r*m-o*d,n},s.asyncAll=An,s.bezier=cn,s.bindAll=Or,s.boundsAttributes=od,s.bufferConvexPolygon=function(n,e){const r=[];for(let o=0;o<n.length;o++){const u=Fn(o-1,-1,n.length-1),d=Fn(o+1,-1,n.length-1),m=n[o],_=n[d],S=n[u].sub(m).unit(),T=_.sub(m).unit(),I=T.angleWithSep(S.x,S.y),z=S.add(T).unit().mult(-1*e/Math.sin(I/2));r.push(m.add(z))}return r},s.cacheEntryPossiblyAdded=function(n){Un++,Un>at&&(n.getActor().send("enforceCacheSizeLimit",ft),Un=0)},s.calculateGlobeLabelMatrix=function(n,e){const{x:r,y:o}=n.point,u=E_(r,o,n.worldSize/n._pixelsPerMercatorPixel,0,0);return dl(u,u,dy(Gl(e)))},s.calculateGlobeMatrix=function(n){const{x:e,y:r}=n.point,{lng:o,lat:u}=n._center;return E_(e,r,n.worldSize,o,u)},s.calculateGlobeMercatorMatrix=function(n){const e=n.pixelsPerMeter,r=e/Fs(1,n.center.lat),o=No(new Float64Array(16));return gc(o,o,[n.point.x,n.point.y,0]),Mh(o,o,[r,r,e]),Float32Array.from(o)},s.circumferenceAtLatitude=Rh,s.clamp=It,s.clearTileCache=function(n){if(!sr())return;const e=N.caches.delete(Ii);n&&e.catch(n).then(()=>n())},s.clipLine=Ky,s.clone=function(n){var e=new $i(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e},s.clone$1=Zr,s.collisionCircleLayout=cp,s.config=X,s.conjugate=function(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n},s.create=function(){var n=new $i(16);return $i!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},s.create$1=m_,s.createExpression=Pl,s.createLayout=Oe,s.createStyleLayer=function(n){return n.type==="custom"?new c1(n):new f1[n.type](n)},s.cross=_o,s.degToRad=et,s.distance=function(n,e){return Math.hypot(e[0]-n[0],e[1]-n[1],e[2]-n[2])},s.div=function(n,e,r){return n[0]=e[0]/r[0],n[1]=e[1]/r[1],n[2]=e[2]/r[2],n},s.dot=Uo,s.earthRadius=xc,s.ease=Cr,s.easeCubicInOut=Hn,s.ecefToLatLng=function([n,e,r]){const o=Math.hypot(n,e,r),u=Math.atan2(n,r),d=.5*Math.PI-Math.acos(-e/o);return new Vr($t(u),$t(d))},s.emitValidationErrors=Oo,s.endsWith=xi,s.enforceCacheSizeLimit=function(n){Ht(),Jt&&Jt.then(e=>{e.keys().then(r=>{for(let o=0;o<r.length-n;o++)e.delete(r[o])})})},s.evaluateSizeForFeature=hp,s.evaluateSizeForZoom=Zf,s.evaluateVariableOffset=mx,s.evented=v,s.exactEquals=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]},s.exactEquals$1=function(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]},s.exported=nr,s.exported$1=J,s.extend=Vn,s.extend$1=mo,s.fillExtrusionHeightLift=$m,s.filterObject=Yr,s.fromMat4=function(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n},s.fromQuat=function(n,e){var r=e[0],o=e[1],u=e[2],d=e[3],m=r+r,_=o+o,S=u+u,T=r*m,I=o*m,z=o*_,O=u*m,j=u*_,V=u*S,Z=d*m,ne=d*_,fe=d*S;return n[0]=1-z-V,n[1]=I+fe,n[2]=O-ne,n[3]=0,n[4]=I-fe,n[5]=1-T-V,n[6]=j+Z,n[7]=0,n[8]=O+ne,n[9]=j-Z,n[10]=1-T-z,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},s.fromRotation=function(n,e){var r=Math.sin(e),o=Math.cos(e);return n[0]=o,n[1]=r,n[2]=0,n[3]=-r,n[4]=o,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},s.fromScaling=g_,s.furthestTileCorner=function(n){const e=Math.round((n+45+360)%360/90)%4;return un[e]},s.getAABBPointSquareDist=function(n,e,r){let o=0;for(let u=0;u<2;++u){const d=r?r[u]:0;n[u]>d&&(o+=(n[u]-d)*(n[u]-d)),e[u]<d&&(o+=(d-e[u])*(d-e[u]))}return o},s.getAnchorAlignment=yp,s.getAnchorJustification=rg,s.getBounds=function(n){let e=1/0,r=1/0,o=-1/0,u=-1/0;for(const d of n)e=Math.min(e,d.x),r=Math.min(r,d.y),o=Math.max(o,d.x),u=Math.max(u,d.y);return{min:new ut(e,r),max:new ut(o,u)}},s.getColumn=Xi,s.getDefaultExportFromCjs=Et,s.getGridMatrix=function(n,e,r,o){const u=e.getNorth(),d=e.getSouth(),m=e.getWest(),_=e.getEast(),S=1<<n.z,T=_-m,I=u-d,z=T/wu,O=-I/Bf[r],j=[0,z,0,O,0,0,u,m,0];if(n.z>0){const V=180/o;Fi(j,j,[V/T+1,0,0,0,V/I+1,0,-.5*V/z,.5*V/O,1])}return j[2]=S,j[5]=n.x,j[8]=n.y,j},s.getImage=ye,s.getJSON=function(n,e){return Rr(Vn(n,{type:"json"}),e)},s.getLatitudinalLod=function(n){const e=Ha-5;n=It(n,-e,e)/e*90;const r=Math.pow(Math.abs(Math.sin(et(n))),3);return Math.round(r*(Bf.length-1))},s.getMapSessionAPI=yn,s.getPerformanceMeasurement=$r,s.getProjection=bx,s.getRTLTextPluginStatus=b,s.getReferrer=xr,s.getTilePoint=function(n,{x:e,y:r},o=0){return new ut(((e-o)*n.scale-n.x)*kn,(r*n.scale-n.y)*kn)},s.getTileVec3=function(n,e,r=0){return Lf(((e.x-r)*n.scale-n.x)*kn,(e.y*n.scale-n.y)*kn,C_(e.z,e.y))},s.getVideo=function(n,e){const r=N.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(let o=0;o<n.length;o++){const u=N.document.createElement("source");Fr(n[o])||(r.crossOrigin="Anonymous"),u.src=n[o],r.appendChild(u)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(n){const e=[0,0,0],r=No(new Float64Array(16));return dl(r,n.pixelMatrix,n.globeMatrix),Ri(e,e,r),new ut(e[0],e[1])},s.globeDenormalizeECEF=dy,s.globeECEFOrigin=function(n,e){const r=[0,0,0];return Ri(r,r,Os(Gl(e.canonical))),Ri(r,r,n),r},s.globeMetersToEcef=Em,s.globeNormalizeECEF=Os,s.globePixelsToTileUnits=function(n,e){return kn/(512*Math.pow(2,n))*_c(Gl(e))},s.globePoleMatrixForTile=function(n,e,r){const o=No(new Float64Array(16)),u=(e/(1<<n)-.5)*Math.PI*2;return _m(o,r.globeMatrix,u),Float32Array.from(o)},s.globeTileBounds=Gl,s.globeTiltAtLngLat=py,s.globeToMercatorTransition=jf,s.globeUseCustomAntiAliasing=function(n,e,r){const o=jf(r.zoom),u=n.style.map._antialias,d=!!e.extStandardDerivatives,m=e.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return o===0&&!u&&!m&&d},s.identity=No,s.identity$1=y_,s.invert=If,s.isFullscreen=function(){return!!N.document.fullscreenElement||!!N.document.webkitFullscreenElement},s.isLngLatBehindGlobe=Dh,s.isMapAuthenticated=function(n){return en.has(n)},s.isMapboxURL=ze,s.isSafariWithAntialiasingBug=function(n){const e=n.navigator?n.navigator.userAgent:null;return!!Wi(n)&&e&&(e.match("Version/15.4")||e.match("Version/15.5")||e.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=qa,s.latLngToECEF=os,s.len=eb,s.length=Jd,s.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},s.lngFromMercatorX=ss,s.loadVectorTile=mg,s.makeRequest=Rr,s.mapValue=function(n,e,r,o,u){return It((n-e)/(r-e)*(u-o)+o,o,u)},s.mercatorScale=Cm,s.mercatorXfromLng=bo,s.mercatorYfromLat=Bs,s.mercatorZfromAltitude=Fs,s.mul=Q0,s.mul$1=kS,s.multiply=dl,s.multiply$1=Fi,s.multiply$2=uy,s.nextPowerOfTwo=hr,s.normalize=pa,s.normalize$1=__,s.normalize$2=Pf,s.number=Sr,s.ortho=function(n,e,r,o,u,d,m){var _=1/(e-r),S=1/(o-u),T=1/(d-m);return n[0]=-2*_,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*S,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*T,n[11]=0,n[12]=(e+r)*_,n[13]=(u+o)*S,n[14]=(m+d)*T,n[15]=1,n},s.pbf=qy,s.perspective=function(n,e,r,o,u){var d,m=1/Math.tan(e/2);return n[0]=m/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=m,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,u!=null&&u!==1/0?(n[10]=(u+o)*(d=1/(o-u)),n[14]=2*u*o*d):(n[10]=-1,n[14]=-2*o),n},s.pick=function(n,e){const r={};for(let o=0;o<e.length;o++){const u=e[o];u in n&&(r[u]=n[u])}return r},s.plugin=D,s.pointGeometry=Mn,s.polesInViewport=function(n){const e=No(new Float64Array(16));dl(e,n.pixelMatrix,n.globeMatrix);const r=[0,xo,0],o=[0,is,0];return Ri(r,r,e),Ri(o,o,e),[r[0]>0&&r[0]<=n.width&&r[1]>0&&r[1]<=n.height&&!Dh(n,new Vr(n.center.lat,90)),o[0]>0&&o[0]<=n.width&&o[1]>0&&o[1]<=n.height&&!Dh(n,new Vr(n.center.lat,-90))]},s.polygonContainsPoint=Ih,s.polygonIntersectsBox=Lm,s.polygonIntersectsPolygon=vy,s.polygonizeBounds=function(n,e,r=0,o=!0){const u=new ut(r,r),d=n.sub(u),m=e.add(u),_=[d,new ut(m.x,d.y),m,new ut(d.x,m.y)];return o&&_.push(d.clone()),_},s.posAttributes=rs,s.postMapLoadEvent=ot,s.postPerformanceEvent=jt,s.postTurnstileEvent=Dt,s.potpack=Jf,s.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},s.radToDeg=$t,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(n){return n({pluginStatus:f,pluginURL:i}),v.on("pluginStateChange",n),n},s.removeAuthState=function(n){en.delete(n)},s.renderColorRamp=Sy,s.resample=Mm,s.rotateX=oy,s.rotateX$1=wm,s.rotateY=_m,s.rotateY$1=v_,s.rotateZ=function(n,e,r){var o=Math.sin(r),u=Math.cos(r),d=e[0],m=e[1],_=e[2],S=e[3],T=e[4],I=e[5],z=e[6],O=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=d*u+T*o,n[1]=m*u+I*o,n[2]=_*u+z*o,n[3]=S*u+O*o,n[4]=T*u-d*o,n[5]=I*u-m*o,n[6]=z*u-_*o,n[7]=O*u-S*o,n},s.rotateZ$1=function(n,e,r){r*=.5;var o=e[0],u=e[1],d=e[2],m=e[3],_=Math.sin(r),S=Math.cos(r);return n[0]=o*S+u*_,n[1]=u*S-o*_,n[2]=d*S+m*_,n[3]=m*S-d*_,n},s.scale=Mh,s.scale$1=bm,s.scale$2=Oa,s.scaleAndAdd=bu,s.set=function(n,e,r,o){return n[0]=e,n[1]=r,n[2]=o,n},s.setCacheLimits=function(n,e){ft=n,at=e},s.setColumn=function(n,e,r){n[4*e+0]=r[0],n[4*e+1]=r[1],n[4*e+2]=r[2],n[4*e+3]=r[3]},s.setRTLTextPlugin=function(n,e,r=!1){if(f===Xd||f===cl||f===kf)throw new Error("setRTLTextPlugin cannot be called multiple times.");i=nr.resolveURL(n),f=Xd,vu=e,p(),r||M()},s.smoothstep=Ee,s.spec=ct,s.squaredLength=function(n){var e=n[0],r=n[1],o=n[2];return e*e+r*r+o*o},s.storeAuthState=function(n,e){e?en.add(n):en.delete(n)},s.sub=zs,s.subtract=ly,s.symbolSize=Ki,s.tileAABB=function(n,e,r,o,u,d,m,_,S){if(S.name==="globe")return ib(n,e,new Gm(r,o,u));const T=Hh({z:r,x:o,y:u},S);return new Gi([(d+T.x/T.scale)*e,e*(T.y/T.scale),m],[(d+T.x2/T.scale)*e,e*(T.y2/T.scale),_])},s.tileCornersToBounds=Ff,s.tileTransform=Hh,s.transformMat3=function(n,e,r){var o=e[0],u=e[1],d=e[2];return n[0]=o*r[0]+u*r[3]+d*r[6],n[1]=o*r[1]+u*r[4]+d*r[7],n[2]=o*r[2]+u*r[5]+d*r[8],n},s.transformMat4=Ri,s.transformMat4$1=Ah,s.transformQuat=wr,s.transitionTileAABBinECEF=w_,s.translate=gc,s.transpose=function(n,e){if(n===e){var r=e[1],o=e[2],u=e[5];n[1]=e[3],n[2]=e[6],n[3]=r,n[5]=e[7],n[6]=o,n[7]=u}else n[0]=e[0],n[1]=e[3],n[2]=e[6],n[3]=e[1],n[4]=e[4],n[5]=e[7],n[6]=e[2],n[7]=e[5],n[8]=e[8];return n},s.triggerPluginCompletionEvent=l,s.uniqueId=Vi,s.updateGlobeVertexNormal=function(n,e,r,o,u){const d=5*e+2;n.float32[d+0]=r,n.float32[d+1]=o,n.float32[d+2]=u},s.validateCustomStyleLayer=function(n){const e=[],r=n.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),n.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},s.validateFilter=n=>Ta(_h(n)),s.validateFog=n=>Ta(Ar(n)),s.validateLayer=n=>Ta(Cf(n)),s.validateLight=n=>Ta(mu(n)),s.validateSource=n=>Ta(dm(n)),s.validateStyle=Ur,s.validateTerrain=n=>Ta(ta(n)),s.values=Me,s.vectorTile=op,s.version=G,s.warnOnce=Wn,s.window=N,s.wrap=Fn}),C(["./shared"],function(s){function N(_e){if(typeof _e=="number"||typeof _e=="boolean"||typeof _e=="string"||_e==null)return JSON.stringify(_e);if(Array.isArray(_e)){let ee="[";for(const ye of _e)ee+=`${N(ye)},`;return`${ee}]`}let K="{";for(const ee of Object.keys(_e).sort())K+=`${ee}:${N(_e[ee])},`;return`${K}}`}function G(_e){let K="";for(const ee of s.refProperties)K+=`/${N(_e[ee])}`;return K}class H{constructor(K){this.keyCache={},K&&this.replace(K)}replace(K){this._layerConfigs={},this._layers={},this.update(K,[])}update(K,ee){for(const Se of K)this._layerConfigs[Se.id]=Se,(this._layers[Se.id]=s.createStyleLayer(Se)).compileFilter(),this.keyCache[Se.id]&&delete this.keyCache[Se.id];for(const Se of ee)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const ye=function(Se,ze){const $e={};for(let Le=0;Le<Se.length;Le++){const Ye=ze&&ze[Se[Le].id]||G(Se[Le]);ze&&(ze[Se[Le].id]=Ye);let zt=$e[Ye];zt||(zt=$e[Ye]=[]),zt.push(Se[Le])}const Ge=[];for(const Le in $e)Ge.push($e[Le]);return Ge}(s.values(this._layerConfigs),this.keyCache);for(const Se of ye){const ze=Se.map(Gt=>this._layers[Gt.id]),$e=ze[0];if($e.visibility==="none")continue;const Ge=$e.source||"";let Le=this.familiesBySource[Ge];Le||(Le=this.familiesBySource[Ge]={});const Ye=$e.sourceLayer||"_geojsonTileLayer";let zt=Le[Ye];zt||(zt=Le[Ye]=[]),zt.push(ze)}}}class X{loadTile(K,ee){const{uid:ye,encoding:Se,rawImageData:ze,padding:$e,buildQuadTree:Ge}=K,Le=s.window.ImageBitmap&&ze instanceof s.window.ImageBitmap?this.getImageData(ze,$e):ze;ee(null,new s.DEMData(ye,Le,Se,$e<1,Ge))}getImageData(K,ee){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(K.width,K.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=K.width,this.offscreenCanvas.height=K.height,this.offscreenCanvasContext.drawImage(K,0,0,K.width,K.height);const ye=this.offscreenCanvasContext.getImageData(-ee,-ee,K.width+2*ee,K.height+2*ee);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ye}}function J(_e,K){if(_e.length!==0){Pe(_e[0],K);for(var ee=1;ee<_e.length;ee++)Pe(_e[ee],!K)}}function Pe(_e,K){for(var ee=0,ye=0,Se=0,ze=_e.length,$e=ze-1;Se<ze;$e=Se++){var Ge=(_e[Se][0]-_e[$e][0])*(_e[$e][1]+_e[Se][1]),Le=ee+Ge;ye+=Math.abs(ee)>=Math.abs(Ge)?ee-Le+Ge:Ge-Le+ee,ee=Le}ee+ye>=0!=!!K&&_e.reverse()}var Re=s.getDefaultExportFromCjs(function _e(K,ee){var ye,Se=K&&K.type;if(Se==="FeatureCollection")for(ye=0;ye<K.features.length;ye++)_e(K.features[ye],ee);else if(Se==="GeometryCollection")for(ye=0;ye<K.geometries.length;ye++)_e(K.geometries[ye],ee);else if(Se==="Feature")_e(K.geometry,ee);else if(Se==="Polygon")J(K.coordinates,ee);else if(Se==="MultiPolygon")for(ye=0;ye<K.coordinates.length;ye++)J(K.coordinates[ye],ee);return K});const qe=s.VectorTileFeature.prototype.toGeoJSON;var je={exports:{}},Ne=s.pointGeometry,Xe=s.vectorTile.VectorTileFeature,Et=St;function St(_e,K){this.options=K||{},this.features=_e,this.length=_e.length}function Qe(_e,K){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=K||4096}St.prototype.feature=function(_e){return new Qe(this.features[_e],this.options.extent)},Qe.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var K=0;K<_e.length;K++){for(var ee=_e[K],ye=[],Se=0;Se<ee.length;Se++)ye.push(new Ne(ee[Se][0],ee[Se][1]));this.geometry.push(ye)}return this.geometry},Qe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,K=1/0,ee=-1/0,ye=1/0,Se=-1/0,ze=0;ze<_e.length;ze++)for(var $e=_e[ze],Ge=0;Ge<$e.length;Ge++){var Le=$e[Ge];K=Math.min(K,Le.x),ee=Math.max(ee,Le.x),ye=Math.min(ye,Le.y),Se=Math.max(Se,Le.y)}return[K,ye,ee,Se]},Qe.prototype.toGeoJSON=Xe.prototype.toGeoJSON;var Nt=s.pbf,Mn=Et;function dn(_e){var K=new Nt;return function(ee,ye){for(var Se in ee.layers)ye.writeMessage(3,ut,ee.layers[Se])}(_e,K),K.finish()}function ut(_e,K){var ee;K.writeVarintField(15,_e.version||1),K.writeStringField(1,_e.name||""),K.writeVarintField(5,_e.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ee=0;ee<_e.length;ee++)ye.feature=_e.feature(ee),K.writeMessage(2,qn,ye);var Se=ye.keys;for(ee=0;ee<Se.length;ee++)K.writeStringField(3,Se[ee]);var ze=ye.values;for(ee=0;ee<ze.length;ee++)K.writeMessage(4,Hn,ze[ee])}function qn(_e,K){var ee=_e.feature;ee.id!==void 0&&K.writeVarintField(1,ee.id),K.writeMessage(2,Jn,_e),K.writeVarintField(3,ee.type),K.writeMessage(4,un,ee)}function Jn(_e,K){var ee=_e.feature,ye=_e.keys,Se=_e.values,ze=_e.keycache,$e=_e.valuecache;for(var Ge in ee.properties){var Le=ee.properties[Ge],Ye=ze[Ge];if(Le!==null){Ye===void 0&&(ye.push(Ge),ze[Ge]=Ye=ye.length-1),K.writeVarint(Ye);var zt=typeof Le;zt!=="string"&&zt!=="boolean"&&zt!=="number"&&(Le=JSON.stringify(Le));var Gt=zt+":"+Le,kt=$e[Gt];kt===void 0&&(Se.push(Le),$e[Gt]=kt=Se.length-1),K.writeVarint(kt)}}}function et(_e,K){return(K<<3)+(7&_e)}function $t(_e){return _e<<1^_e>>31}function un(_e,K){for(var ee=_e.loadGeometry(),ye=_e.type,Se=0,ze=0,$e=ee.length,Ge=0;Ge<$e;Ge++){var Le=ee[Ge],Ye=1;ye===1&&(Ye=Le.length),K.writeVarint(et(1,Ye));for(var zt=ye===3?Le.length-1:Le.length,Gt=0;Gt<zt;Gt++){Gt===1&&ye!==1&&K.writeVarint(et(2,zt-1));var kt=Le[Gt].x-Se,Ln=Le[Gt].y-ze;K.writeVarint($t(kt)),K.writeVarint($t(Ln)),Se+=kt,ze+=Ln}ye===3&&K.writeVarint(et(7,1))}}function Hn(_e,K){var ee=typeof _e;ee==="string"?K.writeStringField(1,_e):ee==="boolean"?K.writeBooleanField(7,_e):ee==="number"&&(_e%1!=0?K.writeDoubleField(3,_e):_e<0?K.writeSVarintField(6,_e):K.writeVarintField(5,_e))}je.exports=dn,je.exports.fromVectorTileJs=dn,je.exports.fromGeojsonVt=function(_e,K){K=K||{};var ee={};for(var ye in _e)ee[ye]=new Mn(_e[ye].features,K),ee[ye].name=ye,ee[ye].version=K.version,ee[ye].extent=K.extent;return dn({layers:ee})},je.exports.GeoJSONWrapper=Mn;var cn=s.getDefaultExportFromCjs(je.exports);const Cr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},It=Math.fround||(Ee=new Float32Array(1),_e=>(Ee[0]=+_e,Ee[0]));var Ee;const Fn=3,An=5,Me=6;class Vn{constructor(K){this.options=Object.assign(Object.create(Cr),K),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(K){const{log:ee,minZoom:ye,maxZoom:Se}=this.options;ee&&console.time("total time");const ze=`prepare ${K.length} points`;ee&&console.time(ze),this.points=K;const $e=[];for(let Le=0;Le<K.length;Le++){const Ye=K[Le];if(!Ye.geometry)continue;const[zt,Gt]=Ye.geometry.coordinates,kt=It(Ci(zt)),Ln=It(hr(Gt));$e.push(kt,Ln,1/0,Le,-1,1),this.options.reduce&&$e.push(0)}let Ge=this.trees[Se+1]=this._createTree($e);ee&&console.timeEnd(ze);for(let Le=Se;Le>=ye;Le--){const Ye=+Date.now();Ge=this.trees[Le]=this._createTree(this._cluster(Ge,Le)),ee&&console.log("z%d: %d clusters in %dms",Le,Ge.numItems,+Date.now()-Ye)}return ee&&console.timeEnd("total time"),this}getClusters(K,ee){let ye=((K[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,K[1]));let ze=K[2]===180?180:((K[2]+180)%360+360)%360-180;const $e=Math.max(-90,Math.min(90,K[3]));if(K[2]-K[0]>=360)ye=-180,ze=180;else if(ye>ze){const Gt=this.getClusters([ye,Se,180,$e],ee),kt=this.getClusters([-180,Se,ze,$e],ee);return Gt.concat(kt)}const Ge=this.trees[this._limitZoom(ee)],Le=Ge.range(Ci(ye),hr($e),Ci(ze),hr(Se)),Ye=Ge.data,zt=[];for(const Gt of Le){const kt=this.stride*Gt;zt.push(Ye[kt+An]>1?Ti(Ye,kt,this.clusterProps):this.points[Ye[kt+Fn]])}return zt}getChildren(K){const ee=this._getOriginId(K),ye=this._getOriginZoom(K),Se="No cluster with the specified id.",ze=this.trees[ye];if(!ze)throw new Error(Se);const $e=ze.data;if(ee*this.stride>=$e.length)throw new Error(Se);const Ge=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Le=ze.within($e[ee*this.stride],$e[ee*this.stride+1],Ge),Ye=[];for(const zt of Le){const Gt=zt*this.stride;$e[Gt+4]===K&&Ye.push($e[Gt+An]>1?Ti($e,Gt,this.clusterProps):this.points[$e[Gt+Fn]])}if(Ye.length===0)throw new Error(Se);return Ye}getLeaves(K,ee,ye){const Se=[];return this._appendLeaves(Se,K,ee=ee||10,ye=ye||0,0),Se}getTile(K,ee,ye){const Se=this.trees[this._limitZoom(K)],ze=Math.pow(2,K),{extent:$e,radius:Ge}=this.options,Le=Ge/$e,Ye=(ye-Le)/ze,zt=(ye+1+Le)/ze,Gt={features:[]};return this._addTileFeatures(Se.range((ee-Le)/ze,Ye,(ee+1+Le)/ze,zt),Se.data,ee,ye,ze,Gt),ee===0&&this._addTileFeatures(Se.range(1-Le/ze,Ye,1,zt),Se.data,ze,ye,ze,Gt),ee===ze-1&&this._addTileFeatures(Se.range(0,Ye,Le/ze,zt),Se.data,-1,ye,ze,Gt),Gt.features.length?Gt:null}getClusterExpansionZoom(K){let ee=this._getOriginZoom(K)-1;for(;ee<=this.options.maxZoom;){const ye=this.getChildren(K);if(ee++,ye.length!==1)break;K=ye[0].properties.cluster_id}return ee}_appendLeaves(K,ee,ye,Se,ze){const $e=this.getChildren(ee);for(const Ge of $e){const Le=Ge.properties;if(Le&&Le.cluster?ze+Le.point_count<=Se?ze+=Le.point_count:ze=this._appendLeaves(K,Le.cluster_id,ye,Se,ze):ze<Se?ze++:K.push(Ge),K.length===ye)break}return ze}_createTree(K){const ee=new s.KDBush(K.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<K.length;ye+=this.stride)ee.add(K[ye],K[ye+1]);return ee.finish(),ee.data=K,ee}_addTileFeatures(K,ee,ye,Se,ze,$e){for(const Ge of K){const Le=Ge*this.stride,Ye=ee[Le+An]>1;let zt,Gt,kt;if(Ye)zt=Vi(ee,Le,this.clusterProps),Gt=ee[Le],kt=ee[Le+1];else{const xe=this.points[ee[Le+Fn]];zt=xe.properties;const[dt,Dt]=xe.geometry.coordinates;Gt=Ci(dt),kt=hr(Dt)}const Ln={type:1,geometry:[[Math.round(this.options.extent*(Gt*ze-ye)),Math.round(this.options.extent*(kt*ze-Se))]],tags:zt};let jn;jn=Ye||this.options.generateId?ee[Le+Fn]:this.points[ee[Le+Fn]].id,jn!==void 0&&(Ln.id=jn),$e.features.push(Ln)}}_limitZoom(K){return Math.max(this.options.minZoom,Math.min(Math.floor(+K),this.options.maxZoom+1))}_cluster(K,ee){const{radius:ye,extent:Se,reduce:ze,minPoints:$e}=this.options,Ge=ye/(Se*Math.pow(2,ee)),Le=K.data,Ye=[],zt=this.stride;for(let Gt=0;Gt<Le.length;Gt+=zt){if(Le[Gt+2]<=ee)continue;Le[Gt+2]=ee;const kt=Le[Gt],Ln=Le[Gt+1],jn=K.within(Le[Gt],Le[Gt+1],Ge),xe=Le[Gt+An];let dt=xe;for(const Dt of jn){const pe=Dt*zt;Le[pe+2]>ee&&(dt+=Le[pe+An])}if(dt>xe&&dt>=$e){let Dt,pe=kt*xe,ot=Ln*xe,yt=-1;const jt=((Gt/zt|0)<<5)+(ee+1)+this.points.length;for(const rn of jn){const yn=rn*zt;if(Le[yn+2]<=ee)continue;Le[yn+2]=ee;const en=Le[yn+An];pe+=Le[yn]*en,ot+=Le[yn+1]*en,Le[yn+4]=jt,ze&&(Dt||(Dt=this._map(Le,Gt,!0),yt=this.clusterProps.length,this.clusterProps.push(Dt)),ze(Dt,this._map(Le,yn)))}Le[Gt+4]=jt,Ye.push(pe/dt,ot/dt,1/0,jt,-1,dt),ze&&Ye.push(yt)}else{for(let Dt=0;Dt<zt;Dt++)Ye.push(Le[Gt+Dt]);if(dt>1)for(const Dt of jn){const pe=Dt*zt;if(!(Le[pe+2]<=ee)){Le[pe+2]=ee;for(let ot=0;ot<zt;ot++)Ye.push(Le[pe+ot])}}}}return Ye}_getOriginId(K){return K-this.points.length>>5}_getOriginZoom(K){return(K-this.points.length)%32}_map(K,ee,ye){if(K[ee+An]>1){const $e=this.clusterProps[K[ee+Me]];return ye?Object.assign({},$e):$e}const Se=this.points[K[ee+Fn]].properties,ze=this.options.map(Se);return ye&&ze===Se?Object.assign({},ze):ze}}function Ti(_e,K,ee){return{type:"Feature",id:_e[K+Fn],properties:Vi(_e,K,ee),geometry:{type:"Point",coordinates:[(ye=_e[K],360*(ye-.5)),ai(_e[K+1])]}};var ye}function Vi(_e,K,ee){const ye=_e[K+An],Se=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,ze=_e[K+Me],$e=ze===-1?{}:Object.assign({},ee[ze]);return Object.assign($e,{cluster:!0,cluster_id:_e[K+Fn],point_count:ye,point_count_abbreviated:Se})}function Ci(_e){return _e/360+.5}function hr(_e){const K=Math.sin(_e*Math.PI/180),ee=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return ee<0?0:ee>1?1:ee}function ai(_e){const K=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(K))/Math.PI-90}function Or(_e,K,ee,ye){for(var Se,ze=ye,$e=ee-K>>1,Ge=ee-K,Le=_e[K],Ye=_e[K+1],zt=_e[ee],Gt=_e[ee+1],kt=K+3;kt<ee;kt+=3){var Ln=xi(_e[kt],_e[kt+1],Le,Ye,zt,Gt);if(Ln>ze)Se=kt,ze=Ln;else if(Ln===ze){var jn=Math.abs(kt-$e);jn<Ge&&(Se=kt,Ge=jn)}}ze>ye&&(Se-K>3&&Or(_e,K,Se,ye),_e[Se+2]=ze,ee-Se>3&&Or(_e,Se,ee,ye))}function xi(_e,K,ee,ye,Se,ze){var $e=Se-ee,Ge=ze-ye;if($e!==0||Ge!==0){var Le=((_e-ee)*$e+(K-ye)*Ge)/($e*$e+Ge*Ge);Le>1?(ee=Se,ye=ze):Le>0&&(ee+=$e*Le,ye+=Ge*Le)}return($e=_e-ee)*$e+(Ge=K-ye)*Ge}function Dn(_e,K,ee,ye){var Se={id:_e===void 0?null:_e,type:K,geometry:ee,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ze){var $e=ze.geometry,Ge=ze.type;if(Ge==="Point"||Ge==="MultiPoint"||Ge==="LineString")Yr(ze,$e);else if(Ge==="Polygon"||Ge==="MultiLineString")for(var Le=0;Le<$e.length;Le++)Yr(ze,$e[Le]);else if(Ge==="MultiPolygon")for(Le=0;Le<$e.length;Le++)for(var Ye=0;Ye<$e[Le].length;Ye++)Yr(ze,$e[Le][Ye])}(Se),Se}function Yr(_e,K){for(var ee=0;ee<K.length;ee+=3)_e.minX=Math.min(_e.minX,K[ee]),_e.minY=Math.min(_e.minY,K[ee+1]),_e.maxX=Math.max(_e.maxX,K[ee]),_e.maxY=Math.max(_e.maxY,K[ee+1])}function Zr(_e,K,ee,ye){if(K.geometry){var Se=K.geometry.coordinates,ze=K.geometry.type,$e=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2),Ge=[],Le=K.id;if(ee.promoteId?Le=K.properties[ee.promoteId]:ee.generateId&&(Le=ye||0),ze==="Point")oi(Se,Ge);else if(ze==="MultiPoint")for(var Ye=0;Ye<Se.length;Ye++)oi(Se[Ye],Ge);else if(ze==="LineString")Wn(Se,Ge,$e,!1);else if(ze==="MultiLineString"){if(ee.lineMetrics){for(Ye=0;Ye<Se.length;Ye++)Wn(Se[Ye],Ge=[],$e,!1),_e.push(Dn(Le,"LineString",Ge,K.properties));return}Dr(Se,Ge,$e,!1)}else if(ze==="Polygon")Dr(Se,Ge,$e,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(Ye=0;Ye<K.geometry.geometries.length;Ye++)Zr(_e,{id:Le,geometry:K.geometry.geometries[Ye],properties:K.properties},ee,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ye=0;Ye<Se.length;Ye++){var zt=[];Dr(Se[Ye],zt,$e,!0),Ge.push(zt)}}_e.push(Dn(Le,ze,Ge,K.properties))}}function oi(_e,K){K.push(aa(_e[0])),K.push(bi(_e[1])),K.push(0)}function Wn(_e,K,ee,ye){for(var Se,ze,$e=0,Ge=0;Ge<_e.length;Ge++){var Le=aa(_e[Ge][0]),Ye=bi(_e[Ge][1]);K.push(Le),K.push(Ye),K.push(0),Ge>0&&($e+=ye?(Se*Ye-Le*ze)/2:Math.sqrt(Math.pow(Le-Se,2)+Math.pow(Ye-ze,2))),Se=Le,ze=Ye}var zt=K.length-3;K[2]=1,Or(K,0,zt,ee),K[zt+2]=1,K.size=Math.abs($e),K.start=0,K.end=K.size}function Dr(_e,K,ee,ye){for(var Se=0;Se<_e.length;Se++){var ze=[];Wn(_e[Se],ze,ee,ye),K.push(ze)}}function aa(_e){return _e/360+.5}function bi(_e){var K=Math.sin(_e*Math.PI/180),ee=.5-.25*Math.log((1+K)/(1-K))/Math.PI;return ee<0?0:ee>1?1:ee}function Kr(_e,K,ee,ye,Se,ze,$e,Ge){if(ye/=K,ze>=(ee/=K)&&$e<ye)return _e;if($e<ee||ze>=ye)return null;for(var Le=[],Ye=0;Ye<_e.length;Ye++){var zt=_e[Ye],Gt=zt.geometry,kt=zt.type,Ln=Se===0?zt.minX:zt.minY,jn=Se===0?zt.maxX:zt.maxY;if(Ln>=ee&&jn<ye)Le.push(zt);else if(!(jn<ee||Ln>=ye)){var xe=[];if(kt==="Point"||kt==="MultiPoint")va(Gt,xe,ee,ye,Se);else if(kt==="LineString")Wi(Gt,xe,ee,ye,Se,!1,Ge.lineMetrics);else if(kt==="MultiLineString")Xi(Gt,xe,ee,ye,Se,!1);else if(kt==="Polygon")Xi(Gt,xe,ee,ye,Se,!0);else if(kt==="MultiPolygon")for(var dt=0;dt<Gt.length;dt++){var Dt=[];Xi(Gt[dt],Dt,ee,ye,Se,!0),Dt.length&&xe.push(Dt)}if(xe.length){if(Ge.lineMetrics&&kt==="LineString"){for(dt=0;dt<xe.length;dt++)Le.push(Dn(zt.id,kt,xe[dt],zt.tags));continue}kt!=="LineString"&&kt!=="MultiLineString"||(xe.length===1?(kt="LineString",xe=xe[0]):kt="MultiLineString"),kt!=="Point"&&kt!=="MultiPoint"||(kt=xe.length===3?"Point":"MultiPoint"),Le.push(Dn(zt.id,kt,xe,zt.tags))}}}return Le.length?Le:null}function va(_e,K,ee,ye,Se){for(var ze=0;ze<_e.length;ze+=3){var $e=_e[ze+Se];$e>=ee&&$e<=ye&&(K.push(_e[ze]),K.push(_e[ze+1]),K.push(_e[ze+2]))}}function Wi(_e,K,ee,ye,Se,ze,$e){for(var Ge,Le,Ye=Zi(_e),zt=Se===0?ft:at,Gt=_e.start,kt=0;kt<_e.length-3;kt+=3){var Ln=_e[kt],jn=_e[kt+1],xe=_e[kt+2],dt=_e[kt+3],Dt=_e[kt+4],pe=Se===0?Ln:jn,ot=Se===0?dt:Dt,yt=!1;$e&&(Ge=Math.sqrt(Math.pow(Ln-dt,2)+Math.pow(jn-Dt,2))),pe<ee?ot>ee&&(Le=zt(Ye,Ln,jn,dt,Dt,ee),$e&&(Ye.start=Gt+Ge*Le)):pe>ye?ot<ye&&(Le=zt(Ye,Ln,jn,dt,Dt,ye),$e&&(Ye.start=Gt+Ge*Le)):Ii(Ye,Ln,jn,xe),ot<ee&&pe>=ee&&(Le=zt(Ye,Ln,jn,dt,Dt,ee),yt=!0),ot>ye&&pe<=ye&&(Le=zt(Ye,Ln,jn,dt,Dt,ye),yt=!0),!ze&&yt&&($e&&(Ye.end=Gt+Ge*Le),K.push(Ye),Ye=Zi(_e)),$e&&(Gt+=Ge)}var jt=_e.length-3;Ln=_e[jt],jn=_e[jt+1],xe=_e[jt+2],(pe=Se===0?Ln:jn)>=ee&&pe<=ye&&Ii(Ye,Ln,jn,xe),jt=Ye.length-3,ze&&jt>=3&&(Ye[jt]!==Ye[0]||Ye[jt+1]!==Ye[1])&&Ii(Ye,Ye[0],Ye[1],Ye[2]),Ye.length&&K.push(Ye)}function Zi(_e){var K=[];return K.size=_e.size,K.start=_e.start,K.end=_e.end,K}function Xi(_e,K,ee,ye,Se,ze){for(var $e=0;$e<_e.length;$e++)Wi(_e[$e],K,ee,ye,Se,ze,!1)}function Ii(_e,K,ee,ye){_e.push(K),_e.push(ee),_e.push(ye)}function ft(_e,K,ee,ye,Se,ze){var $e=(ze-K)/(ye-K);return _e.push(ze),_e.push(ee+(Se-ee)*$e),_e.push(1),$e}function at(_e,K,ee,ye,Se,ze){var $e=(ze-ee)/(Se-ee);return _e.push(K+(ye-K)*$e),_e.push(ze),_e.push(1),$e}function Jt(_e,K){for(var ee=[],ye=0;ye<_e.length;ye++){var Se,ze=_e[ye],$e=ze.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")Se=On(ze.geometry,K);else if($e==="MultiLineString"||$e==="Polygon"){Se=[];for(var Ge=0;Ge<ze.geometry.length;Ge++)Se.push(On(ze.geometry[Ge],K))}else if($e==="MultiPolygon")for(Se=[],Ge=0;Ge<ze.geometry.length;Ge++){for(var Le=[],Ye=0;Ye<ze.geometry[Ge].length;Ye++)Le.push(On(ze.geometry[Ge][Ye],K));Se.push(Le)}ee.push(Dn(ze.id,$e,Se,ze.tags))}return ee}function On(_e,K){var ee=[];ee.size=_e.size,_e.start!==void 0&&(ee.start=_e.start,ee.end=_e.end);for(var ye=0;ye<_e.length;ye+=3)ee.push(_e[ye]+K,_e[ye+1],_e[ye+2]);return ee}function sr(_e,K){if(_e.transformed)return _e;var ee,ye,Se,ze=1<<_e.z,$e=_e.x,Ge=_e.y;for(ee=0;ee<_e.features.length;ee++){var Le=_e.features[ee],Ye=Le.geometry,zt=Le.type;if(Le.geometry=[],zt===1)for(ye=0;ye<Ye.length;ye+=2)Le.geometry.push(Ht(Ye[ye],Ye[ye+1],K,ze,$e,Ge));else for(ye=0;ye<Ye.length;ye++){var Gt=[];for(Se=0;Se<Ye[ye].length;Se+=2)Gt.push(Ht(Ye[ye][Se],Ye[ye][Se+1],K,ze,$e,Ge));Le.geometry.push(Gt)}}return _e.transformed=!0,_e}function Ht(_e,K,ee,ye,Se,ze){return[Math.round(ee*(_e*ye-Se)),Math.round(ee*(K*ye-ze))]}function hn(_e,K,ee,ye,Se){for(var ze=K===Se.maxZoom?0:Se.tolerance/((1<<K)*Se.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ee,y:ye,z:K,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ge=0;Ge<_e.length;Ge++){$e.numFeatures++,Un($e,_e[Ge],ze,Se);var Le=_e[Ge].minX,Ye=_e[Ge].minY,zt=_e[Ge].maxX,Gt=_e[Ge].maxY;Le<$e.minX&&($e.minX=Le),Ye<$e.minY&&($e.minY=Ye),zt>$e.maxX&&($e.maxX=zt),Gt>$e.maxY&&($e.maxY=Gt)}return $e}function Un(_e,K,ee,ye){var Se=K.geometry,ze=K.type,$e=[];if(ze==="Point"||ze==="MultiPoint")for(var Ge=0;Ge<Se.length;Ge+=3)$e.push(Se[Ge]),$e.push(Se[Ge+1]),_e.numPoints++,_e.numSimplified++;else if(ze==="LineString")dr($e,Se,_e,ee,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(Ge=0;Ge<Se.length;Ge++)dr($e,Se[Ge],_e,ee,ze==="Polygon",Ge===0);else if(ze==="MultiPolygon")for(var Le=0;Le<Se.length;Le++){var Ye=Se[Le];for(Ge=0;Ge<Ye.length;Ge++)dr($e,Ye[Ge],_e,ee,!0,Ge===0)}if($e.length){var zt=K.tags||null;if(ze==="LineString"&&ye.lineMetrics){for(var Gt in zt={},K.tags)zt[Gt]=K.tags[Gt];zt.mapbox_clip_start=Se.start/Se.size,zt.mapbox_clip_end=Se.end/Se.size}var kt={geometry:$e,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:zt};K.id!==null&&(kt.id=K.id),_e.features.push(kt)}}function dr(_e,K,ee,ye,Se,ze){var $e=ye*ye;if(ye>0&&K.size<(Se?$e:ye))ee.numPoints+=K.length/3;else{for(var Ge=[],Le=0;Le<K.length;Le+=3)(ye===0||K[Le+2]>$e)&&(ee.numSimplified++,Ge.push(K[Le]),Ge.push(K[Le+1])),ee.numPoints++;Se&&function(Ye,zt){for(var Gt=0,kt=0,Ln=Ye.length,jn=Ln-2;kt<Ln;jn=kt,kt+=2)Gt+=(Ye[kt]-Ye[jn])*(Ye[kt+1]+Ye[jn+1]);if(Gt>0===zt)for(kt=0,Ln=Ye.length;kt<Ln/2;kt+=2){var xe=Ye[kt],dt=Ye[kt+1];Ye[kt]=Ye[Ln-2-kt],Ye[kt+1]=Ye[Ln-1-kt],Ye[Ln-2-kt]=xe,Ye[Ln-1-kt]=dt}}(Ge,ze),_e.push(Ge)}}function fr(_e,K){var ee=(K=this.options=function(Se,ze){for(var $e in ze)Se[$e]=ze[$e];return Se}(Object.create(this.options),K)).debug;if(ee&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Se,ze){var $e=[];if(Se.type==="FeatureCollection")for(var Ge=0;Ge<Se.features.length;Ge++)Zr($e,Se.features[Ge],ze,Ge);else Zr($e,Se.type==="Feature"?Se:{geometry:Se},ze);return $e}(_e,K);this.tiles={},this.tileCoords=[],ee&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Se,ze){var $e=ze.buffer/ze.extent,Ge=Se,Le=Kr(Se,1,-1-$e,$e,0,-1,2,ze),Ye=Kr(Se,1,1-$e,2+$e,0,-1,2,ze);return(Le||Ye)&&(Ge=Kr(Se,1,-$e,1+$e,0,-1,2,ze)||[],Le&&(Ge=Jt(Le,1).concat(Ge)),Ye&&(Ge=Ge.concat(Jt(Ye,-1)))),Ge}(ye,K),ye.length&&this.splitTile(ye,0,0,0),ee&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xr(_e,K,ee){return 32*((1<<_e)*ee+K)+_e}function Rr(_e,K){const ee=_e.tileID.canonical;if(!this._geoJSONIndex)return K(null,null);const ye=this._geoJSONIndex.getTile(ee.z,ee.x,ee.y);if(!ye)return K(null,null);const Se=new class{constructor($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=$e.length,this._features=$e}feature($e){return new class{constructor(Ge){this._feature=Ge,this.extent=s.EXTENT,this.type=Ge.type,this.properties=Ge.tags,"id"in Ge&&!isNaN(Ge.id)&&(this.id=parseInt(Ge.id,10))}loadGeometry(){if(this._feature.type===1){const Ge=[];for(const Le of this._feature.geometry)Ge.push([new s.Point(Le[0],Le[1])]);return Ge}{const Ge=[];for(const Le of this._feature.geometry){const Ye=[];for(const zt of Le)Ye.push(new s.Point(zt[0],zt[1]));Ge.push(Ye)}return Ge}}toGeoJSON(Ge,Le,Ye){return qe.call(this,Ge,Le,Ye)}}(this._features[$e])}}(ye.features);let ze=cn(Se);ze.byteOffset===0&&ze.byteLength===ze.buffer.byteLength||(ze=new Uint8Array(ze)),K(null,{vectorTile:Se,rawData:ze.buffer})}fr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fr.prototype.splitTile=function(_e,K,ee,ye,Se,ze,$e){for(var Ge=[_e,K,ee,ye],Le=this.options,Ye=Le.debug;Ge.length;){ye=Ge.pop(),ee=Ge.pop(),K=Ge.pop(),_e=Ge.pop();var zt=1<<K,Gt=xr(K,ee,ye),kt=this.tiles[Gt];if(!kt&&(Ye>1&&console.time("creation"),kt=this.tiles[Gt]=hn(_e,K,ee,ye,Le),this.tileCoords.push({z:K,x:ee,y:ye}),Ye)){Ye>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,ee,ye,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));var Ln="z"+K;this.stats[Ln]=(this.stats[Ln]||0)+1,this.total++}if(kt.source=_e,Se){if(K===Le.maxZoom||K===Se)continue;var jn=1<<Se-K;if(ee!==Math.floor(ze/jn)||ye!==Math.floor($e/jn))continue}else if(K===Le.indexMaxZoom||kt.numPoints<=Le.indexMaxPoints)continue;if(kt.source=null,_e.length!==0){Ye>1&&console.time("clipping");var xe,dt,Dt,pe,ot,yt,jt=.5*Le.buffer/Le.extent,rn=.5-jt,yn=.5+jt,en=1+jt;xe=dt=Dt=pe=null,ot=Kr(_e,zt,ee-jt,ee+yn,0,kt.minX,kt.maxX,Le),yt=Kr(_e,zt,ee+rn,ee+en,0,kt.minX,kt.maxX,Le),_e=null,ot&&(xe=Kr(ot,zt,ye-jt,ye+yn,1,kt.minY,kt.maxY,Le),dt=Kr(ot,zt,ye+rn,ye+en,1,kt.minY,kt.maxY,Le),ot=null),yt&&(Dt=Kr(yt,zt,ye-jt,ye+yn,1,kt.minY,kt.maxY,Le),pe=Kr(yt,zt,ye+rn,ye+en,1,kt.minY,kt.maxY,Le),yt=null),Ye>1&&console.timeEnd("clipping"),Ge.push(xe||[],K+1,2*ee,2*ye),Ge.push(dt||[],K+1,2*ee,2*ye+1),Ge.push(Dt||[],K+1,2*ee+1,2*ye),Ge.push(pe||[],K+1,2*ee+1,2*ye+1)}}},fr.prototype.getTile=function(_e,K,ee){var ye=this.options,Se=ye.extent,ze=ye.debug;if(_e<0||_e>24)return null;var $e=1<<_e,Ge=xr(_e,K=(K%$e+$e)%$e,ee);if(this.tiles[Ge])return sr(this.tiles[Ge],Se);ze>1&&console.log("drilling down to z%d-%d-%d",_e,K,ee);for(var Le,Ye=_e,zt=K,Gt=ee;!Le&&Ye>0;)Ye--,zt=Math.floor(zt/2),Gt=Math.floor(Gt/2),Le=this.tiles[xr(Ye,zt,Gt)];return Le&&Le.source?(ze>1&&console.log("found parent tile z%d-%d-%d",Ye,zt,Gt),ze>1&&console.time("drilling down"),this.splitTile(Le.source,Ye,zt,Gt,_e,K,ee),ze>1&&console.timeEnd("drilling down"),this.tiles[Ge]?sr(this.tiles[Ge],Se):null):null};class Jr extends s.VectorTileWorkerSource{constructor(K,ee,ye,Se,ze){super(K,ee,ye,Se,Rr),ze&&(this.loadGeoJSON=ze)}loadData(K,ee){const ye=K&&K.request,Se=ye&&ye.collectResourceTiming;this.loadGeoJSON(K,(ze,$e)=>{if(ze||!$e)return ee(ze);if(typeof $e!="object")return ee(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));{Re($e,!0);try{if(K.filter){const Le=s.createExpression(K.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Le.result==="error")throw new Error(Le.value.map(zt=>`${zt.key}: ${zt.message}`).join(", "));$e={type:"FeatureCollection",features:$e.features.filter(zt=>Le.value.evaluate({zoom:0},zt))}}this._geoJSONIndex=K.cluster?new Vn(function({superclusterOptions:Le,clusterProperties:Ye}){if(!Ye||!Le)return Le;const zt={},Gt={},kt={accumulated:null,zoom:0},Ln={properties:null},jn=Object.keys(Ye);for(const xe of jn){const[dt,Dt]=Ye[xe],pe=s.createExpression(Dt),ot=s.createExpression(typeof dt=="string"?[dt,["accumulated"],["get",xe]]:dt);zt[xe]=pe.value,Gt[xe]=ot.value}return Le.map=xe=>{Ln.properties=xe;const dt={};for(const Dt of jn)dt[Dt]=zt[Dt].evaluate(kt,Ln);return dt},Le.reduce=(xe,dt)=>{Ln.properties=dt;for(const Dt of jn)kt.accumulated=xe[Dt],xe[Dt]=Gt[Dt].evaluate(kt,Ln)},Le}(K)).load($e.features):function(Le,Ye){return new fr(Le,Ye)}($e,K.geojsonVtOptions)}catch(Le){return ee(Le)}this.loaded={};const Ge={};if(Se){const Le=s.getPerformanceMeasurement(ye);Le&&(Ge.resourceTiming={},Ge.resourceTiming[K.source]=JSON.parse(JSON.stringify(Le)))}ee(null,Ge)}})}reloadTile(K,ee){const ye=this.loaded;return ye&&ye[K.uid]?super.reloadTile(K,ee):this.loadTile(K,ee)}loadGeoJSON(K,ee){if(K.request)s.getJSON(K.request,ee);else{if(typeof K.data!="string")return ee(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`));try{return ee(null,JSON.parse(K.data))}catch{return ee(new Error(`Input data given to '${K.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(K,ee){try{ee(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(ye){ee(ye)}}getClusterChildren(K,ee){try{ee(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(ye){ee(ye)}}getClusterLeaves(K,ee){try{ee(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(ye){ee(ye)}}}class Fr{constructor(K){this.self=K,this.actor=new s.Actor(K,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Jr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ee,ye)=>{if(this.workerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.workerSourceTypes[ee]=ye},this.self.registerRTLTextPlugin=ee=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=ee.applyArabicShaping,s.plugin.processBidirectionalText=ee.processBidirectionalText,s.plugin.processStyledBidirectionalText=ee.processStyledBidirectionalText}}clearCaches(K,ee,ye){delete this.layerIndexes[K],delete this.availableImages[K],delete this.workerSources[K],delete this.demWorkerSources[K],ye()}checkIfReady(K,ee,ye){ye()}setReferrer(K,ee){this.referrer=ee}spriteLoaded(K,ee){this.isSpriteLoaded[K]=ee;for(const ye in this.workerSources[K]){const Se=this.workerSources[K][ye];for(const ze in Se)Se[ze]instanceof s.VectorTileWorkerSource&&(Se[ze].isSpriteLoaded=ee,Se[ze].fire(new s.Event("isSpriteLoaded")))}}setImages(K,ee,ye){this.availableImages[K]=ee;for(const Se in this.workerSources[K]){const ze=this.workerSources[K][Se];for(const $e in ze)ze[$e].availableImages=ee}ye()}enableTerrain(K,ee,ye){this.terrain=ee,ye()}setProjection(K,ee){this.projections[K]=s.getProjection(ee)}setLayers(K,ee,ye){this.getLayerIndex(K).replace(ee),ye()}updateLayers(K,ee,ye){this.getLayerIndex(K).update(ee.layers,ee.removedIds),ye()}loadTile(K,ee,ye){const Se=this.enableTerrain?s.extend({enableTerrain:this.terrain},ee):ee;Se.projection=this.projections[K]||this.defaultProjection,this.getWorkerSource(K,ee.type,ee.source).loadTile(Se,ye)}loadDEMTile(K,ee,ye){const Se=this.enableTerrain?s.extend({buildQuadTree:this.terrain},ee):ee;this.getDEMWorkerSource(K,ee.source).loadTile(Se,ye)}reloadTile(K,ee,ye){const Se=this.enableTerrain?s.extend({enableTerrain:this.terrain},ee):ee;Se.projection=this.projections[K]||this.defaultProjection,this.getWorkerSource(K,ee.type,ee.source).reloadTile(Se,ye)}abortTile(K,ee,ye){this.getWorkerSource(K,ee.type,ee.source).abortTile(ee,ye)}removeTile(K,ee,ye){this.getWorkerSource(K,ee.type,ee.source).removeTile(ee,ye)}removeSource(K,ee,ye){if(!this.workerSources[K]||!this.workerSources[K][ee.type]||!this.workerSources[K][ee.type][ee.source])return;const Se=this.workerSources[K][ee.type][ee.source];delete this.workerSources[K][ee.type][ee.source],Se.removeSource!==void 0?Se.removeSource(ee,ye):ye()}loadWorkerSource(K,ee,ye){try{this.self.importScripts(ee.url),ye()}catch(Se){ye(Se.toString())}}syncRTLPluginState(K,ee,ye){try{s.plugin.setState(ee);const Se=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&Se!=null){this.self.importScripts(Se);const ze=s.plugin.isParsed();ye(ze?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Se}`),ze)}}catch(Se){ye(Se.toString())}}getAvailableImages(K){let ee=this.availableImages[K];return ee||(ee=[]),ee}getLayerIndex(K){let ee=this.layerIndexes[K];return ee||(ee=this.layerIndexes[K]=new H),ee}getWorkerSource(K,ee,ye){if(this.workerSources[K]||(this.workerSources[K]={}),this.workerSources[K][ee]||(this.workerSources[K][ee]={}),!this.workerSources[K][ee][ye]){const Se={send:(ze,$e,Ge,Le,Ye,zt)=>{this.actor.send(ze,$e,Ge,K,Ye,zt)},scheduler:this.actor.scheduler};this.workerSources[K][ee][ye]=new this.workerSourceTypes[ee](Se,this.getLayerIndex(K),this.getAvailableImages(K),this.isSpriteLoaded[K])}return this.workerSources[K][ee][ye]}getDEMWorkerSource(K,ee){return this.demWorkerSources[K]||(this.demWorkerSources[K]={}),this.demWorkerSources[K][ee]||(this.demWorkerSources[K][ee]=new X),this.demWorkerSources[K][ee]}enforceCacheSizeLimit(K,ee){s.enforceCacheSizeLimit(ee)}getWorkerPerformanceMetrics(K,ee,ye){ye(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Fr(self)),Fr}),C(["./shared"],function(s){function N(f,i){if(Array.isArray(f)){if(!Array.isArray(i)||f.length!==i.length)return!1;for(let l=0;l<f.length;l++)if(!N(f[l],i[l]))return!1;return!0}if(typeof f=="object"&&f!==null&&i!==null){if(typeof i!="object"||Object.keys(f).length!==Object.keys(i).length)return!1;for(const l in f)if(!N(f[l],i[l]))return!1;return!0}return f===i}var G=H;function H(f){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var p,v,b=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(b);try{v=new Worker(M),p=!0}catch{p=!1}return v&&v.terminate(),URL.revokeObjectURL(M),p}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var p=document.createElement("canvas");p.width=p.height=1;var v=p.getContext("2d");if(!v)return!1;var b=v.getImageData(0,0,1,1);return b&&b.width===p.width}()?(X[l=i&&i.failIfMajorPerformanceCaveat]===void 0&&(X[l]=function(p){var v,b=function(M){var D=document.createElement("canvas"),L=Object.create(H.webGLContextAttributes);return L.failIfMajorPerformanceCaveat=M,D.getContext("webgl",L)||D.getContext("experimental-webgl",L)}(p);if(!b)return!1;try{v=b.createShader(b.VERTEX_SHADER)}catch{return!1}return!(!v||b.isContextLost())&&(b.shaderSource(v,"void main() {}"),b.compileShader(v),b.getShaderParameter(v,b.COMPILE_STATUS)===!0)}(l)),X[l]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var l}(f)}var X={};function J(f,i,l){const p=s.window.document.createElement(f);return i!==void 0&&(p.className=i),l&&l.appendChild(p),p}function Pe(f,i,l){const p=s.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const v of Object.keys(i))p.setAttributeNS(null,v,i[v]);return l&&l.appendChild(p),p}H.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Re=s.window.document&&s.window.document.documentElement.style,qe=Re&&Re.userSelect!==void 0?"userSelect":"WebkitUserSelect";let je;function Ne(){Re&&qe&&(je=Re[qe],Re[qe]="none")}function Xe(){Re&&qe&&(Re[qe]=je)}function Et(f){f.preventDefault(),f.stopPropagation(),s.window.removeEventListener("click",Et,!0)}function St(){s.window.addEventListener("click",Et,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",Et,!0)},0)}function Qe(f,i){const l=f.getBoundingClientRect();return dn(f,l,i)}function Nt(f,i){const l=f.getBoundingClientRect(),p=[];for(let v=0;v<i.length;v++)p.push(dn(f,l,i[v]));return p}function Mn(f){return s.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function dn(f,i,l){const p=f.offsetWidth===i.width?1:f.offsetWidth/i.width;return new s.Point((l.clientX-i.left)*p,(l.clientY-i.top)*p)}function ut(f,i){var l=i[0],p=i[1],v=i[2],b=i[3],M=l*b-v*p;return M?(f[0]=b*(M=1/M),f[1]=-p*M,f[2]=-v*M,f[3]=l*M,f):null}function qn(f){const{userImage:i}=f;return!!(i&&i.render&&i.render())&&(f.data.replace(new Uint8Array(i.data.buffer)),!0)}class Jn extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:l,callback:p}of this.requestors)this._notify(l,p);this.requestors=[]}}hasImage(i){return!!this.getImage(i)}getImage(i){return this.images[i]}addImage(i,l){this._validate(i,l)&&(this.images[i]=l)}_validate(i,l){let p=!0;return this._validateStretch(l.stretchX,l.data&&l.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(l.stretchY,l.data&&l.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(l.content,l)||(this.fire(new s.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,l){if(!i)return!0;let p=0;for(const v of i){if(v[0]<p||v[1]<v[0]||l<v[1])return!1;p=v[1]}return!0}_validateContent(i,l){return!(i&&(i.length!==4||i[0]<0||l.data.width<i[0]||i[1]<0||l.data.height<i[1]||i[2]<0||l.data.width<i[2]||i[3]<0||l.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,l){l.version=this.images[i].version+1,this.images[i]=l,this.updatedImages[i]=!0}removeImage(i){const l=this.images[i];delete this.images[i],delete this.patterns[i],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,l){let p=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(p=!1);this.isLoaded()||p?this._notify(i,l):this.requestors.push({ids:i,callback:l})}_notify(i,l){const p={};for(const v of i){this.images[v]||this.fire(new s.Event("styleimagemissing",{id:v}));const b=this.images[v];b?p[v]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:s.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}l(null,p)}getPixelSize(){const{width:i,height:l}=this.atlasImage;return{width:i,height:l}}getPattern(i){const l=this.patterns[i],p=this.getImage(i);if(!p)return null;if(l&&l.position.version===p.version)return l.position;if(l)l.position.version=p.version;else{const v={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new s.ImagePosition(v,p);this.patterns[i]={bin:v,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const l=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(i,this.atlasImage,l.RGBA),this.atlasTexture&&this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:l,h:p}=s.potpack(i),v=this.atlasImage;v.resize({width:l||1,height:p||1});for(const b in this.patterns){const{bin:M}=this.patterns[b],D=M.x+1,L=M.y+1,F=this.images[b].data,B=F.width,q=F.height;s.RGBAImage.copy(F,v,{x:0,y:0},{x:D,y:L},{width:B,height:q}),s.RGBAImage.copy(F,v,{x:0,y:q-1},{x:D,y:L-1},{width:B,height:1}),s.RGBAImage.copy(F,v,{x:0,y:0},{x:D,y:L+q},{width:B,height:1}),s.RGBAImage.copy(F,v,{x:B-1,y:0},{x:D-1,y:L},{width:1,height:q}),s.RGBAImage.copy(F,v,{x:0,y:0},{x:D+B,y:L},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const l of i){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const p=this.images[l];qn(p)&&this.updateImage(l,p)}}}const et=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(f,i){return function([l,p,v]){const b=s.degToRad(p+90),M=s.degToRad(v);return{x:l*Math.cos(b)*Math.sin(M),y:l*Math.sin(b)*Math.sin(M),z:l*Math.cos(M),azimuthal:p,polar:v}}(f.expression.evaluate(i))}interpolate(f,i,l){return{x:s.number(f.x,i.x,l),y:s.number(f.y,i.y,l),z:s.number(f.z,i.z,l),azimuthal:s.number(f.azimuthal,i.azimuthal,l),polar:s.number(f.polar,i.polar,l)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class $t extends s.Evented{constructor(i){super(),this._transitionable=new s.Transitionable(et),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,l={}){if(!this._validate(s.validateLight,i,l))for(const p in i){const v=i[p];s.endsWith(p,"-transition")?this._transitionable.setTransition(p.slice(0,-11),v):this._transitionable.setValue(p,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,p){return(!p||p.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const un=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let Hn=class extends s.Evented{constructor(f,i){super(),this._transitionable=new s.Transitionable(un),this.set(f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i}get(){return this._transitionable.serialize()}set(f){for(const i in f){const l=f[i];s.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-11),l):this._transitionable.setValue(i,l)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}};function cn(f,i,l,p){const v=s.smoothstep(45,65,l),[b,M]=Cr(f,p),D=s.length(i);let L=1-Math.min(1,Math.exp((D-b)/(M-b)*-6));return L*=L*L,L=Math.min(1,1.00747*L),L*v*f.alpha}function Cr(f,i){const l=.5/Math.tan(.5*i);return[f.range[0]+l,f.range[1]+l]}const It=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Ee extends s.Evented{constructor(i,l){super(),this._transitionable=new s.Transitionable(It),this.set(i),this._transitioning=this._transitionable.untransitioned(),this._transform=l}get state(){const i=this._transform,l=i.projection.name==="globe",p=s.globeToMercatorTransition(i.zoom),v=this.properties.get("range"),b=[.5,3];return{range:l?[s.number(b[0],v[0],p),s.number(b[1],v[1],p)]:v,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(i,l={}){if(!this._validate(s.validateFog,i,l)){for(const p of Object.keys(s.spec.fog))i&&i[p]===void 0&&(i[p]=s.spec.fog[p].default);for(const p in i){const v=i[p];s.endsWith(p,"-transition")?this._transitionable.setTransition(p.slice(0,-11),v):this._transitionable.setValue(p,v)}}}getOpacity(i){if(!this._transform.projection.supportsFog)return 0;const l=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,i))*l.a}getOpacityAtLatLng(i,l){return this._transform.projection.supportsFog?function(p,v,b){const M=s.MercatorCoordinate.fromLngLat(v),D=b.elevation?b.elevation.getAtPointOrZero(M):0,L=[M.x,M.y,D];return s.transformMat4(L,L,b.mercatorFogMatrix),cn(p,L,b.pitch,b._fov)}(this.state,i,l):0}getFovAdjustedRange(i){return this._transform.projection.supportsFog?Cr(this.state,i):[0,1]}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,l,p){return(!p||p.validate!==!1)&&s.emitValidationErrors(this,i.call(s.validateStyle,s.extend({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Fn{constructor(i,l){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const p=this.workerPool.acquire(this.id);for(let v=0;v<p.length;v++){const b=new Fn.Actor(p[v],l,this.id);b.name=`Worker ${v}`,this.actors.push(b)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(i,l,p){s.asyncAll(this.actors,(v,b)=>{v.send(i,l,b)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function An(f,i,l){return i*(s.EXTENT/(f.tileSize*Math.pow(2,l-f.tileID.overscaledZ)))}Fn.Actor=s.Actor;class Me{constructor(i,l,p,v){this.screenBounds=i,this.cameraPoint=l,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=p,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,v)}static createFromScreenPoints(i,l){let p,v;if(i instanceof s.Point||typeof i[0]=="number"){const b=s.Point.convert(i);p=[b],v=l.isPointAboveHorizon(b)}else{const b=s.Point.convert(i[0]),M=s.Point.convert(i[1]);p=[b,M],v=s.polygonizeBounds(b,M).every(D=>l.isPointAboveHorizon(D))}return new Me(p,l.getCameraPoint(),v,l)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(i){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],i)}bufferedCameraGeometry(i){const l=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],v=s.polygonizeBounds(l,p,0,!1);return this.cameraPoint.y>p.y&&(this.cameraPoint.x>l.x&&this.cameraPoint.x<p.x?v.splice(3,0,this.cameraPoint):this.cameraPoint.x>=p.x?v[2]=this.cameraPoint:this.cameraPoint.x<=l.x&&(v[3]=this.cameraPoint)),s.bufferConvexPolygon(v,i)}bufferedCameraGeometryGlobe(i){const l=this.screenBounds[0],p=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],v=s.polygonizeBounds(l,p,i),b=this.cameraPoint.clone();switch(3*((b.y>l.y)+(b.y>p.y))+((b.x>l.x)+(b.x>p.x))){case 0:v[0]=b,v[4]=b.clone();break;case 1:v.splice(1,0,b);break;case 2:v[1]=b;break;case 3:v.splice(4,0,b);break;case 5:v.splice(2,0,b);break;case 6:v[3]=b;break;case 7:v.splice(3,0,b);break;case 8:v[2]=b}return v}containsTile(i,l,p,v=0){const b=i.queryPadding/l._pixelsPerMercatorPixel+1,M=p?this._bufferedCameraMercator(b,l):this._bufferedScreenMercator(b,l);let D=i.tileID.wrap+(M.unwrapped?v:0);const L=M.polygon.map(ce=>s.getTilePoint(i.tileTransform,ce,D));if(!s.polygonIntersectsBox(L,0,0,s.EXTENT,s.EXTENT))return;D=i.tileID.wrap+(this.screenGeometryMercator.unwrapped?v:0);const F=this.screenGeometryMercator.polygon.map(ce=>s.getTileVec3(i.tileTransform,ce,D)),B=F.map(ce=>new s.Point(ce[0],ce[1])),q=l.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),te=s.getTileVec3(i.tileTransform,q,D),oe=F.map(ce=>{const W=s.sub(ce,ce,te);return s.normalize(W,W),new s.Ray(te,W)}),ue=An(i,1,l.zoom)*l._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:B,tilespaceRays:oe,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(se=s.getBounds(L),se.min.x=s.clamp(se.min.x,0,s.EXTENT),se.min.y=s.clamp(se.min.y,0,s.EXTENT),se.max.x=s.clamp(se.max.x,0,s.EXTENT),se.max.y=s.clamp(se.max.y,0,s.EXTENT),se),tile:i,tileID:i.tileID,pixelToTileUnitsFactor:ue};var se}_bufferedScreenMercator(i,l){const p=Vi(i);if(this._screenRaycastCache[p])return this._screenRaycastCache[p];{let v;return v=l.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(i),l):{polygon:this.bufferedScreenGeometry(i).map(b=>l.pointCoordinate3D(b)),unwrapped:!0},this._screenRaycastCache[p]=v,v}}_bufferedCameraMercator(i,l){const p=Vi(i);if(this._cameraRaycastCache[p])return this._cameraRaycastCache[p];{let v;return v=l.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(i),l):{polygon:this.bufferedCameraGeometry(i).map(b=>l.pointCoordinate3D(b)),unwrapped:!0},this._cameraRaycastCache[p]=v,v}}_projectAndResample(i,l){const p=function(b,M){const D=s.multiply([],M.pixelMatrix,M.globeMatrix),L=[0,-s.GLOBE_RADIUS,0,1],F=[0,s.GLOBE_RADIUS,0,1],B=[0,0,0,1];s.transformMat4$1(L,L,D),s.transformMat4$1(F,F,D),s.transformMat4$1(B,B,D);const q=new s.Point(L[0]/L[3],L[1]/L[3]),te=new s.Point(F[0]/F[3],F[1]/F[3]),oe=s.polygonContainsPoint(b,q)&&L[3]<B[3],ue=s.polygonContainsPoint(b,te)&&F[3]<B[3];if(!oe&&!ue)return null;const se=function(de,Be,Oe){for(let Ke=1;Ke<de.length;Ke++){const Ot=Ti(Be.pointCoordinate3D(de[Ke-1]).x),We=Ti(Be.pointCoordinate3D(de[Ke]).x);if(Oe<0){if(Ot<We)return{idx:Ke,t:-Ot/(We-1-Ot)}}else if(We<Ot)return{idx:Ke,t:(1-Ot)/(We+1-Ot)}}return null}(b,M,oe?-1:1);if(!se)return null;const{idx:ce,t:W}=se;let ae=ce>1?Vn(b.slice(0,ce),M):[],ge=ce<b.length?Vn(b.slice(ce),M):[];ae=ae.map(de=>new s.Point(Ti(de.x),de.y)),ge=ge.map(de=>new s.Point(Ti(de.x),de.y));const ve=[...ae];ve.length===0&&ve.push(ge[ge.length-1]);const De=s.number(ve[ve.length-1].y,(ge.length===0?ae[0]:ge[0]).y,W);let Ae;return Ae=oe?[new s.Point(0,De),new s.Point(0,0),new s.Point(1,0),new s.Point(1,De)]:[new s.Point(1,De),new s.Point(1,1),new s.Point(0,1),new s.Point(0,De)],ve.push(...Ae),ge.length===0?ve.push(ae[0]):ve.push(...ge),{polygon:ve.map(de=>new s.MercatorCoordinate(de.x,de.y)),unwrapped:!1}}(i,l);if(p)return p;const v=function(b,M){let D=!1,L=-1/0,F=0;for(let q=0;q<b.length-1;q++)b[q].x>L&&(L=b[q].x,F=q);for(let q=0;q<b.length-1;q++){const te=(F+q)%(b.length-1),oe=b[te],ue=b[te+1];Math.abs(oe.x-ue.x)>.5&&(oe.x<ue.x?(oe.x+=1,te===0&&(b[b.length-1].x+=1)):(ue.x+=1,te+1===b.length-1&&(b[0].x+=1)),D=!0)}const B=s.mercatorXfromLng(M.center.lng);return D&&B<Math.abs(B-1)&&b.forEach(q=>{q.x-=1}),{polygon:b,unwrapped:D}}(Vn(i,l).map(b=>new s.Point(Ti(b.x),b.y)),l);return{polygon:v.polygon.map(b=>new s.MercatorCoordinate(b.x,b.y)),unwrapped:v.unwrapped}}}function Vn(f,i){return s.resample(f,l=>{const p=i.pointCoordinate3D(l);l.x=p.x,l.y=p.y},1/256)}function Ti(f){return f<0?1+f%1:f%1}function Vi(f){return 100*f|0}function Ci(f,i,l,p,v){const b=function(M,D){if(M)return v(M);if(D){f.url&&D.tiles&&f.tiles&&delete f.tiles;const L=s.pick(s.extend(D,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);D.vector_layers&&(L.vectorLayers=D.vector_layers,L.vectorLayerIds=L.vectorLayers.map(F=>F.id)),L.tiles=i.canonicalizeTileset(L,f.url),v(null,L)}};return f.url?s.getJSON(i.transformRequest(i.normalizeSourceURL(f.url,null,l,p),s.ResourceType.Source),b):s.exported.frame(()=>b(null,f))}class hr{constructor(i,l,p){this.bounds=s.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=l||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const l=Math.pow(2,i.z),p=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*l),v=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*l),b=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*l),M=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*l);return i.x>=p&&i.x<b&&i.y>=v&&i.y<M}}class ai{constructor(i,l,p){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Or={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class xi{constructor(i,l,p,v){this.length=l.length,this.attributes=p,this.itemSize=l.bytesPerElement,this.dynamicDraw=v,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||l.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,l){for(let p=0;p<this.attributes.length;p++){const v=l.attributes[this.attributes[p].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,l,p){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],M=l.attributes[b.name];M!==void 0&&i.vertexAttribPointer(M,b.components,i[Or[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Dn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yr extends Dn{getDefault(){return s.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Zr extends Dn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class oi extends Dn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Wn extends Dn{getDefault(){return[!0,!0,!0,!0]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Dr extends Dn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class aa extends Dn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class bi extends Dn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const l=this.current;(i.func!==l.func||i.ref!==l.ref||i.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Kr extends Dn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class va extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=i,this.dirty=!1}}class Wi extends Dn{getDefault(){return[0,1]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Zi extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=i,this.dirty=!1}}class Xi extends Dn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ii extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.BLEND):l.disable(l.BLEND),this.current=i,this.dirty=!1}}class ft extends Dn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class at extends Dn{getDefault(){return s.Color.transparent}set(i){const l=this.current;(i.r!==l.r||i.g!==l.g||i.b!==l.b||i.a!==l.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Jt extends Dn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class On extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;i?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=i,this.dirty=!1}}class sr extends Dn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Ht extends Dn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}let hn,Un=class extends Dn{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class dr extends Dn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class fr extends Dn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const l=this.current;(i[0]!==l[0]||i[1]!==l[1]||i[2]!==l[2]||i[3]!==l[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class xr extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Rr extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Jr extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Fr extends Dn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _e extends Dn{getDefault(){return null}set(i){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class K extends Dn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class ee extends Dn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ye extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Se extends Dn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ze extends Dn{constructor(i,l){super(i),this.context=i,this.parent=l}getDefault(){return null}}class $e extends ze{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Ge extends ze{attachment(){return this.gl.DEPTH_ATTACHMENT}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,this.attachment(),l.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Le extends Ge{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ye{constructor(i,l,p,v){this.context=i,this.width=l,this.height=p;const b=this.framebuffer=i.gl.createFramebuffer();this.colorAttachment=new $e(i,b),v&&(this.depthAttachment=new Ge(i,b))}destroy(){const i=this.context.gl,l=this.colorAttachment.get();if(l&&i.deleteTexture(l),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class zt{constructor(i,l=!1){if(this.gl=i,this.isWebGL2=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),l){const p=i;this.extVertexArrayObject={createVertexArrayOES:p.createVertexArray.bind(i),deleteVertexArrayOES:p.deleteVertexArray.bind(i),bindVertexArrayOES:p.bindVertexArray.bind(i)}}this.clearColor=new Yr(this),this.clearDepth=new Zr(this),this.clearStencil=new oi(this),this.colorMask=new Wn(this),this.depthMask=new Dr(this),this.stencilMask=new aa(this),this.stencilFunc=new bi(this),this.stencilOp=new Kr(this),this.stencilTest=new va(this),this.depthRange=new Wi(this),this.depthTest=new Zi(this),this.depthFunc=new Xi(this),this.blend=new Ii(this),this.blendFunc=new ft(this),this.blendColor=new at(this),this.blendEquation=new Jt(this),this.cullFace=new On(this),this.cullFaceSide=new sr(this),this.frontFace=new Ht(this),this.program=new Un(this),this.activeTexture=new dr(this),this.viewport=new fr(this),this.bindFramebuffer=new xr(this),this.bindRenderbuffer=new Rr(this),this.bindTexture=new Jr(this),this.bindVertexBuffer=new Fr(this),this.bindElementBuffer=new _e(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new K(this),this.pixelStoreUnpack=new ee(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new Se(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=i.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=i.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=i.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),l||(this.extTextureHalfFloat=i.getExtension("OES_texture_half_float")),(l||this.extTextureHalfFloat&&i.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=l||i.getExtension("OES_standard_derivatives"),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,l){return new ai(this,i,l)}createVertexBuffer(i,l,p){return new xi(this,i,l,p)}createRenderbuffer(i,l,p){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,i,l,p),this.bindRenderbuffer.set(null),b}createFramebuffer(i,l,p){return new Ye(this,i,l,p)}clear({color:i,depth:l,stencil:p}){const v=this.gl;let b=0;i&&(b|=v.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(b|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),p!==void 0&&(b|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),v.clear(b)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){N(i.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Gt extends s.Evented{constructor(i,l,p,v){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(l,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,p=this.map._worldview;this._tileJSONRequest=Ci(this._options,this.map._requestManager,l,p,(v,b)=>{this._tileJSONRequest=null,this._loaded=!0,v?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),p&&p.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${p}`),this.fire(new s.ErrorEvent(v))):b&&(s.extend(this,b),b.bounds&&(this.tileBounds=new hr(b.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),i&&i(v)})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(i,l){const p=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme)),v={request:this.map._requestManager.transformRequest(p,s.ResourceType.Tile),data:void 0,uid:i.uid,tileID:i.tileID,tileZoom:i.tileZoom,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:i.isSymbolTile};if(v.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired")i.state==="loading"?i.reloadCallback=l:i.request=i.actor.send("reloadTile",v,b.bind(this));else if(i.actor=this._tileWorkers[p]=this._tileWorkers[p]||this.dispatcher.getActor(),this.dispatcher.ready)i.request=i.actor.send("loadTile",v,b.bind(this),void 0,!0);else{const M=s.loadVectorTile.call({deduped:this._deduped},v,(D,L)=>{D||!L?b.call(this,D):(v.data={cacheControl:L.cacheControl,expires:L.expires,rawData:L.rawData.slice(0)},i.actor&&i.actor.send("loadTile",v,b.bind(this),void 0,!0))},!0);i.request={cancel:M}}function b(M,D){return delete i.request,i.aborted?l(null):M&&M.status!==404?l(M):(D&&D.resourceTiming&&(i.resourceTiming=D.resourceTiming),this.map._refreshExpiredTiles&&D&&i.setExpiryData(D),i.loadVectorData(D,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),l(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id})}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class kt extends s.Evented{constructor(i,l,p,v){super(),this.id=i,this.dispatcher=p,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},l),s.extend(this,s.pick(l,["url","scheme","tileSize"]))}load(i){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ci(this._options,this.map._requestManager,null,null,(l,p)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):p&&(s.extend(this,p),p.bounds&&(this.tileBounds=new hr(p.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(p.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),i&&i(l)})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(i){return this._options.tiles=i,this.reload(),this}setUrl(i){return this.url=i,this._options.url=i,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,l){const p=s.exported.devicePixelRatio>=2,v=this.map._requestManager.normalizeTileURL(i.tileID.canonical.url(this.tiles,this.scheme),p,this.tileSize);i.request=s.getImage(this.map._requestManager.transformRequest(v,s.ResourceType.Tile),(b,M,D,L)=>(delete i.request,i.aborted?(i.state="unloaded",l(null)):b?(i.state="errored",l(b)):M?(this.map._refreshExpiredTiles&&i.setExpiryData({cacheControl:D,expires:L}),i.setTexture(M,this.map.painter),i.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void l(null)):l(null)))}static loadTileData(i,l,p){i.setTexture(l,p)}static unloadTileData(i,l){i.texture&&l.saveTileTexture(i.texture)}abortTile(i,l){i.request&&(i.request.cancel(),delete i.request),l()}unloadTile(i,l){i.texture&&this.map.painter.saveTileTexture(i.texture),l()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ln(f,i,l,p,v,b,M,D){const L=[f,l,v,i,p,b,1,1,1],F=[M,D,1],B=s.adjoint([],L),[q,te,oe]=s.transformMat3(F,F,s.transpose(B,B));return s.multiply$1(L,[q,0,0,0,te,0,0,0,oe],L)}class jn extends s.Evented{constructor(i,l,p,v){super(),this.id=i,this.dispatcher=p,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=l,this._dirty=!1}load(i,l){this._loaded=l||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(p,v)=>{if(this._imageRequest=null,this._loaded=!0,p)this.fire(new s.ErrorEvent(p));else if(v){const{HTMLImageElement:b}=s.window;this.image=v instanceof b?s.exported.getImageData(v):v,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,i&&(this.coordinates=i),this._finishLoading()}})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this._imageRequest&&i.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=i.url,this.load(i.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(i){this.coordinates=i,this._boundsArray=void 0;const l=i.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(p){let v=1/0,b=1/0,M=-1/0,D=-1/0;for(const q of p)v=Math.min(v,q.x),b=Math.min(b,q.y),M=Math.max(M,q.x),D=Math.max(D,q.y);const L=Math.max(M-v,D-b),F=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),B=Math.pow(2,F);return new s.CanonicalTileID(F,Math.floor((v+M)/2*B),Math.floor((b+D)/2*B))}(l),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(i){for(const L in this.tiles){const F=this.tiles[L];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}if(this._boundsArray)return;const l=s.tileTransform(this.tileID,this.map.transform.projection),[p,v,b,M]=this.coordinates.map(L=>{const F=l.projection.project(L[0],L[1]);return s.getTilePoint(l,F)._round()});this.perspectiveTransform=function(L,F,B,q,te,oe,ue,se,ce,W){const ae=Ln(0,0,L,0,0,F,L,F),ge=Ln(B,q,te,oe,ue,se,ce,W);return s.multiply$1(ge,s.adjoint(ae,ae),ge),[ge[6]/ge[8]*L/s.EXTENT,ge[7]/ge[8]*F/s.EXTENT]}(this.width,this.height,p.x,p.y,v.x,v.y,M.x,M.y,b.x,b.y);const D=this._boundsArray=new s.StructArrayLayout4i8;D.emplaceBack(p.x,p.y,0,0),D.emplaceBack(v.x,v.y,s.EXTENT,0),D.emplaceBack(M.x,M.y,0,s.EXTENT),D.emplaceBack(b.x,b.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=i.createVertexBuffer(D,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,l=i.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(i,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(i)}loadTile(i,l){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},l(null)):(i.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const xe={vector:Gt,raster:kt,"raster-dem":class extends kt{constructor(f,i,l,p){super(f,i,l,p),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(f,i){const l=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function p(v,b){v&&(f.state="errored",i(v)),b&&(f.dem=b,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",i(null))}f.request=s.getImage(this.map._requestManager.transformRequest(l,s.ResourceType.Tile),(function(v,b,M,D){if(delete f.request,f.aborted)f.state="unloaded",i(null);else if(v)f.state="errored",i(v);else if(b){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:M,expires:D});const L=s.window.ImageBitmap&&b instanceof s.window.ImageBitmap&&(hn==null&&(hn=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),hn),F=1-(b.width-s.prevPowerOfTwo(b.width))/2;F<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const B=L?b:s.exported.getImageData(b,F),q={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:B,encoding:this.encoding,padding:F};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",q,p.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(f){const i=f.canonical,l=Math.pow(2,i.z),p=(i.x-1+l)%l,v=i.x===0?f.wrap-1:f.wrap,b=(i.x+1+l)%l,M=i.x+1===l?f.wrap+1:f.wrap,D={};return D[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y).key]={backfilled:!1},D[new s.OverscaledTileID(f.overscaledZ,M,i.z,b,i.y).key]={backfilled:!1},i.y>0&&(D[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y-1).key]={backfilled:!1},D[new s.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},D[new s.OverscaledTileID(f.overscaledZ,M,i.z,b,i.y-1).key]={backfilled:!1}),i.y+1<l&&(D[new s.OverscaledTileID(f.overscaledZ,v,i.z,p,i.y+1).key]={backfilled:!1},D[new s.OverscaledTileID(f.overscaledZ,f.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},D[new s.OverscaledTileID(f.overscaledZ,M,i.z,b,i.y+1).key]={backfilled:!1}),D}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends s.Evented{constructor(f,i,l,p){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=l.getActor(),this.setEventedParent(p),this._data=i.data,this._options=s.extend({},i),this._collectResourceTiming=i.collectResourceTiming,i.maxzoom!==void 0&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const v=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(i.buffer!==void 0?i.buffer:128)*v,tolerance:(i.tolerance!==void 0?i.tolerance:.375)*v,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:i.clusterMaxZoom!==void 0?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:s.EXTENT,radius:(i.clusterRadius!==void 0?i.clusterRadius:50)*v,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,i){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},i),this}getClusterChildren(f,i){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},i),this}getClusterLeaves(f,i,l,p){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:i,offset:l},p),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=s.extend({},this.workerOptions),i=this._data;typeof i=="string"?(f.request=this.map._requestManager.transformRequest(s.exported.resolveURL(i),s.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(i),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(l,p)=>{if(this._loaded=!0,this._pendingLoad=null,l)this.fire(new s.ErrorEvent(l));else{const v={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&p&&p.resourceTiming&&p.resourceTiming[this.id]&&(v.resourceTiming=p.resourceTiming[this.id]),this.fire(new s.Event("data",v)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,i){const l=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(l,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(p,v)=>(delete f.request,f.unloadVectorData(),f.aborted?i(null):p?i(p):(f.loadVectorData(v,this.map.painter,l==="reloadTile"),i(null))),void 0,l==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends jn{constructor(f,i,l,p){super(f,i,l,p),this.roundZoom=!0,this.type="video",this.options=i}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const i of f.urls)this.urls.push(this.map._requestManager.transformRequest(i,s.ResourceType.Source).url);s.getVideo(this.urls,(i,l)=>{this._loaded=!0,i?this.fire(new s.ErrorEvent(i)):l&&(this.video=l,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const i=this.video.seekable;f<i.start(0)||f>i.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,i=f.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(f,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:jn,canvas:class extends jn{constructor(f,i,l,p){super(f,i,l,p),i.coordinates?Array.isArray(i.coordinates)&&i.coordinates.length===4&&!i.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),i.animate&&typeof i.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),i.canvas?typeof i.canvas=="string"||i.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=i,this.animate=i.animate===void 0||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const i=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(i,this.canvas,i.gl.RGBA,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends s.Evented{constructor(f,i,l,p){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=l,this._implementation=i,this.setEventedParent(p),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new hr(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:i,y:l,z:p}=f.canonical;return this._implementation.hasTile({x:i,y:l,z:p})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,i){const{x:l,y:p,z:v}=f.tileID.canonical,b=new s.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:l,y:p,z:v},{signal:b.signal})).then((function(M){return delete f.request,f.aborted?(f.state="unloaded",i(null)):M===void 0?(f.state="errored",i(null)):M===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",i(null)):function(D){return D instanceof s.window.ImageData||D instanceof s.window.HTMLCanvasElement||D instanceof s.window.ImageBitmap||D instanceof s.window.HTMLImageElement}(M)?(this.loadTileData(f,M),f.state="loaded",void i(null)):(f.state="errored",i(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(M=>{M.code!==20&&(f.state="errored",i(M))}),f.request.cancel=()=>b.abort()}loadTileData(f,i){kt.loadTileData(f,i,this._map.painter)}unloadTileData(f){kt.unloadTileData(f,this._map.painter)}unloadTile(f,i){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:l,y:p,z:v}=f.tileID.canonical;this._implementation.unloadTile({x:l,y:p,z:v})}i()}abortTile(f,i){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),i()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},dt=function(f,i,l,p){const v=new xe[i.type](f,i,l,p);if(v.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${v.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],v),v};function Dt(f,i){const l=s.identity([]);return s.scale(l,l,[.5*f.width,.5*-f.height,1]),s.translate(l,l,[1,-1,0]),s.multiply(l,l,f.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(l)}function pe(f,i,l,p,v,b,M,D=!1){const L=f.tilesIn(p,M,D);L.sort(yt);const F=[];for(const q of L)F.push({wrappedTileID:q.tile.tileID.wrapped().key,queryResults:q.tile.queryRenderedFeatures(i,l,f._state,q,v,b,Dt(f.transform,q.tile.tileID),D)});const B=function(q){const te={},oe={};for(const ue of q){const se=ue.queryResults,ce=ue.wrappedTileID,W=oe[ce]=oe[ce]||{};for(const ae in se){const ge=se[ae],ve=W[ae]=W[ae]||{},De=te[ae]=te[ae]||[];for(const Ae of ge)ve[Ae.featureIndex]||(ve[Ae.featureIndex]=!0,De.push(Ae))}}return te}(F);for(const q in B)B[q].forEach(te=>{const oe=te.feature,ue=oe.layer;ue&&ue.type!=="background"&&ue.type!=="sky"&&(oe.source=ue.source,ue["source-layer"]&&(oe.sourceLayer=ue["source-layer"]),oe.state=oe.id!==void 0?f.getFeatureState(ue["source-layer"],oe.id):{})});return B}function ot(f,i){const l=f.getRenderableIds().map(b=>f.getTileByID(b)),p=[],v={};for(let b=0;b<l.length;b++){const M=l[b],D=M.tileID.canonical.key;v[D]||(v[D]=!0,M.querySourceFeatures(p,i))}return p}function yt(f,i){const l=f.tileID,p=i.tileID;return l.overscaledZ-p.overscaledZ||l.canonical.y-p.canonical.y||l.wrap-p.wrap||l.canonical.x-p.canonical.x}function jt(){return vu.workerClass!=null?new vu.workerClass:new s.window.Worker(vu.workerUrl)}const rn="mapboxgl_preloaded_worker_pool";class yn{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<yn.workerCount;)this.workers.push(new jt);return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rn]}numActive(){return Object.keys(this.active).length}}let en;function En(){return en||(en=new yn),en}function Xr(f,i){const l={};for(const p in f)p!=="ref"&&(l[p]=f[p]);return s.refProperties.forEach(p=>{p in i&&(l[p]=i[p])}),l}function Nr(f){f=f.slice();const i=Object.create(null);for(let l=0;l<f.length;l++)i[f[l].id]=f[l];for(let l=0;l<f.length;l++)"ref"in f[l]&&(f[l]=Xr(f[l],i[f[l].ref]));return f}yn.workerCount=2;const Tn={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function $r(f,i,l){l.push({command:Tn.addSource,args:[f,i[f]]})}function Ea(f,i,l){i.push({command:Tn.removeSource,args:[f]}),l[f]=!0}function Ua(f,i,l,p){Ea(f,l,p),$r(f,i,l)}function Yi(f,i,l){let p;for(p in f[l])if(f[l].hasOwnProperty(p)&&p!=="data"&&!N(f[l][p],i[l][p]))return!1;for(p in i[l])if(i[l].hasOwnProperty(p)&&p!=="data"&&!N(f[l][p],i[l][p]))return!1;return!0}function Qi(f,i,l,p,v,b){let M;for(M in i=i||{},f=f||{})f.hasOwnProperty(M)&&(N(f[M],i[M])||l.push({command:b,args:[p,M,i[M],v]}));for(M in i)i.hasOwnProperty(M)&&!f.hasOwnProperty(M)&&(N(f[M],i[M])||l.push({command:b,args:[p,M,i[M],v]}))}function nr(f){return f.id}function Xo(f,i){return f[i.id]=i,f}class vs{constructor(i,l){this.reset(i,l)}reset(i,l){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=s.clamp(i,0,1);let l=1,p=this._distances[l];const v=i*this.paddedLength+this.padding;for(;p<v&&l<this._distances.length;)p=this._distances[++l];const b=l-1,M=this._distances[b],D=p-M,L=D>0?(v-M)/D:0;return this.points[b].mult(1-L).add(this.points[l].mult(L))}}class Yo{constructor(i,l,p){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(l/p);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=l,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,l,p,v,b){this._forEachCell(l,p,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(i,l,p,v){this._forEachCell(l-v,p-v,l+v,p+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(l),this.circles.push(p),this.circles.push(v)}_insertBoxCell(i,l,p,v,b,M){this.boxCells[b].push(M)}_insertCircleCell(i,l,p,v,b,M){this.circleCells[b].push(M)}_query(i,l,p,v,b,M){if(p<0||i>this.width||v<0||l>this.height)return!b&&[];const D=[];if(i<=0&&l<=0&&this.width<=p&&this.height<=v){if(b)return!0;for(let L=0;L<this.boxKeys.length;L++)D.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const F=this.circles[3*L],B=this.circles[3*L+1],q=this.circles[3*L+2];D.push({key:this.circleKeys[L],x1:F-q,y1:B-q,x2:F+q,y2:B+q})}return M?D.filter(M):D}return this._forEachCell(i,l,p,v,this._queryCell,D,{hitTest:b,seenUids:{box:{},circle:{}}},M),b?D.length>0:D}_queryCircle(i,l,p,v,b){const M=i-p,D=i+p,L=l-p,F=l+p;if(D<0||M>this.width||F<0||L>this.height)return!v&&[];const B=[];return this._forEachCell(M,L,D,F,this._queryCellCircle,B,{hitTest:v,circle:{x:i,y:l,radius:p},seenUids:{box:{},circle:{}}},b),v?B.length>0:B}query(i,l,p,v,b){return this._query(i,l,p,v,!1,b)}hitTest(i,l,p,v,b){return this._query(i,l,p,v,!0,b)}hitTestCircle(i,l,p,v){return this._queryCircle(i,l,p,!0,v)}_queryCell(i,l,p,v,b,M,D,L){const F=D.seenUids,B=this.boxCells[b];if(B!==null){const te=this.bboxes;for(const oe of B)if(!F.box[oe]){F.box[oe]=!0;const ue=4*oe;if(i<=te[ue+2]&&l<=te[ue+3]&&p>=te[ue+0]&&v>=te[ue+1]&&(!L||L(this.boxKeys[oe]))){if(D.hitTest)return M.push(!0),!0;M.push({key:this.boxKeys[oe],x1:te[ue],y1:te[ue+1],x2:te[ue+2],y2:te[ue+3]})}}}const q=this.circleCells[b];if(q!==null){const te=this.circles;for(const oe of q)if(!F.circle[oe]){F.circle[oe]=!0;const ue=3*oe;if(this._circleAndRectCollide(te[ue],te[ue+1],te[ue+2],i,l,p,v)&&(!L||L(this.circleKeys[oe]))){if(D.hitTest)return M.push(!0),!0;{const se=te[ue],ce=te[ue+1],W=te[ue+2];M.push({key:this.circleKeys[oe],x1:se-W,y1:ce-W,x2:se+W,y2:ce+W})}}}}}_queryCellCircle(i,l,p,v,b,M,D,L){const F=D.circle,B=D.seenUids,q=this.boxCells[b];if(q!==null){const oe=this.bboxes;for(const ue of q)if(!B.box[ue]){B.box[ue]=!0;const se=4*ue;if(this._circleAndRectCollide(F.x,F.y,F.radius,oe[se+0],oe[se+1],oe[se+2],oe[se+3])&&(!L||L(this.boxKeys[ue])))return M.push(!0),!0}}const te=this.circleCells[b];if(te!==null){const oe=this.circles;for(const ue of te)if(!B.circle[ue]){B.circle[ue]=!0;const se=3*ue;if(this._circlesCollide(oe[se],oe[se+1],oe[se+2],F.x,F.y,F.radius)&&(!L||L(this.circleKeys[ue])))return M.push(!0),!0}}}_forEachCell(i,l,p,v,b,M,D,L){const F=this._convertToXCellCoord(i),B=this._convertToYCellCoord(l),q=this._convertToXCellCoord(p),te=this._convertToYCellCoord(v);for(let oe=F;oe<=q;oe++)for(let ue=B;ue<=te;ue++)if(b.call(this,i,l,p,v,this.xCellCount*ue+oe,M,D,L))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,l,p,v,b,M){const D=v-i,L=b-l,F=p+M;return F*F>D*D+L*L}_circleAndRectCollide(i,l,p,v,b,M,D){const L=(M-v)/2,F=Math.abs(i-(v+L));if(F>L+p)return!1;const B=(D-b)/2,q=Math.abs(l-(b+B));if(q>B+p)return!1;if(F<=L||q<=B)return!0;const te=F-L,oe=q-B;return te*te+oe*oe<=p*p}}const po={unknown:0,flipRequired:1,flipNotRequired:2},Ys=Math.tan(85*Math.PI/180);function ct(f,i,l,p,v,b,M){const D=s.create();if(l)if(b.name==="globe"){const L=s.calculateGlobeLabelMatrix(v,i);s.multiply(D,D,L)}else{const L=ut([],M);D[0]=L[0],D[1]=L[1],D[4]=L[2],D[5]=L[3],p||s.rotateZ(D,D,v.angle)}else s.multiply(D,v.labelPlaneMatrix,f);return D}function mo(f,i,l,p,v,b,M){const D=ct(f,i,l,p,v,b,M);return b.name==="globe"&&l||(D[2]=D[6]=D[10]=D[14]=0),D}function Oi(f,i,l,p,v,b,M){if(l){if(b.name==="globe"){const D=ct(f,i,l,p,v,b,M);return s.invert(D,D),s.multiply(D,f,D),D}{const D=s.clone(f),L=s.identity([]);return L[0]=M[0],L[1]=M[1],L[4]=M[2],L[5]=M[3],s.multiply(D,D,L),p||s.rotateZ(D,D,-v.angle),D}}return v.glCoordMatrix}function ea(f,i,l,p){const v=[f,i,l,1];l?s.transformMat4$1(v,v,p):ar(v,v,p);const b=v[3];return v[0]/=b,v[1]/=b,v[2]/=b,v}function oh(f,i){return Math.min(.5+f/i*.5,1.5)}function Ro(f,i){const l=f[0]/f[3],p=f[1]/f[3];return l>=-i[0]&&l<=i[0]&&p>=-i[1]&&p<=i[1]}function ou(f,i,l,p,v,b,M,D,L,F){const B=l.transform,q=p?f.textSizeData:f.iconSizeData,te=s.evaluateSizeForZoom(q,l.transform.zoom),oe=B.projection.name==="globe",ue=[256/l.width*2+1,256/l.height*2+1],se=p?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;se.clear();let ce=null;oe&&(ce=p?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const W=f.lineVertexArray,ae=p?f.text.placedSymbolArray:f.icon.placedSymbolArray,ge=l.transform.width/l.transform.height;let ve,De=!1;for(let Ae=0;Ae<ae.length;Ae++){const de=ae.get(Ae),{numGlyphs:Be,writingMode:Oe}=de;if(Oe!==s.WritingMode.vertical||De||ve===s.WritingMode.horizontal||(De=!0),ve=Oe,(de.hidden||Oe===s.WritingMode.vertical)&&!De){uo(Be,se);continue}De=!1;const Ke=new s.Point(de.tileAnchorX,de.tileAnchorY);let{x:Ot,y:We,z:_t}=B.projection.projectTilePoint(Ke.x,Ke.y,F.canonical);if(L){const[Xn,sn,In]=L(Ke);Ot+=Xn,We+=sn,_t+=In}const tt=[Ot,We,_t,1];if(s.transformMat4$1(tt,tt,i),!Ro(tt,ue)){uo(Be,se);continue}const xt=oh(l.transform.cameraToCenterDistance,tt[3]),Ze=s.evaluateSizeForFeature(q,te,de),vt=M?Ze/xt:Ze*xt,Ft=ea(Ot,We,_t,v);if(Ft[3]<=0){uo(Be,se);continue}let Tt={};const Pt=M?null:L,pn=Zt(de,vt,!1,D,i,v,b,f.glyphOffsetArray,W,se,ce,Ft,Ke,Tt,ge,Pt,B.projection,F,M);De=pn.useVertical,Pt&&pn.needsFlipping&&(Tt={}),(pn.notEnoughRoom||De||pn.needsFlipping&&Zt(de,vt,!0,D,i,v,b,f.glyphOffsetArray,W,se,ce,Ft,Ke,Tt,ge,Pt,B.projection,F,M).notEnoughRoom)&&uo(Be,se)}p?(f.text.dynamicLayoutVertexBuffer.updateData(se),ce&&f.text.globeExtVertexBuffer.updateData(ce)):(f.icon.dynamicLayoutVertexBuffer.updateData(se),ce&&f.icon.globeExtVertexBuffer.updateData(ce))}function Tl(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se){const{lineStartIndex:ce,glyphStartIndex:W,segment:ae}=D,ge=W+D.numGlyphs,ve=ce+D.lineLength,De=i.getoffsetX(W),Ae=i.getoffsetX(ge-1),de=Ia(f*De,l,p,v,b,M,ae,ce,ve,L,F,B,q,te,!0,oe,ue,se);if(!de)return null;const Be=Ia(f*Ae,l,p,v,b,M,ae,ce,ve,L,F,B,q,te,!0,oe,ue,se);return Be?{first:de,last:Be}:null}function Ra(f,i,l,p){return f===s.WritingMode.horizontal&&Math.abs(p)>Math.abs(l)?{useVertical:!0}:f===s.WritingMode.vertical?p>0?{needsFlipping:!0}:null:i!==po.unknown&&function(v,b){return v===0||Math.abs(b/v)>Ys}(l,p)?i===po.flipRequired?{needsFlipping:!0}:null:l<0?{needsFlipping:!0}:null}function Zt(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se,ce,W,ae){const ge=i/24,ve=f.lineOffsetX*ge,De=f.lineOffsetY*ge,{lineStartIndex:Ae,glyphStartIndex:de,numGlyphs:Be,segment:Oe,writingMode:Ke,flipState:Ot}=f,We=Ae+f.lineLength,_t=tt=>{if(B){const[Ft,Tt,Pt]=tt.up,pn=F.length;s.updateGlobeVertexNormal(B,pn+0,Ft,Tt,Pt),s.updateGlobeVertexNormal(B,pn+1,Ft,Tt,Pt),s.updateGlobeVertexNormal(B,pn+2,Ft,Tt,Pt),s.updateGlobeVertexNormal(B,pn+3,Ft,Tt,Pt)}const[xt,Ze,vt]=tt.point;s.addDynamicAttributes(F,xt,Ze,vt,tt.angle)};if(Be>1){const tt=Tl(ge,D,ve,De,l,q,te,f,L,b,oe,se,!1,ce,W,ae);if(!tt)return{notEnoughRoom:!0};if(p&&!l){let[xt,Ze,vt]=tt.first.point,[Ft,Tt,Pt]=tt.last.point;[xt,Ze]=ea(xt,Ze,vt,M),[Ft,Tt]=ea(Ft,Tt,Pt,M);const pn=Ra(Ke,Ot,(Ft-xt)*ue,Tt-Ze);if(f.flipState=pn&&pn.needsFlipping?po.flipRequired:po.flipNotRequired,pn)return pn}_t(tt.first);for(let xt=de+1;xt<de+Be-1;xt++){const Ze=Ia(ge*D.getoffsetX(xt),ve,De,l,q,te,Oe,Ae,We,L,b,oe,se,!1,!1,ce,W,ae);if(!Ze)return F.length-=4*(xt-de),{notEnoughRoom:!0};_t(Ze)}_t(tt.last)}else{if(p&&!l){const xt=ea(te.x,te.y,0,v),Ze=Ae+Oe+1,vt=new s.Point(L.getx(Ze),L.gety(Ze)),Ft=ea(vt.x,vt.y,0,v),Tt=Ft[3]>0?Ft:ir(te,vt,xt,1,v,void 0,ce,W.canonical),Pt=Ra(Ke,Ot,(Tt[0]-xt[0])*ue,Tt[1]-xt[1]);if(f.flipState=Pt&&Pt.needsFlipping?po.flipRequired:po.flipNotRequired,Pt)return Pt}const tt=Ia(ge*D.getoffsetX(de),ve,De,l,q,te,Oe,Ae,We,L,b,oe,se,!1,!1,ce,W,ae);if(!tt)return{notEnoughRoom:!0};_t(tt)}return{}}function rr(f,i,l,p,v){const{x:b,y:M,z:D}=p.projectTilePoint(f.x,f.y,i);if(!v)return ea(b,M,D,l);const[L,F,B]=v(f);return ea(b+L,M+F,D+B,l)}function ir(f,i,l,p,v,b,M,D){const L=rr(f.sub(i)._unit()._add(f),D,v,M,b);return s.sub(L,l,L),s.normalize(L,L),s.scaleAndAdd(L,l,L,p)}function Ia(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se,ce,W){const ae=p?f-i:f+i;let ge=ae>0?1:-1,ve=0;p&&(ge*=-1,ve=Math.PI),ge<0&&(ve+=Math.PI);let De=D+M+(ge>0?0:1)|0,Ae=v,de=v,Be=0,Oe=0;const Ke=Math.abs(ae),Ot=[],We=[];let _t=b,tt=_t;const xt=()=>ir(tt,_t,de,Ke-Be+1,B,te,se,ce.canonical);for(;Be+Oe<=Ke;){if(De+=ge,De<D||De>=L)return null;if(de=Ae,tt=_t,Ot.push(de),oe&&We.push(tt),_t=new s.Point(F.getx(De),F.gety(De)),Ae=q[De],!Ae){const In=rr(_t,ce.canonical,B,se,te);Ae=In[3]>0?q[De]=In:xt()}Be+=Oe,Oe=s.distance(de,Ae)}ue&&te&&(q[De]&&(Ae=xt(),Oe=s.distance(de,Ae)),q[De]=Ae);const Ze=(Ke-Be)/Oe,vt=_t.sub(tt)._mult(Ze)._add(tt),Ft=s.sub([],Ae,de),Tt=s.scaleAndAdd([],de,Ft,Ze);let Pt=[0,0,1],pn=Ft[0],Xn=Ft[1];if(W&&(Pt=se.upVector(ce.canonical,vt.x,vt.y),Pt[0]!==0||Pt[1]!==0||Pt[2]!==1)){const In=[Pt[2],0,-Pt[0]],vr=s.cross([],Pt,In);s.normalize(In,In),s.normalize(vr,vr),pn=s.dot(Ft,In),Xn=s.dot(Ft,vr)}if(l){const In=s.cross([],Pt,Ft);s.normalize(In,In),s.scaleAndAdd(Tt,Tt,In,l*ge)}const sn=ve+Math.atan2(Xn,pn);return Ot.push(Tt),oe&&We.push(vt),{point:Tt,angle:sn,path:Ot,tilePath:We,up:Pt}}function uo(f,i){const l=i.length,p=l+4*f;i.resize(p),i.float32.fill(-1/0,4*l,4*p)}function ar(f,i,l){const p=i[0],v=i[1];return f[0]=l[0]*p+l[4]*v+l[12],f[1]=l[1]*p+l[5]*v+l[13],f[3]=l[3]*p+l[7]*v+l[15],f}const Ya=100;class Io{constructor(i,l,p=new Yo(i.width+200,i.height+200,25),v=new Yo(i.width+200,i.height+200,25)){this.transform=i,this.grid=p,this.ignoredGrid=v,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Ya,this.screenBottomBoundary=i.height+Ya,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.fogState=l}placeCollisionBox(i,l,p,v,b,M,D,L){let F=p.projectedAnchorX,B=p.projectedAnchorY,q=p.projectedAnchorZ;const te=p.elevation,oe=p.tileID,ue=i.getProjection();if(te&&oe){const[Ae,de,Be]=ue.upVector(oe.canonical,p.tileAnchorX,p.tileAnchorY),Oe=ue.upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;F+=Ae*te*Oe,B+=de*te*Oe,q+=Be*te*Oe}const se=this.projectAndGetPerspectiveRatio(D,F,B,q,p.tileID,ue.name==="globe"||!!te||this.transform.pitch>0,ue),ce=M*se.perspectiveRatio,W=(p.x1*l+v.x-p.padding)*ce+se.point.x,ae=(p.y1*l+v.y-p.padding)*ce+se.point.y,ge=(p.x2*l+v.x+p.padding)*ce+se.point.x,ve=(p.y2*l+v.y+p.padding)*ce+se.point.y,De=se.perspectiveRatio<=.55||se.occluded;return!this.isInsideGrid(W,ae,ge,ve)||!b&&this.grid.hitTest(W,ae,ge,ve,L)||De?{box:[],offscreen:!1,occluded:se.occluded}:{box:[W,ae,ge,ve],offscreen:this.isOffscreen(W,ae,ge,ve),occluded:!1}}placeCollisionCircles(i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se){const ce=[],W=this.transform.elevation,ae=i.getProjection(),ge=W?W.getAtTileOffsetFunc(se,this.transform.center.lat,this.transform.worldSize,ae):null,ve=new s.Point(p.tileAnchorX,p.tileAnchorY);let{x:De,y:Ae,z:de}=ae.projectTilePoint(ve.x,ve.y,se.canonical);if(ge){const[vt,Ft,Tt]=ge(ve);De+=vt,Ae+=Ft,de+=Tt}const Be=ae.name==="globe",Oe=this.projectAndGetPerspectiveRatio(D,De,Ae,de,se,Be||!!W||this.transform.pitch>0,ae),{perspectiveRatio:Ke}=Oe,Ot=(q?M/Ke:M*Ke)/s.ONE_EM,We=ea(De,Ae,de,L),_t=Oe.signedDistanceFromCamera>0?Tl(Ot,b,p.lineOffsetX*Ot,p.lineOffsetY*Ot,!1,We,ve,p,v,L,{},W&&!q?ge:null,q&&!!W,ae,se,q):null;let tt=!1,xt=!1,Ze=!0;if(_t&&!Oe.occluded){const vt=.5*oe*Ke+ue,Ft=new s.Point(-100,-100),Tt=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),Pt=new vs,{first:pn,last:Xn}=_t,sn=pn.path.length;let In=[];for(let gn=sn-1;gn>=1;gn--)In.push(pn.path[gn]);for(let gn=1;gn<Xn.path.length;gn++)In.push(Xn.path[gn]);const vr=2.5*vt;F&&(In=In.map(([gn,jr,ni],li)=>(ge&&!Be&&(ni=ge(li<sn-1?pn.tilePath[sn-1-li]:Xn.tilePath[li-sn+2])[2]),ea(gn,jr,ni,F))),In.some(gn=>gn[3]<=0)&&(In=[]));let mr=[];if(In.length>0){let gn=1/0,jr=-1/0,ni=1/0,li=-1/0;for(const ui of In)gn=Math.min(gn,ui[0]),ni=Math.min(ni,ui[1]),jr=Math.max(jr,ui[0]),li=Math.max(li,ui[1]);jr>=Ft.x&&gn<=Tt.x&&li>=Ft.y&&ni<=Tt.y&&(mr=[In.map(ui=>new s.Point(ui[0],ui[1]))],(gn<Ft.x||jr>Tt.x||ni<Ft.y||li>Tt.y)&&(mr=s.clipLine(mr,Ft.x,Ft.y,Tt.x,Tt.y)))}for(const gn of mr){Pt.reset(gn,.25*vt);let jr=0;jr=Pt.length<=.5*vt?1:Math.ceil(Pt.paddedLength/vr)+1;for(let ni=0;ni<jr;ni++){const li=ni/Math.max(jr-1,1),ui=Pt.lerp(li),Ga=ui.x+Ya,Ca=ui.y+Ya;ce.push(Ga,Ca,vt,0);const Bo=Ga-vt,ks=Ca-vt,Di=Ga+vt,ci=Ca+vt;if(Ze=Ze&&this.isOffscreen(Bo,ks,Di,ci),xt=xt||this.isInsideGrid(Bo,ks,Di,ci),!l&&this.grid.hitTestCircle(Ga,Ca,vt,te)&&(tt=!0,!B))return{circles:[],offscreen:!1,collisionDetected:tt,occluded:!1}}}}return{circles:!B&&tt||!xt?[]:ce,offscreen:Ze,collisionDetected:tt,occluded:Oe.occluded}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[];let p=1/0,v=1/0,b=-1/0,M=-1/0;for(const B of i){const q=new s.Point(B.x+Ya,B.y+Ya);p=Math.min(p,q.x),v=Math.min(v,q.y),b=Math.max(b,q.x),M=Math.max(M,q.y),l.push(q)}const D=this.grid.query(p,v,b,M).concat(this.ignoredGrid.query(p,v,b,M)),L={},F={};for(const B of D){const q=B.key;if(L[q.bucketInstanceId]===void 0&&(L[q.bucketInstanceId]={}),L[q.bucketInstanceId][q.featureIndex])continue;const te=[new s.Point(B.x1,B.y1),new s.Point(B.x2,B.y1),new s.Point(B.x2,B.y2),new s.Point(B.x1,B.y2)];s.polygonIntersectsPolygon(l,te)&&(L[q.bucketInstanceId][q.featureIndex]=!0,F[q.bucketInstanceId]===void 0&&(F[q.bucketInstanceId]=[]),F[q.bucketInstanceId].push(q.featureIndex))}return F}insertCollisionBox(i,l,p,v,b){(l?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:b},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,l,p,v,b){const M=l?this.ignoredGrid:this.grid,D={bucketInstanceId:p,featureIndex:v,collisionGroupID:b};for(let L=0;L<i.length;L+=4)M.insertCircle(D,i[L],i[L+1],i[L+2])}projectAndGetPerspectiveRatio(i,l,p,v,b,M,D){const L=[l,p,v,1];let F=!1;v||this.transform.pitch>0?(s.transformMat4$1(L,L,i),this.fogState&&b&&D.name!=="globe"&&(F=function(te,oe,ue,se,ce,W){const ae=W.calculateFogTileMatrix(ce),ge=[oe,ue,se];return s.transformMat4(ge,ge,ae),cn(te,ge,W.pitch,W._fov)}(this.fogState,l,p,v,b.toUnwrapped(),this.transform)>.9)):ar(L,L,i);const B=L[3];return{point:new s.Point((L[0]/B+1)/2*this.transform.width+Ya,(-L[1]/B+1)/2*this.transform.height+Ya),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/B*.5,1.5),signedDistanceFromCamera:B,occluded:M&&L[2]>B||F}}isOffscreen(i,l,p,v){return p<Ya||i>=this.screenRightBoundary||v<Ya||l>this.screenBottomBoundary}isInsideGrid(i,l,p,v){return p>=0&&i<this.gridRightBoundary&&v>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const i=s.identity([]);return s.translate(i,i,[-100,-100,0]),i}}function _s(f,i,l){const p=i.createTileMatrix(f,f.worldSize,l.toUnwrapped());return s.multiply(new Float32Array(16),f.projMatrix,p)}function ja(f,i,l){if(i.projection.name===l.projection.name)return f.projMatrix;const p=l.clone();return p.setProjection(i.projection),_s(p,i.getProjection(),f)}function Qr(f,i,l){return i.name===l.projection.name?f.projMatrix:_s(l,i,f)}class sh{constructor(i,l,p,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?l:-l))):v&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class yr{constructor(i,l,p,v,b,M=!1){this.text=new sh(i?i.text:null,l,p,b),this.icon=new sh(i?i.icon:null,l,v,b),this.clipped=M}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ks{constructor(i,l,p,v=!1){this.text=i,this.icon=l,this.skipFade=p,this.clipped=v}}class Js{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class lr{constructor(i,l,p,v,b){this.bucketInstanceId=i,this.featureIndex=l,this.sourceLayerIndex=p,this.bucketIndex=v,this.tileID=b}}class lh{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const l=++this.maxGroupID;this.collisionGroups[i]={ID:l,predicate:p=>p.collisionGroupID===l}}return this.collisionGroups[i]}}function ua(f,i,l,p,v){const{horizontalAlign:b,verticalAlign:M}=s.getAnchorAlignment(f),D=-(b-.5)*i,L=-(M-.5)*l,F=s.evaluateVariableOffset(f,p);return new s.Point(D+F[0]*v,L+F[1]*v)}function Ko(f,i,l,p,v){const b=new s.Point(f,i);return l&&b._rotate(p?v:-v),b}class Jo{constructor(i,l,p,v,b){this.transform=i.clone(),this.projection=i.projection.name,this.collisionIndex=new Io(this.transform,b),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=l,this.retainedQueryData={},this.collisionGroups=new lh(p),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,l,p,v){const b=p.getBucket(l),M=p.latestFeatureIndex;if(!b||!M||l.id!==b.layerIds[0])return;const D=b.layers[0].layout,L=p.collisionBoxArray,F=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),B=p.tileSize/s.EXTENT,q=p.tileID.toUnwrapped();this.transform.setProjection(b.projection);const te=(oe=p.tileID,ue=b.getProjection(),se=this.transform,ue.name===this.projection?se.calculateProjMatrix(oe.toUnwrapped()):_s(se,ue,oe));var oe,ue,se;const ce=D.get("text-pitch-alignment")==="map",W=D.get("text-rotation-alignment")==="map";l.compileFilter();const ae=l.dynamicFilter(),ge=l.dynamicFilterNeedsFeature(),ve=this.transform.calculatePixelsToTileUnitsMatrix(p),De=mo(te,p.tileID.canonical,ce,W,this.transform,b.getProjection(),ve);let Ae=null;if(ce){const Oe=Oi(te,p.tileID.canonical,ce,W,this.transform,b.getProjection(),ve);Ae=s.multiply([],this.transform.labelPlaneMatrix,Oe)}let de=null;ae&&p.latestFeatureIndex&&(de={unwrappedTileID:q,dynamicFilter:ae,dynamicFilterNeedsFeature:ge,featureIndex:p.latestFeatureIndex}),this.retainedQueryData[b.bucketInstanceId]=new lr(b.bucketInstanceId,M,b.sourceLayerIndex,b.index,p.tileID);const Be={bucket:b,layout:D,posMatrix:te,textLabelPlaneMatrix:De,labelToScreenMatrix:Ae,clippingData:de,scale:F,textPixelRatio:B,holdingForFade:p.holdingForFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(b.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(v)for(const Oe of b.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:Ot,symbolInstanceEnd:We}=Oe;i.push({sortKey:Ke,symbolInstanceStart:Ot,symbolInstanceEnd:We,parameters:Be})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Be})}attemptAnchorPlacement(i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se,ce,W,ae){const{textOffset0:ge,textOffset1:ve,crossTileID:De}=te,Ae=[ge,ve],de=ua(i,p,v,Ae,b),Be=this.collisionIndex.placeCollisionBox(ue,b,l,Ko(de.x,de.y,M,D,this.transform.angle),q,L,F,B.predicate);if(ce){const Oe=ue.getSymbolInstanceIconSize(ae,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ue,Oe,ce,Ko(de.x,de.y,M,D,this.transform.angle),q,L,F,B.predicate).box.length===0)return}if(Be.box.length>0){let Oe;return this.prevPlacement&&this.prevPlacement.variableOffsets[De]&&this.prevPlacement.placements[De]&&this.prevPlacement.placements[De].text&&(Oe=this.prevPlacement.variableOffsets[De].anchor),this.variableOffsets[De]={textOffset:Ae,width:p,height:v,anchor:i,textScale:b,prevAnchor:Oe},this.markUsedJustification(ue,i,te,se),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,se,te),this.placedOrientations[De]=se),{shift:de,placedGlyphBoxes:Be}}}placeLayerBucketPart(i,l,p,v){const{bucket:b,layout:M,posMatrix:D,textLabelPlaneMatrix:L,labelToScreenMatrix:F,clippingData:B,textPixelRatio:q,holdingForFade:te,collisionBoxArray:oe,partiallyEvaluatedTextSize:ue,partiallyEvaluatedIconSize:se,collisionGroup:ce}=i.parameters,W=M.get("text-optional"),ae=M.get("icon-optional"),ge=M.get("text-allow-overlap"),ve=M.get("icon-allow-overlap"),De=M.get("text-rotation-alignment")==="map",Ae=M.get("text-pitch-alignment")==="map",de=M.get("icon-text-fit")!=="none",Be=M.get("symbol-z-order")==="viewport-y";this.transform.setProjection(b.projection);let Oe=ge&&(ve||!b.hasIconData()||ae),Ke=ve&&(ge||!b.hasTextData()||W);!b.collisionArrays&&oe&&b.deserializeCollisionBoxes(oe),p&&v&&b.updateCollisionDebugBuffers(this.transform.zoom,oe);const Ot=(We,_t,tt)=>{const{crossTileID:xt,numVerticalGlyphVertices:Ze}=We;if(B){const Di={zoom:this.transform.zoom,pitch:this.transform.pitch};let ci=null;if(B.dynamicFilterNeedsFeature){const Lr=this.retainedQueryData[b.bucketInstanceId];ci=B.featureIndex.loadFeature({featureIndex:We.featureIndex,bucketIndex:Lr.bucketIndex,sourceLayerIndex:Lr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,B.dynamicFilter)(Di,ci,this.retainedQueryData[b.bucketInstanceId].tileID.canonical,new s.Point(We.tileAnchorX,We.tileAnchorY),this.transform.calculateDistanceTileData(B.unwrappedTileID)))return this.placements[xt]=new Ks(!1,!1,!1,!0),void l.add(xt)}if(l.has(xt))return;if(te)return void(this.placements[xt]=new Ks(!1,!1,!1));let vt=!1,Ft=!1,Tt=!0,Pt=!1,pn=!1,Xn=null,sn={box:null,offscreen:null,occluded:null},In={box:null,offscreen:null,occluded:null},vr=null,mr=null,gn=null,jr=0,ni=0,li=0;tt.textFeatureIndex?jr=tt.textFeatureIndex:We.useRuntimeCollisionCircles&&(jr=We.featureIndex),tt.verticalTextFeatureIndex&&(ni=tt.verticalTextFeatureIndex);const ui=Di=>{Di.tileID=this.retainedQueryData[b.bucketInstanceId].tileID;const ci=this.transform.elevation;(ci||Di.elevation)&&(Di.elevation=ci?ci.getAtTileOffset(Di.tileID,Di.tileAnchorX,Di.tileAnchorY):0)},Ga=tt.textBox;if(Ga){ui(Ga);const Di=Lr=>{let sa=s.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Lr&&this.prevPlacement){const Ja=this.prevPlacement.placedOrientations[xt];Ja&&(this.placedOrientations[xt]=Ja,sa=Ja,this.markUsedOrientation(b,sa,We))}return sa},ci=(Lr,sa)=>{if(b.allowVerticalPlacement&&Ze>0&&tt.verticalTextBox){for(const Ja of b.writingModes)if(Ja===s.WritingMode.vertical?(sn=sa(),In=sn):sn=Lr(),sn&&sn.box&&sn.box.length)break}else sn=Lr()};if(M.get("text-variable-anchor")){let Lr=M.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[xt]){const gi=this.prevPlacement.variableOffsets[xt];Lr.indexOf(gi.anchor)>0&&(Lr=Lr.filter(xn=>xn!==gi.anchor),Lr.unshift(gi.anchor))}const sa=(gi,xn,Er)=>{const zr=b.getSymbolInstanceTextSize(ue,We,this.transform.zoom,_t),Li=(gi.x2-gi.x1)*zr+2*gi.padding,Ma=(gi.y2-gi.y1)*zr+2*gi.padding,hl=de&&!ve?xn:null;hl&&ui(hl);let _u={box:[],offscreen:!1,occluded:!1};const Df=ge?2*Lr.length:Lr.length;for(let Sh=0;Sh<Df;++Sh){const Th=this.attemptAnchorPlacement(Lr[Sh%Lr.length],gi,Li,Ma,zr,De,Ae,q,D,ce,Sh>=Lr.length,We,_t,b,Er,hl,ue,se);if(Th&&(_u=Th.placedGlyphBoxes,_u&&_u.box&&_u.box.length)){vt=!0,Xn=Th.shift;break}}return _u};ci(()=>sa(Ga,tt.iconBox,s.WritingMode.horizontal),()=>{const gi=tt.verticalTextBox;return gi&&ui(gi),b.allowVerticalPlacement&&!(sn&&sn.box&&sn.box.length)&&Ze>0&&gi?sa(gi,tt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),sn&&(vt=sn.box,Tt=sn.offscreen,Pt=sn.occluded);const Ja=Di(!(!sn||!sn.box));if(!vt&&this.prevPlacement){const gi=this.prevPlacement.variableOffsets[xt];gi&&(this.variableOffsets[xt]=gi,this.markUsedJustification(b,gi.anchor,We,Ja))}}else{const Lr=(sa,Ja)=>{const gi=b.getSymbolInstanceTextSize(ue,We,this.transform.zoom,_t),xn=this.collisionIndex.placeCollisionBox(b,gi,sa,new s.Point(0,0),ge,q,D,ce.predicate);return xn&&xn.box&&xn.box.length&&(this.markUsedOrientation(b,Ja,We),this.placedOrientations[xt]=Ja),xn};ci(()=>Lr(Ga,s.WritingMode.horizontal),()=>{const sa=tt.verticalTextBox;return b.allowVerticalPlacement&&Ze>0&&sa?(ui(sa),Lr(sa,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Di(!!(sn&&sn.box&&sn.box.length))}}if(vr=sn,vt=vr&&vr.box&&vr.box.length>0,Tt=vr&&vr.offscreen,Pt=vr&&vr.occluded,We.useRuntimeCollisionCircles){const Di=b.text.placedSymbolArray.get(We.centerJustifiedTextSymbolIndex>=0?We.centerJustifiedTextSymbolIndex:We.verticalPlacedTextSymbolIndex),ci=s.evaluateSizeForFeature(b.textSizeData,ue,Di),Lr=M.get("text-padding");mr=this.collisionIndex.placeCollisionCircles(b,ge,Di,b.lineVertexArray,b.glyphOffsetArray,ci,D,L,F,p,Ae,ce.predicate,We.collisionCircleDiameter*ci/s.ONE_EM,Lr,this.retainedQueryData[b.bucketInstanceId].tileID),vt=ge||mr.circles.length>0&&!mr.collisionDetected,Tt=Tt&&mr.offscreen,Pt=mr.occluded}if(tt.iconFeatureIndex&&(li=tt.iconFeatureIndex),tt.iconBox){const Di=ci=>{ui(ci);const Lr=de&&Xn?Ko(Xn.x,Xn.y,De,Ae,this.transform.angle):new s.Point(0,0),sa=b.getSymbolInstanceIconSize(se,this.transform.zoom,We.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(b,sa,ci,Lr,ve,q,D,ce.predicate)};In&&In.box&&In.box.length&&tt.verticalIconBox?(gn=Di(tt.verticalIconBox),Ft=gn.box.length>0):(gn=Di(tt.iconBox),Ft=gn.box.length>0),Tt=Tt&&gn.offscreen,pn=gn.occluded}const Ca=W||We.numHorizontalGlyphVertices===0&&Ze===0,Bo=ae||We.numIconVertices===0;if(Ca||Bo?Bo?Ca||(Ft=Ft&&vt):vt=Ft&&vt:Ft=vt=Ft&&vt,vt&&vr&&vr.box&&this.collisionIndex.insertCollisionBox(vr.box,M.get("text-ignore-placement"),b.bucketInstanceId,In&&In.box&&ni?ni:jr,ce.ID),Ft&&gn&&this.collisionIndex.insertCollisionBox(gn.box,M.get("icon-ignore-placement"),b.bucketInstanceId,li,ce.ID),mr&&(vt&&this.collisionIndex.insertCollisionCircles(mr.circles,M.get("text-ignore-placement"),b.bucketInstanceId,jr,ce.ID),p)){const Di=b.bucketInstanceId;let ci=this.collisionCircleArrays[Di];ci===void 0&&(ci=this.collisionCircleArrays[Di]=new Js);for(let Lr=0;Lr<mr.circles.length;Lr+=4)ci.circles.push(mr.circles[Lr+0]),ci.circles.push(mr.circles[Lr+1]),ci.circles.push(mr.circles[Lr+2]),ci.circles.push(mr.collisionDetected?1:0)}const ks=b.projection.name!=="globe";Oe=Oe&&(ks||!Pt),Ke=Ke&&(ks||!pn),this.placements[xt]=new Ks(vt||Oe,Ft||Ke,Tt||b.justReloaded),l.add(xt)};if(Be){const We=b.getSortedSymbolIndexes(this.transform.angle);for(let _t=We.length-1;_t>=0;--_t){const tt=We[_t];Ot(b.symbolInstances.get(tt),tt,b.collisionArrays[tt])}}else for(let We=i.symbolInstanceStart;We<i.symbolInstanceEnd;We++)Ot(b.symbolInstances.get(We),We,b.collisionArrays[We]);if(p&&b.bucketInstanceId in this.collisionCircleArrays){const We=this.collisionCircleArrays[b.bucketInstanceId];s.invert(We.invProjMatrix,D),We.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(i,l,p,v){const{leftJustifiedTextSymbolIndex:b,centerJustifiedTextSymbolIndex:M,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:L,crossTileID:F}=p,B=s.getAnchorJustification(l),q=v===s.WritingMode.vertical?L:B==="left"?b:B==="center"?M:B==="right"?D:-1;b>=0&&(i.text.placedSymbolArray.get(b).crossTileID=q>=0&&b!==q?0:F),M>=0&&(i.text.placedSymbolArray.get(M).crossTileID=q>=0&&M!==q?0:F),D>=0&&(i.text.placedSymbolArray.get(D).crossTileID=q>=0&&D!==q?0:F),L>=0&&(i.text.placedSymbolArray.get(L).crossTileID=q>=0&&L!==q?0:F)}markUsedOrientation(i,l,p){const v=l===s.WritingMode.horizontal||l===s.WritingMode.horizontalOnly?l:0,b=l===s.WritingMode.vertical?l:0,{leftJustifiedTextSymbolIndex:M,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:F}=p,B=i.text.placedSymbolArray;M>=0&&(B.get(M).placedOrientation=v),D>=0&&(B.get(D).placedOrientation=v),L>=0&&(B.get(L).placedOrientation=v),F>=0&&(B.get(F).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let p=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const v=l?l.symbolFadeChange(i):1,b=l?l.opacities:{},M=l?l.variableOffsets:{},D=l?l.placedOrientations:{};for(const L in this.placements){const F=this.placements[L],B=b[L];B?(this.opacities[L]=new yr(B,v,F.text,F.icon,null,F.clipped),p=p||F.text!==B.text.placed||F.icon!==B.icon.placed):(this.opacities[L]=new yr(null,v,F.text,F.icon,F.skipFade,F.clipped),p=p||F.text||F.icon)}for(const L in b){const F=b[L];if(!this.opacities[L]){const B=new yr(F,v,!1,!1);B.isHidden()||(this.opacities[L]=B,p=p||F.text.placed||F.icon.placed)}}for(const L in M)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=M[L]);for(const L in D)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=D[L]);p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:i)}updateLayerOpacities(i,l){const p=new Set;for(const v of l){const b=v.getBucket(i);b&&v.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,p,v.collisionBoxArray)}}updateBucketOpacities(i,l,p){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,b=!!i.layers[0].dynamicFilter(),M=new yr(null,0,!1,!1,!0),D=v.get("text-allow-overlap"),L=v.get("icon-allow-overlap"),F=v.get("text-variable-anchor"),B=v.get("text-rotation-alignment")==="map",q=v.get("text-pitch-alignment")==="map",te=v.get("icon-text-fit")!=="none",oe=new yr(null,0,D&&(L||!i.hasIconData()||v.get("icon-optional")),L&&(D||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ue=(ce,W,ae)=>{for(let ge=0;ge<W/4;ge++)ce.opacityVertexArray.emplaceBack(ae)};let se=0;for(let ce=0;ce<i.symbolInstances.length;ce++){const W=i.symbolInstances.get(ce),{numHorizontalGlyphVertices:ae,numVerticalGlyphVertices:ge,crossTileID:ve,numIconVertices:De}=W,Ae=l.has(ve);let de=this.opacities[ve];Ae?de=M:de||(de=oe,this.opacities[ve]=de),l.add(ve);const Be=ae>0||ge>0,Oe=De>0,Ke=this.placedOrientations[ve],Ot=Ke===s.WritingMode.vertical,We=Ke===s.WritingMode.horizontal||Ke===s.WritingMode.horizontalOnly;if(!Be&&!Oe||de.isHidden()||se++,Be){const _t=xs(de.text);ue(i.text,ae,Ot?pi:_t),ue(i.text,ge,We?pi:_t);const tt=de.text.isHidden(),{leftJustifiedTextSymbolIndex:xt,centerJustifiedTextSymbolIndex:Ze,rightJustifiedTextSymbolIndex:vt,verticalPlacedTextSymbolIndex:Ft}=W,Tt=i.text.placedSymbolArray,Pt=tt||Ot?1:0;xt>=0&&(Tt.get(xt).hidden=Pt),Ze>=0&&(Tt.get(Ze).hidden=Pt),vt>=0&&(Tt.get(vt).hidden=Pt),Ft>=0&&(Tt.get(Ft).hidden=tt||We?1:0);const pn=this.variableOffsets[ve];pn&&this.markUsedJustification(i,pn.anchor,W,Ke);const Xn=this.placedOrientations[ve];Xn&&(this.markUsedJustification(i,"left",W,Xn),this.markUsedOrientation(i,Xn,W))}if(Oe){const _t=xs(de.icon),{placedIconSymbolIndex:tt,verticalPlacedIconSymbolIndex:xt}=W,Ze=i.icon.placedSymbolArray,vt=de.icon.isHidden()?1:0;tt>=0&&(ue(i.icon,De,Ot?pi:_t),Ze.get(tt).hidden=vt),xt>=0&&(ue(i.icon,W.numVerticalIconVertices,We?pi:_t),Ze.get(xt).hidden=vt)}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const _t=i.collisionArrays[ce];if(_t){let tt=new s.Point(0,0),xt=!0;if(_t.textBox||_t.verticalTextBox){if(F){const vt=this.variableOffsets[ve];vt?(tt=ua(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textScale),B&&tt._rotate(q?this.transform.angle:-this.transform.angle)):xt=!1}b&&(xt=!de.clipped),_t.textBox&&Qs(i.textCollisionBox.collisionVertexArray,de.text.placed,!xt||Ot,tt.x,tt.y),_t.verticalTextBox&&Qs(i.textCollisionBox.collisionVertexArray,de.text.placed,!xt||We,tt.x,tt.y)}const Ze=xt&&!!(!We&&_t.verticalIconBox);_t.iconBox&&Qs(i.iconCollisionBox.collisionVertexArray,de.icon.placed,Ze,te?tt.x:0,te?tt.y:0),_t.verticalIconBox&&Qs(i.iconCollisionBox.collisionVertexArray,de.icon.placed,!Ze,te?tt.x:0,te?tt.y:0)}}}if(i.fullyClipped=se===0,i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.bucketInstanceId in this.collisionCircleArrays){const ce=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ce.invProjMatrix,i.placementViewportMatrix=ce.viewportMatrix,i.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,l){const p=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Qs(f,i,l,p,v){f.emplaceBack(i?1:0,l?1:0,p||0,v||0),f.emplaceBack(i?1:0,l?1:0,p||0,v||0),f.emplaceBack(i?1:0,l?1:0,p||0,v||0),f.emplaceBack(i?1:0,l?1:0,p||0,v||0)}const ei=Math.pow(2,25),pr=Math.pow(2,24),Fu=Math.pow(2,17),Ka=Math.pow(2,16),Mi=Math.pow(2,9),oa=Math.pow(2,8),of=Math.pow(2,1);function xs(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const i=f.placed?1:0,l=Math.floor(127*f.opacity);return l*ei+i*pr+l*Fu+i*Ka+l*Mi+i*oa+l*of+i}const pi=0;class Cl{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&i.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(i,l,p,v,b){const M=this._bucketParts;for(;this._currentTileIndex<i.length;)if(l.getBucketParts(M,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((D,L)=>D.sortKey-L.sortKey));this._currentPartIndex<M.length;){const D=M[this._currentPartIndex];if(l.placeLayerBucketPart(D,this._seenCrossTileIDs,p,D.symbolInstanceStart===0),this._currentPartIndex++,b())return!0}return!1}}class bs{constructor(i,l,p,v,b,M,D,L){this.placement=new Jo(i,b,M,D,L),this._currentPlacementIndex=l.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,l,p){const v=s.exported.now(),b=()=>{const M=s.exported.now()-v;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=l[i[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=D)&&(!M.maxzoom||M.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Cl(M)),this._inProgressLayer.continuePlacement(p[M.source],this.placement,this._showCollisionBoxes,M,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ws=512/s.EXTENT/2;class ca{constructor(i,l,p){this.tileID=i,this.bucketInstanceId=p,this.index=new s.KDBush(l.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const v=i.canonical.x*s.EXTENT,b=i.canonical.y*s.EXTENT;for(let M=0;M<l.length;M++){const{key:D,crossTileID:L,tileAnchorX:F,tileAnchorY:B}=l.get(M),q=Math.floor((v+F)*ws),te=Math.floor((b+B)*ws);this.index.add(q,te),this.keys.push(D),this.crossTileIDs.push(L)}this.index.finish()}findMatches(i,l,p){const v=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z),b=ws/Math.pow(2,l.canonical.z-this.tileID.canonical.z),M=l.canonical.x*s.EXTENT,D=l.canonical.y*s.EXTENT;for(let L=0;L<i.length;L++){const F=i.get(L);if(F.crossTileID)continue;const{key:B,tileAnchorX:q,tileAnchorY:te}=F,oe=Math.floor((M+q)*b),ue=Math.floor((D+te)*b),se=this.index.range(oe-v,ue-v,oe+v,ue+v);for(const ce of se){const W=this.crossTileIDs[ce];if(this.keys[ce]===B&&!p.has(W)){p.add(W),F.crossTileID=W;break}}}}}class Qo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ml{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const l=Math.round((i-this.lng)/360);if(l!==0)for(const p in this.indexes){const v=this.indexes[p],b={};for(const M in v){const D=v[M];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+l),b[D.tileID.key]=D}this.indexes[p]=b}this.lng=i}addBucket(i,l,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<l.symbolInstances.length;b++)l.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]=new Set);const v=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const M=this.indexes[b];if(Number(b)>i.overscaledZ)for(const D in M){const L=M[D];L.tileID.isChildOf(i)&&L.findMatches(l.symbolInstances,i,v)}else{const D=M[i.scaledTo(Number(b)).key];D&&D.findMatches(l.symbolInstances,i,v)}}for(let b=0;b<l.symbolInstances.length;b++){const M=l.symbolInstances.get(b);M.crossTileID||(M.crossTileID=p.generate(),v.add(M.crossTileID))}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ca(i,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(i,l){for(const p of l.crossTileIDs)this.usedCrossTileIDs[i].delete(p)}removeStaleBuckets(i){let l=!1;for(const p in this.indexes){const v=this.indexes[p];for(const b in v)i[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,v[b]),delete v[b],l=!0)}return l}}class Va{constructor(){this.layerIndexes={},this.crossTileIDs=new Qo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,l,p,v){let b=this.layerIndexes[i.id];b===void 0&&(b=this.layerIndexes[i.id]=new Ml);let M=!1;const D={};v.name!=="globe"&&b.handleWrapJump(p);for(const L of l){const F=L.getBucket(i);F&&i.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(L.tileID,F,this.crossTileIDs)&&(M=!0),D[F.bucketInstanceId]=!0)}return b.removeStaleBuckets(D)&&(M=!0),M}pruneUnusedLayers(i){const l={};i.forEach(p=>{l[p]=!0});for(const p in this.layerIndexes)l[p]||delete this.layerIndexes[p]}}const go=(f,i)=>s.emitValidationErrors(f,i&&i.filter(l=>l.identifier!=="source.canvas")),su=s.pick(Tn,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),sf=s.pick(Tn,["setCenter","setZoom","setBearing","setPitch"]),Nu={version:8,layers:[],sources:{}},el={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Q extends s.Evented{constructor(i,l={}){super(),this.map=i,this.dispatcher=new Fn(En(),this),this.imageManager=new Jn,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(i._requestManager,l.localFontFamily?s.LocalGlyphMode.all:l.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,l.localFontFamily||l.localIdeographFontFamily),this.crossTileSymbolIndex=new Va,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const p=this;this._rtlTextPluginCallback=Q.registerForPluginStateChange(v=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(b,M)=>{if(s.triggerPluginCompletionEvent(b),M&&M.every(D=>D))for(const D in p._sourceCaches){const L=p._sourceCaches[D],F=L.getSource().type;F!=="vector"&&F!=="geojson"||L.reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.getSource(v.sourceId);if(b&&b.vectorLayerIds)for(const M in this._layers){const D=this._layers[M];D.source===b.id&&this._validateLayer(D)}})}loadURL(i,l={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const p=typeof l.validate=="boolean"?l.validate:!s.isMapboxURL(i);i=this.map._requestManager.normalizeStyleURL(i,l.accessToken);const v=this.map._requestManager.transformRequest(i,s.ResourceType.Style);this._request=s.getJSON(v,(b,M)=>{this._request=null,b?this.fire(new s.ErrorEvent(b)):M&&this._load(M,p)})}loadJSON(i,l={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(i,l.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Nu,!1)}_updateLayerCount(i,l){const p=l?1:-1;i.is3D()&&(this._num3DLayers+=p),i.type==="circle"&&(this._numCircleLayers+=p),i.type==="symbol"&&(this._numSymbolLayers+=p)}_load(i,l){if(l&&go(this,s.validateStyle(i)))return;this._loaded=!0,this.stylesheet=s.clone$1(i),this._updateMapProjection();for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});this._changed=!1,i.sprite?this._loadSprite(i.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(i.glyphs);const p=Nr(this.stylesheet.layers);this._order=p.map(v=>v.id),this._layers={},this._serializedLayers={};for(const v of p){const b=s.createStyleLayer(v);b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new $t(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(i){i?this.stylesheet.projection=i:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(i){this._spriteRequest=function(l,p,v){let b,M,D;const L=s.exported.devicePixelRatio>1?"@2x":"";let F=s.getJSON(p.transformRequest(p.normalizeSpriteURL(l,L,".json"),s.ResourceType.SpriteJSON),(te,oe)=>{F=null,D||(D=te,b=oe,q())}),B=s.getImage(p.transformRequest(p.normalizeSpriteURL(l,L,".png"),s.ResourceType.SpriteImage),(te,oe)=>{B=null,D||(D=te,M=oe,q())});function q(){if(D)v(D);else if(b&&M){const te=s.exported.getImageData(M),oe={};for(const ue in b){const{width:se,height:ce,x:W,y:ae,sdf:ge,pixelRatio:ve,stretchX:De,stretchY:Ae,content:de}=b[ue],Be=new s.RGBAImage({width:se,height:ce});s.RGBAImage.copy(te,Be,{x:W,y:ae},{x:0,y:0},{width:se,height:ce}),oe[ue]={data:Be,pixelRatio:ve,sdf:ge,stretchX:De,stretchY:Ae,content:de}}v(null,oe)}}return{cancel(){F&&(F.cancel(),F=null),B&&(B.cancel(),B=null)}}}(i,this.map._requestManager,(l,p)=>{if(this._spriteRequest=null,l)this.fire(new s.ErrorEvent(l));else if(p)for(const v in p)this.imageManager.addImage(v,p[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(i){const l=this.getSource(i.source);if(!l)return;const p=i.sourceLayer;p&&(l.type==="geojson"||l.vectorLayerIds&&l.vectorLayerIds.indexOf(p)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${p}" does not exist on source "${l.id}" as specified by style layer "${i.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this._sourceCaches)if(!this._sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const l=[];for(const p of i){const v=this._layers[p];v.type!=="custom"&&l.push(v.serialize())}return l}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const i in this._sourceCaches)if(this._sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(i){return!!this.terrain&&(typeof i.isLayerDraped=="function"?i.isLayerDraped():el[i.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(i){if(!this._loaded)return;const l=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(v.length||b.length)&&this._updateWorkerLayers(v,b);for(const M in this._updatedSources){const D=this._updatedSources[M];D==="reload"?this._reloadSource(M):D==="clear"&&this._clearSource(M)}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(i);this.light.updateTransitions(i),this.fog&&this.fog.updateTransitions(i),this._resetUpdates()}const p={};for(const v in this._sourceCaches){const b=this._sourceCaches[v];p[v]=b.used,b.used=!1}for(const v of this._order){const b=this._layers[v];if(b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)){const D=this._getLayerSourceCache(b);D&&(D.used=!0)}const M=this.map.painter;if(M){const D=b.getProgramIds();if(!D)continue;const L=b.getProgramConfiguration(i.zoom);for(const F of D)M.useProgram(F,L)}}for(const v in p){const b=this._sourceCaches[v];p[v]!==b.used&&b.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:b.getSource().id}))}this.light.recalculate(i),this.terrain&&this.terrain.recalculate(i),this.fog&&this.fog.recalculate(i),this.z=i.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),l&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const l in this._sourceCaches)this._sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,l){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(i){if(this._checkLoaded(),go(this,s.validateStyle(i)))return!1;(i=s.clone$1(i)).layers=Nr(i.layers);const l=function(v,b){if(!v)return[{command:Tn.setStyle,args:[b]}];let M=[];try{if(!N(v.version,b.version))return[{command:Tn.setStyle,args:[b]}];N(v.center,b.center)||M.push({command:Tn.setCenter,args:[b.center]}),N(v.zoom,b.zoom)||M.push({command:Tn.setZoom,args:[b.zoom]}),N(v.bearing,b.bearing)||M.push({command:Tn.setBearing,args:[b.bearing]}),N(v.pitch,b.pitch)||M.push({command:Tn.setPitch,args:[b.pitch]}),N(v.sprite,b.sprite)||M.push({command:Tn.setSprite,args:[b.sprite]}),N(v.glyphs,b.glyphs)||M.push({command:Tn.setGlyphs,args:[b.glyphs]}),N(v.transition,b.transition)||M.push({command:Tn.setTransition,args:[b.transition]}),N(v.light,b.light)||M.push({command:Tn.setLight,args:[b.light]}),N(v.fog,b.fog)||M.push({command:Tn.setFog,args:[b.fog]}),N(v.projection,b.projection)||M.push({command:Tn.setProjection,args:[b.projection]});const D={},L=[];(function(q,te,oe,ue){let se;for(se in te=te||{},q=q||{})q.hasOwnProperty(se)&&(te.hasOwnProperty(se)||Ea(se,oe,ue));for(se in te){if(!te.hasOwnProperty(se))continue;const ce=te[se];q.hasOwnProperty(se)?N(q[se],ce)||(q[se].type==="geojson"&&ce.type==="geojson"&&Yi(q,te,se)?oe.push({command:Tn.setGeoJSONSourceData,args:[se,ce.data]}):Ua(se,te,oe,ue)):$r(se,te,oe)}})(v.sources,b.sources,L,D);const F=[];v.layers&&v.layers.forEach(q=>{q.source&&D[q.source]?M.push({command:Tn.removeLayer,args:[q.id]}):F.push(q)});let B=v.terrain;B&&D[B.source]&&(M.push({command:Tn.setTerrain,args:[void 0]}),B=void 0),M=M.concat(L),N(B,b.terrain)||M.push({command:Tn.setTerrain,args:[b.terrain]}),function(q,te,oe){te=te||[];const ue=(q=q||[]).map(nr),se=te.map(nr),ce=q.reduce(Xo,{}),W=te.reduce(Xo,{}),ae=ue.slice(),ge=Object.create(null);let ve,De,Ae,de,Be,Oe,Ke;for(ve=0,De=0;ve<ue.length;ve++)Ae=ue[ve],W.hasOwnProperty(Ae)?De++:(oe.push({command:Tn.removeLayer,args:[Ae]}),ae.splice(ae.indexOf(Ae,De),1));for(ve=0,De=0;ve<se.length;ve++)Ae=se[se.length-1-ve],ae[ae.length-1-ve]!==Ae&&(ce.hasOwnProperty(Ae)?(oe.push({command:Tn.removeLayer,args:[Ae]}),ae.splice(ae.lastIndexOf(Ae,ae.length-De),1)):De++,Oe=ae[ae.length-ve],oe.push({command:Tn.addLayer,args:[W[Ae],Oe]}),ae.splice(ae.length-ve,0,Ae),ge[Ae]=!0);for(ve=0;ve<se.length;ve++)if(Ae=se[ve],de=ce[Ae],Be=W[Ae],!ge[Ae]&&!N(de,Be))if(N(de.source,Be.source)&&N(de["source-layer"],Be["source-layer"])&&N(de.type,Be.type)){for(Ke in Qi(de.layout,Be.layout,oe,Ae,null,Tn.setLayoutProperty),Qi(de.paint,Be.paint,oe,Ae,null,Tn.setPaintProperty),N(de.filter,Be.filter)||oe.push({command:Tn.setFilter,args:[Ae,Be.filter]}),N(de.minzoom,Be.minzoom)&&N(de.maxzoom,Be.maxzoom)||oe.push({command:Tn.setLayerZoomRange,args:[Ae,Be.minzoom,Be.maxzoom]}),de)de.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Qi(de[Ke],Be[Ke],oe,Ae,Ke.slice(6),Tn.setPaintProperty):N(de[Ke],Be[Ke])||oe.push({command:Tn.setLayerProperty,args:[Ae,Ke,Be[Ke]]}));for(Ke in Be)Be.hasOwnProperty(Ke)&&!de.hasOwnProperty(Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?Qi(de[Ke],Be[Ke],oe,Ae,Ke.slice(6),Tn.setPaintProperty):N(de[Ke],Be[Ke])||oe.push({command:Tn.setLayerProperty,args:[Ae,Ke,Be[Ke]]}))}else oe.push({command:Tn.removeLayer,args:[Ae]}),Oe=ae[ae.lastIndexOf(Ae)+1],oe.push({command:Tn.addLayer,args:[Be,Oe]})}(F,b.layers,M)}catch(D){console.warn("Unable to compute style diff:",D),M=[{command:Tn.setStyle,args:[b]}]}return M}(this.serialize(),i).filter(v=>!(v.command in sf));if(l.length===0)return!1;const p=l.filter(v=>!(v.command in su));if(p.length>0)throw new Error(`Unimplemented: ${p.map(v=>v.command).join(", ")}.`);return l.forEach(v=>{v.command!=="setTransition"&&v.command!=="setProjection"&&this[v.command].apply(this,v.args)}),this.stylesheet=i,this._updateMapProjection(),!0}addImage(i,l){return this.getImage(i)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(i,l),this._afterImageUpdated(i),this)}updateImage(i,l){this.imageManager.updateImage(i,l)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){return this.getImage(i)?(this.imageManager.removeImage(i),this._afterImageUpdated(i),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(i,l,p={}){if(this._checkLoaded(),this.getSource(i)!==void 0)throw new Error("There is already a source with this ID");if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(s.validateSource,`sources.${i}`,l,null,p))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const v=dt(i,l,this.dispatcher,this);v.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(i),source:v.serialize(),sourceId:i}));const b=M=>{const D=(M?"symbol:":"other:")+i,L=this._sourceCaches[D]=new s.SourceCache(D,v,M);(M?this._symbolSourceCaches:this._otherSourceCaches)[i]=L,L.style=this,L.onAdd(this.map)};b(!1),l.type!=="vector"&&l.type!=="geojson"||b(!0),v.onAdd&&v.onAdd(this.map),this._changed=!0}removeSource(i){this._checkLoaded();const l=this.getSource(i);if(!l)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${v}" is using it.`)));if(this.terrain&&this.terrain.get().source===i)return this.fire(new s.ErrorEvent(new Error(`Source "${i}" cannot be removed while terrain is using it.`)));const p=this._getSourceCaches(i);for(const v of p)delete this._sourceCaches[v.id],delete this._updatedSources[v.id],v.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v.getSource().id})),v.setEventedParent(null),v.clearTiles();return delete this._otherSourceCaches[i],delete this._symbolSourceCaches[i],l.setEventedParent(null),l.onRemove&&l.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(i,l){this._checkLoaded(),this.getSource(i).setData(l),this._changed=!0}getSource(i){const l=this._getSourceCache(i);return l&&l.getSource()}_getSources(){const i=[];for(const l in this._otherSourceCaches){const p=this._getSourceCache(l);p&&i.push(p.getSource())}return i}addLayer(i,l,p={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${v}" already exists on this map`)));let b;if(i.type==="custom"){if(go(this,s.validateCustomStyleLayer(i)))return;b=s.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=s.clone$1(i),i=s.extend(i,{source:v})),this._validate(s.validateLayer,`layers.${v}`,i,{arrayIndex:-1},p))return;b=s.createStyleLayer(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0)}const M=l?this._order.indexOf(l):this._order.length;if(l&&M===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`)));this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=b;const D=this._getLayerSourceCache(b);if(this._removedLayers[v]&&b.source&&D&&b.type!=="custom"){const L=this._removedLayers[v];delete this._removedLayers[v],L.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",D.pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(i,l){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===l)return;const p=this._order.indexOf(i);this._order.splice(p,1);const v=l?this._order.indexOf(l):this._order.length;l&&v===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${l}" does not exist on this map.`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(i){this._checkLoaded();const l=this._layers[i];if(!l)return void this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be removed.`)));l.setEventedParent(null),this._updateLayerCount(l,!1);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=l,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],l.onRemove&&l.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}hasLayerType(i){for(const l in this._layers)if(this._layers[l].type===i)return!0;return!1}setLayerZoomRange(i,l,p){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===l&&v.maxzoom===p||(l!=null&&(v.minzoom=l),p!=null&&(v.maxzoom=p),this._updateLayer(v)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(i,l,p={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!N(v.filter,l))return l==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(s.validateFilter,`layers.${v.id}.filter`,l,{layerType:v.type},p)||(v.filter=s.clone$1(l),this._updateLayer(v)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be filtered.`)))}getFilter(i){const l=this.getLayer(i);return l&&s.clone$1(l.filter)}setLayoutProperty(i,l,p,v={}){this._checkLoaded();const b=this.getLayer(i);b?N(b.getLayoutProperty(l),p)||(b.setLayoutProperty(l,p,v),this._updateLayer(b)):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(i,l){const p=this.getLayer(i);if(p)return p.getLayoutProperty(l);this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style.`)))}setPaintProperty(i,l,p,v={}){this._checkLoaded();const b=this.getLayer(i);b?N(b.getPaintProperty(l),p)||(b.setPaintProperty(l,p,v)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(i,l){const p=this.getLayer(i);return p&&p.getPaintProperty(l)}setFeatureState(i,l){this._checkLoaded();const p=i.source,v=i.sourceLayer,b=this.getSource(p);if(!b)return void this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const M=b.type;if(M==="geojson"&&v)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(M==="vector"&&!v)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const D=this._getSourceCaches(p);for(const L of D)L.setFeatureState(v,i.id,l)}removeFeatureState(i,l){this._checkLoaded();const p=i.source,v=this.getSource(p);if(!v)return void this.fire(new s.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)));const b=v.type,M=b==="vector"?i.sourceLayer:void 0;if(b==="vector"&&!M)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(l&&typeof i.id!="string"&&typeof i.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const D=this._getSourceCaches(p);for(const L of D)L.removeFeatureState(M,i.id,l)}getFeatureState(i){this._checkLoaded();const l=i.source,p=i.sourceLayer,v=this.getSource(l);if(v){if(v.type!=="vector"||p)return i.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(l)[0].getFeatureState(p,i.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const i={};for(const l in this._sourceCaches){const p=this._sourceCaches[l].getSource();i[p.id]||(i[p.id]=p.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:i,layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0;const l=this._getLayerSourceCache(i);i.source&&!this._updatedSources[i.source]&&l&&l.getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",l.pause()),this._changed=!0,i.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(i){const l=M=>this._layers[M].type==="fill-extrusion",p={},v=[];for(let M=this._order.length-1;M>=0;M--){const D=this._order[M];if(l(D)){p[D]=M;for(const L of i){const F=L[D];if(F)for(const B of F)v.push(B)}}}v.sort((M,D)=>D.intersectionZ-M.intersectionZ);const b=[];for(let M=this._order.length-1;M>=0;M--){const D=this._order[M];if(l(D))for(let L=v.length-1;L>=0;L--){const F=v[L].feature;if(p[F.layer.id]<M)break;b.push(F),v.pop()}else for(const L of i){const F=L[D];if(F)for(const B of F)b.push(B.feature)}}return b}queryRenderedFeatures(i,l,p){l&&l.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",l.filter,null,l);const v={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const L of l.layers){const F=this._layers[L];if(!F)return this.fire(new s.ErrorEvent(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];v[F.source]=!0}}const b=[];l.availableImages=this._availableImages;const M=l&&l.layers?l.layers.some(L=>{const F=this.getLayer(L);return F&&F.is3D()}):this.has3DLayers(),D=Me.createFromScreenPoints(i,p);for(const L in this._sourceCaches){const F=this._sourceCaches[L].getSource().id;l.layers&&!v[F]||b.push(pe(this._sourceCaches[L],this._layers,this._serializedLayers,D,l,p,M,!!this.map._showQueryGeometry))}return this.placement&&b.push(function(L,F,B,q,te,oe,ue){const se={},ce=oe.queryRenderedSymbols(q),W=[];for(const ae of Object.keys(ce).map(Number))W.push(ue[ae]);W.sort(yt);for(const ae of W){const ge=ae.featureIndex.lookupSymbolFeatures(ce[ae.bucketInstanceId],F,ae.bucketIndex,ae.sourceLayerIndex,te.filter,te.layers,te.availableImages,L);for(const ve in ge){const De=se[ve]=se[ve]||[],Ae=ge[ve];Ae.sort((de,Be)=>{const Oe=ae.featureSortOrder;if(Oe){const Ke=Oe.indexOf(de.featureIndex);return Oe.indexOf(Be.featureIndex)-Ke}return Be.featureIndex-de.featureIndex});for(const de of Ae)De.push(de)}}for(const ae in se)se[ae].forEach(ge=>{const ve=ge.feature,De=B(L[ae]);if(!De)return;const Ae=De.getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=Ae});return se}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),D.screenGeometry,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,l){l&&l.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",l.filter,null,l);const p=this._getSourceCaches(i);let v=[];for(const b of p)v=v.concat(ot(b,l));return v}addSourceType(i,l,p){return Q.getSourceType(i)?p(new Error(`A source type called "${i}" already exists.`)):(Q.setSourceType(i,l),l.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:l.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,l={}){this._checkLoaded();const p=this.light.getLight();let v=!1;for(const M in i)if(!N(i[M],p[M])){v=!0;break}if(!v)return;const b=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(i,l),this.light.updateTransitions(b)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(i,l=1){if(this._checkLoaded(),!i)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let p=i;if(l===1){if(typeof p.source=="object"){const v="terrain-dem-src";this.addSource(v,p.source),p=s.clone$1(p),p=s.extend(p,{source:v})}if(this._validate(s.validateTerrain,"terrain",p))return}if(!this.terrain||this.terrain&&l!==this.terrain.drapeRenderMode){if(!p)return;this._createTerrain(p,l)}else{const v=this.terrain,b=v.get();for(const M of Object.keys(s.spec.terrain))!p.hasOwnProperty(M)&&s.spec.terrain[M].default&&(p[M]=s.spec.terrain[M].default);for(const M in p)if(!N(p[M],b[M])){v.set(p),this.stylesheet.terrain=p;const D=this._setTransitionParameters({duration:0});v.updateTransitions(D);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(i){const l=this.fog=new Ee(i,this.map.transform);this.stylesheet.fog=i;const p=this._setTransitionParameters({duration:0});l.updateTransitions(p)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const i of this.map._markers)i._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(i){if(this._checkLoaded(),!i)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const l=this.fog,p=l.get();Object.keys(i).length===0&&l.set(i);for(const v in i)if(!N(i[v],p[v])){l.set(i),this.stylesheet.fog=i;const b=this._setTransitionParameters({duration:0});l.updateTransitions(b);break}}else this._createFog(i);this._markersNeedUpdate=!0}_setTransitionParameters(i){return{now:s.exported.now(),transition:s.extend(i,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const i=this._order.filter(p=>this.isLayerDraped(this._layers[p])),l=this._order.filter(p=>!this.isLayerDraped(this._layers[p]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...i),this._drapedFirstOrder.push(...l)}_createTerrain(i,l){const p=this.terrain=new Hn(i,l);this.stylesheet.terrain=i,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const v=this._setTransitionParameters({duration:0});p.updateTransitions(v)}_force3DLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="fill-extrusion"&&this._updateLayer(l)}}_forceSymbolLayerUpdate(){for(const i in this._layers){const l=this._layers[i];l.type==="symbol"&&this._updateLayer(l)}}_validate(i,l,p,v,b={}){return(!b||b.validate!==!1)&&go(this,i.call(s.validateStyle,s.extend({key:l,style:this.serialize(),value:p,styleSpec:s.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this._sourceCaches)this._sourceCaches[i].clearTiles(),this._sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){const l=this._getSourceCaches(i);for(const p of l)p.clearTiles()}_reloadSource(i){const l=this._getSourceCaches(i);for(const p of l)p.resume(),p.reload()}_reloadSources(){for(const i of this._getSources())i.reload&&i.reload()}_updateSources(i){for(const l in this._sourceCaches)this._sourceCaches[l].update(i)}_generateCollisionBoxes(){for(const i in this._sourceCaches){const l=this._sourceCaches[i];l.resume(),l.reload()}}_updatePlacement(i,l,p,v,b=!1){let M=!1,D=!1;const L={};for(const F of this._order){const B=this._layers[F];if(B.type!=="symbol")continue;if(!L[B.source]){const te=this._getLayerSourceCache(B);if(!te)continue;L[B.source]=te.getRenderableIds(!0).map(oe=>te.getTileByID(oe)).sort((oe,ue)=>ue.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ue.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(B,L[B.source],i.center.lng,i.projection);M=M||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),b=b||this._layerOrderChanged||p===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(b||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),i.zoom))&&(this.pauseablePlacement=new bs(i,this._order,b,l,p,v,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),D=!0),M&&this.pauseablePlacement.placement.setStale()),D||M)for(const F of this._order){const B=this._layers[F];B.type==="symbol"&&this.placement.updateLayerOpacities(B,L[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const i in this._sourceCaches)this._sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,l,p){this.imageManager.getImages(l.icons,p),this._updateTilesForChangedImages();const v=b=>{b&&b.setDependencies(l.tileID.key,l.type,l.icons)};v(this._otherSourceCaches[l.source]),v(this._symbolSourceCaches[l.source])}getGlyphs(i,l,p){this.glyphManager.getGlyphs(l.stacks,p)}getResource(i,l,p){return s.makeRequest(l,p)}_getSourceCache(i){return this._otherSourceCaches[i]}_getLayerSourceCache(i){return i.type==="symbol"?this._symbolSourceCaches[i.source]:this._otherSourceCaches[i.source]}_getSourceCaches(i){const l=[];return this._otherSourceCaches[i]&&l.push(this._otherSourceCaches[i]),this._symbolSourceCaches[i]&&l.push(this._symbolSourceCaches[i]),l}_isSourceCacheLoaded(i){const l=this._getSourceCaches(i);return l.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${i}'`))),!1):l.every(p=>p.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Q.getSourceType=function(f){return xe[f]},Q.setSourceType=function(f,i){xe[f]=i},Q.registerForPluginStateChange=s.registerForPluginStateChange;var Ie=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,st="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",gt=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Yt=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,zn=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let _n={},$n={};const br=[];ki(Ie,br),ki(gt,br),ki(Yt,br),ki(zn,br),_n=Sn("",gt),$n=Sn(zn,Yt);const ti=Sn(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),si=Ie,mi=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Ai={background:Sn(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Sn(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Sn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Sn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Sn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Sn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Sn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Sn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Sn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Sn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Sn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Sn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Sn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Sn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Sn(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Sn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Sn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Sn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Sn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Sn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Sn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Sn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Sn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Sn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Sn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,st),skyboxGradient:Sn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,st),skyboxCapture:Sn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Sn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Sn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function ki(f,i){const l=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let p of l)if(p=p.trim(),p[0]==="#"&&p.includes("if")&&!p.includes("endif")){p=p.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const v=p.split(" ");for(const b of v)i.includes(b)||i.push(b)}}function Sn(f,i){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),v={},b=[...br];return ki(f,b),ki(i,b),{fragmentSource:f=f.replace(l,(M,D,L,F,B)=>(v[B]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${L} ${F} ${B};
#else
uniform ${L} ${F} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${L} ${F} ${B} = u_${B};
#endif
`)),vertexSource:i=i.replace(l,(M,D,L,F,B)=>{const q=F==="float"?"vec2":"vec4",te=B.match(/color/)?"color":q;return v[B]?D==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${L} ${q} a_${B};
varying ${L} ${F} ${B};
#else
uniform ${L} ${F} u_${B};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${L} ${F} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${te}(a_${B}, u_${B}_t);
#else
    ${L} ${F} ${B} = u_${B};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${L} ${q} a_${B};
#else
uniform ${L} ${F} u_${B};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${L} ${F} ${B} = a_${B};
#else
    ${L} ${F} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${L} ${F} ${B} = unpack_mix_${te}(a_${B}, u_${B}_t);
#else
    ${L} ${F} ${B} = u_${B};
#endif
`}),staticAttributes:p,usedDefines:b}}class Al{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(i,l,p,v,b,M,D){this.context=i;let L=this.boundPaintVertexBuffers.length!==v.length;for(let B=0;!L&&B<v.length;B++)this.boundPaintVertexBuffers[B]!==v[B]&&(L=!0);let F=this.boundDynamicVertexBuffers.length!==D.length;for(let B=0;!F&&B<D.length;B++)this.boundDynamicVertexBuffers[B]!==D[B]&&(F=!0);if(!i.extVertexArrayObject||!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==p||L||F||this.boundIndexBuffer!==b||this.boundVertexOffset!==M)this.freshBind(l,p,v,b,M,D);else{i.bindVertexArrayOES.set(this.vao);for(const B of D)B&&B.bind();b&&b.dynamicDraw&&b.bind()}}freshBind(i,l,p,v,b,M){let D;const L=i.numAttributes,F=this.context,B=F.gl;if(F.extVertexArrayObject)this.vao&&this.destroy(),this.vao=F.extVertexArrayObject.createVertexArrayOES(),F.bindVertexArrayOES.set(this.vao),D=0,this.boundProgram=i,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffers=M;else{D=F.currentNumAttributes||0;for(let q=L;q<D;q++)B.disableVertexAttribArray(q)}l.enableAttributes(B,i),l.bind(),l.setVertexAttribPointers(B,i,b);for(const q of p)q.enableAttributes(B,i),q.bind(),q.setVertexAttribPointers(B,i,b);for(const q of M)q&&(q.enableAttributes(B,i),q.bind(),q.setVertexAttribPointers(B,i,b));v&&v.bind(),F.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function kl(f,i){const l=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new s.MercatorCoordinate(0,p/l).toLngLat().lat,new s.MercatorCoordinate(0,(p+1)/l).toLngLat().lat]}function Uu(f,i,l,p,v,b,M){const D=f.context,L=D.gl,F=l.fbo;if(!F)return;f.prepareDrawTile();const B=f.useProgram("hillshade");D.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,F.colorAttachment.get());const q=((se,ce,W,ae)=>{const ge=W.paint.get("hillshade-shadow-color"),ve=W.paint.get("hillshade-highlight-color"),De=W.paint.get("hillshade-accent-color");let Ae=W.paint.get("hillshade-illumination-direction")*(Math.PI/180);W.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ae-=se.transform.angle);const de=!se.options.moving;return{u_matrix:ae||se.transform.calculateProjMatrix(ce.tileID.toUnwrapped(),de),u_image:0,u_latrange:kl(0,ce.tileID),u_light:[W.paint.get("hillshade-exaggeration"),Ae],u_shadow:ge,u_highlight:ve,u_accent:De}})(f,l,p,f.terrain?i.projMatrix:null);f.prepareDrawProgram(D,B,i.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:oe,tileBoundsSegments:ue}=f.getTileBoundsBuffers(l);B.draw(D,L.TRIANGLES,v,b,M,s.CullFaceMode.disabled,q,p.id,te,oe,ue)}function uh(f,i,l){if(!i.needsDEMTextureUpload)return;const p=f.context,v=p.gl;p.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||f.getTileTexture(l.stride);const b=l.getPixels();i.demTexture?i.demTexture.update(b,{premultiply:!1}):i.demTexture=new s.Texture(p,b,v.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Es(f,i,l,p,v,b){const M=f.context,D=M.gl;if(!i.dem)return;const L=i.dem;if(M.activeTexture.set(D.TEXTURE1),uh(f,i,L),!i.demTexture)return;i.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);const F=L.dim;M.activeTexture.set(D.TEXTURE0);let B=i.fbo;if(!B){const ue=new s.Texture(M,{width:F,height:F,data:null},D.RGBA);ue.bind(D.LINEAR,D.CLAMP_TO_EDGE),B=i.fbo=M.createFramebuffer(F,F,!0),B.colorAttachment.set(ue.texture)}M.bindFramebuffer.set(B.framebuffer),M.viewport.set([0,0,F,F]);const{tileBoundsBuffer:q,tileBoundsIndexBuffer:te,tileBoundsSegments:oe}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(M,D.TRIANGLES,p,v,b,s.CullFaceMode.disabled,((ue,se)=>{const ce=se.stride,W=s.create();return s.ortho(W,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(W,W,[0,-s.EXTENT,0]),{u_matrix:W,u_image:1,u_dimension:[ce,ce],u_zoom:ue.overscaledZ,u_unpack:se.unpackVector}})(i.tileID,L),l.id,q,te,oe),i.needsHillshadePrepare=!1}const lu=f=>({u_matrix:new s.UniformMatrix4f(f),u_image0:new s.Uniform1i(f),u_skirt_height:new s.Uniform1f(f)}),Ss=(f,i)=>({u_matrix:f,u_image0:0,u_skirt_height:i}),ju=(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:i,u_normalize_matrix:Float32Array.from(p),u_merc_matrix:l,u_zoom_transition:v,u_merc_center:b,u_image0:0,u_frustum_tl:M,u_frustum_tr:D,u_frustum_br:L,u_frustum_bl:F,u_globe_pos:B,u_globe_radius:q,u_viewport:te,u_grid_matrix:ue?Float32Array.from(ue):new Float32Array(9),u_skirt_height:oe});function Vu(f,i){return f!=null&&i!=null&&!(!f.hasData()||!i.hasData())&&f.demTexture!=null&&i.demTexture!=null&&f.tileID.key!==i.tileID.key}const tl=new class{constructor(){this.operations={}}newMorphing(f,i,l,p,v){if(f in this.operations){const b=this.operations[f];b.to.tileID.key!==l.tileID.key&&(b.queued=l)}else this.operations[f]={startTime:p,phase:0,duration:v,from:i,to:l,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const i=this.operations[f];return{from:i.from,to:i.to,phase:i.phase}}update(f){for(const i in this.operations){const l=this.operations[i];for(l.phase=(f-l.startTime)/l.duration;l.phase>=1||!this._validOp(l);)if(!this._nextOp(l,f)){delete this.operations[i];break}}}_nextOp(f,i){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=i,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},Dl={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function $u(f){return 6*Math.pow(1.5,22-f)}function Dd(f,i){const l=1<<f.z;return!i&&(f.x===0||f.x===l-1)||f.y===0||f.y===l-1}const Gu=f=>({u_matrix:f});function lf(f,i,l,p,v){if(v>0){const b=s.exported.now(),M=(b-f.timeAdded)/v,D=i?(b-i.timeAdded)/v:-1,L=l.getSource(),F=p.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),B=!i||Math.abs(i.tileID.overscaledZ-F)>Math.abs(f.tileID.overscaledZ-F),q=B&&f.refreshedUponExpiration?1:s.clamp(B?M:1-D,0,1);return f.refreshedUponExpiration&&M>=1&&(f.refreshedUponExpiration=!1),i?{opacity:1,mix:1-q}:{opacity:q,mix:0}}return{opacity:1,mix:0}}class Rd extends s.SourceCache{constructor(i){const l={type:"raster-dem",maxzoom:i.transform.maxZoom},p=new Fn(En(),null),v=dt("mock-dem",l,p,i.style);super("mock-dem",v,!1),v.setEventedParent(this),this._sourceLoaded=!0}_loadTile(i,l){i.state="loaded",l(null)}}class Lo extends s.SourceCache{constructor(i){const l=dt("proxy",{type:"geojson",maxzoom:i.transform.maxZoom},new Fn(En(),null),i.style);super("proxy",l,!1),l.setEventedParent(this),this.map=this.getSource().map=i,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(i,l,p){if(i.freezeTileCoverage)return;this.transform=i;const v=i.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((b,M)=>{if(b[M.key]="",!this._tiles[M.key]){const D=new s.Tile(M,this._source.tileSize*M.overscaleFactor(),i.tileZoom);D.state="loaded",this._tiles[M.key]=D}return b},{});for(const b in this._tiles)b in v||(this.freeFBO(b),this._tiles[b].unloadVectorData(),delete this._tiles[b])}freeFBO(i){const l=this.proxyCachedFBO[i];if(l!==void 0){const p=Object.values(l);this.renderCachePool.push(...p),delete this.proxyCachedFBO[i]}}deallocRenderCache(){this.renderCache.forEach(i=>i.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class uf extends s.OverscaledTileID{constructor(i,l,p){super(i.overscaledZ,i.wrap,i.canonical.z,i.canonical.x,i.canonical.y),this.proxyTileKey=l,this.projMatrix=p}}class ch extends s.Elevation{constructor(i,l){super(),this.painter=i,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[p,v,b]=function(L){const F=new s.StructArrayLayout2i4,B=new s.StructArrayLayout3ui6,q=131;F.reserve(17161),B.reserve(33800);const te=s.EXTENT/128,oe=s.EXTENT+te/2,ue=oe+te;for(let ce=-te;ce<ue;ce+=te)for(let W=-te;W<ue;W+=te){const ae=W<0||W>oe||ce<0||ce>oe?24575:0,ge=s.clamp(Math.round(W),0,s.EXTENT),ve=s.clamp(Math.round(ce),0,s.EXTENT);F.emplaceBack(ge+ae,ve)}const se=(ce,W)=>{const ae=W*q+ce;B.emplaceBack(ae+1,ae,ae+q),B.emplaceBack(ae+q,ae+q+1,ae+1)};for(let ce=1;ce<129;ce++)for(let W=1;W<129;W++)se(W,ce);return[0,129].forEach(ce=>{for(let W=0;W<130;W++)se(W,ce),se(ce,W)}),[F,B,32768]}(),M=i.context;this.gridBuffer=M.createVertexBuffer(p,s.posAttributes.members),this.gridIndexBuffer=M.createIndexBuffer(v),this.gridSegments=s.SegmentVector.simpleSegment(0,0,p.length,v.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,p.length,b),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Lo(l.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const D=M.gl;this._overlapStencilMode=new s.StencilMode({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=i.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=l,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Rd(l.map)}set style(i){i.on("data",this._onStyleDataEvent.bind(this)),i.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=i,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(i,l,p){if(i&&i.terrain){this._style!==i&&(this.style=i),this.enabled=!0;const v=i.terrain.properties;this.sourceCache=i.terrain.drapeRenderMode===0?this._mockSourceCache:i._getSourceCache(v.get("source")),this._exaggeration=v.get("exaggeration");const b=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const M=this.getScaledDemTileSize();this.sourceCache.update(l,M,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,b(),this._initializing=!0),b(),l.updateElevation(!0,p),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(l),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(i){this._findCoveringTileCache[i]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const i=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||i.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${i.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${i.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(i){i.coord&&i.dataType==="source"?this._clearRenderCacheForTile(i.sourceCacheId,i.coord):i.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const i in this._style._sourceCaches)this._style._sourceCaches[i].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(i=>i.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const i=2*this.proxySourceCache.getSource().tileSize;return[i,i]}set useVertexMorphing(i){this._useVertexMorphing=i}updateTileBinding(i){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const l=this.proxySourceCache,p=this.painter.transform;this._initializing&&(this._initializing=p._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(p.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const v=this.proxyCoords=l.getIds().map(L=>{const F=l.getTileByID(L).tileID;return F.projMatrix=p.calculateProjMatrix(F.toUnwrapped()),F});(function(L,F){const B=F.transform.pointCoordinate(F.transform.getCameraPoint()),q=new s.Point(B.x,B.y);L.sort((te,oe)=>{if(oe.overscaledZ-te.overscaledZ)return oe.overscaledZ-te.overscaledZ;const ue=new s.Point(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),se=new s.Point(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),ce=q.mult(1<<te.canonical.z);return ce.x-=.5,ce.y-=.5,ce.distSqr(ue)-ce.distSqr(se)})})(v,this.painter),this._previousZoom=p.zoom;const b=this.proxyToSource||{};this.proxyToSource={},v.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const M=this._style._sourceCaches;for(const L in M){const F=M[L];if(!F.used||(F!==this.sourceCache&&this.resetTileLookupCache(F.id),this._setupProxiedCoordsForOrtho(F,i[L],b),F.usedForTerrain))continue;const B=i[L];F.getSource().reparseOverscaled&&this._assignTerrainTiles(B)}this.proxiedCoords[l.id]=v.map(L=>new uf(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(v),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(b),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const D={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const F=this.terrainTileForTile[L.key];if(!F)continue;const B=F.tileID.key;B in D||(this._visibleDemTiles.push(F),D[B]=B)}}_assignTerrainTiles(i){this._initializing||i.forEach(l=>{if(this.terrainTileForTile[l.key])return;const p=this._findTileCoveringTileID(l,this.sourceCache);p&&(this.terrainTileForTile[l.key]=p)})}_prepareDEMTextures(){const i=this.painter.context,l=i.gl;for(const p in this.terrainTileForTile){const v=this.terrainTileForTile[p],b=v.dem;!b||v.demTexture&&!v.needsDEMTextureUpload||(i.activeTexture.set(l.TEXTURE1),uh(this.painter,v,b))}}_prepareDemTileUniforms(i,l,p,v){if(!l||l.demTexture==null)return!1;const b=i.tileID.canonical,M=Math.pow(2,l.tileID.canonical.z-b.z),D=v||"";return p[`u_dem_tl${D}`]=[b.x*M%1,b.y*M%1],p[`u_dem_scale${D}`]=M,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const i=this.painter.context,l=i.gl;if(!this._emptyDepthBufferTexture){const p=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(i,p,l.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let i=0;const l=this._visibleDemTiles.reduce((p,v)=>{if(!v.dem)return p;const b=v.dem.tree.minimums[0];return b>0&&i++,p+b},0);return i?l/i:0}_updateEmptyDEMTexture(){const i=this.painter.context,l=i.gl;i.activeTexture.set(l.TEXTURE2);const p=this._getLoadedAreaMinimum(),v=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(p,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let b=this._emptyDEMTexture;return b?b.update(v,{premultiply:!1}):b=this._emptyDEMTexture=new s.Texture(i,v,l.RGBA,{premultiply:!1}),b}setupElevationDraw(i,l,p){const v=this.painter.context,b=v.gl,M=(D=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(D),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var D;M.u_dem_size=this.sourceCache.getSource().tileSize,M.u_exaggeration=this.exaggeration();let L=null,F=null,B=1;if(p&&p.morphing&&this._useVertexMorphing){const q=p.morphing.srcDemTile,te=p.morphing.dstDemTile;B=p.morphing.phase,q&&te&&(this._prepareDemTileUniforms(i,q,M,"_prev")&&(F=q),this._prepareDemTileUniforms(i,te,M)&&(L=te))}if(F&&L?(v.activeTexture.set(b.TEXTURE2),L.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),v.activeTexture.set(b.TEXTURE4),F.demTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE,b.NEAREST),M.u_dem_lerp=B):(L=this.terrainTileForTile[i.tileID.key],v.activeTexture.set(b.TEXTURE2),(this._prepareDemTileUniforms(i,L,M)?L.demTexture:this.emptyDEMTexture).bind(b.NEAREST,b.CLAMP_TO_EDGE)),v.activeTexture.set(b.TEXTURE3),p&&p.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),this._depthFBO&&(M.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(b.NEAREST,b.CLAMP_TO_EDGE),M.u_depth_size_inv=[1,1]),p&&p.useMeterToDem&&L){const q=(1<<L.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;M.u_meter_to_dem=q}if(p&&p.labelPlaneMatrixInv&&(M.u_label_plane_matrix_inv=p.labelPlaneMatrixInv),l.setTerrainUniformValues(v,M),this.painter.transform.projection.name==="globe"){const q=this.globeUniformValues(this.painter.transform,i.tileID.canonical,p&&p.useDenormalizedUpVectorScale);l.setGlobeUniformValues(v,q)}}globeUniformValues(i,l,p){const v=i.projection;return{u_tile_tl_up:v.upVector(l,0,0),u_tile_tr_up:v.upVector(l,s.EXTENT,0),u_tile_br_up:v.upVector(l,s.EXTENT,s.EXTENT),u_tile_bl_up:v.upVector(l,0,s.EXTENT),u_tile_up_scale:p?s.globeMetersToEcef(1):v.upVectorScale(l,i.center.lat,i.worldSize).metersToTile}}renderToBackBuffer(i){const l=this.painter,p=this.painter.context;i.length!==0&&(p.bindFramebuffer.set(null),p.viewport.set([0,0,l.width,l.height]),l.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(v,b,M,D,L){if(v.transform.projection.name==="globe")(function(F,B,q,te,oe){const ue=F.context,se=ue.gl;let ce,W;const ae=F.options.showTerrainWireframe?2:0,ge=F.transform,ve=s.globeUseCustomAntiAliasing(F,ue,ge),De=(xt,Ze)=>{if(W===xt)return;const vt=[Dl[xt],"PROJECTION_GLOBE_VIEW"];ve&&vt.push("CUSTOM_ANTIALIASING"),Ze&&vt.push(Dl[ae]),ce=F.useProgram("globeRaster",null,vt),W=xt},Ae=F.colorModeForRenderPass(),de=new s.DepthMode(se.LEQUAL,s.DepthMode.ReadWrite,F.depthRangeFor3D);tl.update(oe);const Be=s.calculateGlobeMercatorMatrix(ge),Oe=[s.mercatorXfromLng(ge.center.lng),s.mercatorYfromLat(ge.center.lat)],Ke=ae?[!1,!0]:[!1],Ot=F.globeSharedBuffers,We=[ge.width*s.exported.devicePixelRatio,ge.height*s.exported.devicePixelRatio],_t=Float32Array.from(ge.globeMatrix),tt={useDenormalizedUpVectorScale:!0};if(Ke.forEach(xt=>{const Ze=F.transform,vt=$u(Ze.zoom)*B.exaggeration();W=-1;const Ft=xt?se.LINES:se.TRIANGLES;for(const Tt of te){const Pt=q.getTile(Tt),pn=s.StencilMode.disabled,Xn=B.prevTerrainTileForTile[Tt.key],sn=B.terrainTileForTile[Tt.key];Vu(Xn,sn)&&tl.newMorphing(Tt.key,Xn,sn,oe,250),ue.activeTexture.set(se.TEXTURE0),Pt.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const In=tl.getMorphValuesForProxy(Tt.key),vr=In?1:0;In&&s.extend$1(tt,{morphing:{srcDemTile:In.from,dstDemTile:In.to,phase:s.easeCubicInOut(In.phase)}});const mr=s.tileCornersToBounds(Tt.canonical),gn=s.getLatitudinalLod(mr.getCenter().lat),jr=s.getGridMatrix(Tt.canonical,mr,gn,Ze.worldSize/Ze._pixelsPerMercatorPixel),ni=s.globeNormalizeECEF(s.globeTileBounds(Tt.canonical)),li=ju(Ze.projMatrix,_t,Be,ni,s.globeToMercatorTransition(Ze.zoom),Oe,Ze.frustumCorners.TL,Ze.frustumCorners.TR,Ze.frustumCorners.BR,Ze.frustumCorners.BL,Ze.globeCenterInViewSpace,Ze.globeRadius,We,vt,jr);if(De(vr,xt),B.setupElevationDraw(Pt,ce,tt),F.prepareDrawProgram(ue,ce,Tt.toUnwrapped()),Ot){const[ui,Ga,Ca]=xt?Ot.getWirefameBuffers(F.context,gn):Ot.getGridBuffers(gn,vt!==0);ce.draw(ue,Ft,de,pn,Ae,s.CullFaceMode.backCCW,li,"globe_raster",ui,Ga,Ca)}}}),Ot){const xt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ve&&xt.push("CUSTOM_ANTIALIASING"),ce=F.useProgram("globeRaster",null,xt);for(const Ze of te){const{x:vt,y:Ft,z:Tt}=Ze.canonical,Pt=Ft===0,pn=Ft===(1<<Tt)-1,[Xn,sn,In,vr]=Ot.getPoleBuffers(Tt);if(vr&&(Pt||pn)){const mr=q.getTile(Ze);ue.activeTexture.set(se.TEXTURE0),mr.texture.bind(se.LINEAR,se.CLAMP_TO_EDGE);let gn=s.globePoleMatrixForTile(Tt,vt,ge);const jr=s.globeNormalizeECEF(s.globeTileBounds(Ze.canonical)),ni=(li,ui)=>li.draw(ue,se.TRIANGLES,de,s.StencilMode.disabled,Ae,s.CullFaceMode.disabled,ju(ge.projMatrix,gn,gn,jr,0,Oe,ge.frustumCorners.TL,ge.frustumCorners.TR,ge.frustumCorners.BR,ge.frustumCorners.BL,ge.globeCenterInViewSpace,ge.globeRadius,We,0),"globe_pole_raster",ui,In,vr);B.setupElevationDraw(mr,ce,tt),F.prepareDrawProgram(ue,ce,Ze.toUnwrapped()),Pt&&ni(ce,Xn),pn&&(gn=s.scale(s.create(),gn,[1,-1,1]),ni(ce,sn))}}}})(v,b,M,D,L);else{const F=v.context,B=F.gl;let q,te;const oe=v.options.showTerrainWireframe?2:0,ue=(ge,ve)=>{if(te===ge)return;const De=[Dl[ge]];ve&&De.push(Dl[oe]),q=v.useProgram("terrainRaster",null,De),te=ge},se=v.colorModeForRenderPass(),ce=new s.DepthMode(B.LEQUAL,s.DepthMode.ReadWrite,v.depthRangeFor3D);tl.update(L);const W=v.transform,ae=$u(W.zoom)*b.exaggeration();(oe?[!1,!0]:[!1]).forEach(ge=>{te=-1;const ve=ge?B.LINES:B.TRIANGLES,[De,Ae]=ge?b.getWirefameBuffer():[b.gridIndexBuffer,b.gridSegments];for(const de of D){const Be=M.getTile(de),Oe=s.StencilMode.disabled,Ke=b.prevTerrainTileForTile[de.key],Ot=b.terrainTileForTile[de.key];Vu(Ke,Ot)&&tl.newMorphing(de.key,Ke,Ot,L,250),F.activeTexture.set(B.TEXTURE0),Be.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const We=tl.getMorphValuesForProxy(de.key),_t=We?1:0;let tt;We&&(tt={morphing:{srcDemTile:We.from,dstDemTile:We.to,phase:s.easeCubicInOut(We.phase)}});const xt=Ss(de.projMatrix,Dd(de.canonical,W.renderWorldCopies)?ae/10:ae);ue(_t,ge),b.setupElevationDraw(Be,q,tt),v.prepareDrawProgram(F,q,de.toUnwrapped()),q.draw(F,ve,ce,Oe,se,s.CullFaceMode.backCCW,xt,"terrain_raster",b.gridBuffer,De,Ae)}})}}(l,this,this.proxySourceCache,i,this._updateTimestamp),this.renderingToTexture=!0,l.gpuTimingDeferredRenderEnd(),i.splice(0,i.length))}renderBatch(i){if(this._drapedRenderBatches.length===0)return i+1;this.renderingToTexture=!0;const l=this.painter,p=this.painter.context,v=this.proxySourceCache,b=this.proxiedCoords[v.id],M=this._drapedRenderBatches.shift(),D=[],L=l.style.order;let F=0;for(const B of b){const q=v.getTileByID(B.proxyTileKey),te=v.proxyCachedFBO[B.key]?v.proxyCachedFBO[B.key][i]:void 0,oe=te!==void 0?v.renderCache[te]:this.pool[F++],ue=te!==void 0;if(q.texture=oe.tex,ue&&!oe.dirty){D.push(q.tileID);continue}let se;p.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(p.clear({color:s.Color.transparent,stencil:0}),oe.dirty=!1);for(let ce=M.start;ce<=M.end;++ce){const W=l.style._layers[L[ce]];if(W.isHidden(l.transform.zoom))continue;const ae=l.style._getLayerSourceCache(W),ge=ae?this.proxyToSource[B.key][ae.id]:[B];if(!ge)continue;const ve=ge;p.viewport.set([0,0,oe.fb.width,oe.fb.height]),se!==(ae?ae.id:null)&&(this._setupStencil(oe,ge,W,ae),se=ae?ae.id:null),l.renderLayer(l,ae,W,ve)}this.renderedToTile?(oe.dirty=!0,D.push(q.tileID)):ue||--F,F===5&&(F=0,this.renderToBackBuffer(D))}return this.renderToBackBuffer(D),this.renderingToTexture=!1,p.bindFramebuffer.set(null),p.viewport.set([0,0,l.width,l.height]),M.end+1}postRender(){}renderCacheEfficiency(i){const l=i.order.length;if(l===0)return{efficiency:100};let p,v=0,b=0,M=!1;for(let D=0;D<l;++D){const L=i._layers[i.order[D]];this._style.isLayerDraped(L)?(M&&++v,++b):M||(M=!0,p=L.id)}return b===0?{efficiency:100}:{efficiency:100*(1-v/b),firstUndrapedLayer:p}}getMinElevationBelowMSL(){let i=0;return this._visibleDemTiles.filter(l=>l.dem).forEach(l=>{i=Math.min(i,l.dem.tree.minimums[0])}),i===0?i:(i-30)*this._exaggeration}raycast(i,l,p){if(!this._visibleDemTiles)return null;const v=this._visibleDemTiles.filter(b=>b.dem).map(b=>{const M=b.tileID,D=1<<M.overscaledZ,{x:L,y:F}=M.canonical,B=L/D,q=(L+1)/D,te=F/D,oe=(F+1)/D;return{minx:B,miny:te,maxx:q,maxy:oe,t:b.dem.tree.raycastRoot(B,te,q,oe,i,l,p),tile:b}});v.sort((b,M)=>(b.t!==null?b.t:Number.MAX_VALUE)-(M.t!==null?M.t:Number.MAX_VALUE));for(const b of v){if(b.t==null)return null;const M=b.tile.dem.tree.raycast(b.minx,b.miny,b.maxx,b.maxy,i,l,p);if(M!=null)return M}return null}_createFBO(){const i=this.painter.context,l=i.gl,p=this.drapeBufferSize;i.activeTexture.set(l.TEXTURE0);const v=new s.Texture(i,{width:p[0],height:p[1],data:null},l.RGBA);v.bind(l.LINEAR,l.CLAMP_TO_EDGE);const b=i.createFramebuffer(p[0],p[1],!1);return b.colorAttachment.set(v.texture),b.depthAttachment=new Le(i,b.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=i.createRenderbuffer(i.gl.DEPTH_STENCIL,p[0],p[1]),this._stencilRef=0,b.depthAttachment.set(this._sharedDepthStencil),i.clear({stencil:0})):b.depthAttachment.set(this._sharedDepthStencil),i.extTextureFilterAnisotropic&&!i.extTextureFilterAnisotropicForceOff&&l.texParameterf(l.TEXTURE_2D,i.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.extTextureFilterAnisotropicMax),{fb:b,tex:v,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const i in this._style._sourceCaches)if(this._style._sourceCaches[i].hasTransition())return!0;return this._style.order.some(i=>{const l=this._style._layers[i],p=l.isHidden(this.painter.transform.zoom);return l.type==="custom"?!p&&l.shouldRedrape():!p&&l.hasTransition()})}_clearLineLayersFromRenderCache(){let i=!1;for(const p of this._style._getSources())if(p instanceof Gt){i=!0;break}if(!i)return;const l={};for(let p=0;p<this._style.order.length;++p){const v=this._style._layers[this._style.order[p]],b=this._style._getLayerSourceCache(v);if(b&&!l[b.id]&&!v.isHidden(this.painter.transform.zoom)&&v.type==="line"&&v.widthExpression()instanceof s.ZoomDependentExpression){l[b.id]=!0;for(const M of this.proxyCoords){const D=this.proxyToSource[M.key][b.id];if(D)for(const L of D)this._clearRenderCacheForTile(b.id,L)}}}}_clearRasterLayersFromRenderCache(){let i=!1;for(const p in this._style._sourceCaches)if(this._style._sourceCaches[p]._source instanceof kt){i=!0;break}if(!i)return;const l={};for(let p=0;p<this._style.order.length;++p){const v=this._style._layers[this._style.order[p]],b=this._style._getLayerSourceCache(v);if(!b||l[b.id]||v.isHidden(this.painter.transform.zoom)||v.type!=="raster")continue;const M=v.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const L=this.proxyToSource[D.key][b.id];if(L)for(const F of L){const B=lf(b.getTile(F),b.findLoadedParent(F,0),b,this.painter.transform,M);(B.opacity!==1||B.mix!==0)&&this._clearRenderCacheForTile(b.id,F)}}}}_setupDrapedRenderBatches(){const i=this._style.order,l=i.length;if(l===0)return;const p=[];let v,b=0,M=this._style._layers[i[b]];for(;!this._style.isLayerDraped(M)&&M.isHidden(this.painter.transform.zoom)&&++b<l;)M=this._style._layers[i[b]];for(;b<l;++b){const D=this._style._layers[i[b]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?v===void 0&&(v=b):v!==void 0&&(p.push({start:v,end:b-1}),v=void 0))}v!==void 0&&p.push({start:v,end:b-1}),this._drapedRenderBatches=p}_setupRenderCache(i){const l=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,l.renderCache.length>l.renderCachePool.length){const M=Object.values(l.proxyCachedFBO);l.proxyCachedFBO={};for(let D=0;D<M.length;++D){const L=Object.values(M[D]);l.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const p=this.proxyCoords,v=this._tilesDirty;for(let M=p.length-1;M>=0;M--){const D=p[M];if(l.getTileByID(D.key),l.proxyCachedFBO[D.key]!==void 0){const L=i[D.key],F=this.proxyToSource[D.key];let B=0;for(const q in F){const te=F[q],oe=L[q];if(!oe||oe.length!==te.length||te.some((ue,se)=>ue!==oe[se]||v[q]&&v[q].hasOwnProperty(ue.key))){B=-1;break}++B}for(const q in l.proxyCachedFBO[D.key])l.renderCache[l.proxyCachedFBO[D.key][q]].dirty=B<0||B!==Object.values(L).length}}const b=[...this._drapedRenderBatches];b.sort((M,D)=>D.end-D.start-(M.end-M.start));for(const M of b)for(const D of p){if(l.proxyCachedFBO[D.key])continue;let L=l.renderCachePool.pop();L===void 0&&l.renderCache.length<50&&(L=l.renderCache.length,l.renderCache.push(this._createFBO())),L!==void 0&&(l.proxyCachedFBO[D.key]={},l.proxyCachedFBO[D.key][M.start]=L,l.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(i,l,p,v){if(!v||!this._sourceTilesOverlap[v.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const b=this.painter.context,M=b.gl;if(l.length<=1)return void(this._overlapStencilType=!1);let D;if(p.isTileClipped())D=l.length,this._overlapStencilMode.test={func:M.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(l[0].overscaledZ>l[l.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:M.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(b.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,p.isTileClipped()&&this._renderTileClippingMasks(l,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(i){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[i.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(i,l){const p=this.painter,v=this.painter.context,b=v.gl;p._tileClippingMaskIDs={},v.setColorMode(s.ColorMode.disabled),v.setDepthMode(s.DepthMode.disabled);const M=p.useProgram("clippingMask");for(const D of i){const L=p._tileClippingMaskIDs[D.key]=--l;M.draw(v,b.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:b.ALWAYS,mask:0},L,255,b.KEEP,b.KEEP,b.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Gu(D.projMatrix),"$clipping",p.tileExtentBuffer,p.quadTriangleIndexBuffer,p.tileExtentSegments)}}pointCoordinate(i){const l=this.painter.transform;if(i.x<0||i.x>l.width||i.y<0||i.y>l.height)return null;const p=[i.x,i.y,1,1];s.transformMat4$1(p,p,l.pixelMatrixInverse),s.scale$1(p,p,1/p[3]),p[0]/=l.worldSize,p[1]/=l.worldSize;const v=l._camera.position,b=s.mercatorZfromAltitude(1,l.center.lat),M=[v[0],v[1],v[2]/b,0],D=s.subtract([],p.slice(0,3),M);s.normalize(D,D);const L=this.raycast(M,D,this._exaggeration);return L!==null&&L?(s.scaleAndAdd(M,M,D,L),M[3]=M[2],M[2]*=b,M):null}drawDepth(){const i=this.painter,l=i.context,p=this.proxySourceCache,v=Math.ceil(i.width),b=Math.ceil(i.height);if(!this._depthFBO||this._depthFBO.width===v&&this._depthFBO.height===b||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const M=l.gl,D=l.createFramebuffer(v,b,!0);l.activeTexture.set(M.TEXTURE0);const L=new s.Texture(l,{width:v,height:b,data:null},M.RGBA);L.bind(M.NEAREST,M.CLAMP_TO_EDGE),D.colorAttachment.set(L.texture);const F=l.createRenderbuffer(l.gl.DEPTH_COMPONENT16,v,b);D.depthAttachment.set(F),this._depthFBO=D,this._depthTexture=L}l.bindFramebuffer.set(this._depthFBO.framebuffer),l.viewport.set([0,0,v,b]),function(M,D,L,F){if(M.transform.projection.name==="globe")return;const B=M.context,q=B.gl;B.clear({depth:1});const te=M.useProgram("terrainDepth"),oe=new s.DepthMode(q.LESS,s.DepthMode.ReadWrite,M.depthRangeFor3D);for(const ue of F){const se=L.getTile(ue),ce=Ss(ue.projMatrix,0);D.setupElevationDraw(se,te),te.draw(B,q.TRIANGLES,oe,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,ce,"terrain_depth",D.gridBuffer,D.gridIndexBuffer,D.gridNoSkirtSegments)}}(i,this,p,this.proxyCoords)}_setupProxiedCoordsForOrtho(i,l,p){if(i.getSource()instanceof jn)return this._setupProxiedCoordsForImageSource(i,l,p);this._findCoveringTileCache[i.id]=this._findCoveringTileCache[i.id]||{};const v=this.proxiedCoords[i.id]=[],b=this.proxyCoords;for(let D=0;D<b.length;D++){const L=b[D],F=this._findTileCoveringTileID(L,i);if(F){const B=this._createProxiedId(L,F,p[L.key]&&p[L.key][i.id]);v.push(B),this.proxyToSource[L.key][i.id]=[B]}}let M=!1;for(let D=0;D<l.length;D++){const L=i.getTile(l[D]);if(!L||!L.hasData())continue;const F=this._findTileCoveringTileID(L.tileID,this.proxySourceCache);if(F&&F.tileID.canonical.z!==L.tileID.canonical.z){const B=this.proxyToSource[F.tileID.key][i.id],q=this._createProxiedId(F.tileID,L,p[F.tileID.key]&&p[F.tileID.key][i.id]);B?B.splice(B.length-1,0,q):this.proxyToSource[F.tileID.key][i.id]=[q],v.push(q),M=!0}}this._sourceTilesOverlap[i.id]=M}_setupProxiedCoordsForImageSource(i,l,p){if(!i.getSource().loaded())return;const v=this.proxiedCoords[i.id]=[],b=this.proxyCoords,M=i.getSource(),D=new s.Point(M.tileID.x,M.tileID.y)._div(1<<M.tileID.z),L=M.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((B,q)=>(B.min.x=Math.min(B.min.x,q.x-D.x),B.min.y=Math.min(B.min.y,q.y-D.y),B.max.x=Math.max(B.max.x,q.x-D.x),B.max.y=Math.max(B.max.y,q.y-D.y),B),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),F=(B,q)=>{const te=B.wrap+B.canonical.x/(1<<B.canonical.z),oe=B.canonical.y/(1<<B.canonical.z),ue=s.EXTENT/(1<<B.canonical.z),se=q.wrap+q.canonical.x/(1<<q.canonical.z),ce=q.canonical.y/(1<<q.canonical.z);return te+ue<se+L.min.x||te>se+L.max.x||oe+ue<ce+L.min.y||oe>ce+L.max.y};for(let B=0;B<b.length;B++){const q=b[B];for(let te=0;te<l.length;te++){const oe=i.getTile(l[te]);if(!oe||!oe.hasData()||F(q,oe.tileID))continue;const ue=this._createProxiedId(q,oe,p[q.key]&&p[q.key][i.id]),se=this.proxyToSource[q.key][i.id];se?se.push(ue):this.proxyToSource[q.key][i.id]=[ue],v.push(ue)}}}_createProxiedId(i,l,p){let v=this.orthoMatrix;if(p){const b=p.find(M=>M.key===l.tileID.key);if(b)return b}if(l.tileID.key!==i.key){const b=i.canonical.z-l.tileID.canonical.z;let M,D,L;v=s.create();const F=l.tileID.wrap-i.wrap<<i.overscaledZ;b>0?(M=s.EXTENT>>b,D=M*((l.tileID.canonical.x<<b)-i.canonical.x+F),L=M*((l.tileID.canonical.y<<b)-i.canonical.y)):(M=s.EXTENT<<-b,D=s.EXTENT*(l.tileID.canonical.x-(i.canonical.x+F<<-b)),L=s.EXTENT*(l.tileID.canonical.y-(i.canonical.y<<-b))),s.ortho(v,0,M,0,M,0,1),s.translate(v,v,[D,L,0])}return new uf(l.tileID,i.key,v)}_findTileCoveringTileID(i,l){let p=l.getTile(i);if(p&&p.hasData())return p;const v=this._findCoveringTileCache[l.id],b=v[i.key];if(p=b?l.getTileByID(b):null,p&&p.hasData()||b===null)return p;let M=p?p.tileID:i,D=M.overscaledZ;const L=l.getSource().minzoom,F=[];if(!b){const q=l.getSource().maxzoom;if(i.canonical.z>=q){const te=i.canonical.z-q;l.getSource().reparseOverscaled?(D=Math.max(i.canonical.z+2,l.transform.tileZoom),M=new s.OverscaledTileID(D,i.wrap,q,i.canonical.x>>te,i.canonical.y>>te)):te!==0&&(D=q,M=new s.OverscaledTileID(D,i.wrap,q,i.canonical.x>>te,i.canonical.y>>te))}M.key!==i.key&&(F.push(M.key),p=l.getTile(M))}const B=q=>{F.forEach(te=>{v[te]=q}),F.length=0};for(D-=1;D>=L&&(!p||!p.hasData());D--){p&&B(p.tileID.key);const q=M.calculateScaledKey(D);if(p=l.getTileByID(q),p&&p.hasData())break;const te=v[q];if(te===null)break;te===void 0?F.push(q):p=l.getTileByID(te)}return B(p?p.tileID.key:null),p&&p.hasData()?p:null}findDEMTileFor(i){return this.enabled?this._findTileCoveringTileID(i,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(i,l){let p=this._tilesDirty[i];p||(p=this._tilesDirty[i]={}),p[l.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const i=function(l){let p=0;const v=new s.StructArrayLayout2ui4,b=131;for(let M=1;M<129;M++){for(let D=1;D<129;D++)p=M*b+D,v.emplaceBack(p,p+1),v.emplaceBack(p,p+b),v.emplaceBack(p+1,p+b),M===128&&v.emplaceBack(p+b,p+b+1);v.emplaceBack(p+1,p+1+b)}return v}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(i),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,i.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Sr{static cacheKey(i,l,p,v){let b=`${l}${v?v.cacheKey:""}`;for(const M of p)i.usedDefines.includes(M)&&(b+=`/${M}`);return b}constructor(i,l,p,v,b,M){const D=i.gl;this.program=D.createProgram();const L=function(W){const ae=[];for(let ge=0;ge<W.length;ge++){if(W[ge]===null)continue;const ve=W[ge].split(" ");ae.push(ve.pop())}return ae}(p.staticAttributes),F=v?v.getBinderAttributes():[],B=L.concat(F);let q=v?v.defines():[];q=q.concat(M.map(W=>`#define ${W}`));const te=i.isWebGL2?`#version 300 es
`:"",oe=te+q.concat(i.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(mi):mi,mi,si,ti.fragmentSource,$n.fragmentSource,p.fragmentSource).join(`
`),ue=te+q.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,si,ti.vertexSource,$n.vertexSource,_n.vertexSource,p.vertexSource).join(`
`),se=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);D.shaderSource(se,oe),D.compileShader(se),D.attachShader(this.program,se);const ce=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())this.failedToCreate=!0;else{D.shaderSource(ce,ue),D.compileShader(ce),D.attachShader(this.program,ce),this.attributes={},this.numAttributes=B.length;for(let W=0;W<this.numAttributes;W++)B[W]&&(D.bindAttribLocation(this.program,W,B[W]),this.attributes[B[W]]=W);D.linkProgram(this.program),D.deleteShader(ce),D.deleteShader(se),this.fixedUniforms=b(i),this.binderUniforms=v?v.getUniforms(i):[],M.includes("TERRAIN")&&(this.terrainUniforms=(W=>({u_dem:new s.Uniform1i(W),u_dem_prev:new s.Uniform1i(W),u_dem_unpack:new s.Uniform4f(W),u_dem_tl:new s.Uniform2f(W),u_dem_scale:new s.Uniform1f(W),u_dem_tl_prev:new s.Uniform2f(W),u_dem_scale_prev:new s.Uniform1f(W),u_dem_size:new s.Uniform1f(W),u_dem_lerp:new s.Uniform1f(W),u_exaggeration:new s.Uniform1f(W),u_depth:new s.Uniform1i(W),u_depth_size_inv:new s.Uniform2f(W),u_meter_to_dem:new s.Uniform1f(W),u_label_plane_matrix_inv:new s.UniformMatrix4f(W)}))(i)),M.includes("GLOBE")&&(this.globeUniforms=(W=>({u_tile_tl_up:new s.Uniform3f(W),u_tile_tr_up:new s.Uniform3f(W),u_tile_br_up:new s.Uniform3f(W),u_tile_bl_up:new s.Uniform3f(W),u_tile_up_scale:new s.Uniform1f(W)}))(i)),M.includes("FOG")&&(this.fogUniforms=(W=>({u_fog_matrix:new s.UniformMatrix4f(W),u_fog_range:new s.Uniform2f(W),u_fog_color:new s.Uniform4f(W),u_fog_horizon_blend:new s.Uniform1f(W),u_fog_temporal_offset:new s.Uniform1f(W),u_frustum_tl:new s.Uniform3f(W),u_frustum_tr:new s.Uniform3f(W),u_frustum_br:new s.Uniform3f(W),u_frustum_bl:new s.Uniform3f(W),u_globe_pos:new s.Uniform3f(W),u_globe_radius:new s.Uniform1f(W),u_globe_transition:new s.Uniform1f(W),u_is_globe:new s.Uniform1i(W),u_viewport:new s.Uniform2f(W)}))(i))}}setTerrainUniformValues(i,l){if(!this.terrainUniforms)return;const p=this.terrainUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in l)p[v]&&p[v].set(this.program,v,l[v])}}setGlobeUniformValues(i,l){if(!this.globeUniforms)return;const p=this.globeUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in l)p[v]&&p[v].set(this.program,v,l[v])}}setFogUniformValues(i,l){if(!this.fogUniforms)return;const p=this.fogUniforms;if(!this.failedToCreate){i.program.set(this.program);for(const v in l)p[v].set(this.program,v,l[v])}}draw(i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se){const ce=i.gl;if(this.failedToCreate)return;i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(v),i.setColorMode(b),i.setCullFace(M);for(const ae of Object.keys(this.fixedUniforms))this.fixedUniforms[ae].set(this.program,ae,D[ae]);ue&&ue.setUniforms(this.program,i,this.binderUniforms,te,{zoom:oe});const W={[ce.LINES]:2,[ce.TRIANGLES]:3,[ce.LINE_STRIP]:1}[l];for(const ae of q.get()){const ge=ae.vaos||(ae.vaos={});(ge[L]||(ge[L]=new Al)).bind(i,this,F,ue?ue.getPaintVertexBuffers():[],B,ae.vertexOffset,se||[]),ce.drawElements(l,ae.primitiveLength*W,ce.UNSIGNED_SHORT,ae.primitiveOffset*W*2)}}}function uu(f,i){const l=Math.pow(2,i.tileID.overscaledZ),p=i.tileSize*Math.pow(2,f.transform.tileZoom)/l,v=p*(i.tileID.canonical.x+i.tileID.wrap*l),b=p*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_tile_units_to_pixels:1/An(i,1,f.transform.tileZoom),u_pixel_coord_upper:[v>>16,b>>16],u_pixel_coord_lower:[65535&v,65535&b]}}const tm=s.create(),qu=(f,i,l,p,v,b,M,D,L,F,B)=>{const q=i.style.light,te=q.properties.get("position"),oe=[te.x,te.y,te.z],ue=s.create$1();q.properties.get("anchor")==="viewport"&&(s.fromRotation(ue,-i.transform.angle),s.transformMat3(oe,oe,ue));const se=q.properties.get("color"),ce=i.transform,W={u_matrix:f,u_lightpos:oe,u_lightintensity:q.properties.get("intensity"),u_lightcolor:[se.r,se.g,se.b],u_vertical_gradient:+l,u_opacity:p,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:tm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:v,u_edge_radius:b};return ce.projection.name==="globe"&&(W.u_tile_id=[M.canonical.x,M.canonical.y,1<<M.canonical.z],W.u_zoom_transition=L,W.u_inv_rot_matrix=B,W.u_merc_center=F,W.u_up_dir=ce.projection.upVector(new s.CanonicalTileID(0,0,0),F[0]*s.EXTENT,F[1]*s.EXTENT),W.u_height_lift=D),W},Id=(f,i,l,p,v,b,M,D,L,F,B,q)=>{const te=qu(f,i,l,p,v,b,M,L,F,B,q),oe={u_height_factor:-Math.pow(2,M.overscaledZ)/D.tileSize/8};return s.extend(te,uu(i,D),oe)},ha=f=>({u_matrix:f}),es=(f,i,l)=>s.extend(ha(f),uu(i,l)),fa=(f,i)=>({u_matrix:f,u_world:i}),nl=(f,i,l,p)=>s.extend(es(f,i,l),{u_world:p}),Ld=s.create(),Hu=(f,i,l,p,v,b)=>{const M=f.transform,D=M.projection.name==="globe";let L;if(b.paint.get("circle-pitch-alignment")==="map")if(D){const B=s.globePixelsToTileUnits(M.zoom,i.canonical)*M._pixelsPerMercatorPixel;L=Float32Array.from([B,0,0,B])}else L=M.calculatePixelsToTileUnitsMatrix(l);else L=new Float32Array([M.pixelsToGLUnits[0],0,0,M.pixelsToGLUnits[1]]);const F={u_camera_to_center_distance:M.cameraToCenterDistance,u_matrix:f.translatePosMatrix(i.projMatrix,l,b.paint.get("circle-translate"),b.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:L,u_inv_rot_matrix:Ld,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(D){F.u_inv_rot_matrix=p,F.u_merc_center=v,F.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],F.u_zoom_transition=s.globeToMercatorTransition(M.zoom);const B=v[0]*s.EXTENT,q=v[1]*s.EXTENT;F.u_up_dir=M.projection.upVector(new s.CanonicalTileID(0,0,0),B,q)}return F},zd=f=>{const i=[];return f.paint.get("circle-pitch-alignment")==="map"&&i.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&i.push("SCALE_WITH_MAP"),i},cu=(f,i,l,p)=>{const v=s.EXTENT/l.tileSize;return{u_matrix:f,u_camera_to_center_distance:i.getCameraToCenterDistance(p),u_extrude_scale:[i.pixelsToGLUnits[0]/v,i.pixelsToGLUnits[1]/v]}},cf=(f,i,l=1)=>({u_matrix:f,u_color:i,u_overlay:0,u_overlay_scale:l}),nm=s.create(),hf=(f,i,l,p,v,b,M)=>{const D=f.transform,L=D.projection.name==="globe",F=L?s.globePixelsToTileUnits(D.zoom,i.canonical)*D._pixelsPerMercatorPixel:An(l,1,b),B={u_matrix:i.projMatrix,u_extrude_scale:F,u_intensity:M,u_inv_rot_matrix:nm,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){B.u_inv_rot_matrix=p,B.u_merc_center=v,B.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],B.u_zoom_transition=s.globeToMercatorTransition(D.zoom);const q=v[0]*s.EXTENT,te=v[1]*s.EXTENT;B.u_up_dir=D.projection.upVector(new s.CanonicalTileID(0,0,0),q,te)}return B},Yg=(f,i,l,p,v,b,M)=>{const D=f.transform,L=D.calculatePixelsToTileUnitsMatrix(i);return{u_matrix:ff(f,i,l,p),u_pixels_to_tile_units:L,u_device_pixel_ratio:b,u_units_to_pixels:[1/D.pixelsToGLUnits[0],1/D.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:v,u_texsize:fh(l)?i.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Wu(i,f.transform),u_alpha_discard_threshold:0,u_trim_offset:M}},hh=(f,i,l,p,v)=>{const b=f.transform;return{u_matrix:ff(f,i,l,p),u_texsize:i.imageAtlasTexture.size,u_pixels_to_tile_units:b.calculatePixelsToTileUnitsMatrix(i),u_device_pixel_ratio:v,u_image:0,u_tile_units_to_pixels:Wu(i,b),u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Wu(f,i){return 1/An(f,1,i.tileZoom)}function ff(f,i,l,p){return f.translatePosMatrix(p||i.tileID.projMatrix,i,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}function fh(f){const i=f.paint.get("line-dasharray").value;return i.value||i.kind!=="constant"}const Pd=(f,i,l,p,v,b)=>{return{u_matrix:f,u_tl_parent:i,u_scale_parent:l,u_fade_t:p.mix,u_opacity:p.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(D=v.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(M=v.paint.get("raster-contrast"),M>0?1/(1-M):1+M),u_spin_weights:Ts(v.paint.get("raster-hue-rotate")),u_perspective_transform:b};var M,D};function Ts(f){f*=Math.PI/180;const i=Math.sin(f),l=Math.cos(f);return[(2*l+1)/3,(-Math.sqrt(3)*i-l+1)/3,(Math.sqrt(3)*i-l+1)/3]}const dh=s.create(),Rl=(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se)=>{const ce=v.transform,W={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_rotate_symbol:+l,u_aspect_ratio:ce.width/ce.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:M,u_coord_matrix:D,u_is_text:+L,u_pitch_with_map:+p,u_texsize:F,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:dh,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:dh,u_up_vector:[0,-1,0]};return se.name==="globe"&&(W.u_tile_id=[B.canonical.x,B.canonical.y,1<<B.canonical.z],W.u_zoom_transition=q,W.u_inv_rot_matrix=oe,W.u_merc_center=te,W.u_camera_forward=ce._camera.forward(),W.u_ecef_origin=s.globeECEFOrigin(ce.globeMatrix,B.toUnwrapped()),W.u_tile_matrix=Float32Array.from(ce.globeMatrix),W.u_up_vector=ue),W},Zu=(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se,ce)=>s.extend(Rl(f,i,l,p,v,b,M,D,L,F,q,te,oe,ue,se,ce),{u_gamma_scale:p?v.transform.cameraToCenterDistance*Math.cos(v.terrain?0:v.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+B}),Od=(f,i,l,p,v,b,M,D,L,F,B,q,te,oe,ue,se)=>s.extend(Zu(f,i,l,p,v,b,M,D,!0,L,!0,B,q,te,oe,ue,se),{u_texsize_icon:F,u_texture_icon:1}),df=(f,i,l)=>({u_matrix:f,u_opacity:i,u_color:l}),Kg=(f,i,l,p,v)=>s.extend(function(b,M,D){const L=M.imageManager.getPattern(b.toString()),{width:F,height:B}=M.imageManager.getPixelSize(),q=Math.pow(2,D.tileID.overscaledZ),te=D.tileSize*Math.pow(2,M.transform.tileZoom)/q,oe=te*(D.tileID.canonical.x+D.tileID.wrap*q),ue=te*D.tileID.canonical.y;return{u_image:0,u_pattern_tl:L.tl,u_pattern_br:L.br,u_texsize:[F,B],u_pattern_size:L.displaySize,u_tile_units_to_pixels:1/An(D,1,M.transform.tileZoom),u_pixel_coord_upper:[oe>>16,ue>>16],u_pixel_coord_lower:[65535&oe,65535&ue]}}(p,l,v),{u_matrix:f,u_opacity:i}),Bd={fillExtrusion:f=>({u_matrix:new s.UniformMatrix4f(f),u_lightpos:new s.Uniform3f(f),u_lightintensity:new s.Uniform1f(f),u_lightcolor:new s.Uniform3f(f),u_vertical_gradient:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f),u_edge_radius:new s.Uniform1f(f),u_ao:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_up_dir:new s.Uniform3f(f),u_height_lift:new s.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_lightpos:new s.Uniform3f(f),u_lightintensity:new s.Uniform1f(f),u_lightcolor:new s.Uniform3f(f),u_vertical_gradient:new s.Uniform1f(f),u_height_factor:new s.Uniform1f(f),u_edge_radius:new s.Uniform1f(f),u_ao:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_up_dir:new s.Uniform3f(f),u_height_lift:new s.Uniform1f(f),u_image:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f)}),fill:f=>({u_matrix:new s.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_image:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f)}),fillOutline:f=>({u_matrix:new s.UniformMatrix4f(f),u_world:new s.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_world:new s.Uniform2f(f),u_image:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new s.Uniform1f(f),u_extrude_scale:new s.UniformMatrix2f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_up_dir:new s.Uniform3f(f)}),collisionBox:f=>({u_matrix:new s.UniformMatrix4f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_extrude_scale:new s.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new s.UniformMatrix4f(f),u_inv_matrix:new s.UniformMatrix4f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_viewport_size:new s.Uniform2f(f)}),debug:f=>({u_color:new s.UniformColor(f),u_matrix:new s.UniformMatrix4f(f),u_overlay:new s.Uniform1i(f),u_overlay_scale:new s.Uniform1f(f)}),clippingMask:f=>({u_matrix:new s.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new s.Uniform1f(f),u_intensity:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_up_dir:new s.Uniform3f(f)}),heatmapTexture:f=>({u_image:new s.Uniform1i(f),u_color_ramp:new s.Uniform1i(f),u_opacity:new s.Uniform1f(f)}),hillshade:f=>({u_matrix:new s.UniformMatrix4f(f),u_image:new s.Uniform1i(f),u_latrange:new s.Uniform2f(f),u_light:new s.Uniform2f(f),u_shadow:new s.UniformColor(f),u_highlight:new s.UniformColor(f),u_accent:new s.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new s.UniformMatrix4f(f),u_image:new s.Uniform1i(f),u_dimension:new s.Uniform2f(f),u_zoom:new s.Uniform1f(f),u_unpack:new s.Uniform4f(f)}),line:f=>({u_matrix:new s.UniformMatrix4f(f),u_pixels_to_tile_units:new s.UniformMatrix2f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_units_to_pixels:new s.Uniform2f(f),u_dash_image:new s.Uniform1i(f),u_gradient_image:new s.Uniform1i(f),u_image_height:new s.Uniform1f(f),u_texsize:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f),u_alpha_discard_threshold:new s.Uniform1f(f),u_trim_offset:new s.Uniform2f(f)}),linePattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_texsize:new s.Uniform2f(f),u_pixels_to_tile_units:new s.UniformMatrix2f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_image:new s.Uniform1i(f),u_units_to_pixels:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f),u_alpha_discard_threshold:new s.Uniform1f(f)}),raster:f=>({u_matrix:new s.UniformMatrix4f(f),u_tl_parent:new s.Uniform2f(f),u_scale_parent:new s.Uniform1f(f),u_fade_t:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f),u_image0:new s.Uniform1i(f),u_image1:new s.Uniform1i(f),u_brightness_low:new s.Uniform1f(f),u_brightness_high:new s.Uniform1f(f),u_saturation_factor:new s.Uniform1f(f),u_contrast_factor:new s.Uniform1f(f),u_spin_weights:new s.Uniform3f(f),u_perspective_transform:new s.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new s.Uniform1i(f),u_is_size_feature_constant:new s.Uniform1i(f),u_size_t:new s.Uniform1f(f),u_size:new s.Uniform1f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_rotate_symbol:new s.Uniform1i(f),u_aspect_ratio:new s.Uniform1f(f),u_fade_change:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_label_plane_matrix:new s.UniformMatrix4f(f),u_coord_matrix:new s.UniformMatrix4f(f),u_is_text:new s.Uniform1i(f),u_pitch_with_map:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_camera_forward:new s.Uniform3f(f),u_tile_matrix:new s.UniformMatrix4f(f),u_up_vector:new s.Uniform3f(f),u_ecef_origin:new s.Uniform3f(f),u_texture:new s.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new s.Uniform1i(f),u_is_size_feature_constant:new s.Uniform1i(f),u_size_t:new s.Uniform1f(f),u_size:new s.Uniform1f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_rotate_symbol:new s.Uniform1i(f),u_aspect_ratio:new s.Uniform1f(f),u_fade_change:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_label_plane_matrix:new s.UniformMatrix4f(f),u_coord_matrix:new s.UniformMatrix4f(f),u_is_text:new s.Uniform1i(f),u_pitch_with_map:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_texture:new s.Uniform1i(f),u_gamma_scale:new s.Uniform1f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_camera_forward:new s.Uniform3f(f),u_tile_matrix:new s.UniformMatrix4f(f),u_up_vector:new s.Uniform3f(f),u_ecef_origin:new s.Uniform3f(f),u_is_halo:new s.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new s.Uniform1i(f),u_is_size_feature_constant:new s.Uniform1i(f),u_size_t:new s.Uniform1f(f),u_size:new s.Uniform1f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_rotate_symbol:new s.Uniform1i(f),u_aspect_ratio:new s.Uniform1f(f),u_fade_change:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_label_plane_matrix:new s.UniformMatrix4f(f),u_coord_matrix:new s.UniformMatrix4f(f),u_is_text:new s.Uniform1i(f),u_pitch_with_map:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_texsize_icon:new s.Uniform2f(f),u_texture:new s.Uniform1i(f),u_texture_icon:new s.Uniform1i(f),u_gamma_scale:new s.Uniform1f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_is_halo:new s.Uniform1i(f)}),background:f=>({u_matrix:new s.UniformMatrix4f(f),u_opacity:new s.Uniform1f(f),u_color:new s.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_opacity:new s.Uniform1f(f),u_image:new s.Uniform1i(f),u_pattern_tl:new s.Uniform2f(f),u_pattern_br:new s.Uniform2f(f),u_texsize:new s.Uniform2f(f),u_pattern_size:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f)}),terrainRaster:lu,terrainDepth:lu,skybox:f=>({u_matrix:new s.UniformMatrix4f(f),u_sun_direction:new s.Uniform3f(f),u_cubemap:new s.Uniform1i(f),u_opacity:new s.Uniform1f(f),u_temporal_offset:new s.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new s.UniformMatrix4f(f),u_color_ramp:new s.Uniform1i(f),u_center_direction:new s.Uniform3f(f),u_radius:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f),u_temporal_offset:new s.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new s.UniformMatrix3f(f),u_sun_direction:new s.Uniform3f(f),u_sun_intensity:new s.Uniform1f(f),u_color_tint_r:new s.Uniform4f(f),u_color_tint_m:new s.Uniform4f(f),u_luminance:new s.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new s.UniformMatrix4f(f),u_globe_matrix:new s.UniformMatrix4f(f),u_normalize_matrix:new s.UniformMatrix4f(f),u_merc_matrix:new s.UniformMatrix4f(f),u_zoom_transition:new s.Uniform1f(f),u_merc_center:new s.Uniform2f(f),u_image0:new s.Uniform1i(f),u_grid_matrix:new s.UniformMatrix3f(f),u_skirt_height:new s.Uniform1f(f),u_frustum_tl:new s.Uniform3f(f),u_frustum_tr:new s.Uniform3f(f),u_frustum_br:new s.Uniform3f(f),u_frustum_bl:new s.Uniform3f(f),u_globe_pos:new s.Uniform3f(f),u_globe_radius:new s.Uniform1f(f),u_viewport:new s.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new s.Uniform3f(f),u_frustum_tr:new s.Uniform3f(f),u_frustum_br:new s.Uniform3f(f),u_frustum_bl:new s.Uniform3f(f),u_horizon:new s.Uniform1f(f),u_transition:new s.Uniform1f(f),u_fadeout_range:new s.Uniform1f(f),u_color:new s.Uniform4f(f),u_high_color:new s.Uniform4f(f),u_space_color:new s.Uniform4f(f),u_star_intensity:new s.Uniform1f(f),u_star_density:new s.Uniform1f(f),u_star_size:new s.Uniform1f(f),u_temporal_offset:new s.Uniform1f(f),u_horizon_angle:new s.Uniform1f(f),u_rotation_matrix:new s.UniformMatrix4f(f)})};let pf;function ph(f,i,l,p,v,b,M){const D=f.context,L=D.gl,F=f.transform,B=f.useProgram("collisionBox"),q=[];let te=0,oe=0;for(let ve=0;ve<p.length;ve++){const De=p[ve],Ae=i.getTile(De),de=Ae.getBucket(l);if(!de)continue;const Be=ja(De,de,F);let Oe=Be;v[0]===0&&v[1]===0||(Oe=f.translatePosMatrix(Be,Ae,v,b));const Ke=M?de.textCollisionBox:de.iconCollisionBox,Ot=de.collisionCircleArray;if(Ot.length>0){const We=s.create(),_t=Oe;s.mul(We,de.placementInvProjMatrix,F.glCoordMatrix),s.mul(We,We,de.placementViewportMatrix),q.push({circleArray:Ot,circleOffset:oe,transform:_t,invTransform:We,projection:de.getProjection()}),te+=Ot.length/4,oe=te}Ke&&(f.terrain&&f.terrain.setupElevationDraw(Ae,B),B.draw(D,L.LINES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,cu(Oe,F,Ae,de.getProjection()),l.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,F.zoom,null,[Ke.collisionVertexBuffer,Ke.collisionVertexBufferExt]))}if(!M||!q.length)return;const ue=f.useProgram("collisionCircle"),se=new s.StructArrayLayout2f1f2i16;se.resize(4*te),se._trim();let ce=0;for(const ve of q)for(let De=0;De<ve.circleArray.length/4;De++){const Ae=4*De,de=ve.circleArray[Ae+0],Be=ve.circleArray[Ae+1],Oe=ve.circleArray[Ae+2],Ke=ve.circleArray[Ae+3];se.emplace(ce++,de,Be,Oe,Ke,0),se.emplace(ce++,de,Be,Oe,Ke,1),se.emplace(ce++,de,Be,Oe,Ke,2),se.emplace(ce++,de,Be,Oe,Ke,3)}(!pf||pf.length<2*te)&&(pf=function(ve){const De=2*ve,Ae=new s.StructArrayLayout3ui6;Ae.resize(De),Ae._trim();for(let de=0;de<De;de++){const Be=6*de;Ae.uint16[Be+0]=4*de+0,Ae.uint16[Be+1]=4*de+1,Ae.uint16[Be+2]=4*de+2,Ae.uint16[Be+3]=4*de+2,Ae.uint16[Be+4]=4*de+3,Ae.uint16[Be+5]=4*de+0}return Ae}(te));const W=D.createIndexBuffer(pf,!0),ae=D.createVertexBuffer(se,s.collisionCircleLayout.members,!0);for(const ve of q){const De={u_matrix:ve.transform,u_inv_matrix:ve.invTransform,u_camera_to_center_distance:(ge=F).getCameraToCenterDistance(ve.projection),u_viewport_size:[ge.width,ge.height]};ue.draw(D,L.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,De,l.id,ae,W,s.SegmentVector.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,F.zoom)}var ge;ae.destroy(),W.destroy()}const rm=s.create();function Fd({width:f,height:i,anchor:l,textOffset:p,textScale:v},b){const{horizontalAlign:M,verticalAlign:D}=s.getAnchorAlignment(l),L=-(M-.5)*f,F=-(D-.5)*i,B=s.evaluateVariableOffset(l,p);return new s.Point((L/v+B[0])*b,(F/v+B[1])*b)}function Jg(f,i,l,p,v,b,M,D,L,F,B){const q=f.text.placedSymbolArray,te=f.text.dynamicLayoutVertexArray,oe=f.icon.dynamicLayoutVertexArray,ue={},se=f.getProjection(),ce=Qr(D,se,b),W=b.elevation,ae=se.upVectorScale(D.canonical,b.center.lat,b.worldSize).metersToTile;te.clear();for(let ge=0;ge<q.length;ge++){const ve=q.get(ge),{tileAnchorX:De,tileAnchorY:Ae,numGlyphs:de}=ve,Be=ve.hidden||!ve.crossTileID||f.allowVerticalPlacement&&!ve.placedOrientation?null:p[ve.crossTileID];if(Be){let Oe=0,Ke=0,Ot=0;if(W){const Pt=W?W.getAtTileOffset(D,De,Ae):0,[pn,Xn,sn]=se.upVector(D.canonical,De,Ae);Oe=Pt*pn*ae,Ke=Pt*Xn*ae,Ot=Pt*sn*ae}let[We,_t,tt,xt]=ea(ve.projectedAnchorX+Oe,ve.projectedAnchorY+Ke,ve.projectedAnchorZ+Ot,l?ce:M);const Ze=oh(b.getCameraToCenterDistance(se),xt);let vt=v.evaluateSizeForFeature(f.textSizeData,F,ve)*Ze/s.ONE_EM;l&&(vt*=f.tilePixelRatio/L);const Ft=Fd(Be,vt);l?({x:We,y:_t,z:tt}=se.projectTilePoint(De+Ft.x,Ae+Ft.y,D.canonical),[We,_t,tt]=ea(We+Oe,_t+Ke,tt+Ot,M)):(i&&Ft._rotate(-b.angle),We+=Ft.x,_t+=Ft.y,tt=0);const Tt=f.allowVerticalPlacement&&ve.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let Pt=0;Pt<de;Pt++)s.addDynamicAttributes(te,We,_t,tt,Tt);B&&ve.associatedIconIndex>=0&&(ue[ve.associatedIconIndex]={x:We,y:_t,z:tt,angle:Tt})}else uo(de,te)}if(B){oe.clear();const ge=f.icon.placedSymbolArray;for(let ve=0;ve<ge.length;ve++){const De=ge.get(ve),{numGlyphs:Ae}=De,de=ue[ve];if(De.hidden||!de)uo(Ae,oe);else{const{x:Be,y:Oe,z:Ke,angle:Ot}=de;for(let We=0;We<Ae;We++)s.addDynamicAttributes(oe,Be,Oe,Ke,Ot)}}f.icon.dynamicLayoutVertexBuffer.updateData(oe)}f.text.dynamicLayoutVertexBuffer.updateData(te)}function Nd(f,i,l){return l.iconsInText&&i?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Ud(f,i,l,p,v,b,M,D,L,F,B,q){const te=f.context,oe=te.gl,ue=f.transform,se=D==="map",ce=L==="map",W=se&&l.layout.get("symbol-placement")!=="point",ae=se&&!ce&&!W,ge=l.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ve=!1;const De=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),Ae=[s.mercatorXfromLng(ue.center.lng),s.mercatorYfromLat(ue.center.lat)],de=l.layout.get("text-variable-anchor"),Be=ue.projection.name==="globe",Oe=[],Ke=[0,-1,0];let Ot=Ke;!Be&&!ue.mercatorFromTransition||se||(Ot=function(We){const _t=We._camera.getWorldToCamera(We.worldSize,1),tt=s.multiply([],_t,We.globeMatrix);s.invert(tt,tt);const xt=[0,0,0],Ze=[0,1,0,0];return s.transformMat4$1(Ze,Ze,tt),xt[0]=Ze[0],xt[1]=Ze[1],xt[2]=Ze[2],s.normalize(xt,xt),xt}(ue));for(const We of p){const _t=i.getTile(We),tt=_t.getBucket(l);if(!tt||tt.projection.name==="mercator"&&Be)continue;const xt=v?tt.text:tt.icon;if(!xt||tt.fullyClipped||!xt.segments.get().length)continue;const Ze=xt.programConfigurations.get(l.id),vt=v||tt.sdfIcons,Ft=v?tt.textSizeData:tt.iconSizeData,Tt=ce||ue.pitch!==0,Pt=s.evaluateSizeForZoom(Ft,ue.zoom);let pn,Xn,sn,In,vr=[0,0],mr=null;if(v)Xn=_t.glyphAtlasTexture,sn=oe.LINEAR,pn=_t.glyphAtlasTexture.size,tt.iconsInText&&(vr=_t.imageAtlasTexture.size,mr=_t.imageAtlasTexture,In=Tt||f.options.rotating||f.options.zooming||Ft.kind==="composite"||Ft.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const Ma=l.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;Xn=_t.imageAtlasTexture,sn=vt||f.options.rotating||f.options.zooming||Ma||Tt?oe.LINEAR:oe.NEAREST,pn=_t.imageAtlasTexture.size}const gn=tt.projection.name==="globe",jr=gn?Ot:Ke,ni=gn?s.globeToMercatorTransition(ue.zoom):0,li=Qr(We,tt.getProjection(),ue),ui=ue.calculatePixelsToTileUnitsMatrix(_t),Ga=ct(li,_t.tileID.canonical,ce,se,ue,tt.getProjection(),ui),Ca=f.terrain&&ce&&W?s.invert(s.create(),Ga):rm,Bo=Oi(li,_t.tileID.canonical,ce,se,ue,tt.getProjection(),ui),ks=de&&tt.hasTextData(),Di=l.layout.get("icon-text-fit")!=="none"&&ks&&tt.hasIconData();if(W){const Ma=ue.elevation,hl=Ma?Ma.getAtTileOffsetFunc(We,ue.center.lat,ue.worldSize,tt.getProjection()):null,_u=mo(li,_t.tileID.canonical,ce,se,ue,tt.getProjection(),ui);ou(tt,li,f,v,_u,Bo,ce,F,hl,We)}const ci=W||v&&de||Di,Lr=f.translatePosMatrix(li,_t,b,M),sa=ci?rm:Ga,Ja=f.translatePosMatrix(Bo,_t,b,M,!0),gi=tt.getProjection().createInversionMatrix(ue,We.canonical),xn=[];f.terrainRenderModeElevated()&&ce&&xn.push("PITCH_WITH_MAP_TERRAIN"),gn&&xn.push("PROJECTION_GLOBE_VIEW"),ci&&xn.push("PROJECTED_POS_ON_VIEWPORT");const Er=vt&&l.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let zr;zr=vt?tt.iconsInText?Od(Ft.kind,Pt,ae,ce,f,Lr,sa,Ja,pn,vr,We,ni,Ae,gi,jr,tt.getProjection()):Zu(Ft.kind,Pt,ae,ce,f,Lr,sa,Ja,v,pn,!0,We,ni,Ae,gi,jr,tt.getProjection()):Rl(Ft.kind,Pt,ae,ce,f,Lr,sa,Ja,v,pn,We,ni,Ae,gi,jr,tt.getProjection());const Li={program:f.useProgram(Nd(vt,v,tt),Ze,xn),buffers:xt,uniformValues:zr,atlasTexture:Xn,atlasTextureIcon:mr,atlasInterpolation:sn,atlasInterpolationIcon:In,isSDF:vt,hasHalo:Er,tile:_t,labelPlaneMatrixInv:Ca};if(ge&&tt.canOverlap){ve=!0;const Ma=xt.segments.get();for(const hl of Ma)Oe.push({segments:new s.SegmentVector([hl]),sortKey:hl.sortKey,state:Li})}else Oe.push({segments:xt.segments,sortKey:0,state:Li})}ve&&Oe.sort((We,_t)=>We.sortKey-_t.sortKey);for(const We of Oe){const _t=We.state;if(f.terrain&&f.terrain.setupElevationDraw(_t.tile,_t.program,{useDepthForOcclusion:!Be,labelPlaneMatrixInv:_t.labelPlaneMatrixInv}),te.activeTexture.set(oe.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,oe.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(te.activeTexture.set(oe.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),_t.isSDF){const tt=_t.uniformValues;_t.hasHalo&&(tt.u_is_halo=1,mh(_t.buffers,We.segments,l,f,_t.program,De,B,q,tt)),tt.u_is_halo=0}mh(_t.buffers,We.segments,l,f,_t.program,De,B,q,_t.uniformValues)}}function mh(f,i,l,p,v,b,M,D,L){const F=p.context,B=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];v.draw(F,F.gl.TRIANGLES,b,M,D,s.CullFaceMode.disabled,L,l.id,f.layoutVertexBuffer,f.indexBuffer,i,l.paint,p.transform.zoom,f.programConfigurations.get(l.id),B)}function jd(f,i,l,p,v,b,M){const D=f.context.gl,L=l.paint.get("fill-pattern"),F=L&&L.constantOr(1);let B,q,te,oe,ue;M?(q=F&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=D.LINES):(q=F?"fillPattern":"fill",B=D.TRIANGLES);for(const se of p){const ce=i.getTile(se);if(F&&!ce.patternsLoaded())continue;const W=ce.getBucket(l);if(!W)continue;f.prepareDrawTile();const ae=W.programConfigurations.get(l.id),ge=f.useProgram(q,ae);F&&(f.context.activeTexture.set(D.TEXTURE0),ce.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),ae.updatePaintBuffers());const ve=L.constantOr(null);if(ve&&ce.imageAtlas){const Ae=ce.imageAtlas.patternPositions[ve.toString()];Ae&&ae.setConstantPatternPositions(Ae)}const De=f.translatePosMatrix(se.projMatrix,ce,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(M){oe=W.indexBuffer2,ue=W.segments2;const Ae=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];te=q==="fillOutlinePattern"&&F?nl(De,f,ce,Ae):fa(De,Ae)}else oe=W.indexBuffer,ue=W.segments,te=F?es(De,f,ce):ha(De);f.prepareDrawProgram(f.context,ge,se.toUnwrapped()),ge.draw(f.context,B,v,f.stencilModeForClipping(se),b,s.CullFaceMode.disabled,te,l.id,W.layoutVertexBuffer,oe,ue,l.paint,f.transform.zoom,ae)}}function mf(f,i,l,p,v,b,M){const D=f.context,L=D.gl,F=f.transform,B=l.paint.get("fill-extrusion-pattern"),q=B.constantOr(1),te=l.paint.get("fill-extrusion-opacity"),oe=[l.paint.get("fill-extrusion-ambient-occlusion-intensity"),l.paint.get("fill-extrusion-ambient-occlusion-radius")],ue=l.layout.get("fill-extrusion-edge-radius"),se=ue>0&&!l.paint.get("fill-extrusion-rounded-roof"),ce=se?0:ue,W=F.projection.name==="globe"?s.fillExtrusionHeightLift():0,ae=F.projection.name==="globe",ge=ae?s.globeToMercatorTransition(F.zoom):0,ve=[s.mercatorXfromLng(F.center.lng),s.mercatorYfromLat(F.center.lat)],De=[];ae&&De.push("PROJECTION_GLOBE_VIEW"),oe[0]>0&&De.push("FAUX_AO"),se&&De.push("ZERO_ROOF_RADIUS");for(const Ae of p){const de=i.getTile(Ae),Be=de.getBucket(l);if(!Be||Be.projection.name!==F.projection.name)continue;const Oe=Be.programConfigurations.get(l.id),Ke=f.useProgram(q?"fillExtrusionPattern":"fillExtrusion",Oe,De);if(f.terrain){const vt=f.terrain;if(f.style.terrainSetForDrapingOnly())vt.setupElevationDraw(de,Ke,{useMeterToDem:!0});else{if(!Be.enableTerrain)continue;if(vt.setupElevationDraw(de,Ke,{useMeterToDem:!0}),im(D,i,Ae,Be,l,vt),!Be.centroidVertexBuffer){const Ft=Ke.attributes.a_centroid_pos;Ft!==void 0&&L.vertexAttrib2f(Ft,0,0)}}}q&&(f.context.activeTexture.set(L.TEXTURE0),de.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),Oe.updatePaintBuffers());const Ot=B.constantOr(null);if(Ot&&de.imageAtlas){const vt=de.imageAtlas.patternPositions[Ot.toString()];vt&&Oe.setConstantPatternPositions(vt)}const We=f.translatePosMatrix(Ae.projMatrix,de,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),_t=F.projection.createInversionMatrix(F,Ae.canonical),tt=l.paint.get("fill-extrusion-vertical-gradient"),xt=q?Id(We,f,tt,te,oe,ce,Ae,de,W,ge,ve,_t):qu(We,f,tt,te,oe,ce,Ae,W,ge,ve,_t);f.prepareDrawProgram(D,Ke,Ae.toUnwrapped());const Ze=[];f.terrain&&Ze.push(Be.centroidVertexBuffer),ae&&Ze.push(Be.layoutVertexExtBuffer),Ke.draw(D,D.gl.TRIANGLES,v,b,M,s.CullFaceMode.backCCW,xt,l.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,l.paint,f.transform.zoom,Oe,Ze)}}function im(f,i,l,p,v,b){const M=[W=>{let ae=W.canonical.x-1,ge=W.wrap;return ae<0&&(ae=(1<<W.canonical.z)-1,ge--),new s.OverscaledTileID(W.overscaledZ,ge,W.canonical.z,ae,W.canonical.y)},W=>{let ae=W.canonical.x+1,ge=W.wrap;return ae===1<<W.canonical.z&&(ae=0,ge++),new s.OverscaledTileID(W.overscaledZ,ge,W.canonical.z,ae,W.canonical.y)},W=>new s.OverscaledTileID(W.overscaledZ,W.wrap,W.canonical.z,W.canonical.x,(W.canonical.y===0?1<<W.canonical.z:W.canonical.y)-1),W=>new s.OverscaledTileID(W.overscaledZ,W.wrap,W.canonical.z,W.canonical.x,W.canonical.y===(1<<W.canonical.z)-1?0:W.canonical.y+1)],D=W=>{const ae=i.getSource().minzoom,ge=De=>{const Ae=i.getTileByID(De);if(Ae&&Ae.hasData())return Ae.getBucket(v)},ve=[0,-1,1];for(const De of ve){if(W.overscaledZ+De<ae)continue;const Ae=ge(W.calculateScaledKey(W.overscaledZ+De));if(Ae)return Ae}},L=[0,0,0],F=(W,ae)=>(L[0]=Math.min(W.min.y,ae.min.y),L[1]=Math.max(W.max.y,ae.max.y),L[2]=s.EXTENT-ae.min.x>W.max.x?ae.min.x-s.EXTENT:W.max.x,L),B=(W,ae)=>(L[0]=Math.min(W.min.x,ae.min.x),L[1]=Math.max(W.max.x,ae.max.x),L[2]=s.EXTENT-ae.min.y>W.max.y?ae.min.y-s.EXTENT:W.max.y,L),q=[(W,ae)=>F(W,ae),(W,ae)=>F(ae,W),(W,ae)=>B(W,ae),(W,ae)=>B(ae,W)],te=new s.Point(0,0);let oe,ue,se;const ce=(W,ae,ge,ve,De)=>{const Ae=[[ve?ge:W,ve?W:ge,0],[ve?ge:ae,ve?ae:ge,0]],de=De<0?s.EXTENT+De:De,Be=[ve?de:(W+ae)/2,ve?(W+ae)/2:de,0];return ge===0&&De<0||ge!==0&&De>0?b.getForTilePoints(se,[Be],!0,ue):Ae.push(Be),b.getForTilePoints(l,Ae,!0,oe),Math.max(Ae[0][2],Ae[1][2],Be[2])/b.exaggeration()};for(let W=0;W<4;W++){const ae=(W<2?1:5)-W,ge=p.borders[W];if(ge.length===0)continue;const ve=se=M[W](l),De=D(ve);if(!(De&&De instanceof s.FillExtrusionBucket&&De.enableTerrain)||p.borderDoneWithNeighborZ[W]===De.canonical.z&&De.borderDoneWithNeighborZ[ae]===p.canonical.z||(ue=b.findDEMTileFor(ve),!ue||!ue.dem))continue;if(!oe){const Oe=b.findDEMTileFor(l);if(!Oe||!Oe.dem)return;oe=Oe}const Ae=De.borders[ae];let de=0;const Be=De.borderDoneWithNeighborZ[ae]!==p.canonical.z;if(p.canonical.z===De.canonical.z){for(let Oe=0;Oe<ge.length;Oe++){const Ke=p.featuresOnBorder[ge[Oe]],Ot=Ke.borders[W];let We;for(;de<Ae.length&&(We=De.featuresOnBorder[Ae[de]],!(We.borders[ae][1]>Ot[0]+3));)Be&&De.encodeCentroid(void 0,We,!1),de++;if(We&&de<Ae.length){const _t=de;let tt=0;for(;!(We.borders[ae][0]>Ot[1]-3)&&(tt++,++de!==Ae.length);)We=De.featuresOnBorder[Ae[de]];if(We=De.featuresOnBorder[Ae[_t]],Ke.intersectsCount()>1||We.intersectsCount()>1||tt!==1){tt!==1&&(de=_t),p.encodeCentroid(void 0,Ke,!1),Be&&De.encodeCentroid(void 0,We,!1);continue}const xt=q[W](Ke,We),Ze=W%2?s.EXTENT-1:0;te.x=ce(xt[0],Math.min(s.EXTENT-1,xt[1]),Ze,W<2,xt[2]),te.y=0,p.encodeCentroid(te,Ke,!1),Be&&De.encodeCentroid(te,We,!1)}else p.encodeCentroid(void 0,Ke,!1)}p.borderDoneWithNeighborZ[W]=De.canonical.z,p.needsCentroidUpdate=!0,Be&&(De.borderDoneWithNeighborZ[ae]=p.canonical.z,De.needsCentroidUpdate=!0)}else{for(const Oe of ge)p.encodeCentroid(void 0,p.featuresOnBorder[Oe],!1);if(Be){for(const Oe of Ae)De.encodeCentroid(void 0,De.featuresOnBorder[Oe],!1);De.borderDoneWithNeighborZ[ae]=p.canonical.z,De.needsCentroidUpdate=!0}p.borderDoneWithNeighborZ[W]=De.canonical.z,p.needsCentroidUpdate=!0}}(p.needsCentroidUpdate||!p.centroidVertexBuffer&&p.centroidVertexArray.length!==0)&&p.uploadCentroid(f)}const Xu=new s.Color(1,0,0,1),Qg=new s.Color(0,1,0,1),Vd=new s.Color(0,0,1,1),hu=new s.Color(1,0,1,1),gf=new s.Color(0,1,1,1);function am(f,i,l){const p=f.context,v=f.transform,b=p.gl,M=v.projection.name==="globe",D=M?["PROJECTION_GLOBE_VIEW"]:null;let L=l.projMatrix;if(M&&s.globeToMercatorTransition(v.zoom)>0){const Ke=s.transitionTileAABBinECEF(l.canonical,v),Ot=s.globeDenormalizeECEF(Ke);L=s.multiply(new Float32Array(16),v.globeMatrix,Ot),s.multiply(L,v.projMatrix,L)}const F=f.useProgram("debug",null,D),B=i.getTileByID(l.key);f.terrain&&f.terrain.setupElevationDraw(B,F);const q=s.DepthMode.disabled,te=s.StencilMode.disabled,oe=f.colorModeForRenderPass(),ue="$debug";p.activeTexture.set(b.TEXTURE0),f.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),M?B._makeGlobeTileDebugBuffers(f.context,v):B._makeDebugTileBoundsBuffers(f.context,v.projection);const se=B._tileDebugBuffer||f.debugBuffer,ce=B._tileDebugIndexBuffer||f.debugIndexBuffer,W=B._tileDebugSegments||f.debugSegments;F.draw(p,b.LINE_STRIP,q,te,oe,s.CullFaceMode.disabled,cf(L,s.Color.red),ue,se,ce,W,null,null,null,[B._globeTileDebugBorderBuffer]);const ae=B.latestRawTileData,ge=Math.floor((ae&&ae.byteLength||0)/1024),ve=i.getTile(l).tileSize,De=512/Math.min(ve,512)*(l.overscaledZ/v.zoom)*.5;let Ae=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Ae+=` => ${l.overscaledZ}`),Ae+=` ${ge}kb`,function(Ke,Ot){Ke.initDebugOverlayCanvas();const We=Ke.debugOverlayCanvas,_t=Ke.context.gl,tt=Ke.debugOverlayCanvas.getContext("2d");tt.clearRect(0,0,We.width,We.height),tt.shadowColor="white",tt.shadowBlur=2,tt.lineWidth=1.5,tt.strokeStyle="white",tt.textBaseline="top",tt.font="bold 36px Open Sans, sans-serif",tt.fillText(Ot,5,5),tt.strokeText(Ot,5,5),Ke.debugOverlayTexture.update(We),Ke.debugOverlayTexture.bind(_t.LINEAR,_t.CLAMP_TO_EDGE)}(f,Ae);const de=B._tileDebugTextBuffer||f.debugBuffer,Be=B._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,Oe=B._tileDebugTextSegments||f.debugSegments;F.draw(p,b.TRIANGLES,q,te,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,cf(L,s.Color.transparent,De),ue,de,Be,Oe,null,null,null,[B._globeTileDebugTextBuffer])}function fu(f,i,l,p){Yu(f,0,i+l/2,f.transform.width,l,p)}function yf(f,i,l,p){Yu(f,i-l/2,0,l,f.transform.height,p)}function Yu(f,i,l,p,v,b){const M=f.context,D=M.gl;D.enable(D.SCISSOR_TEST),D.scissor(i*s.exported.devicePixelRatio,l*s.exported.devicePixelRatio,p*s.exported.devicePixelRatio,v*s.exported.devicePixelRatio),M.clear({color:b}),D.disable(D.SCISSOR_TEST)}const om=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:sm}=om;function rl(f,i,l,p){f.emplaceBack(i,l,p)}class gh{constructor(i){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,rl(this.vertexArray,-1,-1,1),rl(this.vertexArray,1,-1,1),rl(this.vertexArray,-1,1,1),rl(this.vertexArray,1,1,1),rl(this.vertexArray,-1,-1,-1),rl(this.vertexArray,1,-1,-1),rl(this.vertexArray,-1,1,-1),rl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=i.createVertexBuffer(this.vertexArray,sm),this.indexBuffer=i.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function zo(f,i,l,p,v,b){const M=f.gl,D=i.paint.get("sky-atmosphere-color"),L=i.paint.get("sky-atmosphere-halo-color"),F=i.paint.get("sky-atmosphere-sun-intensity"),B=((q,te,oe,ue,se)=>({u_matrix_3f:q,u_sun_direction:te,u_sun_intensity:oe,u_color_tint_r:[ue.r,ue.g,ue.b,ue.a],u_color_tint_m:[se.r,se.g,se.b,se.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),p),v,F,D,L);M.framebufferTexture2D(M.FRAMEBUFFER,M.COLOR_ATTACHMENT0,M.TEXTURE_CUBE_MAP_POSITIVE_X+b,i.skyboxTexture,0),l.draw(f,M.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,B,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const Ku=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class $a{constructor(i){const l=new s.StructArrayLayout5f20;l.emplaceBack(-1,1,1,0,0),l.emplaceBack(1,1,1,1,0),l.emplaceBack(1,-1,1,1,1),l.emplaceBack(-1,-1,1,0,1);const p=new s.StructArrayLayout3ui6;p.emplaceBack(0,1,2),p.emplaceBack(2,3,0),this.vertexBuffer=i.createVertexBuffer(l,Ku.members),this.indexBuffer=i.createIndexBuffer(p),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Il={symbol:function(f,i,l,p,v){if(f.renderPass!=="translucent")return;const b=s.StencilMode.disabled,M=f.colorModeForRenderPass();l.layout.get("text-variable-anchor")&&function(D,L,F,B,q,te,oe){const ue=L.transform,se=q==="map",ce=te==="map";for(const W of D){const ae=B.getTile(W),ge=ae.getBucket(F);if(!ge||!ge.text||!ge.text.segments.get().length)continue;const ve=s.evaluateSizeForZoom(ge.textSizeData,ue.zoom),De=Qr(W,ge.getProjection(),ue),Ae=ue.calculatePixelsToTileUnitsMatrix(ae),de=ct(De,ae.tileID.canonical,ce,se,ue,ge.getProjection(),Ae),Be=F.layout.get("icon-text-fit")!=="none"&&ge.hasIconData();if(ve){const Oe=Math.pow(2,ue.zoom-ae.tileID.overscaledZ);Jg(ge,se,ce,oe,s.symbolSize,ue,de,W,Oe,ve,Be)}}}(p,f,l,i,l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),v),l.paint.get("icon-opacity").constantOr(1)!==0&&Ud(f,i,l,p,!1,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),l.layout.get("icon-rotation-alignment"),l.layout.get("icon-pitch-alignment"),l.layout.get("icon-keep-upright"),b,M),l.paint.get("text-opacity").constantOr(1)!==0&&Ud(f,i,l,p,!0,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),l.layout.get("text-rotation-alignment"),l.layout.get("text-pitch-alignment"),l.layout.get("text-keep-upright"),b,M),i.map.showCollisionBoxes&&(ph(f,i,l,p,l.paint.get("text-translate"),l.paint.get("text-translate-anchor"),!0),ph(f,i,l,p,l.paint.get("icon-translate"),l.paint.get("icon-translate-anchor"),!1))},circle:function(f,i,l,p){if(f.renderPass!=="translucent")return;const v=l.paint.get("circle-opacity"),b=l.paint.get("circle-stroke-width"),M=l.paint.get("circle-stroke-opacity"),D=l.layout.get("circle-sort-key").constantOr(1)!==void 0;if(v.constantOr(1)===0&&(b.constantOr(1)===0||M.constantOr(1)===0))return;const L=f.context,F=L.gl,B=f.transform,q=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),te=s.StencilMode.disabled,oe=f.colorModeForRenderPass(),ue=B.projection.name==="globe",se=[s.mercatorXfromLng(B.center.lng),s.mercatorYfromLat(B.center.lat)],ce=[];for(let ae=0;ae<p.length;ae++){const ge=p[ae],ve=i.getTile(ge),De=ve.getBucket(l);if(!De||De.projection.name!==B.projection.name)continue;const Ae=De.programConfigurations.get(l.id),de=zd(l);ue&&de.push("PROJECTION_GLOBE_VIEW");const Be=f.useProgram("circle",Ae,de),Oe=De.layoutVertexBuffer,Ke=De.globeExtVertexBuffer,Ot=De.indexBuffer,We=B.projection.createInversionMatrix(B,ge.canonical),_t={programConfiguration:Ae,program:Be,layoutVertexBuffer:Oe,globeExtVertexBuffer:Ke,indexBuffer:Ot,uniformValues:Hu(f,ge,ve,We,se,l),tile:ve};if(D){const tt=De.segments.get();for(const xt of tt)ce.push({segments:new s.SegmentVector([xt]),sortKey:xt.sortKey,state:_t})}else ce.push({segments:De.segments,sortKey:0,state:_t})}D&&ce.sort((ae,ge)=>ae.sortKey-ge.sortKey);const W={useDepthForOcclusion:!ue};for(const ae of ce){const{programConfiguration:ge,program:ve,layoutVertexBuffer:De,globeExtVertexBuffer:Ae,indexBuffer:de,uniformValues:Be,tile:Oe}=ae.state,Ke=ae.segments;f.terrain&&f.terrain.setupElevationDraw(Oe,ve,W),f.prepareDrawProgram(L,ve,Oe.tileID.toUnwrapped()),ve.draw(L,F.TRIANGLES,q,te,oe,s.CullFaceMode.disabled,Be,l.id,De,de,Ke,l.paint,B.zoom,ge,[Ae])}},heatmap:function(f,i,l,p){if(l.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const v=f.context,b=v.gl,M=s.StencilMode.disabled,D=new s.ColorMode([b.ONE,b.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(oe,ue,se,ce){const W=oe.gl,ae=ue.width*ce,ge=ue.height*ce;oe.activeTexture.set(W.TEXTURE1),oe.viewport.set([0,0,ae,ge]);let ve=se.heatmapFbo;if(!ve||ve&&(ve.width!==ae||ve.height!==ge)){ve&&ve.destroy();const De=W.createTexture();W.bindTexture(W.TEXTURE_2D,De),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),ve=se.heatmapFbo=oe.createFramebuffer(ae,ge,!1),function(Ae,de,Be,Oe,Ke,Ot){const We=Ae.gl;We.texImage2D(We.TEXTURE_2D,0,Ae.isWebGL2&&Ae.extRenderToTextureHalfFloat?We.RGBA16F:We.RGBA,Ke,Ot,0,We.RGBA,Ae.extRenderToTextureHalfFloat?Ae.isWebGL2?We.HALF_FLOAT:Ae.extTextureHalfFloat.HALF_FLOAT_OES:We.UNSIGNED_BYTE,null),Oe.colorAttachment.set(Be)}(oe,0,De,ve,ae,ge)}else W.bindTexture(W.TEXTURE_2D,ve.colorAttachment.get()),oe.bindFramebuffer.set(ve.framebuffer)})(v,f,l,f.transform.projection.name==="globe"?.5:.25),v.clear({color:s.Color.transparent});const L=f.transform,F=L.projection.name==="globe",B=F?["PROJECTION_GLOBE_VIEW"]:null,q=F?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,te=[s.mercatorXfromLng(L.center.lng),s.mercatorYfromLat(L.center.lat)];for(let oe=0;oe<p.length;oe++){const ue=p[oe];if(i.hasRenderableParent(ue))continue;const se=i.getTile(ue),ce=se.getBucket(l);if(!ce||ce.projection.name!==L.projection.name)continue;const W=ce.programConfigurations.get(l.id),ae=f.useProgram("heatmap",W,B),{zoom:ge}=f.transform;f.terrain&&f.terrain.setupElevationDraw(se,ae),f.prepareDrawProgram(v,ae,ue.toUnwrapped());const ve=L.projection.createInversionMatrix(L,ue.canonical);ae.draw(v,b.TRIANGLES,s.DepthMode.disabled,M,D,q,hf(f,ue,se,ve,te,ge,l.paint.get("heatmap-intensity")),l.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,l.paint,f.transform.zoom,W,F?[ce.globeExtVertexBuffer]:null)}v.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(v,b){const M=v.context,D=M.gl,L=b.heatmapFbo;if(!L)return;M.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,L.colorAttachment.get()),M.activeTexture.set(D.TEXTURE1);let F=b.colorRampTexture;F||(F=b.colorRampTexture=new s.Texture(M,b.colorRamp,D.RGBA)),F.bind(D.LINEAR,D.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(M,D.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,v.colorModeForRenderPass(),s.CullFaceMode.disabled,((B,q,te,oe)=>({u_image:0,u_color_ramp:1,u_opacity:q.paint.get("heatmap-opacity")}))(0,b),b.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,b.paint,v.transform.zoom)}(f,l))},line:function(f,i,l,p){if(f.renderPass!=="translucent")return;const v=l.paint.get("line-opacity"),b=l.paint.get("line-width");if(v.constantOr(1)===0||b.constantOr(1)===0)return;const M=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),D=f.colorModeForRenderPass(),L=f.terrain&&f.terrain.renderingToTexture?1:s.exported.devicePixelRatio,F=l.paint.get("line-dasharray"),B=F.constantOr(1),q=l.layout.get("line-cap"),te=l.paint.get("line-pattern"),oe=te.constantOr(1),ue=l.paint.get("line-gradient"),se=oe?"linePattern":"line",ce=f.context,W=ce.gl,ae=(ve=>{const De=[];fh(ve)&&De.push("RENDER_LINE_DASH"),ve.paint.get("line-gradient")&&De.push("RENDER_LINE_GRADIENT");const Ae=ve.paint.get("line-trim-offset");Ae[0]===0&&Ae[1]===0||De.push("RENDER_LINE_TRIM_OFFSET");const de=ve.paint.get("line-pattern").constantOr(1),Be=ve.paint.get("line-opacity").constantOr(1)!==1;return!de&&Be&&De.push("RENDER_LINE_ALPHA_DISCARD"),De})(l);let ge=ae.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(ge=!1);for(const ve of p){const De=i.getTile(ve);if(oe&&!De.patternsLoaded())continue;const Ae=De.getBucket(l);if(!Ae)continue;f.prepareDrawTile();const de=Ae.programConfigurations.get(l.id),Be=f.useProgram(se,de,ae),Oe=te.constantOr(null);if(Oe&&De.imageAtlas){const vt=De.imageAtlas.patternPositions[Oe.toString()];vt&&de.setConstantPatternPositions(vt)}const Ke=F.constantOr(null),Ot=q.constantOr(null);if(!oe&&Ke&&Ot&&De.lineAtlas){const vt=De.lineAtlas.getDash(Ke,Ot);vt&&de.setConstantPatternPositions(vt)}let[We,_t]=l.paint.get("line-trim-offset");(Ot==="round"||Ot==="square")&&We!==_t&&(We===0&&(We-=1),_t===1&&(_t+=1));const tt=f.terrain?ve.projMatrix:null,xt=oe?hh(f,De,l,tt,L):Yg(f,De,l,tt,Ae.lineClipsArray.length,L,[We,_t]);if(ue){const vt=Ae.gradients[l.id];let Ft=vt.texture;if(l.gradientVersion!==vt.version){let Tt=256;if(l.stepInterpolant){const Pt=i.getSource().maxzoom,pn=ve.canonical.z===Pt?Math.ceil(1<<f.transform.maxZoom-ve.canonical.z):1;Tt=s.clamp(s.nextPowerOfTwo(Ae.maxLineLength/s.EXTENT*1024*pn),256,ce.maxTextureSize)}vt.gradient=s.renderColorRamp({expression:l.gradientExpression(),evaluationKey:"lineProgress",resolution:Tt,image:vt.gradient||void 0,clips:Ae.lineClipsArray}),vt.texture?vt.texture.update(vt.gradient):vt.texture=new s.Texture(ce,vt.gradient,W.RGBA),vt.version=l.gradientVersion,Ft=vt.texture}ce.activeTexture.set(W.TEXTURE1),Ft.bind(l.stepInterpolant?W.NEAREST:W.LINEAR,W.CLAMP_TO_EDGE)}B&&(ce.activeTexture.set(W.TEXTURE0),De.lineAtlasTexture.bind(W.LINEAR,W.REPEAT),de.updatePaintBuffers()),oe&&(ce.activeTexture.set(W.TEXTURE0),De.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),de.updatePaintBuffers()),f.prepareDrawProgram(ce,Be,ve.toUnwrapped());const Ze=vt=>{Be.draw(ce,W.TRIANGLES,M,vt,D,s.CullFaceMode.disabled,xt,l.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,l.paint,f.transform.zoom,de,[Ae.layoutVertexBuffer2])};if(ge){const vt=f.stencilModeForClipping(ve).ref;vt===0&&f.terrain&&ce.clear({stencil:0});const Ft={func:W.EQUAL,mask:255};xt.u_alpha_discard_threshold=.8,Ze(new s.StencilMode(Ft,vt,255,W.KEEP,W.KEEP,W.INVERT)),xt.u_alpha_discard_threshold=0,Ze(new s.StencilMode(Ft,vt,255,W.KEEP,W.KEEP,W.KEEP))}else Ze(f.stencilModeForClipping(ve))}ge&&(f.resetStencilClippingMasks(),f.terrain&&ce.clear({stencil:0}))},fill:function(f,i,l,p){const v=l.paint.get("fill-color"),b=l.paint.get("fill-opacity");if(b.constantOr(1)===0)return;const M=f.colorModeForRenderPass(),D=l.paint.get("fill-pattern"),L=f.opaquePassEnabledForLayer()&&!D.constantOr(1)&&v.constantOr(s.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===L){const F=f.depthModeForSublayer(1,f.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);jd(f,i,l,p,F,M,!1)}if(f.renderPass==="translucent"&&l.paint.get("fill-antialias")){const F=f.depthModeForSublayer(l.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);jd(f,i,l,p,F,M,!0)}},"fill-extrusion":function(f,i,l,p){const v=l.paint.get("fill-extrusion-opacity");if(v!==0&&f.renderPass==="translucent"){const b=new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D);if(v!==1||l.paint.get("fill-extrusion-pattern").constantOr(1))mf(f,i,l,p,b,s.StencilMode.disabled,s.ColorMode.disabled),mf(f,i,l,p,b,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const M=f.colorModeForRenderPass();mf(f,i,l,p,b,s.StencilMode.disabled,M)}}},hillshade:function(f,i,l,p){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const v=f.context,b=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),M=f.colorModeForRenderPass(),D=f.terrain&&f.terrain.renderingToTexture,[L,F]=f.renderPass!=="translucent"||D?[{},p]:f.stencilConfigForOverlap(p);for(const B of F){const q=i.getTile(B);if(q.needsHillshadePrepare&&f.renderPass==="offscreen")Es(f,q,l,b,s.StencilMode.disabled,M);else if(f.renderPass==="translucent"){const te=D&&f.terrain?f.terrain.stencilModeForRTTOverlap(B):L[B.overscaledZ];Uu(f,B,q,l,b,te,M)}}v.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,i,l,p,v,b){if(f.renderPass!=="translucent"||l.paint.get("raster-opacity")===0||!p.length)return;const M=f.context,D=M.gl,L=i.getSource(),F=f.useProgram("raster"),B=f.colorModeForRenderPass(),q=f.terrain&&f.terrain.renderingToTexture,[te,oe]=L instanceof jn||q?[{},p]:f.stencilConfigForOverlap(p),ue=oe[oe.length-1].overscaledZ,se=!f.options.moving;for(const ce of oe){const W=q?s.DepthMode.disabled:f.depthModeForSublayer(ce.overscaledZ-ue,l.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,D.LESS),ae=ce.toUnwrapped(),ge=i.getTile(ce);if(q&&(!ge||!ge.hasData()))continue;const ve=q?ce.projMatrix:f.transform.calculateProjMatrix(ae,se),De=f.terrain&&q?f.terrain.stencilModeForRTTOverlap(ce):te[ce.overscaledZ],Ae=b?0:l.paint.get("raster-fade-duration");ge.registerFadeDuration(Ae);const de=i.findLoadedParent(ce,0),Be=lf(ge,de,i,f.transform,Ae);let Oe,Ke;f.terrain&&f.terrain.prepareDrawTile();const Ot=l.paint.get("raster-resampling")==="nearest"?D.NEAREST:D.LINEAR;M.activeTexture.set(D.TEXTURE0),ge.texture.bind(Ot,D.CLAMP_TO_EDGE),M.activeTexture.set(D.TEXTURE1),de?(de.texture.bind(Ot,D.CLAMP_TO_EDGE),Oe=Math.pow(2,de.tileID.overscaledZ-ge.tileID.overscaledZ),Ke=[ge.tileID.canonical.x*Oe%1,ge.tileID.canonical.y*Oe%1]):ge.texture.bind(Ot,D.CLAMP_TO_EDGE),ge.texture.useMipmap&&M.extTextureFilterAnisotropic&&f.transform.pitch>20&&D.texParameterf(D.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax);const We=Pd(ve,Ke||[0,0],Oe||1,Be,l,L instanceof jn?L.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(M,F,ae),L instanceof jn)L.boundsBuffer&&L.boundsSegments&&F.draw(M,D.TRIANGLES,W,s.StencilMode.disabled,B,s.CullFaceMode.disabled,We,l.id,L.boundsBuffer,f.quadTriangleIndexBuffer,L.boundsSegments);else{const{tileBoundsBuffer:_t,tileBoundsIndexBuffer:tt,tileBoundsSegments:xt}=f.getTileBoundsBuffers(ge);F.draw(M,D.TRIANGLES,W,De,B,s.CullFaceMode.disabled,We,l.id,_t,tt,xt)}}f.resetStencilClippingMasks()},background:function(f,i,l,p){const v=l.paint.get("background-color"),b=l.paint.get("background-opacity");if(b===0)return;const M=f.context,D=M.gl,L=f.transform,F=L.tileSize,B=l.paint.get("background-pattern");if(f.isPatternMissing(B))return;const q=!B&&v.a===1&&b===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==q)return;const te=s.StencilMode.disabled,oe=f.depthModeForSublayer(0,q==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),ue=f.colorModeForRenderPass(),se=f.useProgram(B?"backgroundPattern":"background");let ce,W=p;W||(ce=f.getBackgroundTiles(),W=Object.values(ce).map(ae=>ae.tileID)),B&&(M.activeTexture.set(D.TEXTURE0),f.imageManager.bind(f.context));for(const ae of W){const ge=ae.toUnwrapped(),ve=p?ae.projMatrix:f.transform.calculateProjMatrix(ge);f.prepareDrawTile();const De=i?i.getTile(ae):ce?ce[ae.key]:new s.Tile(ae,F,L.zoom,f),Ae=B?Kg(ve,b,f,B,{tileID:ae,tileSize:F}):df(ve,b,v);f.prepareDrawProgram(M,se,ge);const{tileBoundsBuffer:de,tileBoundsIndexBuffer:Be,tileBoundsSegments:Oe}=f.getTileBoundsBuffers(De);se.draw(M,D.TRIANGLES,oe,te,ue,s.CullFaceMode.disabled,Ae,l.id,de,Be,Oe)}},sky:function(f,i,l){const p=f.transform,v=p.projection.name==="mercator"||p.projection.name==="globe"?1:s.smoothstep(7,8,p.zoom),b=l.paint.get("sky-opacity")*v;if(b===0)return;const M=f.context,D=l.paint.get("sky-type"),L=new s.DepthMode(M.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),F=f.frameCounter/1e3%1;D==="atmosphere"?f.renderPass==="offscreen"?l.needsSkyboxCapture(f)&&(function(B,q,te,oe){const ue=B.context,se=ue.gl;let ce=q.skyboxFbo;if(!ce){ce=q.skyboxFbo=ue.createFramebuffer(32,32,!1),q.skyboxGeometry=new gh(ue),q.skyboxTexture=ue.gl.createTexture(),se.bindTexture(se.TEXTURE_CUBE_MAP,q.skyboxTexture),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_WRAP_S,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_WRAP_T,se.CLAMP_TO_EDGE),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_MIN_FILTER,se.LINEAR),se.texParameteri(se.TEXTURE_CUBE_MAP,se.TEXTURE_MAG_FILTER,se.LINEAR);for(let ve=0;ve<6;++ve)se.texImage2D(se.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,se.RGBA,32,32,0,se.RGBA,se.UNSIGNED_BYTE,null)}ue.bindFramebuffer.set(ce.framebuffer),ue.viewport.set([0,0,32,32]);const W=q.getCenter(B,!0),ae=B.useProgram("skyboxCapture"),ge=new Float64Array(16);s.identity(ge),s.rotateY(ge,ge,.5*-Math.PI),zo(ue,q,ae,ge,W,0),s.identity(ge),s.rotateY(ge,ge,.5*Math.PI),zo(ue,q,ae,ge,W,1),s.identity(ge),s.rotateX(ge,ge,.5*-Math.PI),zo(ue,q,ae,ge,W,2),s.identity(ge),s.rotateX(ge,ge,.5*Math.PI),zo(ue,q,ae,ge,W,3),s.identity(ge),zo(ue,q,ae,ge,W,4),s.identity(ge),s.rotateY(ge,ge,Math.PI),zo(ue,q,ae,ge,W,5),ue.viewport.set([0,0,B.width,B.height])}(f,l),l.markSkyboxValid(f)):f.renderPass==="sky"&&function(B,q,te,oe,ue){const se=B.context,ce=se.gl,W=B.transform,ae=B.useProgram("skybox");se.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_CUBE_MAP,q.skyboxTexture);const ge=((ve,De,Ae,de,Be)=>({u_matrix:ve,u_sun_direction:De,u_cubemap:0,u_opacity:de,u_temporal_offset:Be}))(W.skyboxMatrix,q.getCenter(B,!1),0,oe,ue);B.prepareDrawProgram(se,ae),ae.draw(se,ce.TRIANGLES,te,s.StencilMode.disabled,B.colorModeForRenderPass(),s.CullFaceMode.backCW,ge,"skybox",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(f,l,L,b,F):D==="gradient"&&f.renderPass==="sky"&&function(B,q,te,oe,ue){const se=B.context,ce=se.gl,W=B.transform,ae=B.useProgram("skyboxGradient");q.skyboxGeometry||(q.skyboxGeometry=new gh(se)),se.activeTexture.set(ce.TEXTURE0);let ge=q.colorRampTexture;ge||(ge=q.colorRampTexture=new s.Texture(se,q.colorRamp,ce.RGBA)),ge.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const ve=((De,Ae,de,Be,Oe)=>({u_matrix:De,u_color_ramp:0,u_center_direction:Ae,u_radius:s.degToRad(de),u_opacity:Be,u_temporal_offset:Oe}))(W.skyboxMatrix,q.getCenter(B,!1),q.paint.get("sky-gradient-radius"),oe,ue);B.prepareDrawProgram(se,ae),ae.draw(se,ce.TRIANGLES,te,s.StencilMode.disabled,B.colorModeForRenderPass(),s.CullFaceMode.backCW,ve,"skyboxGradient",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}(f,l,L,b,F)},debug:function(f,i,l){for(let p=0;p<l.length;p++)am(f,i,l[p])},custom:function(f,i,l,p){const v=f.context,b=l.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||f.renderPass==="offscreen")&&l.isLayerDraped()){if(f.renderPass==="offscreen"){const M=b.prerender;if(M){if(f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),f.transform.projection.name==="globe"){const D=f.transform.pointMerc;M.call(b,v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(f.transform.zoom),[D.x,D.y],f.transform.pixelsPerMeterRatio)}else M.call(b,v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState()}}else if(f.renderPass==="translucent"){if(f.terrain&&f.terrain.renderingToTexture){const D=b.renderToTile;if(D){const L=p[0].canonical,F=new s.MercatorCoordinate(L.x+p[0].wrap*(1<<L.z),L.y,L.z);v.setDepthMode(s.DepthMode.disabled),v.setStencilMode(s.StencilMode.disabled),v.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),D.call(b,v.gl,F),v.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),v.setColorMode(f.colorModeForRenderPass()),v.setStencilMode(s.StencilMode.disabled);const M=b.renderingMode==="3d"?new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(v.setDepthMode(M),f.transform.projection.name==="globe"){const D=f.transform.pointMerc;b.render(v.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(f.transform.zoom),[D.x,D.y],f.transform.pixelsPerMeterRatio)}else b.render(v.gl,f.transform.customLayerMatrix());v.setDirty(),f.setBaseState(),v.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Ju{constructor(i,l,p=!1){this.context=new zt(i,p),this.transform=l,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(i,l){const p=!!i&&!!i.terrain&&this.transform.projection.supportsTerrain;if(!(p||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ch(this,i));const v=this._terrain;this.transform.elevation=p?v:null,v.update(i,this.transform,l)}_updateFog(i){const l=i.fog;if(!l||this.transform.projection.name==="globe"||l.getOpacity(this.transform.pitch)<1||l.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[p,v]=l.getFovAdjustedRange(this.transform._fov);if(p>v)return void(this.transform.fogCullDistSq=null);const b=p+.78*(v-p);this.transform.fogCullDistSq=b*b}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(i,l){if(this.width=i*s.exported.devicePixelRatio,this.height=l*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style.order)this.style._layers[p].resize()}setup(){const i=this.context,l=new s.StructArrayLayout2i4;l.emplaceBack(0,0),l.emplaceBack(s.EXTENT,0),l.emplaceBack(0,s.EXTENT),l.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(l,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const p=new s.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(s.EXTENT,0),p.emplaceBack(0,s.EXTENT),p.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=i.createVertexBuffer(p,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const v=new s.StructArrayLayout2i4;v.emplaceBack(-1,-1),v.emplaceBack(1,-1),v.emplaceBack(-1,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const b=new s.StructArrayLayout4i8;b.emplaceBack(0,0,0,0),b.emplaceBack(s.EXTENT,0,s.EXTENT,0),b.emplaceBack(0,s.EXTENT,0,s.EXTENT),b.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=i.createVertexBuffer(b,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const M=new s.StructArrayLayout3ui6;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(M);const D=new s.StructArrayLayout1ui2;for(const F of[0,1,3,2,0])D.emplaceBack(F);this.debugIndexBuffer=i.createIndexBuffer(D),this.emptyTexture=new s.Texture(i,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),i.gl.RGBA),this.identityMat=s.create();const L=this.context.gl;this.stencilClearMode=new s.StencilMode({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new $a(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(i){return i._makeTileBoundsBuffers(this.context,this.transform.projection),i._tileBoundsBuffer?{tileBoundsBuffer:i._tileBoundsBuffer,tileBoundsIndexBuffer:i._tileBoundsIndexBuffer,tileBoundsSegments:i._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const i=this.context,l=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(i,l.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Gu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(i,l,p){if(!l||this.currentStencilSource===l.id||!i.isTileClipped()||!p||p.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const L of p)if(this._tileClippingMaskIDs[L.key]===void 0){D=!0;break}if(!D)return}this.currentStencilSource=l.id;const v=this.context,b=v.gl;this.nextStencilID+p.length>256&&this.clearStencil(),v.setColorMode(s.ColorMode.disabled),v.setDepthMode(s.DepthMode.disabled);const M=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of p){const L=l.getTile(D),F=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:B,tileBoundsIndexBuffer:q,tileBoundsSegments:te}=this.getTileBoundsBuffers(L);M.draw(v,b.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:b.ALWAYS,mask:0},F,255,b.KEEP,b.KEEP,b.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Gu(D.projMatrix),"$clipping",B,q,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,l=this.context.gl;return new s.StencilMode({func:l.NOTEQUAL,mask:255},i,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(i){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(i);const l=this.context.gl;return new s.StencilMode({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(i){const l=this.context.gl,p=i.sort((M,D)=>D.overscaledZ-M.overscaledZ),v=p[p.length-1].overscaledZ,b=p[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const M={};for(let D=0;D<b;D++)M[D+v]=new s.StencilMode({func:l.GEQUAL,mask:255},D+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=b,[M,p]}return[{[v]:s.StencilMode.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([i.CONSTANT_COLOR,i.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(i,l,p){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new s.DepthMode(p||this.context.gl.LEQUAL,l,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,l){this.style=i,this.options=l,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const p=this.style.order,v=this.style._sourceCaches;for(const F in v){const B=v[F];B.used&&B.prepare(this.context)}const b={},M={},D={};for(const F in v){const B=v[F];b[F]=B.getVisibleCoordinates(),M[F]=b[F].slice().reverse(),D[F]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<p.length;F++)if(this.style._layers[p[F]].is3D()){this.opaquePassCutoff=F;break}if(this.terrain&&(this.terrain.updateTileBinding(D),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const F of p){const B=this.style._layers[F],q=i._getLayerSourceCache(B);if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const te=q?M[q.id]:void 0;(B.type==="custom"||B.isSky()||te&&te.length)&&this.renderLayer(this,q,B,te)}this.depthRangeFor3D=[0,1-(i.order.length+2)*this.numSublayers*this.depthEpsilon];const L=this.terrain;if(L&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&L.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:l.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=l.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[p[this.currentLayer]],B=i._getLayerSourceCache(F);if(F.isSky())continue;const q=B?M[B.id]:void 0;this._renderTileClippingMasks(F,B,q),this.renderLayer(this,B,F,q)}if(this.style.fog&&this.transform.projection.supportsFog&&function(F,B){const q=F.context,te=q.gl,oe=F.transform,ue=new s.DepthMode(te.LEQUAL,s.DepthMode.ReadOnly,[0,1]),se=F.useProgram("globeAtmosphere",null,oe.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ce=s.globeToMercatorTransition(oe.zoom),W=B.properties.get("color").toArray01(),ae=B.properties.get("high-color").toArray01(),ge=B.properties.get("space-color").toArray01PremultipliedAlpha(),ve=s.identity$1([]);s.rotateY$1(ve,ve,-s.degToRad(oe._center.lng)),s.rotateX$1(ve,ve,s.degToRad(oe._center.lat)),s.rotateZ$1(ve,ve,oe.angle),s.rotateX$1(ve,ve,-oe._pitch);const De=s.fromQuat(new Float32Array(16),ve),Ae=s.mapValue(B.properties.get("star-intensity"),0,1,0,.25),de=5e-4,Be=s.mapValue(B.properties.get("horizon-blend"),0,1,de,.25),Oe=s.globeUseCustomAntiAliasing(F,q,oe)&&Be===de?oe.worldSize/(2*Math.PI*1.025)-1:oe.globeRadius,Ke=F.frameCounter/1e3%1,Ot=s.length(oe.globeCenterInViewSpace),We=Math.sqrt(Math.pow(Ot,2)-Math.pow(Oe,2)),_t=Math.acos(We/Ot),tt=((Ze,vt,Ft,Tt,Pt,pn,Xn,sn,In,vr,mr,gn,jr,ni)=>({u_frustum_tl:Ze,u_frustum_tr:vt,u_frustum_br:Ft,u_frustum_bl:Tt,u_horizon:Pt,u_transition:pn,u_fadeout_range:Xn,u_color:sn,u_high_color:In,u_space_color:vr,u_star_intensity:mr,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:gn,u_horizon_angle:jr,u_rotation_matrix:ni}))(oe.frustumCorners.TL,oe.frustumCorners.TR,oe.frustumCorners.BR,oe.frustumCorners.BL,oe.frustumCorners.horizon,ce,Be,W,ae,ge,Ae,Ke,_t,De);F.prepareDrawProgram(q,se);const xt=F.atmosphereBuffer;xt&&se.draw(q,te.TRIANGLES,ue,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,tt,"skybox",xt.vertexBuffer,xt.indexBuffer,xt.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const F=this.style._layers[p[this.currentLayer]],B=i._getLayerSourceCache(F);F.isSky()&&this.renderLayer(this,B,F,B?M[B.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;){const F=this.style._layers[p[this.currentLayer]],B=i._getLayerSourceCache(F);if(F.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(F)){if(F.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const q=B?(F.type==="symbol"?D:M)[B.id]:void 0;this._renderTileClippingMasks(F,B,B?b[B.id]:void 0),this.renderLayer(this,B,F,q),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let F=null;s.values(this.style._layers).forEach(B=>{const q=i._getLayerSourceCache(B);q&&!B.isHidden(this.transform.zoom)&&(!F||F.getSource().maxzoom<q.getSource().maxzoom)&&(F=q)}),F&&this.options.showTileBoundaries&&Il.debug(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const B=F.transform.padding;fu(F,F.transform.height-(B.top||0),3,Xu),fu(F,B.bottom||0,3,Qg),yf(F,B.left||0,3,Vd),yf(F,F.transform.width-(B.right||0),3,hu);const q=F.transform.centerPoint;(function(te,oe,ue,se){Yu(te,oe-1,ue-10,2,20,se),Yu(te,oe-10,ue-1,20,2,se)})(F,q.x,F.transform.height-q.y,gf)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(i,l,p,v){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="sky"||p.type==="custom"||v&&v.length)&&(this.id=p.id,this.gpuTimingStart(p),(!i.transform.projection.unsupportedLayers||!i.transform.projection.unsupportedLayers.includes(p.type)||i.terrain&&p.type==="custom")&&Il[p.type](i,l,p,v,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;let p=this.gpuTimers[i.id];p||(p=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:l.createQueryEXT()}),p.calls++,l.beginQueryEXT(l.TIME_ELAPSED_EXT,p.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const i=this.context.extTimerQuery,l=i.createQueryEXT();this.deferredRenderGpuTimeQueries.push(l),i.beginQueryEXT(i.TIME_ELAPSED_EXT,l)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}collectDeferredRenderGpuQueries(){const i=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],i}queryGpuTimers(i){const l={};for(const p in i){const v=i[p],b=this.context.extTimerQuery,M=b.getQueryObjectEXT(v.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(v.query),l[p]=M}return l}queryGpuTimeDeferredRender(i){if(!this.options.gpuTimingDeferredRender)return 0;const l=this.context.extTimerQuery;let p=0;for(const v of i)p+=l.getQueryObjectEXT(v,l.QUERY_RESULT_EXT)/1e6,l.deleteQueryEXT(v);return p}translatePosMatrix(i,l,p,v,b){if(!p[0]&&!p[1])return i;const M=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(M){const F=Math.sin(M),B=Math.cos(M);p=[p[0]*B-p[1]*F,p[0]*F+p[1]*B]}const D=[b?p[0]:An(l,p[0],this.transform.zoom),b?p[1]:An(l,p[1],this.transform.zoom),0],L=new Float32Array(16);return s.translate(L,i,D),L}saveTileTexture(i){const l=this._tileTextures[i.size[0]];l?l.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const l=this._tileTextures[i];return l&&l.length>0?l.pop():null}isPatternMissing(i){return i===null||i!==void 0&&!this.imageManager.getPattern(i.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const i=this.terrain&&this.terrain.renderingToTexture,l=this.terrain&&this.terrain.exaggeration()===0,p=this.style&&this.style.fog,v=[];return this.terrainRenderModeElevated()&&v.push("TERRAIN"),this.transform.projection.name==="globe"&&v.push("GLOBE"),l&&v.push("ZERO_EXAGGERATION"),p&&!i&&p.getOpacity(this.transform.pitch)!==0&&v.push("FOG"),i&&v.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&v.push("OVERDRAW_INSPECTOR"),v}useProgram(i,l,p){this.cache=this.cache||{};const v=p||[],b=this.currentGlobalDefines().concat(v),M=Sr.cacheKey(Ai[i],i,b,l);return this.cache[M]||(this.cache[M]=new Sr(this.context,i,Ai[i],l,Bd[i],b)),this.cache[M]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(i,l,p){if(this.terrain&&this.terrain.renderingToTexture)return;const v=this.style.fog;if(v){const b=v.getOpacity(this.transform.pitch),M=((D,L,F,B,q,te,oe,ue,se,ce,W)=>{const ae=D.transform,ge=L.properties.get("color").toArray01();ge[3]=B;const ve=D.frameCounter/1e3%1;return{u_fog_matrix:F?ae.calculateFogTileMatrix(F):D.identityMat,u_fog_range:L.getFovAdjustedRange(ae._fov),u_fog_color:ge,u_fog_horizon_blend:L.properties.get("horizon-blend"),u_fog_temporal_offset:ve,u_frustum_tl:q,u_frustum_tr:te,u_frustum_br:oe,u_frustum_bl:ue,u_globe_pos:se,u_globe_radius:ce,u_viewport:W,u_globe_transition:s.globeToMercatorTransition(ae.zoom),u_is_globe:+(ae.projection.name==="globe")}})(this,v,p,b,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);l.setFogUniformValues(i,M)}}setTileLoadedFlag(i){this.tileLoaded=i}saveCanvasCopy(){const i=this.canvasCopy();i&&(this.frameCopies.push(i),this.tileLoaded=!1)}canvasCopy(){const i=this.context.gl,l=i.createTexture();return i.bindTexture(i.TEXTURE_2D,l),i.copyTexImage2D(i.TEXTURE_2D,0,i.RGBA,0,0,i.drawingBufferWidth,i.drawingBufferHeight,0),l}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const i=this.style&&this.style.fog;return!!i&&i.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const i=this._backgroundTiles,l=this._backgroundTiles={},p=this.transform.coveringTiles({tileSize:512});for(const v of p)l[v.key]=i[v.key]||new s.Tile(v,512,this.transform.tileZoom,this);return l}clearBackgroundTiles(){this._backgroundTiles={}}}class vf{constructor(i=0,l=0,p=0,v=0){if(isNaN(i)||i<0||isNaN(l)||l<0||isNaN(p)||p<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=l,this.left=p,this.right=v}interpolate(i,l,p){return l.top!=null&&i.top!=null&&(this.top=s.number(i.top,l.top,p)),l.bottom!=null&&i.bottom!=null&&(this.bottom=s.number(i.bottom,l.bottom,p)),l.left!=null&&i.left!=null&&(this.left=s.number(i.left,l.left,p)),l.right!=null&&i.right!=null&&(this.right=s.number(i.right,l.right,p)),this}getCenter(i,l){const p=s.clamp((this.left+i-this.right)/2,0,i),v=s.clamp((this.top+l-this.bottom)/2,0,l);return new s.Point(p,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new vf(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function _f(f,i){const l=s.getColumn(f,3);s.fromQuat(f,i),s.setColumn(f,3,l)}function Ir(f,i){const l=s.identity$1([]);return s.rotateZ$1(l,l,-i),s.rotateX$1(l,l,-f),l}function yh(f,i){const l=[f[0],f[1],0],p=[i[0],i[1],0];if(s.length(l)>=1e-15){const M=s.normalize([],l);s.scale$2(p,M,s.dot(p,M)),i[0]=p[0],i[1]=p[1]}const v=s.cross([],i,f);if(s.len(v)<1e-15)return null;const b=Math.atan2(-v[1],v[0]);return Ir(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),b)}class $d{constructor(i,l){this.position=i,this.orientation=l}get position(){return this._position}set position(i){if(i){const l=i instanceof s.MercatorCoordinate?i:new s.MercatorCoordinate(i[0],i[1],i[2]);this._renderWorldCopies&&(l.x=s.wrap(l.x,0,1)),this._position=l}else this._position=null}lookAtPoint(i,l){if(this.orientation=null,!this.position)return;const p=this.position,v=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(i)):0,b=s.MercatorCoordinate.fromLngLat(i,v),M=[b.x-p.x,b.y-p.y,b.z-p.z];l||(l=[0,0,1]),l[2]=Math.abs(l[2]),this.orientation=yh(M,l)}setPitchBearing(i,l){this.orientation=Ir(s.degToRad(i),s.degToRad(-l))}}class Qu{constructor(i,l){this._transform=s.identity([]),this.orientation=l,this.position=i}get mercatorPosition(){const i=this.position;return new s.MercatorCoordinate(i[0],i[1],i[2])}get position(){const i=s.getColumn(this._transform,3);return[i[0],i[1],i[2]]}set position(i){var l;i&&s.setColumn(this._transform,3,[(l=i)[0],l[1],l[2],1])}get orientation(){return this._orientation}set orientation(i){this._orientation=i||s.identity$1([]),i&&_f(this._transform,this._orientation)}getPitchBearing(){const i=this.forward(),l=this.right();return{bearing:Math.atan2(-l[1],l[0]),pitch:Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),-i[2])}}setPitchBearing(i,l){this._orientation=Ir(i,l),_f(this._transform,this._orientation)}forward(){const i=s.getColumn(this._transform,2);return[-i[0],-i[1],-i[2]]}up(){const i=s.getColumn(this._transform,1);return[-i[0],-i[1],-i[2]]}right(){const i=s.getColumn(this._transform,0);return[i[0],i[1],i[2]]}getCameraToWorld(i,l){const p=new Float64Array(16);return s.invert(p,this.getWorldToCamera(i,l)),p}getWorldToCameraPosition(i,l,p){const v=this.position;s.scale$2(v,v,-i);const b=new Float64Array(16);return s.fromScaling(b,[p,p,p]),s.translate(b,b,v),b[10]*=l,b}getWorldToCamera(i,l){const p=new Float64Array(16),v=new Float64Array(4),b=this.position;return s.conjugate(v,this._orientation),s.scale$2(b,b,-i),s.fromQuat(p,v),s.translate(p,p,b),p[1]*=-1,p[5]*=-1,p[9]*=-1,p[13]*=-1,p[8]*=l,p[9]*=l,p[10]*=l,p[11]*=l,p}getCameraToClipPerspective(i,l,p,v){const b=new Float64Array(16);return s.perspective(b,i,l,p,v),b}getDistanceToElevation(i,l=!1){const p=i===0?0:s.mercatorZfromAltitude(i,l?s.latFromMercatorY(this.position[1]):this.position[1]),v=this.forward();return(p-this.position[2])/v[2]}clone(){return new Qu([...this.position],[...this.orientation])}}function Cs(f,i){const l=Ll(f.projection,f.zoom,f.width,f.height),p=function(b,M,D,L,F){const B=new s.LngLat(D.lng-180*il,D.lat),q=new s.LngLat(D.lng+180*il,D.lat),te=b.project(B.lng,B.lat),oe=b.project(q.lng,q.lat),ue=-Math.atan2(oe.y-te.y,oe.x-te.x),se=s.MercatorCoordinate.fromLngLat(D);se.y=s.clamp(se.y,-1+il,1-il);const ce=se.toLngLat(),W=b.project(ce.lng,ce.lat),ae=s.MercatorCoordinate.fromLngLat(ce);ae.x+=il;const ge=ae.toLngLat(),ve=b.project(ge.lng,ge.lat),De=xf(ve.x-W.x,ve.y-W.y,ue),Ae=s.MercatorCoordinate.fromLngLat(ce);Ae.y+=il;const de=Ae.toLngLat(),Be=b.project(de.lng,de.lat),Oe=xf(Be.x-W.x,Be.y-W.y,ue),Ke=Math.abs(De.x)/Math.abs(Oe.y),Ot=s.identity([]);s.rotateZ(Ot,Ot,-ue*(1-(F?0:L)));const We=s.identity([]);return s.scale(We,We,[1,1-(1-Ke)*L,1]),We[4]=-Oe.x/Oe.y*L,s.rotateZ(We,We,ue),s.multiply(We,Ot,We),We}(f.projection,0,f.center,l,i),v=lm(f);return s.scale(p,p,[v,v,1]),p}function lm(f){const i=f.projection,l=Ll(f.projection,f.zoom,f.width,f.height),p=um(i,f.center),v=um(i,s.LngLat.convert(i.center));return Math.pow(2,p*l+(1-l)*v)}function Ll(f,i,l,p,v=1/0){const b=f.range;if(!b)return 0;const M=Math.min(v,Math.max(l,p)),D=Math.log(M/1024)/Math.LN2;return s.smoothstep(b[0]+D,b[1]+D,i)}const il=1/4e4;function um(f,i){const l=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),p=new s.LngLat(i.lng-180*il,l),v=new s.LngLat(i.lng+180*il,l),b=f.project(p.lng,l),M=f.project(v.lng,l),D=s.MercatorCoordinate.fromLngLat(p),L=s.MercatorCoordinate.fromLngLat(v),F=M.x-b.x,B=M.y-b.y,q=L.x-D.x,te=L.y-D.y,oe=Math.sqrt((q*q+te*te)/(F*F+B*B));return Math.log(oe)/Math.LN2}function xf(f,i,l){const p=Math.cos(l),v=Math.sin(l);return{x:f*p-i*v,y:f*v+i*p}}class zl{constructor(i,l,p,v,b,M,D){this.tileSize=512,this._renderWorldCopies=b===void 0||b,this._minZoom=i||0,this._maxZoom=l||22,this._minPitch=p??0,this._maxPitch=v??60,this.setProjection(M),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new vf,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Qu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const i=new zl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return i._elevation=this._elevation,i._centerAltitude=this._centerAltitude,i._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,i.tileSize=this.tileSize,i.mercatorFromTransition=this.mercatorFromTransition,i.width=this.width,i.height=this.height,i.cameraElevationReference=this.cameraElevationReference,i._center=this._center,i._setZoom(this.zoom),i._seaLevelZoom=this._seaLevelZoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._nearZ=this._nearZ,i._farZ=this._farZ,i._averageElevation=this._averageElevation,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._camera=this._camera.clone(),i._calcMatrices(),i.freezeTileCoverage=this.freezeTileCoverage,i.frustumCorners=this.frustumCorners,i}get elevation(){return this._elevation}set elevation(i){this._elevation!==i&&(this._elevation=i,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(i,l=!1){const p=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||p)&&this._updateCameraOnTerrain(),(i||p)&&this._constrainCamera(l),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(i){this.projectionOptions=i||{name:"mercator"};const l=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const p=!N(l,this.getProjection());return p&&this._calcMatrices(),this.mercatorFromTransition=!1,p}setMercatorFromTransition(){const i=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const l=i!==this.projection.name;return l&&this._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get cameraWorldSize(){const i=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(i))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(i){this.rotation=i}get rotation(){return-this.angle/Math.PI*180}set rotation(i){const l=-i*Math.PI/180;var p;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=(p=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p),function(v,b,M){var D=b[0],L=b[1],F=b[2],B=b[3],q=Math.sin(M),te=Math.cos(M);v[0]=D*te+F*q,v[1]=L*te+B*q,v[2]=D*-q+F*te,v[3]=L*-q+B*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const l=s.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const i=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/i)}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=s.degToRad(i),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(i){this._averageElevation=i,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(i){const l=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._setZoom(l),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(i){this._zoom=i,this.scale=this.zoomScale(i),this.tileZoom=Math.floor(i),this.zoomFraction=i-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;this._centerAltitude=i.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=i.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const i=this._elevation,l=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],p=this.horizonLineFromTop();let v=0,b=0;for(let M=0;M<l.length;M++){const D=new s.Point(l[M][0]*this.width,p+l[M][1]*(this.height-p)),L=i.pointCoordinate(D);if(!L)continue;const F=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);v+=L[3]*F,b+=F}return b===0?NaN:v/b}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const i=this._seaLevelZoom,l=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),p=this.pixelsPerMeter/this.worldSize*l,v=this._mercatorZfromZoom(i),b=this._mercatorZfromZoom(this._maxZoom),M=Math.max(v-p,b);this._setZoom(this._zoomFromMercatorZ(M))}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}computeZoomRelativeTo(i){const l=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,i.toAltitude()));let p;p=i.z<this._camera.position[2]?[l.x,l.y,l.z]:[i.x,i.y,i.z];const v=s.length(s.sub([],this._camera.position,p));return s.clamp(this._zoomFromMercatorZ(v),this._minZoom,this._maxZoom)}setFreeCameraOptions(i){if(!this.height||!i.position&&!i.orientation)return;this._updateCameraState();let l=!1;if(i.orientation&&!s.exactEquals(i.orientation,this._camera.orientation)&&(l=this._setCameraOrientation(i.orientation)),i.position){const p=[i.position.x,i.position.y,i.position.z];s.exactEquals$1(p,this._camera.position)||(this._setCameraPosition(p),l=!0)}l&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const i=this._camera.position,l=new $d;return l.position=new s.MercatorCoordinate(i[0],i[1],i[2]),l.orientation=this._camera.orientation,l._elevation=this.elevation,l._renderWorldCopies=this.renderWorldCopies,l}_setCameraOrientation(i){if(!s.length$1(i))return!1;s.normalize$1(i,i);const l=s.transformQuat([],[0,0,-1],i),p=s.transformQuat([],[0,-1,0],i);if(p[2]<0)return!1;const v=yh(l,p);return!!v&&(this._camera.orientation=v,!0)}_setCameraPosition(i){const l=this.zoomScale(this.minZoom)*this.tileSize,p=this.zoomScale(this.maxZoom)*this.tileSize,v=this.cameraToCenterDistance;i[2]=s.clamp(i[2],v/p,v/l),this._camera.position=i}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,l,p){this._unmodified=!1,this._edgeInsets.interpolate(i,l,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const l=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(i){const l=[new s.UnwrappedTileID(0,i)];if(this.renderWorldCopies){const p=this.pointCoordinate(new s.Point(0,0)),v=this.pointCoordinate(new s.Point(this.width,0)),b=this.pointCoordinate(new s.Point(this.width,this.height)),M=this.pointCoordinate(new s.Point(0,this.height)),D=Math.floor(Math.min(p.x,v.x,b.x,M.x)),L=Math.floor(Math.max(p.x,v.x,b.x,M.x)),F=1;for(let B=D-F;B<=L+F;B++)B!==0&&l.push(new s.UnwrappedTileID(B,i))}return l}coveringTiles(i){let l=this.coveringZoomLevel(i);const p=l,v=this.elevation&&!i.isTerrainDEM,b=this.projection.name==="mercator";if(i.minzoom!==void 0&&l<i.minzoom)return[];i.maxzoom!==void 0&&l>i.maxzoom&&(l=i.maxzoom);const M=this.locationCoordinate(this.center),D=this.center.lat,L=1<<l,F=[L*M.x,L*M.y,0],B=this.projection.name==="globe",q=!B,te=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,q),oe=B?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ue=L*s.mercatorZfromAltitude(1,this.center.lat),se=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),ce=[L*oe.x,L*oe.y,se*(q?1:ue)],W=this.cameraToCenterDistance/i.tileSize*(i.roundZoom?1:.502),ae=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?l:0,ge=i.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ve=i.isTerrainDEM?-ge:this._elevation?this._elevation.getMinElevationBelowMSL():0,De=this.projection.isReprojectedInTileSpace?lm(this):1,Ae=Ze=>{const Ft=new s.MercatorCoordinate(Ze.x+25e-6,Ze.y,Ze.z),Tt=new s.MercatorCoordinate(Ze.x,Ze.y+25e-6,Ze.z),Pt=Ze.toLngLat(),pn=Ft.toLngLat(),Xn=Tt.toLngLat(),sn=this.locationCoordinate(Pt),In=this.locationCoordinate(pn),vr=this.locationCoordinate(Xn),mr=Math.hypot(In.x-sn.x,In.y-sn.y),gn=Math.hypot(vr.x-sn.x,vr.y-sn.y);return Math.sqrt(mr*gn)*De/25e-6},de=Ze=>{const vt=ge,Ft=ve;return{aabb:s.tileAABB(this,L,0,0,0,Ze,Ft,vt,this.projection),zoom:0,x:0,y:0,minZ:Ft,maxZ:vt,wrap:Ze,fullyVisible:!1}},Be=[];let Oe=[];const Ke=l,Ot=i.reparseOverscaled?p:l,We=Ze=>Ze*Ze,_t=We((se-this._centerAltitude)*ue),tt=Ze=>{if(!this._elevation||!Ze.tileID||!b)return;const vt=this._elevation.getMinMaxForTile(Ze.tileID),Ft=Ze.aabb;vt?(Ft.min[2]=vt.min,Ft.max[2]=vt.max,Ft.center[2]=(Ft.min[2]+Ft.max[2])/2):(Ze.shouldSplit=xt(Ze),Ze.shouldSplit||(Ft.min[2]=Ft.max[2]=Ft.center[2]=this._centerAltitude))},xt=Ze=>{if(Ze.zoom<ae)return!0;if(Ze.zoom===Ke)return!1;if(Ze.shouldSplit!=null)return Ze.shouldSplit;const vt=Ze.aabb.distanceX(ce),Ft=Ze.aabb.distanceY(ce);let Tt=_t,Pt=1;if(B){Tt=We(Ze.aabb.distanceZ(ce));const sn=Math.pow(2,Ze.zoom),In=s.latFromMercatorY((Ze.y+1)/sn),vr=s.latFromMercatorY(Ze.y/sn),mr=Math.min(Math.max(D,In),vr),gn=s.circumferenceAtLatitude(mr)/s.circumferenceAtLatitude(D);if(Pt=mr===D?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,gn/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&Ze.zoom===Ke-1&&gn>=.9)return!0}else if(v&&(Tt=We(Ze.aabb.distanceZ(ce)*ue)),this.projection.isReprojectedInTileSpace&&p<=5){const sn=Math.pow(2,Ze.zoom),In=Ae(new s.MercatorCoordinate((Ze.x+.5)/sn,(Ze.y+.5)/sn));Pt=In>.85?1:In}const pn=vt*vt+Ft*Ft+Tt,Xn=We((1<<Ke-Ze.zoom)*W*Pt*((sn,In)=>{if(In*We(.707)<sn)return 1;const vr=Math.sqrt(In/sn);return vr/(1.4144271570014144+(Math.pow(1.1,vr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Tt,_t),pn));return pn<Xn};if(this.renderWorldCopies)for(let Ze=1;Ze<=3;Ze++)Be.push(de(-Ze)),Be.push(de(Ze));for(Be.push(de(0));Be.length>0;){const Ze=Be.pop(),vt=Ze.x,Ft=Ze.y;let Tt=Ze.fullyVisible;if(!Tt){const Pt=Ze.aabb.intersects(te);if(Pt===0)continue;Tt=Pt===2}if(Ze.zoom!==Ke&&xt(Ze))for(let Pt=0;Pt<4;Pt++){const pn=(vt<<1)+Pt%2,Xn=(Ft<<1)+(Pt>>1),sn={aabb:b?Ze.aabb.quadrant(Pt):s.tileAABB(this,L,Ze.zoom+1,pn,Xn,Ze.wrap,Ze.minZ,Ze.maxZ,this.projection),zoom:Ze.zoom+1,x:pn,y:Xn,wrap:Ze.wrap,fullyVisible:Tt,tileID:void 0,shouldSplit:void 0,minZ:Ze.minZ,maxZ:Ze.maxZ};v&&!B&&(sn.tileID=new s.OverscaledTileID(Ze.zoom+1===Ke?Ot:Ze.zoom+1,Ze.wrap,Ze.zoom+1,pn,Xn),tt(sn)),Be.push(sn)}else{const Pt=Ze.zoom===Ke?Ot:Ze.zoom;if(i.minzoom&&i.minzoom>Pt)continue;const pn=F[0]-(.5+vt+(Ze.wrap<<Ze.zoom))*(1<<l-Ze.zoom),Xn=F[1]-.5-Ft,sn=Ze.tileID?Ze.tileID:new s.OverscaledTileID(Pt,Ze.wrap,Ze.zoom,vt,Ft);Oe.push({tileID:sn,distanceSq:pn*pn+Xn*Xn})}}if(this.fogCullDistSq){const Ze=this.fogCullDistSq,vt=this.horizonLineFromTop();Oe=Oe.filter(Ft=>{const Tt=[0,0,0,1],Pt=[s.EXTENT,s.EXTENT,0,1],pn=this.calculateFogTileMatrix(Ft.tileID.toUnwrapped());s.transformMat4$1(Tt,Tt,pn),s.transformMat4$1(Pt,Pt,pn);const Xn=s.getAABBPointSquareDist(Tt,Pt);if(Xn===0)return!0;let sn=!1;const In=this._elevation;if(In&&Xn>Ze&&vt!==0){const vr=this.calculateProjMatrix(Ft.tileID.toUnwrapped());let mr;i.isTerrainDEM||(mr=In.getMinMaxForTile(Ft.tileID)),mr||(mr={min:ve,max:ge});const gn=s.furthestTileCorner(this.rotation),jr=[gn[0]*s.EXTENT,gn[1]*s.EXTENT,mr.max];s.transformMat4(jr,jr,vr),sn=(1-jr[1])*this.height*.5<vt}return Xn<Ze||sn})}return Oe.sort((Ze,vt)=>Ze.distanceSq-vt.distanceSq).map(Ze=>Ze.tileID)}resize(i,l){this.width=i,this.height=l,this.pixelsToGLUnits=[2/i,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const l=s.clamp(i.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),p=this.projection.project(i.lng,l);return new s.Point(p.x*this.worldSize,p.y*this.worldSize)}unproject(i){return this.projection.unproject(i.x/this.worldSize,i.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(i,l){let p,v;const b=this.centerPoint;if(this.projection.name==="globe"){const D=this.worldSize;p=(l.x-b.x)/D,v=(l.y-b.y)/D}else{const D=this.pointCoordinate(l),L=this.pointCoordinate(b);p=D.x-L.x,v=D.y-L.y}const M=this.locationCoordinate(i);this.setLocation(new s.MercatorCoordinate(M.x-p,M.y-v))}setLocation(i){this.center=this.coordinateLocation(i),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(i){return this.projection.locationPoint(this,i)}locationPoint3D(i){return this.projection.locationPoint(this,i,!0)}pointLocation(i){return this.coordinateLocation(this.pointCoordinate(i))}pointLocation3D(i){return this.coordinateLocation(this.pointCoordinate3D(i))}locationCoordinate(i,l){const p=l?s.mercatorZfromAltitude(l,i.lat):void 0,v=this.projection.project(i.lng,i.lat);return new s.MercatorCoordinate(v.x,v.y,p)}coordinateLocation(i){return this.projection.unproject(i.x,i.y)}pointRayIntersection(i,l){const p=l??this._centerAltitude,v=[i.x,i.y,0,1],b=[i.x,i.y,1,1];s.transformMat4$1(v,v,this.pixelMatrixInverse),s.transformMat4$1(b,b,this.pixelMatrixInverse);const M=b[3];s.scale$1(v,v,1/v[3]),s.scale$1(b,b,1/M);const D=v[2],L=b[2];return{p0:v,p1:b,t:D===L?0:(p-D)/(L-D)}}screenPointToMercatorRay(i){const l=[i.x,i.y,0,1],p=[i.x,i.y,1,1];return s.transformMat4$1(l,l,this.pixelMatrixInverse),s.transformMat4$1(p,p,this.pixelMatrixInverse),s.scale$1(l,l,1/l[3]),s.scale$1(p,p,1/p[3]),l[2]=s.mercatorZfromAltitude(l[2],this._center.lat)*this.worldSize,p[2]=s.mercatorZfromAltitude(p[2],this._center.lat)*this.worldSize,s.scale$1(l,l,1/this.worldSize),s.scale$1(p,p,1/this.worldSize),new s.Ray([l[0],l[1],l[2]],s.normalize([],s.sub([],p,l)))}rayIntersectionCoordinate(i){const{p0:l,p1:p,t:v}=i,b=s.mercatorZfromAltitude(l[2],this._center.lat),M=s.mercatorZfromAltitude(p[2],this._center.lat);return new s.MercatorCoordinate(s.number(l[0],p[0],v)/this.worldSize,s.number(l[1],p[1],v)/this.worldSize,s.number(b,M,v))}pointCoordinate(i,l=this._centerAltitude){return this.projection.pointCoordinate(this,i.x,i.y,l)}pointCoordinate3D(i){if(!this.elevation)return this.pointCoordinate(i);let l=this.projection.pointCoordinate3D(this,i.x,i.y);if(l)return new s.MercatorCoordinate(l[0],l[1],l[2]);let p=0,v=this.horizonLineFromTop();if(i.y>v)return this.pointCoordinate(i);const b=.02*v,M=i.clone();for(let D=0;D<10&&v-p>b;D++){M.y=s.number(p,v,.66);const L=this.projection.pointCoordinate3D(this,M.x,M.y);L?(v=M.y,l=L):p=M.y}return l?new s.MercatorCoordinate(l[0],l[1],l[2]):this.pointCoordinate(i)}isPointAboveHorizon(i){return this.projection.isPointAboveHorizon(this,i)}isPointOnSurface(i){if(i.y<0||i.y>this.height||i.x<0||i.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(i);const l=this.pointCoordinate(i);return l.y>=0&&l.y<=1}_coordinatePoint(i,l){const p=l&&this.elevation?this.elevation.getAtPointOrZero(i,this._centerAltitude):this._centerAltitude,v=[i.x*this.worldSize,i.y*this.worldSize,p+i.toAltitude(),1];return s.transformMat4$1(v,v,this.pixelMatrix),v[3]>0?new s.Point(v[0]/v[3],v[1]/v[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:i,left:l}=this._edgeInsets,p=this.height-this._edgeInsets.bottom,v=this.width-this._edgeInsets.right,b=this.pointLocation3D(new s.Point(l,i)),M=this.pointLocation3D(new s.Point(v,i)),D=this.pointLocation3D(new s.Point(v,p)),L=this.pointLocation3D(new s.Point(l,p));let F=Math.min(b.lng,M.lng,D.lng,L.lng),B=Math.max(b.lng,M.lng,D.lng,L.lng),q=Math.min(b.lat,M.lat,D.lat,L.lat),te=Math.max(b.lat,M.lat,D.lat,L.lat);const oe=Math.pow(2,-this.zoom)/16*270,ue=this.projection.name==="globe"?1:4,se=(ce,W,ae,ge,ve)=>{const De=(ce+ae)/2,Ae=(W+ge)/2,de=new s.Point(De,Ae),{lng:Be,lat:Oe}=this.pointLocation3D(de),Ke=Math.max(0,F-Be,q-Oe,Be-B,Oe-te);F=Math.min(F,Be),B=Math.max(B,Be),q=Math.min(q,Oe),te=Math.max(te,Oe),(ve<ue||Ke>oe)&&(se(ce,W,De,Ae,ve+1),se(De,Ae,ae,ge,ve+1))};if(se(l,i,v,i,1),se(v,i,v,p,1),se(v,p,l,p,1),se(l,p,l,i,1),this.projection.name==="globe"){const[ce,W]=s.polesInViewport(this);ce?(te=90,B=180,F=-180):W&&(q=-90,B=180,F=-180)}return new s.LngLatBounds(new s.LngLat(F,q),new s.LngLat(B,te))}_getBoundsRectangular(i,l){const{top:p,left:v}=this._edgeInsets,b=this.height-this._edgeInsets.bottom,M=this.width-this._edgeInsets.right,D=new s.Point(v,p),L=new s.Point(M,p),F=new s.Point(M,b),B=new s.Point(v,b);let q=this.pointCoordinate(D,i),te=this.pointCoordinate(L,i);const oe=this.pointCoordinate(F,l),ue=this.pointCoordinate(B,l),se=(ce,W)=>(W.y-ce.y)/(W.x-ce.x);return q.y>1&&te.y>=0?q=new s.MercatorCoordinate((1-ue.y)/se(ue,q)+ue.x,1):q.y<0&&te.y<=1&&(q=new s.MercatorCoordinate(-ue.y/se(ue,q)+ue.x,0)),te.y>1&&q.y>=0?te=new s.MercatorCoordinate((1-oe.y)/se(oe,te)+oe.x,1):te.y<0&&q.y<=1&&(te=new s.MercatorCoordinate(-oe.y/se(oe,te)+oe.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(q)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(ue)).extend(this.coordinateLocation(oe))}_getBoundsRectangularTerrain(){const i=this.elevation;if(!i.visibleDemTiles.length||i.isUsingMockSource())return this._getBoundsRectangular(0,0);const l=i.visibleDemTiles.reduce((p,v)=>{if(v.dem){const b=v.dem.tree;p.min=Math.min(p.min,b.minimums[0]),p.max=Math.max(p.max,b.maximums[0])}return p},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(l.min*i.exaggeration(),l.max*i.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(i=!0){const l=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,p=this.height/2-l*(1-this._horizonShift);return i?Math.max(0,p):p}getMaxBounds(){return this.maxBounds}setMaxBounds(i){this.maxBounds=i,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,i&&(this.minLat=i.getSouth(),this.maxLat=i.getNorth(),this.minLng=i.getWest(),this.maxLng=i.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(i,l){return this.projection.createTileMatrix(this,l,i)}calculateDistanceTileData(i){const l=i.key,p=this._distanceTileDataCache;if(p[l])return p[l];const v=i.canonical,b=1/this.height,M=this.cameraWorldSize,D=M/this.zoomScale(v.z),L=(v.x+Math.pow(2,v.z)*i.wrap)*D,F=v.y*D,B=this.point;B.x*=M/this.worldSize,B.y*=M/this.worldSize;const q=this.angle,te=Math.sin(-q),oe=-Math.cos(-q);return p[l]={bearing:[te,oe],center:[(B.x-L)*b,(B.y-F)*b],scale:D/s.EXTENT*b},p[l]}calculateFogTileMatrix(i){const l=i.key,p=this._fogTileMatrixCache;if(p[l])return p[l];const v=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,i);return s.multiply(v,this.worldToFogMatrix,v),p[l]=new Float32Array(v),p[l]}calculateProjMatrix(i,l=!1){const p=i.key,v=l?this._alignedProjMatrixCache:this._projMatrixCache;if(v[p])return v[p];const b=this.calculatePosMatrix(i,this.worldSize);return s.multiply(b,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:l?this.alignedProjMatrix:this.projMatrix,b),v[p]=new Float32Array(b),v[p]}calculatePixelsToTileUnitsMatrix(i){const l=i.tileID.key,p=this._pixelsToTileUnitsCache;if(p[l])return p[l];const v=function(b,M){const{scale:D}=b.tileTransform,L=D*s.EXTENT/(b.tileSize*Math.pow(2,M.zoom-b.tileID.overscaledZ+b.tileID.canonical.z));return F=new Float32Array(4),te=(B=M.inverseAdjustmentMatrix)[1],oe=B[2],ue=B[3],ce=(q=[L,L])[1],F[0]=B[0]*(se=q[0]),F[1]=te*se,F[2]=oe*ce,F[3]=ue*ce,F;var F,B,q,te,oe,ue,se,ce}(i,this);return p[l]=v,p[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const i=1/this.worldSize,l=s.fromScaling([],[i,i,i]);return s.multiply(l,l,this.globeMatrix),l}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const i=this._elevation;this._updateCameraState();const l=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,p=this._computeCameraPosition(l),v=this._camera.forward(),b=s.mercatorZfromAltitude(1,this._center.lat);p[2]/=b,v[2]/=b,s.normalize(v,v);const M=i.raycast(p,v,i.exaggeration());if(M){const D=s.scaleAndAdd([],p,v,M),L=new s.MercatorCoordinate(D[0],D[1],s.mercatorZfromAltitude(D[2],s.latFromMercatorY(D[1]))),F=(L.z+s.length([L.x-p[0],L.y-p[1],L.z-p[2]*b]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(F),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(i=!1){if(!this._elevation)return;const l=this._elevation,p=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,v=this._computeCameraPosition(p),b=l.getAtPointOrZero(new s.MercatorCoordinate(...v)),M=this.pixelsPerMeter/this.worldSize*b,D=this._minimumHeightOverTerrain(),L=v[2]-M;if(L<=D)if(L<0||i){const F=this.locationCoordinate(this._center,this._centerAltitude),B=[v[0],v[1],F.z-v[2]],q=s.length(B);B[2]-=(D-L)/this._pixelsPerMercatorPixel;const te=s.length(B);if(te===0)return;s.scale$2(B,B,q/te*this._pixelsPerMercatorPixel),this._camera.position=[v[0],v[1],F.z*this._pixelsPerMercatorPixel-B[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||i){const te=this.center;return te.lat=s.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!i)&&(te.lng=s.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const l=this._unmodified,{x:p,y:v}=this.point;let b=0,M=p,D=v;const L=this.width/2,F=this.height/2,B=this.worldMinY*this.scale,q=this.worldMaxY*this.scale;if(v-F<B&&(D=B+F),v+F>q&&(D=q-F),q-B<this.height&&(b=Math.max(b,this.height/(q-B)),D=(q+B)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,ue=this.worldSize/2-(te+oe)/2;M=(p+ue+this.worldSize)%this.worldSize-ue,M-L<te&&(M=te+L),M+L>oe&&(M=oe-L),oe-te<this.width&&(b=Math.max(b,this.width/(oe-te)),M=(oe+te)/2)}M===p&&D===v||(this.center=this.unproject(new s.Point(M,D))),b&&(this.zoom+=this.scaleZoom(b)),this._constrainCamera(),this._unmodified=l,this._constraining=!1}_minZoomForBounds(){let i=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(i=Math.max(i,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),i}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,l=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const p=Ll(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,p),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const v=this.projection.zAxisUnit==="meters"?l:1,b=this._camera.getWorldToCamera(this.worldSize,v),M=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);M[8]=2*-i.x/this.width,M[9]=2*i.y/this.height;let D=s.mul([],M,b);if(this.projection.isReprojectedInTileSpace){const Ae=this.locationCoordinate(this.center),de=s.identity([]);s.translate(de,de,[Ae.x*this.worldSize,Ae.y*this.worldSize,0]),s.multiply(de,de,Cs(this)),s.translate(de,de,[-Ae.x*this.worldSize,-Ae.y*this.worldSize,0]),s.multiply(D,D,de),this.inverseAdjustmentMatrix=function(Be){const Oe=Cs(Be,!0);return ut([],[Oe[0],Oe[1],Oe[4],Oe[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],D,[this.worldSize,this.worldSize,this.worldSize/v,1]),this.projMatrix=D,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const L=s.invert([],M);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(L,this.horizonLineFromTop(),this.height);const F=new Float32Array(16);s.identity(F),s.scale(F,F,[1,-1,1]),s.rotateX(F,F,this._pitch),s.rotateZ(F,F,this.angle);const B=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),q=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;B[8]=2*-i.x/this.width,B[9]=2*(i.y+q)/this.height,this.skyboxMatrix=s.multiply(F,B,F);const te=this.point,oe=te.x,ue=te.y,se=this.width%2/2,ce=this.height%2/2,W=Math.cos(this.angle),ae=Math.sin(this.angle),ge=oe-Math.round(oe)+W*se+ae*ce,ve=ue-Math.round(ue)+W*ce+ae*se,De=new Float64Array(D);if(s.translate(De,De,[ge>.5?ge-1:ge,ve>.5?ve-1:ve,0]),this.alignedProjMatrix=De,D=s.create(),s.scale(D,D,[this.width/2,-this.height/2,1]),s.translate(D,D,[1,-1,0]),this.labelPlaneMatrix=D,D=s.create(),s.scale(D,D,[1,-1,1]),s.translate(D,D,[-1,-1,0]),s.scale(D,D,[2/this.width,2/this.height,1]),this.glCoordMatrix=D,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},D=s.invert(new Float64Array(16),this.pixelMatrix),!D)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=D,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const Ae=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(Ae,Ae,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=D;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const i=this.cameraWorldSizeForFog,l=this.cameraPixelsPerMeter,p=this._camera.position,v=1/this.height/this._pixelsPerMercatorPixel,b=[i,i,l];s.scale$2(b,b,v),s.scale$2(p,p,-1),s.multiply$2(p,p,b);const M=s.create();s.translate(M,M,p),s.scale(M,M,b),this.mercatorFogMatrix=M,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(i,l,v)}_computeCameraPosition(i){const l=(i=i||this.pixelsPerMeter)/this.pixelsPerMeter,p=this._camera.forward(),v=this.point,b=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*l-i/this.worldSize*this._centerAltitude;return[v.x/this.worldSize-p[0]*b,v.y/this.worldSize-p[1]*b,i/this.worldSize*this._centerAltitude-p[2]*b]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(i){const l=this._maxCameraBoundsDistance()*Math.cos(this._pitch),p=this._camera.position[2],v=i[2];let b=1;this.projection.wrap&&(this.center=this.center.wrap()),v>0&&(b=Math.min((l-p)/v,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,i,b),this._updateStateFromCamera()}_updateStateFromCamera(){const i=this._camera.position,l=this._camera.forward(),{pitch:p,bearing:v}=this._camera.getPitchBearing(),b=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,M=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),D=Math.max((i[2]-b)/Math.cos(p),M),L=this._zoomFromMercatorZ(D);s.scaleAndAdd(i,i,l,D),this._pitch=s.clamp(p,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(v,-Math.PI,Math.PI),this._setZoom(s.clamp(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(i[0],i[1],i[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(i){return Math.pow(2,i)*this.tileSize}_mercatorZfromZoom(i){return this.cameraToCenterDistance/this._worldSizeFromZoom(i)}_minimumHeightOverTerrain(){const i=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(i)}_zoomFromMercatorZ(i){return this.scaleZoom(this.cameraToCenterDistance/(i*this.tileSize))}zoomFromMercatorZAdjusted(i){let l=0,p=s.GLOBE_ZOOM_THRESHOLD_MAX,v=0,b=1/0;for(;p-l>1e-6&&p>l;){const M=l+.5*(p-l),D=this.tileSize*Math.pow(2,M),L=this.getCameraToCenterDistance(this.projection,M,D),F=this.scaleZoom(L/(i*this.tileSize)),B=Math.abs(M-F);B<b&&(b=B,v=M),M<F?l=M:p=M}return v}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(i,l){const p=Math.min(i.x,l.x),v=Math.max(i.x,l.x),b=Math.min(i.y,l.y),M=Math.max(i.y,l.y);if(b<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const D=[new s.Point(p,b),new s.Point(v,M),new s.Point(p,M),new s.Point(v,b)],L=this.renderWorldCopies?-3:0,F=this.renderWorldCopies?4:1;for(const B of D){const q=this.pointRayIntersection(B);if(q.t<0)return!0;const te=this.rayIntersectionCoordinate(q);if(te.x<L||te.y<0||te.x>F||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(i,l){const p=s.length(s.sub([],this._camera.position,i)),v=this._zoomFromMercatorZ(p)+l;return p-this._mercatorZfromZoom(v)}getCameraPoint(){if(this.projection.name==="globe"){const i=function([l,p,v],b){const M=[l,p,v,1];s.transformMat4$1(M,M,b);const D=M[3]=Math.max(M[3],1e-6);return M[0]/=D,M[1]/=D,M[2]/=D,M}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(i[0],i[1])}{const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,i))}}getCameraToCenterDistance(i,l=this.zoom,p=this.worldSize){const v=Ll(i,l,this.width,this.height,1024),b=i.pixelSpaceConversion(this.center.lat,p,v);return .5/Math.tan(.5*this._fov)*this.height*b}getWorldToCameraMatrix(){const i=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(i,i,this.globeMatrix),i}}function Pl(f,i){let l=!1,p=null;const v=()=>{p=null,l&&(f(),p=setTimeout(v,i),l=!1)};return()=>(l=!0,p||v(),p)}class Ol{constructor(i){this._hashName=i&&encodeURIComponent(i),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Pl(this._updateHashUnthrottled.bind(this),300)}addTo(i){return this._map=i,s.window.addEventListener("hashchange",this._onHashChange,!1),i.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const i=this._map;if(!i)return"";const l=Ms(i);if(this._hashName){const p=this._hashName;let v=!1;const b=s.window.location.hash.slice(1).split("&").map(M=>{const D=M.split("=")[0];return D===p?(v=!0,`${D}=${l}`):M}).filter(M=>M);return v||b.push(`${p}=${l}`),`#${b.join("&")}`}return`#${l}`}_getCurrentHash(){const i=s.window.location.hash.replace("#","");if(this._hashName){let l;return i.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(l=p)}),(l&&l[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._map;if(!i)return!1;const l=this._getCurrentHash();if(l.length>=3&&!l.some(p=>isNaN(p))){const p=i.dragRotate.isEnabled()&&i.touchZoomRotate.isEnabled()?+(l[3]||0):i.getBearing();return i.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,i)}}function Ms(f,i){const l=f.getCenter(),p=Math.round(100*f.getZoom())/100,v=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),M=Math.round(l.lng*b)/b,D=Math.round(l.lat*b)/b,L=f.getBearing(),F=f.getPitch();let B=i?`/${M}/${D}/${p}`:`${p}/${D}/${M}`;return(L||F)&&(B+="/"+Math.round(10*L)/10),F&&(B+=`/${Math.round(F)}`),B}const ec={linearity:.3,easing:s.bezier(0,0,.3,1)},bf=s.extend({deceleration:2500,maxSpeed:1400},ec),vh=s.extend({deceleration:20,maxSpeed:1400},ec),nn=s.extend({deceleration:1e3,maxSpeed:360},ec),Po=s.extend({deceleration:1e3,maxSpeed:90},ec);class Gd{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,l=s.exported.now();for(;i.length>0&&l-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const l={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)l.zoom+=b.zoomDelta||0,l.bearing+=b.bearingDelta||0,l.pitch+=b.pitchDelta||0,b.panDelta&&l.pan._add(b.panDelta),b.around&&(l.around=b.around),b.pinchAround&&(l.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(l.pan.mag()){const b=du(l.pan.mag(),p,s.extend({},bf,i||{}));v.offset=l.pan.mult(b.amount/l.pan.mag()),v.center=this._map.transform.center,tc(v,b)}if(l.zoom){const b=du(l.zoom,p,vh);v.zoom=this._map.transform.zoom+b.amount,tc(v,b)}if(l.bearing){const b=du(l.bearing,p,nn);v.bearing=this._map.transform.bearing+s.clamp(b.amount,-179,179),tc(v,b)}if(l.pitch){const b=du(l.pitch,p,Po);v.pitch=this._map.transform.pitch+b.amount,tc(v,b)}if(v.zoom||v.bearing){const b=l.pinchAround===void 0?l.around:l.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),v.noMoveStart=!0,v}}function tc(f,i){(!f.duration||f.duration<i.duration)&&(f.duration=i.duration,f.easing=i.easing)}function du(f,i,l){const{maxSpeed:p,linearity:v,deceleration:b}=l,M=s.clamp(f*v/(i/1e3),-p,p),D=Math.abs(M)/(b*v);return{easing:l.easing,duration:1e3*D,amount:M*(D/2)}}class Sa extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,p,v={}){const b=Qe(l.getCanvasContainer(),p),M=l.unproject(b);super(i,s.extend({point:b,lngLat:M,originalEvent:p},v)),this._defaultPrevented=!1,this.target=l}}class nc extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,p){const v=i==="touchend"?p.changedTouches:p.touches,b=Nt(l.getCanvasContainer(),v),M=b.map(L=>l.unproject(L)),D=b.reduce((L,F,B,q)=>L.add(F.div(q.length)),new s.Point(0,0));super(i,{points:b,point:D,lngLats:M,lngLat:l.unproject(D),originalEvent:p}),this._defaultPrevented=!1}}class wf extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,l,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class qd{constructor(i,l){this._map=i,this._clickTolerance=l.clickTolerance}reset(){this._mousedownPos=void 0}wheel(i){return this._firePreventable(new wf(i.type,this._map,i))}mousedown(i,l){return this._mousedownPos=l,this._firePreventable(new Sa(i.type,this._map,i))}mouseup(i){this._map.fire(new Sa(i.type,this._map,i))}preclick(i){const l=s.extend({},i);l.type="preclick",this._map.fire(new Sa(l.type,this._map,l))}click(i,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||(this.preclick(i),this._map.fire(new Sa(i.type,this._map,i)))}dblclick(i){return this._firePreventable(new Sa(i.type,this._map,i))}mouseover(i){this._map.fire(new Sa(i.type,this._map,i))}mouseout(i){this._map.fire(new Sa(i.type,this._map,i))}touchstart(i){return this._firePreventable(new nc(i.type,this._map,i))}touchmove(i){this._map.fire(new nc(i.type,this._map,i))}touchend(i){this._map.fire(new nc(i.type,this._map,i))}touchcancel(i){this._map.fire(new nc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ef{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(i){this._map.fire(new Sa(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._map.fire(new Sa(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rc{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,l){this.isEnabled()&&i.shiftKey&&i.button===0&&(Ne(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(i,l){if(!this._active)return;const p=l,v=this._startPos,b=this._lastPos;if(!v||!b||b.equals(p)||!this._box&&p.dist(v)<this._clickTolerance)return;this._lastPos=p,this._box||(this._box=J("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const M=Math.min(v.x,p.x),D=Math.max(v.x,p.x),L=Math.min(v.y,p.y),F=Math.max(v.y,p.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${M}px,${L}px)`,this._box.style.width=D-M+"px",this._box.style.height=F-L+"px")})}mouseupWindow(i,l){if(!this._active)return;const p=this._startPos,v=l;if(p&&i.button===0){if(this.reset(),St(),p.x!==v.x||p.y!==v.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(p,v,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",i)}}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Xe(),delete this._startPos,delete this._lastPos}_fireEvent(i,l){return this._map.fire(new s.Event(i,{originalEvent:l}))}}function ic(f,i){const l={};for(let p=0;p<f.length;p++)l[f[p].identifier]=i[p];return l}class As{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(i,l,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(v){const b=new s.Point(0,0);for(const M of v)b._add(M);return b.div(v.length)}(l),this.touches=ic(p,l)))}touchmove(i,l,p){if(this.aborted||!this.centroid)return;const v=ic(p,l);for(const b in this.touches){const M=v[b];(!M||M.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,l,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Sf{constructor(i){this.singleTap=new As(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(i,l,p){this.singleTap.touchstart(i,l,p)}touchmove(i,l,p){this.singleTap.touchmove(i,l,p)}touchend(i,l,p){const v=this.singleTap.touchend(i,l,p);if(v){const b=i.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(b&&M||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class cm{constructor(){this._zoomIn=new Sf({numTouches:1,numTaps:2}),this._zoomOut=new Sf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,l,p){this._zoomIn.touchstart(i,l,p),this._zoomOut.touchstart(i,l,p)}touchmove(i,l,p){this._zoomIn.touchmove(i,l,p),this._zoomOut.touchmove(i,l,p)}touchend(i,l,p){const v=this._zoomIn.touchend(i,l,p),b=this._zoomOut.touchend(i,l,p);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(v)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Tf={0:1,2:2};class ac{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(i,l){return!1}_move(i,l){return{}}mousedown(i,l){if(this._lastPoint)return;const p=Mn(i);this._correctButton(i,p)&&(this._lastPoint=l,this._eventButton=p)}mousemoveWindow(i,l){const p=this._lastPoint;if(p){if(i.preventDefault(),this._eventButton!=null&&function(v,b){const M=Tf[b];return v.buttons===void 0||(v.buttons&M)!==M}(i,this._eventButton))this.reset();else if(this._moved||!(l.dist(p)<this._clickTolerance))return this._moved=!0,this._lastPoint=l,this._move(p,l)}}mouseupWindow(i){this._lastPoint&&Mn(i)===this._eventButton&&(this._moved&&St(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bl extends ac{mousedown(i,l){super.mousedown(i,l),this._lastPoint&&(this._active=!0)}_correctButton(i,l){return l===0&&!i.ctrlKey}_move(i,l){return{around:l,panDelta:l.sub(i)}}}class oc extends ac{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=.8*(l.x-i.x);if(p)return this._active=!0,{bearingDelta:p}}contextmenu(i){i.preventDefault()}}class sc extends ac{_correctButton(i,l){return l===0&&i.ctrlKey||l===2}_move(i,l){const p=-.5*(l.y-i.y);if(p)return this._active=!0,{pitchDelta:p}}contextmenu(i){i.preventDefault()}}class lc{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(i,l,p){return this._calculateTransform(i,l,p)}touchmove(i,l,p){if(this._active&&!(p.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(p.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return i.cancelable&&i.preventDefault(),this._calculateTransform(i,l,p)}}touchend(i,l,p){this._calculateTransform(i,l,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,l,p){p.length>0&&(this._active=!0);const v=ic(p,l),b=new s.Point(0,0),M=new s.Point(0,0);let D=0;for(const F in v){const B=v[F],q=this._touches[F];q&&(b._add(B),M._add(B.sub(q)),D++,v[F]=B)}if(this._touches=v,D<this._minTouches||!M.mag())return;const L=M.div(D);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(D),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=J("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class _h{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(i){}_move(i,l,p){return{}}touchstart(i,l,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([l[0],l[1]]))}touchmove(i,l,p){const v=this._firstTwoTouches;if(!v)return;i.preventDefault();const[b,M]=v,D=pu(p,l,b),L=pu(p,l,M);if(!D||!L)return;const F=this._aroundCenter?null:D.add(L).div(2);return this._move([D,L],F,i)}touchend(i,l,p){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,M=pu(p,l,v),D=pu(p,l,b);M&&D||(this._active&&St(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function pu(f,i,l){for(let p=0;p<f.length;p++)if(f[p].identifier===l)return i[p]}function Hd(f,i){return Math.log(f/i)/Math.LN2}class hm extends _h{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,l){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Hd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hd(this._distance,p),pinchAround:l}}}function Wd(f,i){return 180*f.angleWith(i)/Math.PI}class Cf extends _h{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,l){const p=this._vector;if(this._vector=i[0].sub(i[1]),p&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Wd(this._vector,p),pinchAround:l}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const l=25/(Math.PI*this._minDiameter)*360,p=this._startVector;if(!p)return!1;const v=Wd(i,p);return Math.abs(v)<l}}function yo(f){return Math.abs(f.y)>Math.abs(f.x)}class fm extends _h{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(i){this._lastPoints=i,yo(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,l,p){const v=this._lastPoints;if(!v)return;const b=i[0].sub(v[0]),M=i[1].sub(v[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&p.touches.length<3||(this._valid=this.gestureBeginsVertically(b,M,p.timeStamp),!this._valid)?void 0:(this._lastPoints=i,this._active=!0,{pitchDelta:(b.y+M.y)/2*-.5})}gestureBeginsVertically(i,l,p){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,b=l.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove==null&&(this._firstMove=p),p-this._firstMove<100&&void 0;const M=i.y>0==l.y>0;return yo(i)&&yo(l)&&M}}const dm={panStep:100,bearingStep:15,pitchStep:10};class Zn{constructor(){const i=dm;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let l=0,p=0,v=0,b=0,M=0;switch(i.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),M=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(p=0,v=0),{cameraAnimation:D=>{const L=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:mu,zoom:l?Math.round(L)+l*(i.shiftKey?2:1):L,bearing:D.getBearing()+p*this._bearingStep,pitch:D.getPitch()+v*this._pitchStep,offset:[-b*this._panStep,-M*this._panStep],center:D.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function mu(f){return f*(2-f)}const ta=4.000244140625;class Ar{constructor(i,l){this._map=i,this._el=i.getCanvasContainer(),this._handler=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(i.ctrlKey||i.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let l=i.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=s.exported.now(),v=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,l!==0&&l%ta==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),i.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=i,this._delta-=l,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=Qe(this._el,i);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:l,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;this._type==="wheel"&&i.projection.wrap&&(i._center.lng>=180||i._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const l=()=>i._terrainEnabled()&&this._aroundCoord?i.computeZoomRelativeTo(this._aroundCoord):i.zoom;if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>ta?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&F!==0&&(F=1/F);const B=l(),q=Math.pow(2,B),te=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(te*F))),this._type==="wheel"&&(this._startZoom=B,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:l(),v=this._startZoom,b=this._easing;let M,D=!1;if(this._type==="wheel"&&v&&b){const L=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),F=b(L);M=s.number(v,p,F),L<1?this._frameId||(this._frameId=!0):D=!0}else M=p,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:M-l(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let l=s.ease;if(this._prevEase){const p=this._prevEase,v=(s.exported.now()-p.start)/p.duration,b=p.easing(v+.01)-p.easing(v),M=.27/Math.sqrt(b*b+1e-4)*.01,D=Math.sqrt(.0729-M*M);l=s.bezier(M,D,.25,1)}return this._prevEase={start:s.exported.now(),duration:i,easing:l},l}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=J("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Fl{constructor(i,l){this._clickZoom=i,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class da{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(i,l){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:p.getZoom()+(i.shiftKey?-1:1),around:p.unproject(l)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zd{constructor(){this._tap=new Sf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(i,l,p){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?p.length>0&&(this._swipePoint=l[0],this._swipeTouch=p[0].identifier):this._tap.touchstart(i,l,p))}touchmove(i,l,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const v=l[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,l,p)}touchend(i,l,p){this._tapTime?this._swipePoint&&p.length===0&&this.reset():this._tap.touchend(i,l,p)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(i,l,p){this._el=i,this._mousePan=l,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class al{constructor(i,l,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=l,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Nl{constructor(i,l,p,v){this._el=i,this._touchZoom=l,this._touchRotate=p,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ta=f=>f.zoom||f.drag||f.pitch||f.rotate;class Oo extends s.Event{}class ol{constructor(){this.constants=[1,1,.01],this.radius=0}setup(i,l){const p=s.sub([],l,i);this.radius=s.length(p[2]<0?s.div([],p,this.constants):[p[0],p[1],0])}projectRay(i){s.div(i,i,this.constants),s.normalize(i,i),s.mul$1(i,i,this.constants);const l=s.scale$2([],i,this.radius);if(l[2]>0){const p=s.scale$2([],[0,0,1],s.dot(l,[0,0,1])),v=s.scale$2([],s.normalize([],[l[0],l[1],0]),this.radius),b=s.add([],l,s.scale$2([],s.sub([],s.add([],v,p),l),2));l[0]=b[0],l[1]=b[1]}return l}}function La(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class vo{constructor(i,l){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gd(i),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ol,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(l),s.bindAll(["handleEvent","handleWindowEvent"],this);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[v,b,M]of this._listeners)v.addEventListener(b,v===s.window.document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[i,l,p]of this._listeners)i.removeEventListener(l,i===s.window.document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const l=this._map,p=l.getCanvasContainer();this._add("mapEvent",new qd(l,i));const v=l.boxZoom=new rc(l,i);this._add("boxZoom",v);const b=new cm,M=new da;l.doubleClickZoom=new Fl(M,b),this._add("tapZoom",b),this._add("clickZoom",M);const D=new Zd;this._add("tapDragZoom",D);const L=l.touchPitch=new fm(l);this._add("touchPitch",L);const F=new oc(i),B=new sc(i);l.dragRotate=new al(i,F,B),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);const q=new Bl(i),te=new lc(l,i);l.dragPan=new Ur(p,q,te),this._add("mousePan",q),this._add("touchPan",te,["touchZoom","touchRotate"]);const oe=new Cf,ue=new hm;l.touchZoomRotate=new Nl(p,ue,oe,D),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Ef(l));const se=l.scrollZoom=new Ar(l,this);this._add("scrollZoom",se,["mousePan"]);const ce=l.keyboard=new Zn;this._add("keyboard",ce);for(const W of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[W]&&l[W].enable(i[W])}_add(i,l,p){this._handlers.push({handlerName:i,handler:l,allowed:p}),this._handlersById[i]=l}stop(i){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ta(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(i,l,p){for(const v in i)if(v!==p&&(!l||l.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const l=[];for(const p of i)this._el.contains(p.target)&&l.push(p);return l}handleEvent(i,l){this._updatingCamera=!0;const p=i.type==="renderFrame",v=p?void 0:i,b={needsRenderFrame:!1},M={},D={},L=i.touches?this._getMapTouches(i.touches):void 0,F=L?Nt(this._el,L):p?void 0:Qe(this._el,i);for(const{handlerName:te,handler:oe,allowed:ue}of this._handlers){if(!oe.isEnabled())continue;let se;this._blockedByActive(D,ue,te)?oe.reset():oe[l||i.type]&&(se=oe[l||i.type](i,F,L),this.mergeHandlerResult(b,M,se,te,v),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||oe.isActive())&&(D[te]=oe)}const B={};for(const te in this._previousActiveHandlers)D[te]||(B[te]=v);this._previousActiveHandlers=D,(Object.keys(B).length||La(b))&&(this._changes.push([b,M,B]),this._triggerRenderFrame()),(Object.keys(D).length||La(b))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=b;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))}mergeHandlerResult(i,l,p,v,b){if(!p)return;s.extend(i,p);const M={handlerName:v,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(l.zoom=M),p.panDelta!==void 0&&(l.drag=M),p.pitchDelta!==void 0&&(l.pitch=M),p.bearingDelta!==void 0&&(l.rotate=M)}_applyChanges(){const i={},l={},p={};for(const[v,b,M]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new s.Point(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.aroundCoord!==void 0&&(i.aroundCoord=v.aroundCoord),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),s.extend(l,b),s.extend(p,M);this._updateMapTransform(i,l,p),this._changes=[]}_updateMapTransform(i,l,p){const v=this._map,b=v.transform,M=ae=>[ae.x,ae.y,ae.z];if((ae=>{const ge=this._eventsInProgress.drag;return ge&&!this._handlersById[ge.handlerName].isActive()})()&&!La(i)){const ae=b.zoom;b.cameraElevationReference="sea",b.recenterOnTerrain(),b.cameraElevationReference="ground",ae!==b.zoom&&this._map._update(!0)}if(b._isCameraConstrained&&v._stop(!0),!La(i))return void this._fireEvents(l,p,!0);let{panDelta:D,zoomDelta:L,bearingDelta:F,pitchDelta:B,around:q,aroundCoord:te,pinchAround:oe}=i;b._isCameraConstrained&&(L>0&&(L=0),b._isCameraConstrained=!1),oe!==void 0&&(q=oe),(L||(ae=>l[ae]&&!this._eventsInProgress[ae])("drag"))&&q&&(this._dragOrigin=M(b.pointCoordinate3D(q)),this._trackingEllipsoid.setup(b._camera.position,this._dragOrigin)),b.cameraElevationReference="sea",v._stop(!0),q=q||v.transform.centerPoint,F&&(b.bearing+=F),B&&(b.pitch+=B),b._updateCameraState();const ue=[0,0,0];if(D)if(b.projection.name==="mercator"){const ae=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q).dir),ge=this._trackingEllipsoid.projectRay(b.screenPointToMercatorRay(q.sub(D)).dir);ue[0]=ge[0]-ae[0],ue[1]=ge[1]-ae[1]}else{const ae=b.pointCoordinate(q);if(b.projection.name==="globe"){D=D.rotate(-b.angle);const ge=b._pixelsPerMercatorPixel/b.worldSize;ue[0]=-D.x*s.mercatorScale(s.latFromMercatorY(ae.y))*ge,ue[1]=-D.y*s.mercatorScale(b.center.lat)*ge}else{const ge=b.pointCoordinate(q.sub(D));ae&&ge&&(ue[0]=ge.x-ae.x,ue[1]=ge.y-ae.y)}}const se=b.zoom,ce=[0,0,0];if(L){const ae=M(te||b.pointCoordinate3D(q)),ge={dir:s.normalize([],s.sub([],ae,b._camera.position))};if(ge.dir[2]<0){const ve=b.zoomDeltaToMovement(ae,L);s.scale$2(ce,ge.dir,ve)}}const W=s.add(ue,ue,ce);b._translateCameraConstrained(W),L&&Math.abs(b.zoom-se)>1e-4&&b.recenterOnTerrain(),b.cameraElevationReference="ground",this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(l,p,!0)}_fireEvents(i,l,p){const v=Ta(this._eventsInProgress),b=Ta(i),M={};for(const B in i){const{originalEvent:q}=i[B];this._eventsInProgress[B]||(M[`${B}start`]=q),this._eventsInProgress[B]=i[B]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const B in M)this._fireEvent(B,M[B]);b&&this._fireEvent("move",b.originalEvent);for(const B in i){const{originalEvent:q}=i[B];this._fireEvent(B,q)}const D={};let L;for(const B in this._eventsInProgress){const{handlerName:q,originalEvent:te}=this._eventsInProgress[B];this._handlersById[q].isActive()||(delete this._eventsInProgress[B],L=l[q]||te,D[`${B}end`]=L)}for(const B in D)this._fireEvent(B,D[B]);const F=Ta(this._eventsInProgress);if(p&&(v||b)&&!F){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),q=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;B?(q(B.bearing||this._map.getBearing())&&(B.bearing=0),this._map.easeTo(B,{originalEvent:L})):(this._map.fire(new s.Event("moveend",{originalEvent:L})),q(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,l){this._map.fire(new s.Event(i,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{this._frameId=void 0,this.handleEvent(new Oo("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const gu="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Mf extends s.Evented{constructor(i,l){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=l.bearingSnap,this._respectPrefersReducedMotion=l.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,l){return this.jumpTo({center:i},l)}panBy(i,l,p){return i=s.Point.convert(i).mult(-1),this.panTo(this.transform.center,s.extend({offset:i},l),p)}panTo(i,l,p){return this.easeTo(s.extend({center:i},l),p)}getZoom(){return this.transform.zoom}setZoom(i,l){return this.jumpTo({zoom:i},l),this}zoomTo(i,l,p){return this.easeTo(s.extend({zoom:i},l),p)}zoomIn(i,l){return this.zoomTo(this.getZoom()+1,i,l),this}zoomOut(i,l){return this.zoomTo(this.getZoom()-1,i,l),this}getBearing(){return this.transform.bearing}setBearing(i,l){return this.jumpTo({bearing:i},l),this}getPadding(){return this.transform.padding}setPadding(i,l){return this.jumpTo({padding:i},l),this}rotateTo(i,l,p){return this.easeTo(s.extend({bearing:i},l),p)}resetNorth(i,l){return this.rotateTo(0,s.extend({duration:1e3},i),l),this}resetNorthPitch(i,l){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},i),l),this}snapToNorth(i,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,l):this}getPitch(){return this.transform.pitch}setPitch(i,l){return this.jumpTo({pitch:i},l),this}cameraForBounds(i,l){i=s.LngLatBounds.convert(i);const p=l&&l.bearing||0,v=l&&l.pitch||0,b=i.getNorthWest(),M=i.getSouthEast();return this._cameraForBounds(this.transform,b,M,p,v,l)}_extendCameraOptions(i){const l={top:0,bottom:0,right:0,left:0};if(typeof(i=s.extend({padding:l,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding=="number"){const p=i.padding;i.padding={top:p,bottom:p,right:p,left:p}}return i.padding=s.extend(l,i.padding),i}_minimumAABBFrustumDistance(i,l){const p=l.max[0]-l.min[0],v=l.max[1]-l.min[1];return p/v>i.aspect?p/(2*Math.tan(.5*i.fovX)*i.aspect):v/(2*Math.tan(.5*i.fovY)*i.aspect)}_cameraForBoundsOnGlobe(i,l,p,v,b,M){const D=i.clone(),L=this._extendCameraOptions(M);D.bearing=v,D.pitch=b;const F=s.LngLat.convert(l),B=s.LngLat.convert(p),q=.5*(F.lat+B.lat),te=.5*(F.lng+B.lng),oe=s.latLngToECEF(q,te),ue=s.normalize([],oe),se=s.normalize([],s.cross([],ue,[0,1,0])),ce=s.cross([],se,ue),W=[se[0],se[1],se[2],0,ce[0],ce[1],ce[2],0,ue[0],ue[1],ue[2],0,0,0,0,1],ae=[oe,s.latLngToECEF(F.lat,F.lng),s.latLngToECEF(B.lat,F.lng),s.latLngToECEF(B.lat,B.lng),s.latLngToECEF(F.lat,B.lng),s.latLngToECEF(q,F.lng),s.latLngToECEF(q,B.lng),s.latLngToECEF(F.lat,te),s.latLngToECEF(B.lat,te)];let ge=s.Aabb.fromPoints(ae.map(Tt=>[s.dot(se,Tt),s.dot(ce,Tt),s.dot(ue,Tt)]));const ve=s.transformMat4([],ge.center,W);s.squaredLength(ve)===0&&s.set(ve,0,0,1),s.normalize(ve,ve),s.scale$2(ve,ve,s.GLOBE_RADIUS),D.center=s.ecefToLatLng(ve);const De=D.getWorldToCameraMatrix(),Ae=s.invert(new Float64Array(16),De);ge=s.Aabb.applyTransform(ge,s.multiply([],De,W)),s.transformMat4(ve,ve,De);const de=.5*(ge.max[2]-ge.min[2]),Be=this._minimumAABBFrustumDistance(D,ge),Oe=s.scale$2([],[0,0,1],de),Ke=s.add(Oe,ve,Oe),Ot=Be+(D.pitch===0?0:s.distance(ve,Ke)),We=D.globeCenterInViewSpace,_t=s.sub([],ve,[We[0],We[1],We[2]]);s.normalize(_t,_t),s.scale$2(_t,_t,Ot);const tt=s.add([],ve,_t);s.transformMat4(tt,tt,Ae);const xt=s.earthRadius/s.GLOBE_RADIUS,Ze=s.length(tt),vt=s.mercatorZfromAltitude(Math.max(Ze*xt-s.earthRadius,Number.EPSILON),0),Ft=Math.min(D.zoomFromMercatorZAdjusted(vt),L.maxZoom);return Ft>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"mercator"}),D.zoom=Ft,this._cameraForBounds(D,l,p,v,b,M)):{center:D.center,zoom:Ft,bearing:v,pitch:b}}queryTerrainElevation(i,l){const p=this.transform.elevation;return p?(l=s.extend({},{exaggerated:!0},l),p.getAtPoint(s.MercatorCoordinate.fromLngLat(i),null,l.exaggerated)):null}_cameraForBounds(i,l,p,v,b,M){if(i.projection.name==="globe")return this._cameraForBoundsOnGlobe(i,l,p,v,b,M);const D=i.clone(),L=this._extendCameraOptions(M),F=D.padding;D.bearing=v,D.pitch=b;const B=s.LngLat.convert(l),q=s.LngLat.convert(p),te=new s.LngLat(B.lng,q.lat),oe=new s.LngLat(q.lng,B.lat),ue=D.project(B),se=D.project(q),ce=this.queryTerrainElevation(B),W=this.queryTerrainElevation(q),ae=this.queryTerrainElevation(te),ge=this.queryTerrainElevation(oe),ve=[[ue.x,ue.y,Math.min(ce||0,W||0,ae||0,ge||0)],[se.x,se.y,Math.max(ce||0,W||0,ae||0,ge||0)]];let De=s.Aabb.fromPoints(ve);const Ae=D.getWorldToCameraMatrix(),de=s.invert(new Float64Array(16),Ae);De=s.Aabb.applyTransform(De,Ae);const Be=s.sub([],De.max,De.min),Oe=F.left||0,Ke=F.right||0,Ot=F.bottom||0,We=F.top||0,{left:_t,right:tt,top:xt,bottom:Ze}=L.padding,vt=.5*(Oe+Ke),Ft=.5*(We+Ot),Tt=Math.min(D.scaleZoom(D.scale*Math.min((D.width-(Oe+Ke+_t+tt))/Be[0],(D.height-(Ot+We+Ze+xt))/Be[1])),L.maxZoom),Pt=D.scale/D.zoomScale(Tt);De=new s.Aabb([De.min[0]-(_t+vt)*Pt,De.min[1]-(Ze+Ft)*Pt,De.min[2]],[De.max[0]+(tt+vt)*Pt,De.max[1]+(xt+Ft)*Pt,De.max[2]]);const pn=.5*Be[2],Xn=this._minimumAABBFrustumDistance(D,De),sn=[0,0,1,0];s.transformMat4$1(sn,sn,Ae),s.normalize$2(sn,sn);const In=s.scale$2([],sn,Xn+pn),vr=s.add([],De.center,In),mr=(typeof L.offset.x=="number"&&typeof L.offset.y=="number"?new s.Point(L.offset.x,L.offset.y):s.Point.convert(L.offset)).rotate(-s.degToRad(v));De.center[0]-=mr.x*Pt,De.center[1]+=mr.y*Pt,s.transformMat4(De.center,De.center,de),s.transformMat4(vr,vr,de);const gn=[De.center[0],De.center[1],vr[2]*D.pixelsPerMeter];s.scale$2(gn,gn,1/D.worldSize);const jr=s.lngFromMercatorX(gn[0]),ni=s.latFromMercatorY(gn[1]),li=Math.min(D._zoomFromMercatorZ(gn[2]),L.maxZoom),ui=new s.LngLat(jr,ni);return D.mercatorFromTransition&&li<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(D.setProjection({name:"globe"}),D.zoom=li,this._cameraForBounds(D,l,p,v,b,M)):{center:ui,zoom:li,bearing:v,pitch:b}}fitBounds(i,l,p){const v=this.cameraForBounds(i,l);return this._fitInternal(v,l,p)}fitScreenCoordinates(i,l,p,v,b){const M=s.Point.convert(i),D=s.Point.convert(l),L=new s.Point(Math.min(M.x,D.x),Math.min(M.y,D.y)),F=new s.Point(Math.max(M.x,D.x),Math.max(M.y,D.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(M,D))return this;const B=this.transform.pointLocation3D(L),q=this.transform.pointLocation3D(F),te=this.transform.pointLocation3D(new s.Point(L.x,F.y)),oe=this.transform.pointLocation3D(new s.Point(F.x,L.y)),ue=[Math.min(B.lng,q.lng,te.lng,oe.lng),Math.min(B.lat,q.lat,te.lat,oe.lat)],se=[Math.max(B.lng,q.lng,te.lng,oe.lng),Math.max(B.lat,q.lat,te.lat,oe.lat)],ce=v&&v.pitch?v.pitch:this.getPitch(),W=this._cameraForBounds(this.transform,ue,se,p,ce,v);return this._fitInternal(W,v,b)}_fitInternal(i,l,p){return i?(delete(l=s.extend(i,l)).padding,l.linear?this.easeTo(l,p):this.flyTo(l,p)):this}jumpTo(i,l){this.stop();const p=i.preloadOnly?this.transform.clone():this.transform;let v=!1,b=!1,M=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(v=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=s.LngLat.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(b=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(M=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),i.preloadOnly?(this._preloadTiles(p),this):(this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),v&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),b&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),M&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(gu),this.transform.getFreeCameraOptions()}setFreeCameraOptions(i,l){const p=this.transform;if(!p.projection.supportsFreeCamera)return s.warnOnce(gu),this;this.stop();const v=p.zoom,b=p.pitch,M=p.bearing;p.setFreeCameraOptions(i);const D=v!==p.zoom,L=b!==p.pitch,F=M!==p.bearing;return this.fire(new s.Event("movestart",l)).fire(new s.Event("move",l)),D&&this.fire(new s.Event("zoomstart",l)).fire(new s.Event("zoom",l)).fire(new s.Event("zoomend",l)),F&&this.fire(new s.Event("rotatestart",l)).fire(new s.Event("rotate",l)).fire(new s.Event("rotateend",l)),L&&this.fire(new s.Event("pitchstart",l)).fire(new s.Event("pitch",l)).fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l)),this}easeTo(i,l){this._stop(!1,i.easeId),((i=s.extend({offset:[0,0],duration:500,easing:s.ease},i)).animate===!1||this._prefersReducedMotion(i))&&(i.duration=0);const p=this.transform,v=this.getZoom(),b=this.getBearing(),M=this.getPitch(),D=this.getPadding(),L="zoom"in i?+i.zoom:v,F="bearing"in i?this._normalizeBearing(i.bearing,b):b,B="pitch"in i?+i.pitch:M,q="padding"in i?i.padding:p.padding,te=s.Point.convert(i.offset);let oe,ue,se;if(p.projection.name==="globe"){const Oe=s.MercatorCoordinate.fromLngLat(p.center),Ke=te.rotate(-p.angle);Oe.x+=Ke.x/p.worldSize,Oe.y+=Ke.y/p.worldSize;const Ot=Oe.toLngLat(),We=s.LngLat.convert(i.center||Ot);this._normalizeCenter(We),oe=p.centerPoint.add(Ke),ue=new s.Point(Oe.x,Oe.y).mult(p.worldSize),se=new s.Point(s.mercatorXfromLng(We.lng),s.mercatorYfromLat(We.lat)).mult(p.worldSize).sub(ue)}else{oe=p.centerPoint.add(te);const Oe=p.pointLocation(oe),Ke=s.LngLat.convert(i.center||Oe);this._normalizeCenter(Ke),ue=p.project(Oe),se=p.project(Ke).sub(ue)}const ce=p.zoomScale(L-v);let W,ae;i.around&&(W=s.LngLat.convert(i.around),ae=p.locationPoint(W));const ge=this._zooming||L!==v,ve=this._rotating||b!==F,De=this._pitching||B!==M,Ae=!p.isPaddingEqual(q),de=Oe=>Ke=>{if(ge&&(Oe.zoom=s.number(v,L,Ke)),ve&&(Oe.bearing=s.number(b,F,Ke)),De&&(Oe.pitch=s.number(M,B,Ke)),Ae&&(Oe.interpolatePadding(D,q,Ke),oe=Oe.centerPoint.add(te)),W)Oe.setLocationAtPoint(W,ae);else{const Ot=Oe.zoomScale(Oe.zoom-v),We=L>v?Math.min(2,ce):Math.max(.5,ce),_t=Math.pow(We,1-Ke),tt=Oe.unproject(ue.add(se.mult(Ke*_t)).mult(Ot));Oe.setLocationAtPoint(Oe.renderWorldCopies?tt.wrap():tt,oe)}return i.preloadOnly||this._fireMoveEvents(l),Oe};if(i.preloadOnly){const Oe=this._emulate(de,i.duration,p);return this._preloadTiles(Oe),this}const Be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ge,this._rotating=ve,this._pitching=De,this._padding=Ae,this._easeId=i.easeId,this._prepareEase(l,i.noMoveStart,Be),this._ease(de(p),Oe=>{p.recenterOnTerrain(),this._afterEase(l,Oe)},i),this}_prepareEase(i,l,p={}){this._moving=!0,this.transform.cameraElevationReference="sea",l||p.moving||this.fire(new s.Event("movestart",i)),this._zooming&&!p.zooming&&this.fire(new s.Event("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new s.Event("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new s.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new s.Event("move",i)),this._zooming&&this.fire(new s.Event("zoom",i)),this._rotating&&this.fire(new s.Event("rotate",i)),this._pitching&&this.fire(new s.Event("pitch",i))}_afterEase(i,l){if(this._easeId&&l&&this._easeId===l)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const p=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new s.Event("zoomend",i)),v&&this.fire(new s.Event("rotateend",i)),b&&this.fire(new s.Event("pitchend",i)),this.fire(new s.Event("moveend",i))}flyTo(i,l){if(this._prefersReducedMotion(i)){const Tt=s.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Tt,l)}this.stop(),i=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},i);const p=this.transform,v=this.getZoom(),b=this.getBearing(),M=this.getPitch(),D=this.getPadding(),L="zoom"in i?s.clamp(+i.zoom,p.minZoom,p.maxZoom):v,F="bearing"in i?this._normalizeBearing(i.bearing,b):b,B="pitch"in i?+i.pitch:M,q="padding"in i?i.padding:p.padding,te=p.zoomScale(L-v),oe=s.Point.convert(i.offset);let ue=p.centerPoint.add(oe);const se=p.pointLocation(ue),ce=s.LngLat.convert(i.center||se);this._normalizeCenter(ce);const W=p.project(se),ae=p.project(ce).sub(W);let ge=i.curve;const ve=Math.max(p.width,p.height),De=ve/te,Ae=ae.mag();if("minZoom"in i){const Tt=s.clamp(Math.min(i.minZoom,v,L),p.minZoom,p.maxZoom),Pt=ve/p.zoomScale(Tt-v);ge=Math.sqrt(Pt/Ae*2)}const de=ge*ge;function Be(Tt){const Pt=(De*De-ve*ve+(Tt?-1:1)*de*de*Ae*Ae)/(2*(Tt?De:ve)*de*Ae);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function Oe(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function Ke(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}const Ot=Be(0);let We=function(Tt){return Ke(Ot)/Ke(Ot+ge*Tt)},_t=function(Tt){return ve*((Ke(Ot)*(Oe(Pt=Ot+ge*Tt)/Ke(Pt))-Oe(Ot))/de)/Ae;var Pt},tt=(Be(1)-Ot)/ge;if(Math.abs(Ae)<1e-6||!isFinite(tt)){if(Math.abs(ve-De)<1e-6)return this.easeTo(i,l);const Tt=De<ve?-1:1;tt=Math.abs(Math.log(De/ve))/ge,_t=function(){return 0},We=function(Pt){return Math.exp(Tt*ge*Pt)}}i.duration="duration"in i?+i.duration:1e3*tt/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0);const xt=b!==F,Ze=B!==M,vt=!p.isPaddingEqual(q),Ft=Tt=>Pt=>{const pn=Pt*tt,Xn=1/We(pn);Tt.zoom=Pt===1?L:v+Tt.scaleZoom(Xn),xt&&(Tt.bearing=s.number(b,F,Pt)),Ze&&(Tt.pitch=s.number(M,B,Pt)),vt&&(Tt.interpolatePadding(D,q,Pt),ue=Tt.centerPoint.add(oe));const sn=Pt===1?ce:Tt.unproject(W.add(ae.mult(_t(pn))).mult(Xn));return Tt.setLocationAtPoint(Tt.renderWorldCopies?sn.wrap():sn,ue),Tt._updateCameraOnTerrain(),i.preloadOnly||this._fireMoveEvents(l),Tt};if(i.preloadOnly){const Tt=this._emulate(Ft,i.duration,p);return this._preloadTiles(Tt),this}return this._zooming=!0,this._rotating=xt,this._pitching=Ze,this._padding=vt,this._prepareEase(l,!1),this._ease(Ft(p),()=>this._afterEase(l),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,l){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const p=this._onEaseEnd;this._onEaseEnd=void 0,p.call(this,l)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,l,p){p.animate===!1||p.duration===0?(i(1),l()):(this._easeStart=s.exported.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),l=this._onEaseFrame;l&&l(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,l){i=s.wrap(i,-180,180);const p=Math.abs(i-l);return Math.abs(i-360-l)<p&&(i-=360),Math.abs(i+360-l)<p&&(i+=360),i}_normalizeCenter(i){const l=this.transform;if(!l.renderWorldCopies||l.maxBounds)return;const p=i.lng-l.center.lng;i.lng+=p>180?-360:p<-180?360:0}_prefersReducedMotion(i){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(i&&i.essential)}_emulate(i,l,p){const v=Math.ceil(15*l/1e3),b=[],M=i(p.clone());for(let D=0;D<=v;D++){const L=M(D/v);b.push(L.clone())}return b}}class an{constructor(i={}){this.options=i,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){const l=this.options&&this.options.compact;return this._map=i,this._container=J("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=J("button","mapboxgl-ctrl-attrib-button",this._container),J("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=J("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),l&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),l===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(i,l){const p=this._map._getUIString(`AttributionControl.${l}`);i.setAttribute("aria-label",p),i.removeAttribute("title"),i.firstElementChild&&i.firstElementChild.setAttribute("title",p)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let i=this._editLink;i||(i=this._editLink=this._container.querySelector(".mapbox-improve-map"));const l=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(i){const p=l.reduce((v,b,M)=>(b.value&&(v+=`${b.key}=${b.value}${M<l.length-1?"&":""}`),v),"?");i.href=`${s.config.FEEDBACK_URL}/${p}#${Ms(this._map,!0)}`,i.rel="noopener nofollow",this._setElementTitle(i,"MapFeedback")}}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let i=[];if(this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const l=this._map.style._sourceCaches;for(const v in l){const b=l[v];if(b.used){const M=b.getSource();M.attribution&&i.indexOf(M.attribution)<0&&i.push(M.attribution)}}i.sort((v,b)=>v.length-b.length),i=i.filter((v,b)=>{for(let M=b+1;M<i.length;M++)if(i[M].indexOf(v)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=[...this.options.customAttribution,...i]:i.unshift(this.options.customAttribution));const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class za{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(i){this._map=i,this._container=J("div","mapboxgl-ctrl");const l=J("a","mapboxgl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://www.mapbox.com/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(i){i&&i.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const i=this._map.style._sourceCaches;if(Object.entries(i).length===0)return!0;for(const l in i){const p=i[l].getSource();if(p.hasOwnProperty("mapbox_logo")&&!p.mapbox_logo)return!1}return!0}_updateCompact(){const i=this._container.children;if(i.length){const l=i[0];this._map.getCanvasContainer().offsetWidth<250?l.classList.add("mapboxgl-compact"):l.classList.remove("mapboxgl-compact")}}}class xh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const l=++this._id;return this._queue.push({callback:i,id:l,cancelled:!1}),l}remove(i){const l=this._currentlyRunning,p=l?this._queue.concat(l):this._queue;for(const v of p)if(v.id===i)return void(v.cancelled=!0)}run(i=0){const l=this._currentlyRunning=this._queue;this._queue=[];for(const p of l)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function yu(f,i,l){if(f=new s.LngLat(f.lng,f.lat),i){const p=new s.LngLat(f.lng-360,f.lat),v=new s.LngLat(f.lng+360,f.lat),b=360*Math.ceil(Math.abs(f.lng-l.center.lng)/360),M=l.locationPoint(f).distSqr(i),D=i.x<0||i.y<0||i.x>l.width||i.y>l.height;l.locationPoint(p).distSqr(i)<M&&(D||Math.abs(p.lng-l.center.lng)<b)?f=p:l.locationPoint(v).distSqr(i)<M&&(D||Math.abs(v.lng-l.center.lng)<b)&&(f=v)}for(;Math.abs(f.lng-l.center.lng)>180;){const p=l.locationPoint(f);if(p.x>=0&&p.y>=0&&p.x<=l.width&&p.y<=l.height)break;f.lng>l.center.lng?f.lng-=360:f.lng+=360}return f}const sl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Xt extends s.Evented{constructor(i,l){if(super(),(i instanceof s.window.HTMLElement||l)&&(i=s.extend({element:i},l)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=i&&i.occludedOpacity||.2,i&&i.element)this._element=i.element,this._offset=s.Point.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=J("div");const v=41,b=27,M=Pe("svg",{display:"block",height:v*this._scale+"px",width:b*this._scale+"px",viewBox:`0 0 ${b} ${v}`},this._element),D=Pe("radialGradient",{id:"shadowGradient"},Pe("defs",{},M));Pe("stop",{offset:"10%","stop-opacity":.4},D),Pe("stop",{offset:"100%","stop-opacity":.05},D),Pe("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},M),Pe("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},M),Pe("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},M),Pe("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},M),this._offset=s.Point.convert(i&&i.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",v=>{v.preventDefault()}),this._element.addEventListener("mousedown",v=>{v.preventDefault()});const p=this._element.classList;for(const v in sl)p.remove(`mapboxgl-marker-anchor-${v}`);p.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(i){return i===this._map||(this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._updateMoving),i.on("moveend",this._update),i.on("remove",this._clearFadeTimer),i._addMarker(this),this.setDraggable(this._draggable),this._update(),i.on("click",this._onMapClick)),this}remove(){const i=this._map;return i&&(i.off("click",this._onMapClick),i.off("move",this._updateMoving),i.off("moveend",this._update),i.off("mousedown",this._addDragHandler),i.off("touchstart",this._addDragHandler),i.off("mouseup",this._onUp),i.off("touchend",this._onUp),i.off("mousemove",this._onMove),i.off("touchmove",this._onMove),i.off("remove",this._clearFadeTimer),i._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=s.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,i._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(i){const l=i.code,p=i.charCode||i.keyCode;l!=="Space"&&l!=="Enter"&&p!==32&&p!==13||this.togglePopup()}_onMapClick(i){const l=i.originalEvent.target,p=this._element;this._popup&&(l===p||p.contains(l))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?(i.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(i.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const i=this._map,l=this._pos;if(!i||!l)return!1;const p=i.unproject(l),v=i.getFreeCameraOptions();if(!v.position)return!1;const b=v.position.toLngLat();return b.distanceTo(p)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const i=this._map;if(!i)return;const l=this._pos;if(!l||l.x<0||l.x>i.transform.width||l.y<0||l.y>i.transform.height)return void this._clearFadeTimer();const p=i.unproject(l);let v;i._showingGlobe()&&s.isLngLatBehindGlobe(i.transform,this._lngLat)?v=0:(v=1-i._queryFogOpacity(p),i.transform._terrainEnabled()&&i.getTerrain()&&this._behindTerrain()&&(v*=this._occludedOpacity)),this._element.style.opacity=`${v}`,this._element.style.pointerEvents=v>0?"auto":"none",this._popup&&this._popup._setOpacity(v),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const i=this._pos;if(!i||!this._map)return;const l=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${i.x}px,${i.y}px)
            ${sl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${l.x}px,${l.y}px)
        `}_calculateXYTransform(){const i=this._pos,l=this._map,p=this.getPitchAlignment();if(!l||!i||p!=="map")return"";if(!l._showingGlobe()){const L=l.getPitch();return L?`rotateX(${L}deg)`:""}const v=s.radToDeg(s.globeTiltAtLngLat(l.transform,this._lngLat)),b=i.sub(s.globeCenterToScreenPoint(l.transform)),M=Math.abs(b.x)+Math.abs(b.y);if(M===0)return"";const D=v/M;return`rotateX(${-b.y*D}deg) rotateY(${b.x*D}deg)`}_calculateZTransform(){const i=this._pos,l=this._map;if(!l||!i)return"";let p=0;const v=this.getRotationAlignment();if(v==="map")if(l._showingGlobe()){const b=l.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),M=l.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(b);p=s.radToDeg(Math.atan2(M.y,M.x))-90}else p=-l.getBearing();else if(v==="horizon"){const b=s.smoothstep(4,6,l.getZoom()),M=s.globeCenterToScreenPoint(l.transform);M.y+=b*l.transform.height;const D=i.sub(M),L=s.radToDeg(Math.atan2(D.y,D.x));p=(L>90?L-270:L+90)*(1-b)}return p+=this._rotation,p?`rotateZ(${p}deg)`:""}_update(i){s.window.cancelAnimationFrame(this._updateFrameId);const l=this._map;l&&(l.transform.renderWorldCopies&&(this._lngLat=yu(this._lngLat,this._pos,l.transform)),this._pos=l.project(this._lngLat),i===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),l._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(l._showingGlobe()||l.getTerrain()||l.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(i){return this._offset=s.Point.convert(i),this._update(),this}_onMove(i){const l=this._map;if(!l)return;const p=this._pointerdownPos,v=this._positionDelta;if(p&&v){if(!this._isDragging){const b=this._clickTolerance||l._clickTolerance;if(i.point.dist(p)<b)return;this._isDragging=!0}this._pos=i.point.sub(v),this._lngLat=l.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const i=this._map;i&&(i.off("mousemove",this._onMove),i.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(i){const l=this._map,p=this._pos;l&&p&&this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(p),this._pointerdownPos=i.point,this._state="pending",l.on("mousemove",this._onMove),l.on("touchmove",this._onMove),l.once("mouseup",this._onUp),l.once("touchend",this._onUp))}setDraggable(i){this._draggable=!!i;const l=this._map;return l&&(i?(l.on("mousedown",this._addDragHandler),l.on("touchstart",this._addDragHandler)):(l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(i){return this._occludedOpacity=i||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const bh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ll=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wh(f=new s.Point(0,0),i="bottom"){if(typeof f=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(i){case"top":return new s.Point(0,f);case"top-left":return new s.Point(l,l);case"top-right":return new s.Point(-l,l);case"bottom":return new s.Point(0,-f);case"bottom-left":return new s.Point(l,-l);case"bottom-right":return new s.Point(-l,-l);case"left":return new s.Point(f,0);case"right":return new s.Point(-f,0)}return new s.Point(0,0)}return f instanceof s.Point||Array.isArray(f)?s.Point.convert(f):s.Point.convert(f[i]||[0,0])}class Eh{constructor(i){this.jumpTo(i)}getValue(i){if(i<=this._startTime)return this._start;if(i>=this._endTime)return this._end;const l=s.easeCubicInOut((i-this._startTime)/(this._endTime-this._startTime));return this._start*(1-l)+this._end*l}isEasing(i){return i>=this._startTime&&i<=this._endTime}jumpTo(i){this._startTime=-1/0,this._endTime=-1/0,this._start=i,this._end=i}easeTo(i,l,p){this._start=this.getValue(l),this._end=i,this._startTime=l,this._endTime=l+p}}const Af={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},uc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},cc={showCompass:!0,showZoom:!0,visualizePitch:!1};class ul{constructor(i,l,p=!1){this._clickTolerance=10,this.element=l,this.mouseRotate=new oc({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,p&&(this.mousePitch=new sc({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),l.addEventListener("mousedown",this.mousedown),l.addEventListener("touchstart",this.touchstart,{passive:!1}),l.addEventListener("touchmove",this.touchmove),l.addEventListener("touchend",this.touchend),l.addEventListener("touchcancel",this.reset)}down(i,l){this.mouseRotate.mousedown(i,l),this.mousePitch&&this.mousePitch.mousedown(i,l),Ne()}move(i,l){const p=this.map,v=this.mouseRotate.mousemoveWindow(i,l),b=v&&v.bearingDelta;if(b&&p.setBearing(p.getBearing()+b),this.mousePitch){const M=this.mousePitch.mousemoveWindow(i,l),D=M&&M.pitchDelta;D&&p.setPitch(p.getPitch()+D)}}off(){const i=this.element;i.removeEventListener("mousedown",this.mousedown),i.removeEventListener("touchstart",this.touchstart,{passive:!1}),i.removeEventListener("touchmove",this.touchmove),i.removeEventListener("touchend",this.touchend),i.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Xe(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(i){this.down(s.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),Qe(this.element,i)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(i){this.move(i,Qe(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Nt(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=Nt(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Xd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},cl={maxWidth:100,unit:"metric"},kf={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},vu={version:s.version,supported:G,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends Mf{constructor(f){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(f=s.extend({},uc,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(f.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new zl(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._useWebGL2=f.useWebGL2,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new xh,this._domRenderTaskQueue=new xh,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Af,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Eh(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=s.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new vo(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new Ol(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,s.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new an({customAttribution:f.customAttribution})),this._logoControl=new za,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new s.Event(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new s.Event(`${i.dataType}dataloading`,i))})}_getMapId(){return this._mapId}addControl(f,i){if(i===void 0&&(i=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=f.onAdd(this);this._controls.push(f);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(f);return i>-1&&this._controls.splice(i,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new s.Event("movestart",f)).fire(new s.Event("move",f)),this.fire(new s.Event("resize",f)),i&&this.fire(new s.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(s.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?s.window.navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(i=>i==="auto"?s.window.navigator.language:i):f}setLanguage(f){const i=this._parseLanguage(f);if(!this.style||i===this._language)return this;this._language=i,this.style._reloadSources();for(const l of this._controls)l._setLanguage&&l._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,i=f.projection.name;let l;i==="globe"&&f.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),l=!0):i==="mercator"&&f.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),l=!0),l&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,i){return this._updateProjection(f||i||{name:"mercator"})}_updateProjection(f){let i;if(i=f.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),i){this.painter.clearBackgroundTiles();for(const l in this.style._sourceCaches)this.style._sourceCaches[l].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(s.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(s.Point.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,i,l){if(f==="mouseenter"||f==="mouseover"){let p=!1;const v=M=>{const D=i.filter(F=>this.getLayer(F)),L=D.length?this.queryRenderedFeatures(M.point,{layers:D}):[];L.length?p||(p=!0,l.call(this,new Sa(f,this,M.originalEvent,{features:L}))):p=!1},b=()=>{p=!1};return{layers:new Set(i),listener:l,delegates:{mousemove:v,mouseout:b}}}if(f==="mouseleave"||f==="mouseout"){let p=!1;const v=M=>{const D=i.filter(L=>this.getLayer(L));(D.length?this.queryRenderedFeatures(M.point,{layers:D}):[]).length?p=!0:p&&(p=!1,l.call(this,new Sa(f,this,M.originalEvent)))},b=M=>{p&&(p=!1,l.call(this,new Sa(f,this,M.originalEvent)))};return{layers:new Set(i),listener:l,delegates:{mousemove:v,mouseout:b}}}{const p=v=>{const b=i.filter(D=>this.getLayer(D)),M=b.length?this.queryRenderedFeatures(v.point,{layers:b}):[];M.length&&(v.features=M,l.call(this,v),delete v.features)};return{layers:new Set(i),listener:l,delegates:{[f]:p}}}}on(f,i,l){if(l===void 0)return super.on(f,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(f,i,l);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(p);for(const v in p.delegates)this.on(v,p.delegates[v]);return this}once(f,i,l){if(l===void 0)return super.once(f,i);Array.isArray(i)||(i=[i]);const p=this._createDelegatedListener(f,i,l);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(f,i,l){if(l===void 0)return super.off(f,i);i=new Set(Array.isArray(i)?i:[i]);const p=(b,M)=>{if(b.size!==M.size)return!1;for(const D of b)if(!M.has(D))return!1;return!0},v=this._delegatedListeners?this._delegatedListeners[f]:void 0;return v&&(b=>{for(let M=0;M<b.length;M++){const D=b[M];if(D.listener===l&&p(D.layers,i)){for(const L in D.delegates)this.off(L,D.delegates[L]);return b.splice(M,1),this}}})(v),this}queryRenderedFeatures(f,i){return this.style?(i!==void 0||f===void 0||f instanceof s.Point||Array.isArray(f)||(i=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(f,i){return this.style.querySourceFeatures(f,i)}isPointOnSurface(f){const{name:i}=this.transform.projection;return i!=="globe"&&i!=="mercator"&&s.warnOnce(`${i} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(f))}setStyle(f,i){return(i=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&i.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(f,i))}_getUIString(f){const i=this._locale[f];if(i==null)throw new Error(`Missing UI string '${f}'`);return i}_updateStyle(f,i){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new Q(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Q(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,i){if(typeof f=="string"){const l=this._requestManager.normalizeStyleURL(f),p=this._requestManager.transformRequest(l,s.ResourceType.Style);s.getJSON(p,(v,b)=>{v?this.fire(new s.ErrorEvent(v)):b&&this._updateDiff(b,i)})}else typeof f=="object"&&this._updateDiff(f,i)}_updateDiff(f,i){try{this.style.setState(f)&&this._update(!0)}catch(l){s.warnOnce(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(f,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(f,i){return this._lazyInitEmptyStyle(),this.style.addSource(f,i),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const i in f){const l=f[i]._tiles;for(const p in l){const v=l[p];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(f,i,l){this._lazyInitEmptyStyle(),this.style.addSourceType(f,i,l)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,i,{pixelRatio:l=1,sdf:p=!1,stretchX:v,stretchY:b,content:M}={}){if(this._lazyInitEmptyStyle(),i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap){const{width:D,height:L,data:F}=s.exported.getImageData(i);this.style.addImage(f,{data:new s.RGBAImage({width:D,height:L},F),pixelRatio:l,stretchX:v,stretchY:b,content:M,sdf:p,version:0})}else if(i.width===void 0||i.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:L}=i,F=i;this.style.addImage(f,{data:new s.RGBAImage({width:D,height:L},new Uint8Array(F.data)),pixelRatio:l,stretchX:v,stretchY:b,content:M,sdf:p,version:0,userImage:F}),F.onAdd&&F.onAdd(this,f)}}updateImage(f,i){const l=this.style.getImage(f);if(!l)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap?s.exported.getImageData(i):i,{width:v,height:b}=p;v!==void 0&&b!==void 0?v===l.data.width&&b===l.data.height?(l.data.replace(p.data,!(i instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&i instanceof s.window.ImageBitmap)),this.style.updateImage(f,l)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${v}, ${b})
                must be that same as the previous version of the image
                (${l.data.width}, ${l.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,i){s.getImage(this._requestManager.transformRequest(f,s.ResourceType.Image),(l,p)=>{i(l,p instanceof s.window.HTMLImageElement?s.exported.getImageData(p):p)})}listImages(){return this.style.listImages()}addLayer(f,i){return this._lazyInitEmptyStyle(),this.style.addLayer(f,i),this._update(!0)}moveLayer(f,i){return this.style.moveLayer(f,i),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,i,l){return this.style.setLayerZoomRange(f,i,l),this._update(!0)}setFilter(f,i,l={}){return this.style.setFilter(f,i,l),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,i,l,p={}){return this.style.setPaintProperty(f,i,l,p),this._update(!0)}getPaintProperty(f,i){return this.style.getPaintProperty(f,i)}setLayoutProperty(f,i,l,p={}){return this.style.setLayoutProperty(f,i,l,p),this._update(!0)}getLayoutProperty(f,i){return this.style.getLayoutProperty(f,i)}setLight(f,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,i),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(f),this.transform):0}setFeatureState(f,i){return this.style.setFeatureState(f,i),this._update()}removeFeatureState(f,i){return this.style.removeFeatureState(f,i),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,i=this._container.getBoundingClientRect().height||300;let l,p,v,b=this._container;for(;b&&(!p||!v);){const M=s.window.getComputedStyle(b).transform;M&&M!=="none"&&(l=M.match(/matrix.*\((.+)\)/)[1].split(", "),l[0]&&l[0]!=="0"&&l[0]!=="1"&&(p=l[0]),l[3]&&l[3]!=="0"&&l[3]!=="1"&&(v=l[3])),b=b.parentElement}this._containerWidth=p?Math.abs(f/p):f,this._containerHeight=v?Math.abs(i/v):i}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=J("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const i=this._canvasContainer=J("div","mapboxgl-canvas-container",f);this._interactive&&i.classList.add("mapboxgl-interactive"),this._canvas=J("canvas","mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const l=this._controlContainer=J("div","mapboxgl-control-container",f),p=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{p[v]=J("div",`mapboxgl-ctrl-${v}`,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,i){const l=s.exported.devicePixelRatio||1;this._canvas.width=l*Math.ceil(f),this._canvas.height=l*Math.ceil(i),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${i}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const i=this._markers.indexOf(f);i!==-1&&this._markers.splice(i,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const i=this._popups.indexOf(f);i!==-1&&this._popups.splice(i,1)}_setupPainter(){const f=s.extend({},G.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",f),l=i||this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);l?(this._useWebGL2&&!i&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(l,!0),this.painter=new Ju(l,this.transform,!!i),this.on("data",p=>{p.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(l)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let i;const l=this.painter.context.extTimerQuery,p=s.exported.now();if(this.listens("gpu-timing-frame")&&(i=l.createQueryEXT(),l.beginQueryEXT(l.TIME_ELAPSED_EXT,i)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const v=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const D=this.transform.zoom,L=this.transform.pitch,F=s.exported.now(),B=new s.EvaluationParameters(D,{now:F,fadeDuration:v,pitch:L,transition:this.style.getTransition()});this.style.update(B)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let b=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),b=this._updateAverageElevation(p),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):b=this._updateAverageElevation(p),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,v,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:v,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),i){const D=s.exported.now()-p;l.endQueryEXT(l.TIME_ELAPSED_EXT,i),setTimeout(()=>{const L=l.getQueryObjectEXT(i,l.QUERY_RESULT_EXT)/1e6;l.deleteQueryEXT(i),this.fire(new s.Event("gpu-timing-frame",{cpuTime:D,gpuTime:L})),s.window.performance.mark("frame-gpu",{startTime:p,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const D=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(D);this.fire(new s.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const D=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(D);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const M=this._sourcesDirty||this._styleDirty||this._placementDirty||b;if(M||this._repaint)this.triggerRepaint();else{const D=!this.isMoving()&&this.loaded();if(D&&(b=this._updateAverageElevation(p,!0)),b)this.triggerRepaint();else if(this._triggerFrame(!1),D&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||M||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const i of this._markers)f&&!this.getRenderWorldCopies()&&(i._lngLat=i._lngLat.wrap()),i._update();for(const i of this._popups)!f||this.getRenderWorldCopies()||i._trackPointer||(i._lngLat=i._lngLat.wrap()),i._update()}_updateAverageElevation(f,i=!1){const l=p=>(this.transform.averageElevation=p,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&l(0);if((i||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const p=this.transform.averageElevation;let v=this.transform.sampleAverageElevation(),b=!1;this.transform.elevation&&(b=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(v)?v=0:this._averageElevationLastSampledAt=f;const M=Math.abs(p-v);if(M>1){if(this._isInitialLoad||b)return this._averageElevation.jumpTo(v),l(v);this._averageElevation.easeTo(v,f,300)}else if(M>1e-4)return this._averageElevation.jumpTo(v),l(v)}return!!this._averageElevation.isEasing(f)&&l(this._averageElevation.getValue(f))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===s.AUTH_ERR_MSG||f.status===401)){const i=this.painter.context.gl;s.storeAuthState(i,!1),this._logoControl instanceof za&&this._logoControl._updateLogo(),i&&i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT|i.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),i=this.painter.getCanvasCopiesAndTimestamps();i.timeStamps.push(performance.now());const l=this.painter.context.gl,p=l.createFramebuffer();function v(b){l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,b,0);const M=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,M),M}return l.bindFramebuffer(l.FRAMEBUFFER,p),this._canvasPixelComparison(v(f),i.canvasCopies.map(v),i.timeStamps)}_canvasPixelComparison(f,i,l){let p=l[1]-l[0];const v=f.length/4;for(let b=0;b<i.length;b++){const M=i[b];let D=0;for(let L=0;L<M.length;L+=4)M[L]===f[L]&&M[L+1]===f[L+1]&&M[L+2]===f[L+2]&&M[L+3]===f[L+3]&&(D+=1);p+=(l[b+2]-l[b+1])*(1-D/v)}return p}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=s.exported.frame(i=>{const l=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,l&&this._render(i)}))}_preloadTiles(f){const i=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(i,(l,p)=>l._preloadTiles(f,p),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,i){s.setCacheLimits(f,i)}get version(){return s.version}},NavigationControl:class{constructor(f){this.options=s.extend({},cc,f),this._container=J("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",i=>{this._map&&this._map.zoomIn({},{originalEvent:i})}),J("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",i=>{this._map&&this._map.zoomOut({},{originalEvent:i})}),J("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",i=>{const l=this._map;l&&(this.options.visualizePitch?l.resetNorthPitch({},{originalEvent:i}):l.resetNorth({},{originalEvent:i}))}),this._compassIcon=J("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const i=f.getZoom(),l=i===f.getMaxZoom(),p=i===f.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=i)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ul(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,i){const l=J("button",f,this._container);return l.type="button",l.addEventListener("click",i),l}_setButtonTitle(f,i){if(!this._map)return;const l=this._map._getUIString(`NavigationControl.${i}`);f.setAttribute("aria-label",l),f.firstElementChild&&f.firstElementChild.setAttribute("title",l)}},GeolocateControl:class extends s.Evented{constructor(f){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Xd,f),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Pl(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=J("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const i=(l=!!this.options.geolocation)=>{this._supportsGeolocation=l,f(l)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(l=>i(l.state!=="denied")).catch(()=>i()):i()}_isOutOfMapMaxBounds(f){const i=this._map.getMaxBounds(),l=f.coords;return!!i&&(l.longitude<i.getWest()||l.longitude>i.getEast()||l.latitude<i.getSouth()||l.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",f)),this._finish()}}_updateCamera(f){const i=new s.LngLat(f.coords.longitude,f.coords.latitude),l=f.coords.accuracy,p=this._map.getBearing(),v=s.extend({bearing:p},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(l),v,{geolocateSource:!0})}_updateMarker(f){if(f){const i=new s.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,i=s.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,l=Math.ceil(2*this._accuracy*i);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=J("button","mapboxgl-ctrl-geolocate",this._container),J("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=J("div","mapboxgl-user-location"),this._dotElement.appendChild(J("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(J("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Xt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=J("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(i=>{i==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:an,ScaleControl:class{constructor(f){this.options=s.extend({},cl,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,i=this._map,l=i._containerHeight/2,p=i._containerWidth/2-f/2,v=i.unproject([p,l]),b=i.unproject([p+f,l]),M=v.distanceTo(b);if(this.options.unit==="imperial"){const D=3.2808*M;D>5280?this._setScale(f,D/5280,"mile"):this._setScale(f,D,"foot")}else this.options.unit==="nautical"?this._setScale(f,M/1852,"nautical-mile"):M>=1e3?this._setScale(f,M/1e3,"kilometer"):this._setScale(f,M,"meter")}_setScale(f,i,l){this._map._requestDomTask(()=>{const p=function(b){const M=Math.pow(10,`${Math.floor(b)}`.length-1);let D=b/M;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(L){const F=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*F)/F}(D),M*D}(i),v=p/i;this._container.innerHTML=this._isNumberFormatSupported&&l!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:l}).format(p):`${p}&nbsp;${kf[l]}`,this._container.style.width=f*v+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=J("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof s.window.HTMLElement?this._container=f.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=J("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=J("button","mapboxgl-ctrl-fullscreen",this._controlContainer);J("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(f){super(),this.options=s.extend(Object.create(bh),f),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=s.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(s.window.document.createTextNode(f))}setHTML(f){const i=s.window.document.createDocumentFragment(),l=s.window.document.createElement("body");let p;for(l.innerHTML=f;p=l.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let i=this._content;if(i)for(;i.hasChildNodes();)i.firstChild&&i.removeChild(i.firstChild);else i=this._content=J("div","mapboxgl-popup-content",this._container||void 0);if(i.appendChild(f),this.options.closeButton){const l=this._closeButton=J("button","mapboxgl-popup-close-button",i);l.type="button",l.setAttribute("aria-label","Close popup"),l.setAttribute("aria-hidden","true"),l.innerHTML="&#215;",l.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let i;return this._classList.delete(f)?i=!1:(this._classList.add(f),i=!0),this._updateClassList(),i}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const i=this._map,l=this._container,p=this._pos;if(!i||!l||!p)return"bottom";const v=l.offsetWidth,b=l.offsetHeight,M=p.x<v/2,D=p.x>i.transform.width-v/2;if(p.y+f<b)return M?"top-left":D?"top-right":"top";if(p.y>i.transform.height-b){if(M)return"bottom-left";if(D)return"bottom-right"}return M?"left":D?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const i=[...this._classList];i.push("mapboxgl-popup"),this._anchor&&i.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&i.push("mapboxgl-popup-track-pointer"),f.className=i.join(" ")}_update(f){const i=this._map,l=this._content;if(!i||!this._lngLat&&!this._trackPointer||!l)return;let p=this._container;if(p||(p=this._container=J("div","mapboxgl-popup",i.getContainer()),this._tip=J("div","mapboxgl-popup-tip",p),p.appendChild(l)),this.options.maxWidth&&p.style.maxWidth!==this.options.maxWidth&&(p.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=yu(this._lngLat,this._pos,i.transform)),!this._trackPointer||f){const v=this._pos=this._trackPointer&&f?f:i.project(this._lngLat),b=wh(this.options.offset),M=this._anchor=this._getAnchor(b.y),D=wh(this.options.offset,M),L=v.add(D).round();i._requestDomTask(()=>{this._container&&M&&(this._container.style.transform=`${sl[M]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&i._showingGlobe()){const v=s.isLngLatBehindGlobe(i.transform,this._lngLat)?0:1;this._setOpacity(v)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(ll);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:Xt,Style:Q,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:$d,Evented:s.Evented,config:s.config,prewarm:function(){En().acquire(rn)},clearPrewarmedResources:function(){const f=en;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(rn),en=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(f){s.config.ACCESS_TOKEN=f},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(f){s.config.API_URL=f},get workerCount(){return yn.workerCount},set workerCount(f){yn.workerCount=f},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){s.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){s.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return vu});var U=R;return U})})(GA);var Qz=GA.exports;const Ug=W0(Qz);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Wg=(c,y)=>{const x=ke.forwardRef(({color:E="currentColor",size:A=24,strokeWidth:R=2,absoluteStrokeWidth:C,className:U="",children:s,...N},G)=>ke.createElement("svg",{ref:G,...eP,width:A,height:A,stroke:E,strokeWidth:C?Number(R)*24/Number(A):R,className:["lucide",`lucide-${tP(c)}`,U].join(" "),...N},[...y.map(([H,X])=>ke.createElement(H,X)),...Array.isArray(s)?s:[s]]));return x.displayName=`${c}`,x};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=Wg("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=Wg("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=Wg("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=Wg("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=Wg("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=Wg("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);class oP extends Error{constructor(x,E,A,R,C){super(x);pE(this,"name","Assertion");pE(this,"code","ERR_ASSERTION");Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.actual=E,this.expected=A,this.generated=C,this.operator=R}}function Ve(c,y){ZA(!!c,!1,!0,"ok","Expected value to be truthy",y)}function vE(c){ZA(!1,!1,!0,"ok","Unreachable",c)}function ZA(c,y,x,E,A,R){if(!c)throw R instanceof Error?R:new oP(R||A,y,x,E,!R)}function sP(c,y){const x={};return(c[c.length-1]===""?[...c,""]:c).join((x.padRight?" ":"")+","+(x.padLeft===!1?"":" ")).trim()}const lP=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uP=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cP={};function xM(c,y){return(cP.jsx?uP:lP).test(c)}const hP=/[ \t\n\f\r]/g;function fP(c){return typeof c=="object"?c.type==="text"?bM(c.value):!1:bM(c)}function bM(c){return c.replace(hP,"")===""}class f_{constructor(y,x,E){this.property=y,this.normal=x,E&&(this.space=E)}}f_.prototype.property={};f_.prototype.normal={};f_.prototype.space=null;function XA(c,y){const x={},E={};let A=-1;for(;++A<c.length;)Object.assign(x,c[A].property),Object.assign(E,c[A].normal);return new f_(x,E,y)}function qE(c){return c.toLowerCase()}class au{constructor(y,x){this.property=y,this.attribute=x}}au.prototype.space=null;au.prototype.boolean=!1;au.prototype.booleanish=!1;au.prototype.overloadedBoolean=!1;au.prototype.number=!1;au.prototype.commaSeparated=!1;au.prototype.spaceSeparated=!1;au.prototype.commaOrSpaceSeparated=!1;au.prototype.mustUseProperty=!1;au.prototype.defined=!1;let dP=0;const Mr=Qp(),Xa=Qp(),YA=Qp(),tn=Qp(),ra=Qp(),jg=Qp(),El=Qp();function Qp(){return 2**++dP}const HE=Object.freeze(Object.defineProperty({__proto__:null,boolean:Mr,booleanish:Xa,commaOrSpaceSeparated:El,commaSeparated:jg,number:tn,overloadedBoolean:YA,spaceSeparated:ra},Symbol.toStringTag,{value:"Module"})),_E=Object.keys(HE);class cS extends au{constructor(y,x,E,A){let R=-1;if(super(y,x),wM(this,"space",A),typeof E=="number")for(;++R<_E.length;){const C=_E[R];wM(this,_E[R],(E&HE[C])===HE[C])}}}cS.prototype.defined=!0;function wM(c,y,x){x&&(c[y]=x)}const pP={}.hasOwnProperty;function Zg(c){const y={},x={};let E;for(E in c.properties)if(pP.call(c.properties,E)){const A=c.properties[E],R=new cS(E,c.transform(c.attributes||{},E),A,c.space);c.mustUseProperty&&c.mustUseProperty.includes(E)&&(R.mustUseProperty=!0),y[E]=R,x[qE(E)]=E,x[qE(R.attribute)]=E}return new f_(y,x,c.space)}const KA=Zg({space:"xlink",transform(c,y){return"xlink:"+y.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),JA=Zg({space:"xml",transform(c,y){return"xml:"+y.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function QA(c,y){return y in c?c[y]:y}function ek(c,y){return QA(c,y.toLowerCase())}const tk=Zg({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:ek,properties:{xmlns:null,xmlnsXLink:null}}),nk=Zg({transform(c,y){return y==="role"?y:"aria-"+y.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Xa,ariaAutoComplete:null,ariaBusy:Xa,ariaChecked:Xa,ariaColCount:tn,ariaColIndex:tn,ariaColSpan:tn,ariaControls:ra,ariaCurrent:null,ariaDescribedBy:ra,ariaDetails:null,ariaDisabled:Xa,ariaDropEffect:ra,ariaErrorMessage:null,ariaExpanded:Xa,ariaFlowTo:ra,ariaGrabbed:Xa,ariaHasPopup:null,ariaHidden:Xa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ra,ariaLevel:tn,ariaLive:null,ariaModal:Xa,ariaMultiLine:Xa,ariaMultiSelectable:Xa,ariaOrientation:null,ariaOwns:ra,ariaPlaceholder:null,ariaPosInSet:tn,ariaPressed:Xa,ariaReadOnly:Xa,ariaRelevant:null,ariaRequired:Xa,ariaRoleDescription:ra,ariaRowCount:tn,ariaRowIndex:tn,ariaRowSpan:tn,ariaSelected:Xa,ariaSetSize:tn,ariaSort:null,ariaValueMax:tn,ariaValueMin:tn,ariaValueNow:tn,ariaValueText:null,role:null}}),mP=Zg({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:ek,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:jg,acceptCharset:ra,accessKey:ra,action:null,allow:null,allowFullScreen:Mr,allowPaymentRequest:Mr,allowUserMedia:Mr,alt:null,as:null,async:Mr,autoCapitalize:null,autoComplete:ra,autoFocus:Mr,autoPlay:Mr,blocking:ra,capture:null,charSet:null,checked:Mr,cite:null,className:ra,cols:tn,colSpan:null,content:null,contentEditable:Xa,controls:Mr,controlsList:ra,coords:tn|jg,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Mr,defer:Mr,dir:null,dirName:null,disabled:Mr,download:YA,draggable:Xa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Mr,formTarget:null,headers:ra,height:tn,hidden:Mr,high:tn,href:null,hrefLang:null,htmlFor:ra,httpEquiv:ra,id:null,imageSizes:null,imageSrcSet:null,inert:Mr,inputMode:null,integrity:null,is:null,isMap:Mr,itemId:null,itemProp:ra,itemRef:ra,itemScope:Mr,itemType:ra,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Mr,low:tn,manifest:null,max:null,maxLength:tn,media:null,method:null,min:null,minLength:tn,multiple:Mr,muted:Mr,name:null,nonce:null,noModule:Mr,noValidate:Mr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Mr,optimum:tn,pattern:null,ping:ra,placeholder:null,playsInline:Mr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Mr,referrerPolicy:null,rel:ra,required:Mr,reversed:Mr,rows:tn,rowSpan:tn,sandbox:ra,scope:null,scoped:Mr,seamless:Mr,selected:Mr,shadowRootClonable:Mr,shadowRootDelegatesFocus:Mr,shadowRootMode:null,shape:null,size:tn,sizes:null,slot:null,span:tn,spellCheck:Xa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tn,step:null,style:null,tabIndex:tn,target:null,title:null,translate:null,type:null,typeMustMatch:Mr,useMap:null,value:Xa,width:tn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ra,axis:null,background:null,bgColor:null,border:tn,borderColor:null,bottomMargin:tn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Mr,declare:Mr,event:null,face:null,frame:null,frameBorder:null,hSpace:tn,leftMargin:tn,link:null,longDesc:null,lowSrc:null,marginHeight:tn,marginWidth:tn,noResize:Mr,noHref:Mr,noShade:Mr,noWrap:Mr,object:null,profile:null,prompt:null,rev:null,rightMargin:tn,rules:null,scheme:null,scrolling:Xa,standby:null,summary:null,text:null,topMargin:tn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Mr,disableRemotePlayback:Mr,prefix:null,property:null,results:tn,security:null,unselectable:null}}),gP=Zg({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:QA,properties:{about:El,accentHeight:tn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tn,amplitude:tn,arabicForm:null,ascent:tn,attributeName:null,attributeType:null,azimuth:tn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tn,by:null,calcMode:null,capHeight:tn,className:ra,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tn,diffuseConstant:tn,direction:null,display:null,dur:null,divisor:tn,dominantBaseline:null,download:Mr,dx:null,dy:null,edgeMode:null,editable:null,elevation:tn,enableBackground:null,end:null,event:null,exponent:tn,externalResourcesRequired:null,fill:null,fillOpacity:tn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:jg,g2:jg,glyphName:jg,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tn,horizOriginX:tn,horizOriginY:tn,id:null,ideographic:tn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tn,k:tn,k1:tn,k2:tn,k3:tn,k4:tn,kernelMatrix:El,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tn,overlineThickness:tn,paintOrder:null,panose1:null,path:null,pathLength:tn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ra,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tn,pointsAtY:tn,pointsAtZ:tn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:El,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:El,rev:El,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:El,requiredFeatures:El,requiredFonts:El,requiredFormats:El,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tn,specularExponent:tn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tn,strikethroughThickness:tn,string:null,stroke:null,strokeDashArray:El,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tn,strokeOpacity:tn,strokeWidth:null,style:null,surfaceScale:tn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:El,tabIndex:tn,tableValues:null,target:null,targetX:tn,targetY:tn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:El,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tn,underlineThickness:tn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tn,values:null,vAlphabetic:tn,vMathematical:tn,vectorEffect:null,vHanging:tn,vIdeographic:tn,version:null,vertAdvY:tn,vertOriginX:tn,vertOriginY:tn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),yP=/^data[-\w.:]+$/i,EM=/-[a-z]/g,vP=/[A-Z]/g;function _P(c,y){const x=qE(y);let E=y,A=au;if(x in c.normal)return c.property[c.normal[x]];if(x.length>4&&x.slice(0,4)==="data"&&yP.test(y)){if(y.charAt(4)==="-"){const R=y.slice(5).replace(EM,bP);E="data"+R.charAt(0).toUpperCase()+R.slice(1)}else{const R=y.slice(4);if(!EM.test(R)){let C=R.replace(vP,xP);C.charAt(0)!=="-"&&(C="-"+C),y="data"+C}}A=cS}return new A(E,y)}function xP(c){return"-"+c.toLowerCase()}function bP(c){return c.charAt(1).toUpperCase()}const wP={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},EP=XA([JA,KA,tk,nk,mP],"html"),hS=XA([JA,KA,tk,nk,gP],"svg");function SP(c){return c.join(" ").trim()}var rk={},SM=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,TP=/\n/g,CP=/^\s*/,MP=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,AP=/^:\s*/,kP=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,DP=/^[;\s]*/,RP=/^\s+|\s+$/g,IP=`
`,TM="/",CM="*",Yp="",LP="comment",zP="declaration",PP=function(c,y){if(typeof c!="string")throw new TypeError("First argument must be a string");if(!c)return[];y=y||{};var x=1,E=1;function A(Pe){var Re=Pe.match(TP);Re&&(x+=Re.length);var qe=Pe.lastIndexOf(IP);E=~qe?Pe.length-qe:E+Pe.length}function R(){var Pe={line:x,column:E};return function(Re){return Re.position=new C(Pe),N(),Re}}function C(Pe){this.start=Pe,this.end={line:x,column:E},this.source=y.source}C.prototype.content=c;function U(Pe){var Re=new Error(y.source+":"+x+":"+E+": "+Pe);if(Re.reason=Pe,Re.filename=y.source,Re.line=x,Re.column=E,Re.source=c,!y.silent)throw Re}function s(Pe){var Re=Pe.exec(c);if(Re){var qe=Re[0];return A(qe),c=c.slice(qe.length),Re}}function N(){s(CP)}function G(Pe){var Re;for(Pe=Pe||[];Re=H();)Re!==!1&&Pe.push(Re);return Pe}function H(){var Pe=R();if(!(TM!=c.charAt(0)||CM!=c.charAt(1))){for(var Re=2;Yp!=c.charAt(Re)&&(CM!=c.charAt(Re)||TM!=c.charAt(Re+1));)++Re;if(Re+=2,Yp===c.charAt(Re-1))return U("End of comment missing");var qe=c.slice(2,Re-2);return E+=2,A(qe),c=c.slice(Re),E+=2,Pe({type:LP,comment:qe})}}function X(){var Pe=R(),Re=s(MP);if(Re){if(H(),!s(AP))return U("property missing ':'");var qe=s(kP),je=Pe({type:zP,property:MM(Re[0].replace(SM,Yp)),value:qe?MM(qe[0].replace(SM,Yp)):Yp});return s(DP),je}}function J(){var Pe=[];G(Pe);for(var Re;Re=X();)Re!==!1&&(Pe.push(Re),G(Pe));return Pe}return N(),J()};function MM(c){return c?c.replace(RP,Yp):Yp}var OP=NE&&NE.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(rk,"__esModule",{value:!0});var AM=rk.default=FP,BP=OP(PP);function FP(c,y){var x=null;if(!c||typeof c!="string")return x;var E=(0,BP.default)(c),A=typeof y=="function";return E.forEach(function(R){if(R.type==="declaration"){var C=R.property,U=R.value;A?y(C,U,R):U&&(x=x||{},x[C]=U)}}),x}const NP=AM.default||AM,ik=ak("end"),fS=ak("start");function ak(c){return y;function y(x){const E=x&&x.position&&x.position[c]||{};if(typeof E.line=="number"&&E.line>0&&typeof E.column=="number"&&E.column>0)return{line:E.line,column:E.column,offset:typeof E.offset=="number"&&E.offset>-1?E.offset:void 0}}}function UP(c){const y=fS(c),x=ik(c);if(y&&x)return{start:y,end:x}}function t_(c){return!c||typeof c!="object"?"":"position"in c||"type"in c?kM(c.position):"start"in c||"end"in c?kM(c):"line"in c||"column"in c?WE(c):""}function WE(c){return DM(c&&c.line)+":"+DM(c&&c.column)}function kM(c){return WE(c&&c.start)+"-"+WE(c&&c.end)}function DM(c){return c&&typeof c=="number"?c:1}class Zo extends Error{constructor(y,x,E){super(),typeof x=="string"&&(E=x,x=void 0);let A="",R={},C=!1;if(x&&("line"in x&&"column"in x?R={place:x}:"start"in x&&"end"in x?R={place:x}:"type"in x?R={ancestors:[x],place:x.position}:R={...x}),typeof y=="string"?A=y:!R.cause&&y&&(C=!0,A=y.message,R.cause=y),!R.ruleId&&!R.source&&typeof E=="string"){const s=E.indexOf(":");s===-1?R.ruleId=E:(R.source=E.slice(0,s),R.ruleId=E.slice(s+1))}if(!R.place&&R.ancestors&&R.ancestors){const s=R.ancestors[R.ancestors.length-1];s&&(R.place=s.position)}const U=R.place&&"start"in R.place?R.place.start:R.place;this.ancestors=R.ancestors||void 0,this.cause=R.cause||void 0,this.column=U?U.column:void 0,this.fatal=void 0,this.file,this.message=A,this.line=U?U.line:void 0,this.name=t_(R.place)||"1:1",this.place=R.place||void 0,this.reason=this.message,this.ruleId=R.ruleId||void 0,this.source=R.source||void 0,this.stack=C&&R.cause&&typeof R.cause.stack=="string"?R.cause.stack:"",this.actual,this.expected,this.note,this.url}}Zo.prototype.file="";Zo.prototype.name="";Zo.prototype.reason="";Zo.prototype.message="";Zo.prototype.stack="";Zo.prototype.column=void 0;Zo.prototype.line=void 0;Zo.prototype.ancestors=void 0;Zo.prototype.cause=void 0;Zo.prototype.fatal=void 0;Zo.prototype.place=void 0;Zo.prototype.ruleId=void 0;Zo.prototype.source=void 0;const dS={}.hasOwnProperty,jP=new Map,VP=/[A-Z]/g,$P=/-([a-z])/g,GP=new Set(["table","tbody","thead","tfoot","tr"]),qP=new Set(["td","th"]),ok="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function HP(c,y){if(!y||y.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const x=y.filePath||void 0;let E;if(y.development){if(typeof y.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");E=eO(x,y.jsxDEV)}else{if(typeof y.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof y.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");E=QP(x,y.jsx,y.jsxs)}const A={Fragment:y.Fragment,ancestors:[],components:y.components||{},create:E,elementAttributeNameCase:y.elementAttributeNameCase||"react",evaluater:y.createEvaluater?y.createEvaluater():void 0,filePath:x,ignoreInvalidStyle:y.ignoreInvalidStyle||!1,passKeys:y.passKeys!==!1,passNode:y.passNode||!1,schema:y.space==="svg"?hS:EP,stylePropertyNameCase:y.stylePropertyNameCase||"dom",tableCellAlignToStyle:y.tableCellAlignToStyle!==!1},R=sk(A,c,void 0);return R&&typeof R!="string"?R:A.create(c,A.Fragment,{children:R||void 0},void 0)}function sk(c,y,x){if(y.type==="element")return WP(c,y,x);if(y.type==="mdxFlowExpression"||y.type==="mdxTextExpression")return ZP(c,y);if(y.type==="mdxJsxFlowElement"||y.type==="mdxJsxTextElement")return YP(c,y,x);if(y.type==="mdxjsEsm")return XP(c,y);if(y.type==="root")return KP(c,y,x);if(y.type==="text")return JP(c,y)}function WP(c,y,x){const E=c.schema;let A=E;y.tagName.toLowerCase()==="svg"&&E.space==="html"&&(A=hS,c.schema=A),c.ancestors.push(y);const R=uk(c,y.tagName,!1),C=tO(c,y);let U=mS(c,y);return GP.has(y.tagName)&&(U=U.filter(function(s){return typeof s=="string"?!fP(s):!0})),lk(c,C,R,y),pS(C,U),c.ancestors.pop(),c.schema=E,c.create(y,R,C,x)}function ZP(c,y){if(y.data&&y.data.estree&&c.evaluater){const E=y.data.estree.body[0];return Ve(E.type==="ExpressionStatement"),c.evaluater.evaluateExpression(E.expression)}s_(c,y.position)}function XP(c,y){if(y.data&&y.data.estree&&c.evaluater)return c.evaluater.evaluateProgram(y.data.estree);s_(c,y.position)}function YP(c,y,x){const E=c.schema;let A=E;y.name==="svg"&&E.space==="html"&&(A=hS,c.schema=A),c.ancestors.push(y);const R=y.name===null?c.Fragment:uk(c,y.name,!0),C=nO(c,y),U=mS(c,y);return lk(c,C,R,y),pS(C,U),c.ancestors.pop(),c.schema=E,c.create(y,R,C,x)}function KP(c,y,x){const E={};return pS(E,mS(c,y)),c.create(y,c.Fragment,E,x)}function JP(c,y){return y.value}function lk(c,y,x,E){typeof x!="string"&&x!==c.Fragment&&c.passNode&&(y.node=E)}function pS(c,y){if(y.length>0){const x=y.length>1?y:y[0];x&&(c.children=x)}}function QP(c,y,x){return E;function E(A,R,C,U){const N=Array.isArray(C.children)?x:y;return U?N(R,C,U):N(R,C)}}function eO(c,y){return x;function x(E,A,R,C){const U=Array.isArray(R.children),s=fS(E);return y(A,R,C,U,{columnNumber:s?s.column-1:void 0,fileName:c,lineNumber:s?s.line:void 0},void 0)}}function tO(c,y){const x={};let E,A;for(A in y.properties)if(A!=="children"&&dS.call(y.properties,A)){const R=rO(c,A,y.properties[A]);if(R){const[C,U]=R;c.tableCellAlignToStyle&&C==="align"&&typeof U=="string"&&qP.has(y.tagName)?E=U:x[C]=U}}if(E){const R=x.style||(x.style={});R[c.stylePropertyNameCase==="css"?"text-align":"textAlign"]=E}return x}function nO(c,y){const x={};for(const E of y.attributes)if(E.type==="mdxJsxExpressionAttribute")if(E.data&&E.data.estree&&c.evaluater){const R=E.data.estree.body[0];Ve(R.type==="ExpressionStatement");const C=R.expression;Ve(C.type==="ObjectExpression");const U=C.properties[0];Ve(U.type==="SpreadElement"),Object.assign(x,c.evaluater.evaluateExpression(U.argument))}else s_(c,y.position);else{const A=E.name;let R;if(E.value&&typeof E.value=="object")if(E.value.data&&E.value.data.estree&&c.evaluater){const U=E.value.data.estree.body[0];Ve(U.type==="ExpressionStatement"),R=c.evaluater.evaluateExpression(U.expression)}else s_(c,y.position);else R=E.value===null?!0:E.value;x[A]=R}return x}function mS(c,y){const x=[];let E=-1;const A=c.passKeys?new Map:jP;for(;++E<y.children.length;){const R=y.children[E];let C;if(c.passKeys){const s=R.type==="element"?R.tagName:R.type==="mdxJsxFlowElement"||R.type==="mdxJsxTextElement"?R.name:void 0;if(s){const N=A.get(s)||0;C=s+"-"+N,A.set(s,N+1)}}const U=sk(c,R,C);U!==void 0&&x.push(U)}return x}function rO(c,y,x){const E=_P(c.schema,y);if(!(x==null||typeof x=="number"&&Number.isNaN(x))){if(Array.isArray(x)&&(x=E.commaSeparated?sP(x):SP(x)),E.property==="style"){let A=typeof x=="object"?x:iO(c,String(x));return c.stylePropertyNameCase==="css"&&(A=aO(A)),["style",A]}return[c.elementAttributeNameCase==="react"&&E.space?wP[E.property]||E.property:E.attribute,x]}}function iO(c,y){const x={};try{NP(y,E)}catch(A){if(!c.ignoreInvalidStyle){const R=A,C=new Zo("Cannot parse `style` attribute",{ancestors:c.ancestors,cause:R,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw C.file=c.filePath||void 0,C.url=ok+"#cannot-parse-style-attribute",C}}return x;function E(A,R){let C=A;C.slice(0,2)!=="--"&&(C.slice(0,4)==="-ms-"&&(C="ms-"+C.slice(4)),C=C.replace($P,sO)),x[C]=R}}function uk(c,y,x){let E;if(!x)E={type:"Literal",value:y};else if(y.includes(".")){const A=y.split(".");let R=-1,C;for(;++R<A.length;){const U=xM(A[R])?{type:"Identifier",name:A[R]}:{type:"Literal",value:A[R]};C=C?{type:"MemberExpression",object:C,property:U,computed:!!(R&&U.type==="Literal"),optional:!1}:U}Ve(C,"always a result"),E=C}else E=xM(y)&&!/^[a-z]/.test(y)?{type:"Identifier",name:y}:{type:"Literal",value:y};if(E.type==="Literal"){const A=E.value;return dS.call(c.components,A)?c.components[A]:A}if(c.evaluater)return c.evaluater.evaluateExpression(E);s_(c)}function s_(c,y){const x=new Zo("Cannot handle MDX estrees without `createEvaluater`",{ancestors:c.ancestors,place:y,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw x.file=c.filePath||void 0,x.url=ok+"#cannot-handle-mdx-estrees-without-createevaluater",x}function aO(c){const y={};let x;for(x in c)dS.call(c,x)&&(y[oO(x)]=c[x]);return y}function oO(c){let y=c.replace(VP,lO);return y.slice(0,3)==="ms-"&&(y="-"+y),y}function sO(c,y){return y.toUpperCase()}function lO(c){return"-"+c.toLowerCase()}const xE={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};var ck={exports:{}},P0={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var c=ke,y=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),U=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Pe=Symbol.iterator,Re="@@iterator";function qe(pe){if(pe===null||typeof pe!="object")return null;var ot=Pe&&pe[Pe]||pe[Re];return typeof ot=="function"?ot:null}var je=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Ne(pe){{for(var ot=arguments.length,yt=new Array(ot>1?ot-1:0),jt=1;jt<ot;jt++)yt[jt-1]=arguments[jt];Xe("error",pe,yt)}}function Xe(pe,ot,yt){{var jt=je.ReactDebugCurrentFrame,rn=jt.getStackAddendum();rn!==""&&(ot+="%s",yt=yt.concat([rn]));var yn=yt.map(function(en){return String(en)});yn.unshift("Warning: "+ot),Function.prototype.apply.call(console[pe],console,yn)}}var Et=!1,St=!1,Qe=!1,Nt=!1,Mn=!1,dn;dn=Symbol.for("react.module.reference");function ut(pe){return!!(typeof pe=="string"||typeof pe=="function"||pe===E||pe===R||Mn||pe===A||pe===N||pe===G||Nt||pe===J||Et||St||Qe||typeof pe=="object"&&pe!==null&&(pe.$$typeof===X||pe.$$typeof===H||pe.$$typeof===C||pe.$$typeof===U||pe.$$typeof===s||pe.$$typeof===dn||pe.getModuleId!==void 0))}function qn(pe,ot,yt){var jt=pe.displayName;if(jt)return jt;var rn=ot.displayName||ot.name||"";return rn!==""?yt+"("+rn+")":yt}function Jn(pe){return pe.displayName||"Context"}function et(pe){if(pe==null)return null;if(typeof pe.tag=="number"&&Ne("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof pe=="function")return pe.displayName||pe.name||null;if(typeof pe=="string")return pe;switch(pe){case E:return"Fragment";case x:return"Portal";case R:return"Profiler";case A:return"StrictMode";case N:return"Suspense";case G:return"SuspenseList"}if(typeof pe=="object")switch(pe.$$typeof){case U:var ot=pe;return Jn(ot)+".Consumer";case C:var yt=pe;return Jn(yt._context)+".Provider";case s:return qn(pe,pe.render,"ForwardRef");case H:var jt=pe.displayName||null;return jt!==null?jt:et(pe.type)||"Memo";case X:{var rn=pe,yn=rn._payload,en=rn._init;try{return et(en(yn))}catch{return null}}}return null}var $t=Object.assign,un=0,Hn,cn,Cr,It,Ee,Fn,An;function Me(){}Me.__reactDisabledLog=!0;function Vn(){{if(un===0){Hn=console.log,cn=console.info,Cr=console.warn,It=console.error,Ee=console.group,Fn=console.groupCollapsed,An=console.groupEnd;var pe={configurable:!0,enumerable:!0,value:Me,writable:!0};Object.defineProperties(console,{info:pe,log:pe,warn:pe,error:pe,group:pe,groupCollapsed:pe,groupEnd:pe})}un++}}function Ti(){{if(un--,un===0){var pe={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:$t({},pe,{value:Hn}),info:$t({},pe,{value:cn}),warn:$t({},pe,{value:Cr}),error:$t({},pe,{value:It}),group:$t({},pe,{value:Ee}),groupCollapsed:$t({},pe,{value:Fn}),groupEnd:$t({},pe,{value:An})})}un<0&&Ne("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Vi=je.ReactCurrentDispatcher,Ci;function hr(pe,ot,yt){{if(Ci===void 0)try{throw Error()}catch(rn){var jt=rn.stack.trim().match(/\n( *(at )?)/);Ci=jt&&jt[1]||""}return`
`+Ci+pe}}var ai=!1,Or;{var xi=typeof WeakMap=="function"?WeakMap:Map;Or=new xi}function Dn(pe,ot){if(!pe||ai)return"";{var yt=Or.get(pe);if(yt!==void 0)return yt}var jt;ai=!0;var rn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var yn;yn=Vi.current,Vi.current=null,Vn();try{if(ot){var en=function(){throw Error()};if(Object.defineProperty(en.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(en,[])}catch(Yi){jt=Yi}Reflect.construct(pe,[],en)}else{try{en.call()}catch(Yi){jt=Yi}pe.call(en.prototype)}}else{try{throw Error()}catch(Yi){jt=Yi}pe()}}catch(Yi){if(Yi&&jt&&typeof Yi.stack=="string"){for(var En=Yi.stack.split(`
`),Xr=jt.stack.split(`
`),Nr=En.length-1,Tn=Xr.length-1;Nr>=1&&Tn>=0&&En[Nr]!==Xr[Tn];)Tn--;for(;Nr>=1&&Tn>=0;Nr--,Tn--)if(En[Nr]!==Xr[Tn]){if(Nr!==1||Tn!==1)do if(Nr--,Tn--,Tn<0||En[Nr]!==Xr[Tn]){var $r=`
`+En[Nr].replace(" at new "," at ");return pe.displayName&&$r.includes("<anonymous>")&&($r=$r.replace("<anonymous>",pe.displayName)),typeof pe=="function"&&Or.set(pe,$r),$r}while(Nr>=1&&Tn>=0);break}}}finally{ai=!1,Vi.current=yn,Ti(),Error.prepareStackTrace=rn}var Ea=pe?pe.displayName||pe.name:"",Ua=Ea?hr(Ea):"";return typeof pe=="function"&&Or.set(pe,Ua),Ua}function Yr(pe,ot,yt){return Dn(pe,!1)}function Zr(pe){var ot=pe.prototype;return!!(ot&&ot.isReactComponent)}function oi(pe,ot,yt){if(pe==null)return"";if(typeof pe=="function")return Dn(pe,Zr(pe));if(typeof pe=="string")return hr(pe);switch(pe){case N:return hr("Suspense");case G:return hr("SuspenseList")}if(typeof pe=="object")switch(pe.$$typeof){case s:return Yr(pe.render);case H:return oi(pe.type,ot,yt);case X:{var jt=pe,rn=jt._payload,yn=jt._init;try{return oi(yn(rn),ot,yt)}catch{}}}return""}var Wn=Object.prototype.hasOwnProperty,Dr={},aa=je.ReactDebugCurrentFrame;function bi(pe){if(pe){var ot=pe._owner,yt=oi(pe.type,pe._source,ot?ot.type:null);aa.setExtraStackFrame(yt)}else aa.setExtraStackFrame(null)}function Kr(pe,ot,yt,jt,rn){{var yn=Function.call.bind(Wn);for(var en in pe)if(yn(pe,en)){var En=void 0;try{if(typeof pe[en]!="function"){var Xr=Error((jt||"React class")+": "+yt+" type `"+en+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof pe[en]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Xr.name="Invariant Violation",Xr}En=pe[en](ot,en,jt,yt,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(Nr){En=Nr}En&&!(En instanceof Error)&&(bi(rn),Ne("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",jt||"React class",yt,en,typeof En),bi(null)),En instanceof Error&&!(En.message in Dr)&&(Dr[En.message]=!0,bi(rn),Ne("Failed %s type: %s",yt,En.message),bi(null))}}}var va=Array.isArray;function Wi(pe){return va(pe)}function Zi(pe){{var ot=typeof Symbol=="function"&&Symbol.toStringTag,yt=ot&&pe[Symbol.toStringTag]||pe.constructor.name||"Object";return yt}}function Xi(pe){try{return Ii(pe),!1}catch{return!0}}function Ii(pe){return""+pe}function ft(pe){if(Xi(pe))return Ne("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Zi(pe)),Ii(pe)}var at=je.ReactCurrentOwner,Jt={key:!0,ref:!0,__self:!0,__source:!0},On,sr,Ht;Ht={};function hn(pe){if(Wn.call(pe,"ref")){var ot=Object.getOwnPropertyDescriptor(pe,"ref").get;if(ot&&ot.isReactWarning)return!1}return pe.ref!==void 0}function Un(pe){if(Wn.call(pe,"key")){var ot=Object.getOwnPropertyDescriptor(pe,"key").get;if(ot&&ot.isReactWarning)return!1}return pe.key!==void 0}function dr(pe,ot){if(typeof pe.ref=="string"&&at.current&&ot&&at.current.stateNode!==ot){var yt=et(at.current.type);Ht[yt]||(Ne('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',et(at.current.type),pe.ref),Ht[yt]=!0)}}function fr(pe,ot){{var yt=function(){On||(On=!0,Ne("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ot))};yt.isReactWarning=!0,Object.defineProperty(pe,"key",{get:yt,configurable:!0})}}function xr(pe,ot){{var yt=function(){sr||(sr=!0,Ne("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",ot))};yt.isReactWarning=!0,Object.defineProperty(pe,"ref",{get:yt,configurable:!0})}}var Rr=function(pe,ot,yt,jt,rn,yn,en){var En={$$typeof:y,type:pe,key:ot,ref:yt,props:en,_owner:yn};return En._store={},Object.defineProperty(En._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(En,"_self",{configurable:!1,enumerable:!1,writable:!1,value:jt}),Object.defineProperty(En,"_source",{configurable:!1,enumerable:!1,writable:!1,value:rn}),Object.freeze&&(Object.freeze(En.props),Object.freeze(En)),En};function Jr(pe,ot,yt,jt,rn){{var yn,en={},En=null,Xr=null;yt!==void 0&&(ft(yt),En=""+yt),Un(ot)&&(ft(ot.key),En=""+ot.key),hn(ot)&&(Xr=ot.ref,dr(ot,rn));for(yn in ot)Wn.call(ot,yn)&&!Jt.hasOwnProperty(yn)&&(en[yn]=ot[yn]);if(pe&&pe.defaultProps){var Nr=pe.defaultProps;for(yn in Nr)en[yn]===void 0&&(en[yn]=Nr[yn])}if(En||Xr){var Tn=typeof pe=="function"?pe.displayName||pe.name||"Unknown":pe;En&&fr(en,Tn),Xr&&xr(en,Tn)}return Rr(pe,En,Xr,rn,jt,at.current,en)}}var Fr=je.ReactCurrentOwner,_e=je.ReactDebugCurrentFrame;function K(pe){if(pe){var ot=pe._owner,yt=oi(pe.type,pe._source,ot?ot.type:null);_e.setExtraStackFrame(yt)}else _e.setExtraStackFrame(null)}var ee;ee=!1;function ye(pe){return typeof pe=="object"&&pe!==null&&pe.$$typeof===y}function Se(){{if(Fr.current){var pe=et(Fr.current.type);if(pe)return`

Check the render method of \``+pe+"`."}return""}}function ze(pe){return""}var $e={};function Ge(pe){{var ot=Se();if(!ot){var yt=typeof pe=="string"?pe:pe.displayName||pe.name;yt&&(ot=`

Check the top-level render call using <`+yt+">.")}return ot}}function Le(pe,ot){{if(!pe._store||pe._store.validated||pe.key!=null)return;pe._store.validated=!0;var yt=Ge(ot);if($e[yt])return;$e[yt]=!0;var jt="";pe&&pe._owner&&pe._owner!==Fr.current&&(jt=" It was passed a child from "+et(pe._owner.type)+"."),K(pe),Ne('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',yt,jt),K(null)}}function Ye(pe,ot){{if(typeof pe!="object")return;if(Wi(pe))for(var yt=0;yt<pe.length;yt++){var jt=pe[yt];ye(jt)&&Le(jt,ot)}else if(ye(pe))pe._store&&(pe._store.validated=!0);else if(pe){var rn=qe(pe);if(typeof rn=="function"&&rn!==pe.entries)for(var yn=rn.call(pe),en;!(en=yn.next()).done;)ye(en.value)&&Le(en.value,ot)}}}function zt(pe){{var ot=pe.type;if(ot==null||typeof ot=="string")return;var yt;if(typeof ot=="function")yt=ot.propTypes;else if(typeof ot=="object"&&(ot.$$typeof===s||ot.$$typeof===H))yt=ot.propTypes;else return;if(yt){var jt=et(ot);Kr(yt,pe.props,"prop",jt,pe)}else if(ot.PropTypes!==void 0&&!ee){ee=!0;var rn=et(ot);Ne("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",rn||"Unknown")}typeof ot.getDefaultProps=="function"&&!ot.getDefaultProps.isReactClassApproved&&Ne("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Gt(pe){{for(var ot=Object.keys(pe.props),yt=0;yt<ot.length;yt++){var jt=ot[yt];if(jt!=="children"&&jt!=="key"){K(pe),Ne("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",jt),K(null);break}}pe.ref!==null&&(K(pe),Ne("Invalid attribute `ref` supplied to `React.Fragment`."),K(null))}}var kt={};function Ln(pe,ot,yt,jt,rn,yn){{var en=ut(pe);if(!en){var En="";(pe===void 0||typeof pe=="object"&&pe!==null&&Object.keys(pe).length===0)&&(En+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Xr=ze();Xr?En+=Xr:En+=Se();var Nr;pe===null?Nr="null":Wi(pe)?Nr="array":pe!==void 0&&pe.$$typeof===y?(Nr="<"+(et(pe.type)||"Unknown")+" />",En=" Did you accidentally export a JSX literal instead of a component?"):Nr=typeof pe,Ne("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",Nr,En)}var Tn=Jr(pe,ot,yt,rn,yn);if(Tn==null)return Tn;if(en){var $r=ot.children;if($r!==void 0)if(jt)if(Wi($r)){for(var Ea=0;Ea<$r.length;Ea++)Ye($r[Ea],pe);Object.freeze&&Object.freeze($r)}else Ne("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ye($r,pe)}if(Wn.call(ot,"key")){var Ua=et(pe),Yi=Object.keys(ot).filter(function(Xo){return Xo!=="key"}),Qi=Yi.length>0?"{key: someKey, "+Yi.join(": ..., ")+": ...}":"{key: someKey}";if(!kt[Ua+Qi]){var nr=Yi.length>0?"{"+Yi.join(": ..., ")+": ...}":"{}";Ne(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Qi,Ua,nr,Ua),kt[Ua+Qi]=!0}}return pe===E?Gt(Tn):zt(Tn),Tn}}function jn(pe,ot,yt){return Ln(pe,ot,yt,!0)}function xe(pe,ot,yt){return Ln(pe,ot,yt,!1)}var dt=xe,Dt=jn;P0.Fragment=E,P0.jsx=dt,P0.jsxs=Dt})();ck.exports=P0;var ii=ck.exports;const uO={};function cO(c,y){const x=uO,E=typeof x.includeImageAlt=="boolean"?x.includeImageAlt:!0,A=typeof x.includeHtml=="boolean"?x.includeHtml:!0;return hk(c,E,A)}function hk(c,y,x){if(hO(c)){if("value"in c)return c.type==="html"&&!x?"":c.value;if(y&&"alt"in c&&c.alt)return c.alt;if("children"in c)return RM(c.children,y,x)}return Array.isArray(c)?RM(c,y,x):""}function RM(c,y,x){const E=[];let A=-1;for(;++A<c.length;)E[A]=hk(c[A],y,x);return E.join("")}function hO(c){return!!(c&&typeof c=="object")}const IM=document.createElement("i");function gS(c){const y="&"+c+";";IM.innerHTML=y;const x=IM.textContent;return x.charCodeAt(x.length-1)===59&&c!=="semi"||x===y?!1:x}const ie={carriageReturn:-5,lineFeed:-4,carriageReturnLineFeed:-3,horizontalTab:-2,virtualSpace:-1,eof:null,nul:0,soh:1,stx:2,etx:3,eot:4,enq:5,ack:6,bel:7,bs:8,ht:9,lf:10,vt:11,ff:12,cr:13,so:14,si:15,dle:16,dc1:17,dc2:18,dc3:19,dc4:20,nak:21,syn:22,etb:23,can:24,em:25,sub:26,esc:27,fs:28,gs:29,rs:30,us:31,space:32,exclamationMark:33,quotationMark:34,numberSign:35,dollarSign:36,percentSign:37,ampersand:38,apostrophe:39,leftParenthesis:40,rightParenthesis:41,asterisk:42,plusSign:43,comma:44,dash:45,dot:46,slash:47,digit0:48,digit1:49,digit2:50,digit3:51,digit4:52,digit5:53,digit6:54,digit7:55,digit8:56,digit9:57,colon:58,semicolon:59,lessThan:60,equalsTo:61,greaterThan:62,questionMark:63,atSign:64,uppercaseA:65,uppercaseB:66,uppercaseC:67,uppercaseD:68,uppercaseE:69,uppercaseF:70,uppercaseG:71,uppercaseH:72,uppercaseI:73,uppercaseJ:74,uppercaseK:75,uppercaseL:76,uppercaseM:77,uppercaseN:78,uppercaseO:79,uppercaseP:80,uppercaseQ:81,uppercaseR:82,uppercaseS:83,uppercaseT:84,uppercaseU:85,uppercaseV:86,uppercaseW:87,uppercaseX:88,uppercaseY:89,uppercaseZ:90,leftSquareBracket:91,backslash:92,rightSquareBracket:93,caret:94,underscore:95,graveAccent:96,lowercaseA:97,lowercaseB:98,lowercaseC:99,lowercaseD:100,lowercaseE:101,lowercaseF:102,lowercaseG:103,lowercaseH:104,lowercaseI:105,lowercaseJ:106,lowercaseK:107,lowercaseL:108,lowercaseM:109,lowercaseN:110,lowercaseO:111,lowercaseP:112,lowercaseQ:113,lowercaseR:114,lowercaseS:115,lowercaseT:116,lowercaseU:117,lowercaseV:118,lowercaseW:119,lowercaseX:120,lowercaseY:121,lowercaseZ:122,leftCurlyBrace:123,verticalBar:124,rightCurlyBrace:125,tilde:126,del:127,byteOrderMarker:65279,replacementCharacter:65533},wn={attentionSideAfter:2,attentionSideBefore:1,atxHeadingOpeningFenceSizeMax:6,autolinkDomainSizeMax:63,autolinkSchemeSizeMax:32,cdataOpeningString:"CDATA[",characterGroupPunctuation:2,characterGroupWhitespace:1,characterReferenceDecimalSizeMax:7,characterReferenceHexadecimalSizeMax:6,characterReferenceNamedSizeMax:31,codeFencedSequenceSizeMin:3,contentTypeContent:"content",contentTypeDocument:"document",contentTypeFlow:"flow",contentTypeString:"string",contentTypeText:"text",hardBreakPrefixSizeMin:2,htmlBasic:6,htmlCdata:5,htmlComment:2,htmlComplete:7,htmlDeclaration:4,htmlInstruction:3,htmlRawSizeMax:8,htmlRaw:1,linkResourceDestinationBalanceMax:32,linkReferenceSizeMax:999,listItemValueSizeMax:10,numericBaseDecimal:10,numericBaseHexadecimal:16,tabSize:4,thematicBreakMarkerCountMin:3,v8MaxSafeChunkSize:1e4},re={data:"data",whitespace:"whitespace",lineEnding:"lineEnding",lineEndingBlank:"lineEndingBlank",linePrefix:"linePrefix",lineSuffix:"lineSuffix",atxHeading:"atxHeading",atxHeadingSequence:"atxHeadingSequence",atxHeadingText:"atxHeadingText",autolink:"autolink",autolinkEmail:"autolinkEmail",autolinkMarker:"autolinkMarker",autolinkProtocol:"autolinkProtocol",characterEscape:"characterEscape",characterEscapeValue:"characterEscapeValue",characterReference:"characterReference",characterReferenceMarker:"characterReferenceMarker",characterReferenceMarkerNumeric:"characterReferenceMarkerNumeric",characterReferenceMarkerHexadecimal:"characterReferenceMarkerHexadecimal",characterReferenceValue:"characterReferenceValue",codeFenced:"codeFenced",codeFencedFence:"codeFencedFence",codeFencedFenceSequence:"codeFencedFenceSequence",codeFencedFenceInfo:"codeFencedFenceInfo",codeFencedFenceMeta:"codeFencedFenceMeta",codeFlowValue:"codeFlowValue",codeIndented:"codeIndented",codeText:"codeText",codeTextData:"codeTextData",codeTextPadding:"codeTextPadding",codeTextSequence:"codeTextSequence",content:"content",definition:"definition",definitionDestination:"definitionDestination",definitionDestinationLiteral:"definitionDestinationLiteral",definitionDestinationLiteralMarker:"definitionDestinationLiteralMarker",definitionDestinationRaw:"definitionDestinationRaw",definitionDestinationString:"definitionDestinationString",definitionLabel:"definitionLabel",definitionLabelMarker:"definitionLabelMarker",definitionLabelString:"definitionLabelString",definitionMarker:"definitionMarker",definitionTitle:"definitionTitle",definitionTitleMarker:"definitionTitleMarker",definitionTitleString:"definitionTitleString",emphasis:"emphasis",emphasisSequence:"emphasisSequence",emphasisText:"emphasisText",escapeMarker:"escapeMarker",hardBreakEscape:"hardBreakEscape",hardBreakTrailing:"hardBreakTrailing",htmlFlow:"htmlFlow",htmlFlowData:"htmlFlowData",htmlText:"htmlText",htmlTextData:"htmlTextData",image:"image",label:"label",labelText:"labelText",labelLink:"labelLink",labelImage:"labelImage",labelMarker:"labelMarker",labelImageMarker:"labelImageMarker",labelEnd:"labelEnd",link:"link",paragraph:"paragraph",reference:"reference",referenceMarker:"referenceMarker",referenceString:"referenceString",resource:"resource",resourceDestination:"resourceDestination",resourceDestinationLiteral:"resourceDestinationLiteral",resourceDestinationLiteralMarker:"resourceDestinationLiteralMarker",resourceDestinationRaw:"resourceDestinationRaw",resourceDestinationString:"resourceDestinationString",resourceMarker:"resourceMarker",resourceTitle:"resourceTitle",resourceTitleMarker:"resourceTitleMarker",resourceTitleString:"resourceTitleString",setextHeading:"setextHeading",setextHeadingText:"setextHeadingText",setextHeadingLine:"setextHeadingLine",setextHeadingLineSequence:"setextHeadingLineSequence",strong:"strong",strongSequence:"strongSequence",strongText:"strongText",thematicBreak:"thematicBreak",thematicBreakSequence:"thematicBreakSequence",blockQuote:"blockQuote",blockQuotePrefix:"blockQuotePrefix",blockQuoteMarker:"blockQuoteMarker",blockQuotePrefixWhitespace:"blockQuotePrefixWhitespace",listOrdered:"listOrdered",listUnordered:"listUnordered",listItemIndent:"listItemIndent",listItemMarker:"listItemMarker",listItemPrefix:"listItemPrefix",listItemPrefixWhitespace:"listItemPrefixWhitespace",listItemValue:"listItemValue",chunkDocument:"chunkDocument",chunkContent:"chunkContent",chunkFlow:"chunkFlow",chunkText:"chunkText",chunkString:"chunkString"},eh={ht:"	",lf:`
`,cr:"\r",space:" ",exclamationMark:"!",quotationMark:'"',numberSign:"#",dollarSign:"$",percentSign:"%",ampersand:"&",apostrophe:"'",leftParenthesis:"(",rightParenthesis:")",asterisk:"*",plusSign:"+",comma:",",dash:"-",dot:".",slash:"/",digit0:"0",digit1:"1",digit2:"2",digit3:"3",digit4:"4",digit5:"5",digit6:"6",digit7:"7",digit8:"8",digit9:"9",colon:":",semicolon:";",lessThan:"<",equalsTo:"=",greaterThan:">",questionMark:"?",atSign:"@",uppercaseA:"A",uppercaseB:"B",uppercaseC:"C",uppercaseD:"D",uppercaseE:"E",uppercaseF:"F",uppercaseG:"G",uppercaseH:"H",uppercaseI:"I",uppercaseJ:"J",uppercaseK:"K",uppercaseL:"L",uppercaseM:"M",uppercaseN:"N",uppercaseO:"O",uppercaseP:"P",uppercaseQ:"Q",uppercaseR:"R",uppercaseS:"S",uppercaseT:"T",uppercaseU:"U",uppercaseV:"V",uppercaseW:"W",uppercaseX:"X",uppercaseY:"Y",uppercaseZ:"Z",leftSquareBracket:"[",backslash:"\\",rightSquareBracket:"]",caret:"^",underscore:"_",graveAccent:"`",lowercaseA:"a",lowercaseB:"b",lowercaseC:"c",lowercaseD:"d",lowercaseE:"e",lowercaseF:"f",lowercaseG:"g",lowercaseH:"h",lowercaseI:"i",lowercaseJ:"j",lowercaseK:"k",lowercaseL:"l",lowercaseM:"m",lowercaseN:"n",lowercaseO:"o",lowercaseP:"p",lowercaseQ:"q",lowercaseR:"r",lowercaseS:"s",lowercaseT:"t",lowercaseU:"u",lowercaseV:"v",lowercaseW:"w",lowercaseX:"x",lowercaseY:"y",lowercaseZ:"z",leftCurlyBrace:"{",verticalBar:"|",rightCurlyBrace:"}",tilde:"~",replacementCharacter:""};function ih(c,y,x,E){const A=c.length;let R=0,C;if(y<0?y=-y>A?0:A+y:y=y>A?A:y,x=x>0?x:0,E.length<wn.v8MaxSafeChunkSize)C=Array.from(E),C.unshift(y,x),c.splice(...C);else for(x&&c.splice(y,x);R<E.length;)C=E.slice(R,R+wn.v8MaxSafeChunkSize),C.unshift(y,0),c.splice(...C),R+=wn.v8MaxSafeChunkSize,y+=wn.v8MaxSafeChunkSize}function iu(c,y){return c.length>0?(ih(c,c.length,0,y),c):y}const LM={}.hasOwnProperty;function fO(c){const y={};let x=-1;for(;++x<c.length;)dO(y,c[x]);return y}function dO(c,y){let x;for(x in y){const A=(LM.call(c,x)?c[x]:void 0)||(c[x]={}),R=y[x];let C;if(R)for(C in R){LM.call(A,C)||(A[C]=[]);const U=R[C];pO(A[C],Array.isArray(U)?U:U?[U]:[])}}}function pO(c,y){let x=-1;const E=[];for(;++x<y.length;)(y[x].add==="after"?c:E).push(y[x]);ih(c,0,0,E)}function fk(c,y){const x=Number.parseInt(c,y);return x<ie.ht||x===ie.vt||x>ie.cr&&x<ie.space||x>ie.tilde&&x<160||x>55295&&x<57344||x>64975&&x<65008||(x&65535)===65535||(x&65535)===65534||x>1114111?eh.replacementCharacter:String.fromCodePoint(x)}function Vg(c){return c.replace(/[\t\n\r ]+/g,eh.space).replace(/^ | $/g,"").toLowerCase().toUpperCase()}const th=Ad(/[A-Za-z]/),Sl=Ad(/[\dA-Za-z]/),mO=Ad(/[#-'*+\--9=?A-Z^-~]/);function ZE(c){return c!==null&&(c<ie.space||c===ie.del)}const XE=Ad(/\d/),gO=Ad(/[\dA-Fa-f]/),yO=Ad(/[!-/:-@[-`{-~]/);function Bn(c){return c!==null&&c<ie.horizontalTab}function Xs(c){return c!==null&&(c<ie.nul||c===ie.space)}function Si(c){return c===ie.horizontalTab||c===ie.virtualSpace||c===ie.space}const vO=Ad(new RegExp("\\p{P}|\\p{S}","u")),_O=Ad(/\s/);function Ad(c){return y;function y(x){return x!==null&&x>-1&&c.test(String.fromCharCode(x))}}function Xg(c){const y=[];let x=-1,E=0,A=0;for(;++x<c.length;){const R=c.charCodeAt(x);let C="";if(R===ie.percentSign&&Sl(c.charCodeAt(x+1))&&Sl(c.charCodeAt(x+2)))A=2;else if(R<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(R))||(C=String.fromCharCode(R));else if(R>55295&&R<57344){const U=c.charCodeAt(x+1);R<56320&&U>56319&&U<57344?(C=String.fromCharCode(R,U),A=1):C=eh.replacementCharacter}else C=String.fromCharCode(R);C&&(y.push(c.slice(E,x),encodeURIComponent(C)),E=x+A+1,C=""),A&&(x+=A,A=0)}return y.join("")+c.slice(E)}function ia(c,y,x,E){const A=E?E-1:Number.POSITIVE_INFINITY;let R=0;return C;function C(s){return Si(s)?(c.enter(x),U(s)):y(s)}function U(s){return Si(s)&&R++<A?(c.consume(s),U):(c.exit(x),y(s))}}const xO={tokenize:bO};function bO(c){const y=c.attempt(this.parser.constructs.contentInitial,E,A);let x;return y;function E(U){if(Ve(U===ie.eof||Bn(U),"expected eol or eof"),U===ie.eof){c.consume(U);return}return c.enter(re.lineEnding),c.consume(U),c.exit(re.lineEnding),ia(c,y,re.linePrefix)}function A(U){return Ve(U!==ie.eof&&!Bn(U),"expected anything other than a line ending or EOF"),c.enter(re.paragraph),R(U)}function R(U){const s=c.enter(re.chunkText,{contentType:wn.contentTypeText,previous:x});return x&&(x.next=s),x=s,C(U)}function C(U){if(U===ie.eof){c.exit(re.chunkText),c.exit(re.paragraph),c.consume(U);return}return Bn(U)?(c.consume(U),c.exit(re.chunkText),R):(c.consume(U),C)}}const wO={tokenize:EO},zM={tokenize:SO};function EO(c){const y=this,x=[];let E=0,A,R,C;return U;function U(Xe){if(E<x.length){const Et=x[E];return y.containerState=Et[1],Ve(Et[0].continuation,"expected `continuation` to be defined on container construct"),c.attempt(Et[0].continuation,s,N)(Xe)}return N(Xe)}function s(Xe){if(Ve(y.containerState,"expected `containerState` to be defined after continuation"),E++,y.containerState._closeFlow){y.containerState._closeFlow=void 0,A&&Ne();const Et=y.events.length;let St=Et,Qe;for(;St--;)if(y.events[St][0]==="exit"&&y.events[St][1].type===re.chunkFlow){Qe=y.events[St][1].end;break}Ve(Qe,"could not find previous flow chunk"),je(E);let Nt=Et;for(;Nt<y.events.length;)y.events[Nt][1].end={...Qe},Nt++;return ih(y.events,St+1,0,y.events.slice(Et)),y.events.length=Nt,N(Xe)}return U(Xe)}function N(Xe){if(E===x.length){if(!A)return X(Xe);if(A.currentConstruct&&A.currentConstruct.concrete)return Pe(Xe);y.interrupt=!!(A.currentConstruct&&!A._gfmTableDynamicInterruptHack)}return y.containerState={},c.check(zM,G,H)(Xe)}function G(Xe){return A&&Ne(),je(E),X(Xe)}function H(Xe){return y.parser.lazy[y.now().line]=E!==x.length,C=y.now().offset,Pe(Xe)}function X(Xe){return y.containerState={},c.attempt(zM,J,Pe)(Xe)}function J(Xe){return Ve(y.currentConstruct,"expected `currentConstruct` to be defined on tokenizer"),Ve(y.containerState,"expected `containerState` to be defined on tokenizer"),E++,x.push([y.currentConstruct,y.containerState]),X(Xe)}function Pe(Xe){if(Xe===ie.eof){A&&Ne(),je(0),c.consume(Xe);return}return A=A||y.parser.flow(y.now()),c.enter(re.chunkFlow,{_tokenizer:A,contentType:wn.contentTypeFlow,previous:R}),Re(Xe)}function Re(Xe){if(Xe===ie.eof){qe(c.exit(re.chunkFlow),!0),je(0),c.consume(Xe);return}return Bn(Xe)?(c.consume(Xe),qe(c.exit(re.chunkFlow)),E=0,y.interrupt=void 0,U):(c.consume(Xe),Re)}function qe(Xe,Et){Ve(A,"expected `childFlow` to be defined when continuing");const St=y.sliceStream(Xe);if(Et&&St.push(null),Xe.previous=R,R&&(R.next=Xe),R=Xe,A.defineSkip(Xe.start),A.write(St),y.parser.lazy[Xe.start.line]){let Qe=A.events.length;for(;Qe--;)if(A.events[Qe][1].start.offset<C&&(!A.events[Qe][1].end||A.events[Qe][1].end.offset>C))return;const Nt=y.events.length;let Mn=Nt,dn,ut;for(;Mn--;)if(y.events[Mn][0]==="exit"&&y.events[Mn][1].type===re.chunkFlow){if(dn){ut=y.events[Mn][1].end;break}dn=!0}for(Ve(ut,"could not find previous flow chunk"),je(E),Qe=Nt;Qe<y.events.length;)y.events[Qe][1].end={...ut},Qe++;ih(y.events,Mn+1,0,y.events.slice(Nt)),y.events.length=Qe}}function je(Xe){let Et=x.length;for(;Et-- >Xe;){const St=x[Et];y.containerState=St[1],Ve(St[0].exit,"expected `exit` to be defined on container construct"),St[0].exit.call(y,c)}x.length=Xe}function Ne(){Ve(y.containerState,"expected `containerState` to be defined when closing flow"),Ve(A,"expected `childFlow` to be defined when closing it"),A.write([ie.eof]),R=void 0,A=void 0,y.containerState._closeFlow=void 0}}function SO(c,y,x){return Ve(this.parser.constructs.disable.null,"expected `disable.null` to be populated"),ia(c,c.attempt(this.parser.constructs.document,y,x),re.linePrefix,this.parser.constructs.disable.null.includes("codeIndented")?void 0:wn.tabSize)}function PM(c){if(c===ie.eof||Xs(c)||_O(c))return wn.characterGroupWhitespace;if(vO(c))return wn.characterGroupPunctuation}function yS(c,y,x){const E=[];let A=-1;for(;++A<c.length;){const R=c[A].resolveAll;R&&!E.includes(R)&&(y=R(y,x),E.push(R))}return y}const YE={name:"attention",resolveAll:TO,tokenize:CO};function TO(c,y){let x=-1,E,A,R,C,U,s,N,G;for(;++x<c.length;)if(c[x][0]==="enter"&&c[x][1].type==="attentionSequence"&&c[x][1]._close){for(E=x;E--;)if(c[E][0]==="exit"&&c[E][1].type==="attentionSequence"&&c[E][1]._open&&y.sliceSerialize(c[E][1]).charCodeAt(0)===y.sliceSerialize(c[x][1]).charCodeAt(0)){if((c[E][1]._close||c[x][1]._open)&&(c[x][1].end.offset-c[x][1].start.offset)%3&&!((c[E][1].end.offset-c[E][1].start.offset+c[x][1].end.offset-c[x][1].start.offset)%3))continue;s=c[E][1].end.offset-c[E][1].start.offset>1&&c[x][1].end.offset-c[x][1].start.offset>1?2:1;const H={...c[E][1].end},X={...c[x][1].start};OM(H,-s),OM(X,s),C={type:s>1?re.strongSequence:re.emphasisSequence,start:H,end:{...c[E][1].end}},U={type:s>1?re.strongSequence:re.emphasisSequence,start:{...c[x][1].start},end:X},R={type:s>1?re.strongText:re.emphasisText,start:{...c[E][1].end},end:{...c[x][1].start}},A={type:s>1?re.strong:re.emphasis,start:{...C.start},end:{...U.end}},c[E][1].end={...C.start},c[x][1].start={...U.end},N=[],c[E][1].end.offset-c[E][1].start.offset&&(N=iu(N,[["enter",c[E][1],y],["exit",c[E][1],y]])),N=iu(N,[["enter",A,y],["enter",C,y],["exit",C,y],["enter",R,y]]),Ve(y.parser.constructs.insideSpan.null,"expected `insideSpan` to be populated"),N=iu(N,yS(y.parser.constructs.insideSpan.null,c.slice(E+1,x),y)),N=iu(N,[["exit",R,y],["enter",U,y],["exit",U,y],["exit",A,y]]),c[x][1].end.offset-c[x][1].start.offset?(G=2,N=iu(N,[["enter",c[x][1],y],["exit",c[x][1],y]])):G=0,ih(c,E-1,x-E+3,N),x=E+N.length-G-2;break}}for(x=-1;++x<c.length;)c[x][1].type==="attentionSequence"&&(c[x][1].type="data");return c}function CO(c,y){const x=this.parser.constructs.attentionMarkers.null,E=this.previous,A=PM(E);let R;return C;function C(s){return Ve(s===ie.asterisk||s===ie.underscore,"expected asterisk or underscore"),R=s,c.enter("attentionSequence"),U(s)}function U(s){if(s===R)return c.consume(s),U;const N=c.exit("attentionSequence"),G=PM(s);Ve(x,"expected `attentionMarkers` to be populated");const H=!G||G===wn.characterGroupPunctuation&&A||x.includes(s),X=!A||A===wn.characterGroupPunctuation&&G||x.includes(E);return N._open=!!(R===ie.asterisk?H:H&&(A||!X)),N._close=!!(R===ie.asterisk?X:X&&(G||!H)),y(s)}}function OM(c,y){c.column+=y,c.offset+=y,c._bufferIndex+=y}const MO={name:"autolink",tokenize:AO};function AO(c,y,x){let E=0;return A;function A(J){return Ve(J===ie.lessThan,"expected `<`"),c.enter(re.autolink),c.enter(re.autolinkMarker),c.consume(J),c.exit(re.autolinkMarker),c.enter(re.autolinkProtocol),R}function R(J){return th(J)?(c.consume(J),C):J===ie.atSign?x(J):N(J)}function C(J){return J===ie.plusSign||J===ie.dash||J===ie.dot||Sl(J)?(E=1,U(J)):N(J)}function U(J){return J===ie.colon?(c.consume(J),E=0,s):(J===ie.plusSign||J===ie.dash||J===ie.dot||Sl(J))&&E++<wn.autolinkSchemeSizeMax?(c.consume(J),U):(E=0,N(J))}function s(J){return J===ie.greaterThan?(c.exit(re.autolinkProtocol),c.enter(re.autolinkMarker),c.consume(J),c.exit(re.autolinkMarker),c.exit(re.autolink),y):J===ie.eof||J===ie.space||J===ie.lessThan||ZE(J)?x(J):(c.consume(J),s)}function N(J){return J===ie.atSign?(c.consume(J),G):mO(J)?(c.consume(J),N):x(J)}function G(J){return Sl(J)?H(J):x(J)}function H(J){return J===ie.dot?(c.consume(J),E=0,G):J===ie.greaterThan?(c.exit(re.autolinkProtocol).type=re.autolinkEmail,c.enter(re.autolinkMarker),c.consume(J),c.exit(re.autolinkMarker),c.exit(re.autolink),y):X(J)}function X(J){if((J===ie.dash||Sl(J))&&E++<wn.autolinkDomainSizeMax){const Pe=J===ie.dash?X:H;return c.consume(J),Pe}return x(J)}}const X0={partial:!0,tokenize:kO};function kO(c,y,x){return E;function E(R){return Si(R)?ia(c,A,re.linePrefix)(R):A(R)}function A(R){return R===ie.eof||Bn(R)?y(R):x(R)}}const dk={continuation:{tokenize:RO},exit:IO,name:"blockQuote",tokenize:DO};function DO(c,y,x){const E=this;return A;function A(C){if(C===ie.greaterThan){const U=E.containerState;return Ve(U,"expected `containerState` to be defined in container"),U.open||(c.enter(re.blockQuote,{_container:!0}),U.open=!0),c.enter(re.blockQuotePrefix),c.enter(re.blockQuoteMarker),c.consume(C),c.exit(re.blockQuoteMarker),R}return x(C)}function R(C){return Si(C)?(c.enter(re.blockQuotePrefixWhitespace),c.consume(C),c.exit(re.blockQuotePrefixWhitespace),c.exit(re.blockQuotePrefix),y):(c.exit(re.blockQuotePrefix),y(C))}}function RO(c,y,x){const E=this;return A;function A(C){return Si(C)?(Ve(E.parser.constructs.disable.null,"expected `disable.null` to be populated"),ia(c,R,re.linePrefix,E.parser.constructs.disable.null.includes("codeIndented")?void 0:wn.tabSize)(C)):R(C)}function R(C){return c.attempt(dk,y,x)(C)}}function IO(c){c.exit(re.blockQuote)}const pk={name:"characterEscape",tokenize:LO};function LO(c,y,x){return E;function E(R){return Ve(R===ie.backslash,"expected `\\`"),c.enter(re.characterEscape),c.enter(re.escapeMarker),c.consume(R),c.exit(re.escapeMarker),A}function A(R){return yO(R)?(c.enter(re.characterEscapeValue),c.consume(R),c.exit(re.characterEscapeValue),c.exit(re.characterEscape),y):x(R)}}const mk={name:"characterReference",tokenize:zO};function zO(c,y,x){const E=this;let A=0,R,C;return U;function U(H){return Ve(H===ie.ampersand,"expected `&`"),c.enter(re.characterReference),c.enter(re.characterReferenceMarker),c.consume(H),c.exit(re.characterReferenceMarker),s}function s(H){return H===ie.numberSign?(c.enter(re.characterReferenceMarkerNumeric),c.consume(H),c.exit(re.characterReferenceMarkerNumeric),N):(c.enter(re.characterReferenceValue),R=wn.characterReferenceNamedSizeMax,C=Sl,G(H))}function N(H){return H===ie.uppercaseX||H===ie.lowercaseX?(c.enter(re.characterReferenceMarkerHexadecimal),c.consume(H),c.exit(re.characterReferenceMarkerHexadecimal),c.enter(re.characterReferenceValue),R=wn.characterReferenceHexadecimalSizeMax,C=gO,G):(c.enter(re.characterReferenceValue),R=wn.characterReferenceDecimalSizeMax,C=XE,G(H))}function G(H){if(H===ie.semicolon&&A){const X=c.exit(re.characterReferenceValue);return C===Sl&&!gS(E.sliceSerialize(X))?x(H):(c.enter(re.characterReferenceMarker),c.consume(H),c.exit(re.characterReferenceMarker),c.exit(re.characterReference),y)}return C(H)&&A++<R?(c.consume(H),G):x(H)}}const BM={partial:!0,tokenize:OO},FM={concrete:!0,name:"codeFenced",tokenize:PO};function PO(c,y,x){const E=this,A={partial:!0,tokenize:St};let R=0,C=0,U;return s;function s(Qe){return N(Qe)}function N(Qe){Ve(Qe===ie.graveAccent||Qe===ie.tilde,"expected `` ` `` or `~`");const Nt=E.events[E.events.length-1];return R=Nt&&Nt[1].type===re.linePrefix?Nt[2].sliceSerialize(Nt[1],!0).length:0,U=Qe,c.enter(re.codeFenced),c.enter(re.codeFencedFence),c.enter(re.codeFencedFenceSequence),G(Qe)}function G(Qe){return Qe===U?(C++,c.consume(Qe),G):C<wn.codeFencedSequenceSizeMin?x(Qe):(c.exit(re.codeFencedFenceSequence),Si(Qe)?ia(c,H,re.whitespace)(Qe):H(Qe))}function H(Qe){return Qe===ie.eof||Bn(Qe)?(c.exit(re.codeFencedFence),E.interrupt?y(Qe):c.check(BM,Re,Et)(Qe)):(c.enter(re.codeFencedFenceInfo),c.enter(re.chunkString,{contentType:wn.contentTypeString}),X(Qe))}function X(Qe){return Qe===ie.eof||Bn(Qe)?(c.exit(re.chunkString),c.exit(re.codeFencedFenceInfo),H(Qe)):Si(Qe)?(c.exit(re.chunkString),c.exit(re.codeFencedFenceInfo),ia(c,J,re.whitespace)(Qe)):Qe===ie.graveAccent&&Qe===U?x(Qe):(c.consume(Qe),X)}function J(Qe){return Qe===ie.eof||Bn(Qe)?H(Qe):(c.enter(re.codeFencedFenceMeta),c.enter(re.chunkString,{contentType:wn.contentTypeString}),Pe(Qe))}function Pe(Qe){return Qe===ie.eof||Bn(Qe)?(c.exit(re.chunkString),c.exit(re.codeFencedFenceMeta),H(Qe)):Qe===ie.graveAccent&&Qe===U?x(Qe):(c.consume(Qe),Pe)}function Re(Qe){return Ve(Bn(Qe),"expected eol"),c.attempt(A,Et,qe)(Qe)}function qe(Qe){return Ve(Bn(Qe),"expected eol"),c.enter(re.lineEnding),c.consume(Qe),c.exit(re.lineEnding),je}function je(Qe){return R>0&&Si(Qe)?ia(c,Ne,re.linePrefix,R+1)(Qe):Ne(Qe)}function Ne(Qe){return Qe===ie.eof||Bn(Qe)?c.check(BM,Re,Et)(Qe):(c.enter(re.codeFlowValue),Xe(Qe))}function Xe(Qe){return Qe===ie.eof||Bn(Qe)?(c.exit(re.codeFlowValue),Ne(Qe)):(c.consume(Qe),Xe)}function Et(Qe){return c.exit(re.codeFenced),y(Qe)}function St(Qe,Nt,Mn){let dn=0;return ut;function ut(un){return Ve(Bn(un),"expected eol"),Qe.enter(re.lineEnding),Qe.consume(un),Qe.exit(re.lineEnding),qn}function qn(un){return Ve(E.parser.constructs.disable.null,"expected `disable.null` to be populated"),Qe.enter(re.codeFencedFence),Si(un)?ia(Qe,Jn,re.linePrefix,E.parser.constructs.disable.null.includes("codeIndented")?void 0:wn.tabSize)(un):Jn(un)}function Jn(un){return un===U?(Qe.enter(re.codeFencedFenceSequence),et(un)):Mn(un)}function et(un){return un===U?(dn++,Qe.consume(un),et):dn>=C?(Qe.exit(re.codeFencedFenceSequence),Si(un)?ia(Qe,$t,re.whitespace)(un):$t(un)):Mn(un)}function $t(un){return un===ie.eof||Bn(un)?(Qe.exit(re.codeFencedFence),Nt(un)):Mn(un)}}}function OO(c,y,x){const E=this;return A;function A(C){return C===ie.eof?x(C):(Ve(Bn(C),"expected eol"),c.enter(re.lineEnding),c.consume(C),c.exit(re.lineEnding),R)}function R(C){return E.parser.lazy[E.now().line]?x(C):y(C)}}const bE={name:"codeIndented",tokenize:FO},BO={partial:!0,tokenize:NO};function FO(c,y,x){const E=this;return A;function A(N){return Ve(Si(N)),c.enter(re.codeIndented),ia(c,R,re.linePrefix,wn.tabSize+1)(N)}function R(N){const G=E.events[E.events.length-1];return G&&G[1].type===re.linePrefix&&G[2].sliceSerialize(G[1],!0).length>=wn.tabSize?C(N):x(N)}function C(N){return N===ie.eof?s(N):Bn(N)?c.attempt(BO,C,s)(N):(c.enter(re.codeFlowValue),U(N))}function U(N){return N===ie.eof||Bn(N)?(c.exit(re.codeFlowValue),C(N)):(c.consume(N),U)}function s(N){return c.exit(re.codeIndented),y(N)}}function NO(c,y,x){const E=this;return A;function A(C){return E.parser.lazy[E.now().line]?x(C):Bn(C)?(c.enter(re.lineEnding),c.consume(C),c.exit(re.lineEnding),A):ia(c,R,re.linePrefix,wn.tabSize+1)(C)}function R(C){const U=E.events[E.events.length-1];return U&&U[1].type===re.linePrefix&&U[2].sliceSerialize(U[1],!0).length>=wn.tabSize?y(C):Bn(C)?A(C):x(C)}}const UO={name:"codeText",previous:gk,resolve:jO,tokenize:VO};function jO(c){let y=c.length-4,x=3,E,A;if((c[x][1].type===re.lineEnding||c[x][1].type==="space")&&(c[y][1].type===re.lineEnding||c[y][1].type==="space")){for(E=x;++E<y;)if(c[E][1].type===re.codeTextData){c[x][1].type=re.codeTextPadding,c[y][1].type=re.codeTextPadding,x+=2,y-=2;break}}for(E=x-1,y++;++E<=y;)A===void 0?E!==y&&c[E][1].type!==re.lineEnding&&(A=E):(E===y||c[E][1].type===re.lineEnding)&&(c[A][1].type=re.codeTextData,E!==A+2&&(c[A][1].end=c[E-1][1].end,c.splice(A+2,E-A-2),y-=E-A-2,E=A+2),A=void 0);return c}function gk(c){return c!==ie.graveAccent||this.events[this.events.length-1][1].type===re.characterEscape}function VO(c,y,x){const E=this;let A=0,R,C;return U;function U(X){return Ve(X===ie.graveAccent,"expected `` ` ``"),Ve(gk.call(E,E.previous),"expected correct previous"),c.enter(re.codeText),c.enter(re.codeTextSequence),s(X)}function s(X){return X===ie.graveAccent?(c.consume(X),A++,s):(c.exit(re.codeTextSequence),N(X))}function N(X){return X===ie.eof?x(X):X===ie.space?(c.enter("space"),c.consume(X),c.exit("space"),N):X===ie.graveAccent?(C=c.enter(re.codeTextSequence),R=0,H(X)):Bn(X)?(c.enter(re.lineEnding),c.consume(X),c.exit(re.lineEnding),N):(c.enter(re.codeTextData),G(X))}function G(X){return X===ie.eof||X===ie.space||X===ie.graveAccent||Bn(X)?(c.exit(re.codeTextData),N(X)):(c.consume(X),G)}function H(X){return X===ie.graveAccent?(c.consume(X),R++,H):R===A?(c.exit(re.codeTextSequence),c.exit(re.codeText),y(X)):(C.type=re.codeTextData,G(X))}}class $O{constructor(y){this.left=y?[...y]:[],this.right=[]}get(y){if(y<0||y>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+y+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return y<this.left.length?this.left[y]:this.right[this.right.length-y+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(y,x){const E=x??Number.POSITIVE_INFINITY;return E<this.left.length?this.left.slice(y,E):y>this.left.length?this.right.slice(this.right.length-E+this.left.length,this.right.length-y+this.left.length).reverse():this.left.slice(y).concat(this.right.slice(this.right.length-E+this.left.length).reverse())}splice(y,x,E){const A=x||0;this.setCursor(Math.trunc(y));const R=this.right.splice(this.right.length-A,Number.POSITIVE_INFINITY);return E&&Qv(this.left,E),R.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(y){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(y)}pushMany(y){this.setCursor(Number.POSITIVE_INFINITY),Qv(this.left,y)}unshift(y){this.setCursor(0),this.right.push(y)}unshiftMany(y){this.setCursor(0),Qv(this.right,y.reverse())}setCursor(y){if(!(y===this.left.length||y>this.left.length&&this.right.length===0||y<0&&this.left.length===0))if(y<this.left.length){const x=this.left.splice(y,Number.POSITIVE_INFINITY);Qv(this.right,x.reverse())}else{const x=this.right.splice(this.left.length+this.right.length-y,Number.POSITIVE_INFINITY);Qv(this.left,x.reverse())}}}function Qv(c,y){let x=0;if(y.length<wn.v8MaxSafeChunkSize)c.push(...y);else for(;x<y.length;)c.push(...y.slice(x,x+wn.v8MaxSafeChunkSize)),x+=wn.v8MaxSafeChunkSize}function yk(c){const y={};let x=-1,E,A,R,C,U,s,N;const G=new $O(c);for(;++x<G.length;){for(;x in y;)x=y[x];if(E=G.get(x),x&&E[1].type===re.chunkFlow&&G.get(x-1)[1].type===re.listItemPrefix&&(Ve(E[1]._tokenizer,"expected `_tokenizer` on subtokens"),s=E[1]._tokenizer.events,R=0,R<s.length&&s[R][1].type===re.lineEndingBlank&&(R+=2),R<s.length&&s[R][1].type===re.content))for(;++R<s.length&&s[R][1].type!==re.content;)s[R][1].type===re.chunkText&&(s[R][1]._isInFirstContentOfListItem=!0,R++);if(E[0]==="enter")E[1].contentType&&(Object.assign(y,GO(G,x)),x=y[x],N=!0);else if(E[1]._container){for(R=x,A=void 0;R--&&(C=G.get(R),C[1].type===re.lineEnding||C[1].type===re.lineEndingBlank);)C[0]==="enter"&&(A&&(G.get(A)[1].type=re.lineEndingBlank),C[1].type=re.lineEnding,A=R);A&&(E[1].end={...G.get(A)[1].start},U=G.slice(A,x),U.unshift(E),G.splice(A,x-A+1,U))}}return ih(c,0,Number.POSITIVE_INFINITY,G.slice(0)),!N}function GO(c,y){const x=c.get(y)[1],E=c.get(y)[2];let A=y-1;const R=[];Ve(x.contentType,"expected `contentType` on subtokens");const C=x._tokenizer||E.parser[x.contentType](x.start),U=C.events,s=[],N={};let G,H,X=-1,J=x,Pe=0,Re=0;const qe=[Re];for(;J;){for(;c.get(++A)[1]!==J;);Ve(!H||J.previous===H,"expected previous to match"),Ve(!H||H.next===J,"expected next to match"),R.push(A),J._tokenizer||(G=E.sliceStream(J),J.next||G.push(ie.eof),H&&C.defineSkip(J.start),J._isInFirstContentOfListItem&&(C._gfmTasklistFirstContentOfListItem=!0),C.write(G),J._isInFirstContentOfListItem&&(C._gfmTasklistFirstContentOfListItem=void 0)),H=J,J=J.next}for(J=x;++X<U.length;)U[X][0]==="exit"&&U[X-1][0]==="enter"&&U[X][1].type===U[X-1][1].type&&U[X][1].start.line!==U[X][1].end.line&&(Ve(J,"expected a current token"),Re=X+1,qe.push(Re),J._tokenizer=void 0,J.previous=void 0,J=J.next);for(C.events=[],J?(J._tokenizer=void 0,J.previous=void 0,Ve(!J.next,"expected no next token")):qe.pop(),X=qe.length;X--;){const je=U.slice(qe[X],qe[X+1]),Ne=R.pop();Ve(Ne!==void 0,"expected a start position when splicing"),s.push([Ne,Ne+je.length-1]),c.splice(Ne,2,je)}for(s.reverse(),X=-1;++X<s.length;)N[Pe+s[X][0]]=Pe+s[X][1],Pe+=s[X][1]-s[X][0]-1;return N}const qO={resolve:WO,tokenize:ZO},HO={partial:!0,tokenize:XO};function WO(c){return yk(c),c}function ZO(c,y){let x;return E;function E(U){return Ve(U!==ie.eof&&!Bn(U),"expected no eof or eol"),c.enter(re.content),x=c.enter(re.chunkContent,{contentType:wn.contentTypeContent}),A(U)}function A(U){return U===ie.eof?R(U):Bn(U)?c.check(HO,C,R)(U):(c.consume(U),A)}function R(U){return c.exit(re.chunkContent),c.exit(re.content),y(U)}function C(U){return Ve(Bn(U),"expected eol"),c.consume(U),c.exit(re.chunkContent),Ve(x,"expected previous token"),x.next=c.enter(re.chunkContent,{contentType:wn.contentTypeContent,previous:x}),x=x.next,A}}function XO(c,y,x){const E=this;return A;function A(C){return Ve(Bn(C),"expected a line ending"),c.exit(re.chunkContent),c.enter(re.lineEnding),c.consume(C),c.exit(re.lineEnding),ia(c,R,re.linePrefix)}function R(C){if(C===ie.eof||Bn(C))return x(C);Ve(E.parser.constructs.disable.null,"expected `disable.null` to be populated");const U=E.events[E.events.length-1];return!E.parser.constructs.disable.null.includes("codeIndented")&&U&&U[1].type===re.linePrefix&&U[2].sliceSerialize(U[1],!0).length>=wn.tabSize?y(C):c.interrupt(E.parser.constructs.flow,x,y)(C)}}function vk(c,y,x,E,A,R,C,U,s){const N=s||Number.POSITIVE_INFINITY;let G=0;return H;function H(je){return je===ie.lessThan?(c.enter(E),c.enter(A),c.enter(R),c.consume(je),c.exit(R),X):je===ie.eof||je===ie.space||je===ie.rightParenthesis||ZE(je)?x(je):(c.enter(E),c.enter(C),c.enter(U),c.enter(re.chunkString,{contentType:wn.contentTypeString}),Re(je))}function X(je){return je===ie.greaterThan?(c.enter(R),c.consume(je),c.exit(R),c.exit(A),c.exit(E),y):(c.enter(U),c.enter(re.chunkString,{contentType:wn.contentTypeString}),J(je))}function J(je){return je===ie.greaterThan?(c.exit(re.chunkString),c.exit(U),X(je)):je===ie.eof||je===ie.lessThan||Bn(je)?x(je):(c.consume(je),je===ie.backslash?Pe:J)}function Pe(je){return je===ie.lessThan||je===ie.greaterThan||je===ie.backslash?(c.consume(je),J):J(je)}function Re(je){return!G&&(je===ie.eof||je===ie.rightParenthesis||Xs(je))?(c.exit(re.chunkString),c.exit(U),c.exit(C),c.exit(E),y(je)):G<N&&je===ie.leftParenthesis?(c.consume(je),G++,Re):je===ie.rightParenthesis?(c.consume(je),G--,Re):je===ie.eof||je===ie.space||je===ie.leftParenthesis||ZE(je)?x(je):(c.consume(je),je===ie.backslash?qe:Re)}function qe(je){return je===ie.leftParenthesis||je===ie.rightParenthesis||je===ie.backslash?(c.consume(je),Re):Re(je)}}function _k(c,y,x,E,A,R){const C=this;let U=0,s;return N;function N(J){return Ve(J===ie.leftSquareBracket,"expected `[`"),c.enter(E),c.enter(A),c.consume(J),c.exit(A),c.enter(R),G}function G(J){return U>wn.linkReferenceSizeMax||J===ie.eof||J===ie.leftSquareBracket||J===ie.rightSquareBracket&&!s||J===ie.caret&&!U&&"_hiddenFootnoteSupport"in C.parser.constructs?x(J):J===ie.rightSquareBracket?(c.exit(R),c.enter(A),c.consume(J),c.exit(A),c.exit(E),y):Bn(J)?(c.enter(re.lineEnding),c.consume(J),c.exit(re.lineEnding),G):(c.enter(re.chunkString,{contentType:wn.contentTypeString}),H(J))}function H(J){return J===ie.eof||J===ie.leftSquareBracket||J===ie.rightSquareBracket||Bn(J)||U++>wn.linkReferenceSizeMax?(c.exit(re.chunkString),G(J)):(c.consume(J),s||(s=!Si(J)),J===ie.backslash?X:H)}function X(J){return J===ie.leftSquareBracket||J===ie.backslash||J===ie.rightSquareBracket?(c.consume(J),U++,H):H(J)}}function xk(c,y,x,E,A,R){let C;return U;function U(X){return X===ie.quotationMark||X===ie.apostrophe||X===ie.leftParenthesis?(c.enter(E),c.enter(A),c.consume(X),c.exit(A),C=X===ie.leftParenthesis?ie.rightParenthesis:X,s):x(X)}function s(X){return X===C?(c.enter(A),c.consume(X),c.exit(A),c.exit(E),y):(c.enter(R),N(X))}function N(X){return X===C?(c.exit(R),s(C)):X===ie.eof?x(X):Bn(X)?(c.enter(re.lineEnding),c.consume(X),c.exit(re.lineEnding),ia(c,N,re.linePrefix)):(c.enter(re.chunkString,{contentType:wn.contentTypeString}),G(X))}function G(X){return X===C||X===ie.eof||Bn(X)?(c.exit(re.chunkString),N(X)):(c.consume(X),X===ie.backslash?H:G)}function H(X){return X===C||X===ie.backslash?(c.consume(X),G):G(X)}}function n_(c,y){let x;return E;function E(A){return Bn(A)?(c.enter(re.lineEnding),c.consume(A),c.exit(re.lineEnding),x=!0,E):Si(A)?ia(c,E,x?re.linePrefix:re.lineSuffix)(A):y(A)}}const YO={name:"definition",tokenize:JO},KO={partial:!0,tokenize:QO};function JO(c,y,x){const E=this;let A;return R;function R(J){return c.enter(re.definition),C(J)}function C(J){return Ve(J===ie.leftSquareBracket,"expected `[`"),_k.call(E,c,U,x,re.definitionLabel,re.definitionLabelMarker,re.definitionLabelString)(J)}function U(J){return A=Vg(E.sliceSerialize(E.events[E.events.length-1][1]).slice(1,-1)),J===ie.colon?(c.enter(re.definitionMarker),c.consume(J),c.exit(re.definitionMarker),s):x(J)}function s(J){return Xs(J)?n_(c,N)(J):N(J)}function N(J){return vk(c,G,x,re.definitionDestination,re.definitionDestinationLiteral,re.definitionDestinationLiteralMarker,re.definitionDestinationRaw,re.definitionDestinationString)(J)}function G(J){return c.attempt(KO,H,H)(J)}function H(J){return Si(J)?ia(c,X,re.whitespace)(J):X(J)}function X(J){return J===ie.eof||Bn(J)?(c.exit(re.definition),E.parser.defined.push(A),y(J)):x(J)}}function QO(c,y,x){return E;function E(U){return Xs(U)?n_(c,A)(U):x(U)}function A(U){return xk(c,R,x,re.definitionTitle,re.definitionTitleMarker,re.definitionTitleString)(U)}function R(U){return Si(U)?ia(c,C,re.whitespace)(U):C(U)}function C(U){return U===ie.eof||Bn(U)?y(U):x(U)}}const e3={name:"hardBreakEscape",tokenize:t3};function t3(c,y,x){return E;function E(R){return Ve(R===ie.backslash,"expected `\\`"),c.enter(re.hardBreakEscape),c.consume(R),A}function A(R){return Bn(R)?(c.exit(re.hardBreakEscape),y(R)):x(R)}}const n3={name:"headingAtx",resolve:r3,tokenize:i3};function r3(c,y){let x=c.length-2,E=3,A,R;return c[E][1].type===re.whitespace&&(E+=2),x-2>E&&c[x][1].type===re.whitespace&&(x-=2),c[x][1].type===re.atxHeadingSequence&&(E===x-1||x-4>E&&c[x-2][1].type===re.whitespace)&&(x-=E+1===x?2:4),x>E&&(A={type:re.atxHeadingText,start:c[E][1].start,end:c[x][1].end},R={type:re.chunkText,start:c[E][1].start,end:c[x][1].end,contentType:wn.contentTypeText},ih(c,E,x-E+1,[["enter",A,y],["enter",R,y],["exit",R,y],["exit",A,y]])),c}function i3(c,y,x){let E=0;return A;function A(G){return c.enter(re.atxHeading),R(G)}function R(G){return Ve(G===ie.numberSign,"expected `#`"),c.enter(re.atxHeadingSequence),C(G)}function C(G){return G===ie.numberSign&&E++<wn.atxHeadingOpeningFenceSizeMax?(c.consume(G),C):G===ie.eof||Xs(G)?(c.exit(re.atxHeadingSequence),U(G)):x(G)}function U(G){return G===ie.numberSign?(c.enter(re.atxHeadingSequence),s(G)):G===ie.eof||Bn(G)?(c.exit(re.atxHeading),y(G)):Si(G)?ia(c,U,re.whitespace)(G):(c.enter(re.atxHeadingText),N(G))}function s(G){return G===ie.numberSign?(c.consume(G),s):(c.exit(re.atxHeadingSequence),U(G))}function N(G){return G===ie.eof||G===ie.numberSign||Xs(G)?(c.exit(re.atxHeadingText),U(G)):(c.consume(G),N)}}const a3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],NM=["pre","script","style","textarea"],o3={concrete:!0,name:"htmlFlow",resolveTo:u3,tokenize:c3},s3={partial:!0,tokenize:f3},l3={partial:!0,tokenize:h3};function u3(c){let y=c.length;for(;y--&&!(c[y][0]==="enter"&&c[y][1].type===re.htmlFlow););return y>1&&c[y-2][1].type===re.linePrefix&&(c[y][1].start=c[y-2][1].start,c[y+1][1].start=c[y-2][1].start,c.splice(y-2,2)),c}function c3(c,y,x){const E=this;let A,R,C,U,s;return N;function N(Me){return G(Me)}function G(Me){return Ve(Me===ie.lessThan,"expected `<`"),c.enter(re.htmlFlow),c.enter(re.htmlFlowData),c.consume(Me),H}function H(Me){return Me===ie.exclamationMark?(c.consume(Me),X):Me===ie.slash?(c.consume(Me),R=!0,Re):Me===ie.questionMark?(c.consume(Me),A=wn.htmlInstruction,E.interrupt?y:Ee):th(Me)?(Ve(Me!==null),c.consume(Me),C=String.fromCharCode(Me),qe):x(Me)}function X(Me){return Me===ie.dash?(c.consume(Me),A=wn.htmlComment,J):Me===ie.leftSquareBracket?(c.consume(Me),A=wn.htmlCdata,U=0,Pe):th(Me)?(c.consume(Me),A=wn.htmlDeclaration,E.interrupt?y:Ee):x(Me)}function J(Me){return Me===ie.dash?(c.consume(Me),E.interrupt?y:Ee):x(Me)}function Pe(Me){const Vn=wn.cdataOpeningString;return Me===Vn.charCodeAt(U++)?(c.consume(Me),U===Vn.length?E.interrupt?y:Jn:Pe):x(Me)}function Re(Me){return th(Me)?(Ve(Me!==null),c.consume(Me),C=String.fromCharCode(Me),qe):x(Me)}function qe(Me){if(Me===ie.eof||Me===ie.slash||Me===ie.greaterThan||Xs(Me)){const Vn=Me===ie.slash,Ti=C.toLowerCase();return!Vn&&!R&&NM.includes(Ti)?(A=wn.htmlRaw,E.interrupt?y(Me):Jn(Me)):a3.includes(C.toLowerCase())?(A=wn.htmlBasic,Vn?(c.consume(Me),je):E.interrupt?y(Me):Jn(Me)):(A=wn.htmlComplete,E.interrupt&&!E.parser.lazy[E.now().line]?x(Me):R?Ne(Me):Xe(Me))}return Me===ie.dash||Sl(Me)?(c.consume(Me),C+=String.fromCharCode(Me),qe):x(Me)}function je(Me){return Me===ie.greaterThan?(c.consume(Me),E.interrupt?y:Jn):x(Me)}function Ne(Me){return Si(Me)?(c.consume(Me),Ne):ut(Me)}function Xe(Me){return Me===ie.slash?(c.consume(Me),ut):Me===ie.colon||Me===ie.underscore||th(Me)?(c.consume(Me),Et):Si(Me)?(c.consume(Me),Xe):ut(Me)}function Et(Me){return Me===ie.dash||Me===ie.dot||Me===ie.colon||Me===ie.underscore||Sl(Me)?(c.consume(Me),Et):St(Me)}function St(Me){return Me===ie.equalsTo?(c.consume(Me),Qe):Si(Me)?(c.consume(Me),St):Xe(Me)}function Qe(Me){return Me===ie.eof||Me===ie.lessThan||Me===ie.equalsTo||Me===ie.greaterThan||Me===ie.graveAccent?x(Me):Me===ie.quotationMark||Me===ie.apostrophe?(c.consume(Me),s=Me,Nt):Si(Me)?(c.consume(Me),Qe):Mn(Me)}function Nt(Me){return Me===s?(c.consume(Me),s=null,dn):Me===ie.eof||Bn(Me)?x(Me):(c.consume(Me),Nt)}function Mn(Me){return Me===ie.eof||Me===ie.quotationMark||Me===ie.apostrophe||Me===ie.slash||Me===ie.lessThan||Me===ie.equalsTo||Me===ie.greaterThan||Me===ie.graveAccent||Xs(Me)?St(Me):(c.consume(Me),Mn)}function dn(Me){return Me===ie.slash||Me===ie.greaterThan||Si(Me)?Xe(Me):x(Me)}function ut(Me){return Me===ie.greaterThan?(c.consume(Me),qn):x(Me)}function qn(Me){return Me===ie.eof||Bn(Me)?Jn(Me):Si(Me)?(c.consume(Me),qn):x(Me)}function Jn(Me){return Me===ie.dash&&A===wn.htmlComment?(c.consume(Me),Hn):Me===ie.lessThan&&A===wn.htmlRaw?(c.consume(Me),cn):Me===ie.greaterThan&&A===wn.htmlDeclaration?(c.consume(Me),Fn):Me===ie.questionMark&&A===wn.htmlInstruction?(c.consume(Me),Ee):Me===ie.rightSquareBracket&&A===wn.htmlCdata?(c.consume(Me),It):Bn(Me)&&(A===wn.htmlBasic||A===wn.htmlComplete)?(c.exit(re.htmlFlowData),c.check(s3,An,et)(Me)):Me===ie.eof||Bn(Me)?(c.exit(re.htmlFlowData),et(Me)):(c.consume(Me),Jn)}function et(Me){return c.check(l3,$t,An)(Me)}function $t(Me){return Ve(Bn(Me)),c.enter(re.lineEnding),c.consume(Me),c.exit(re.lineEnding),un}function un(Me){return Me===ie.eof||Bn(Me)?et(Me):(c.enter(re.htmlFlowData),Jn(Me))}function Hn(Me){return Me===ie.dash?(c.consume(Me),Ee):Jn(Me)}function cn(Me){return Me===ie.slash?(c.consume(Me),C="",Cr):Jn(Me)}function Cr(Me){if(Me===ie.greaterThan){const Vn=C.toLowerCase();return NM.includes(Vn)?(c.consume(Me),Fn):Jn(Me)}return th(Me)&&C.length<wn.htmlRawSizeMax?(Ve(Me!==null),c.consume(Me),C+=String.fromCharCode(Me),Cr):Jn(Me)}function It(Me){return Me===ie.rightSquareBracket?(c.consume(Me),Ee):Jn(Me)}function Ee(Me){return Me===ie.greaterThan?(c.consume(Me),Fn):Me===ie.dash&&A===wn.htmlComment?(c.consume(Me),Ee):Jn(Me)}function Fn(Me){return Me===ie.eof||Bn(Me)?(c.exit(re.htmlFlowData),An(Me)):(c.consume(Me),Fn)}function An(Me){return c.exit(re.htmlFlow),y(Me)}}function h3(c,y,x){const E=this;return A;function A(C){return Bn(C)?(c.enter(re.lineEnding),c.consume(C),c.exit(re.lineEnding),R):x(C)}function R(C){return E.parser.lazy[E.now().line]?x(C):y(C)}}function f3(c,y,x){return E;function E(A){return Ve(Bn(A),"expected a line ending"),c.enter(re.lineEnding),c.consume(A),c.exit(re.lineEnding),c.attempt(X0,y,x)}}const d3={name:"htmlText",tokenize:p3};function p3(c,y,x){const E=this;let A,R,C;return U;function U(Ee){return Ve(Ee===ie.lessThan,"expected `<`"),c.enter(re.htmlText),c.enter(re.htmlTextData),c.consume(Ee),s}function s(Ee){return Ee===ie.exclamationMark?(c.consume(Ee),N):Ee===ie.slash?(c.consume(Ee),St):Ee===ie.questionMark?(c.consume(Ee),Xe):th(Ee)?(c.consume(Ee),Mn):x(Ee)}function N(Ee){return Ee===ie.dash?(c.consume(Ee),G):Ee===ie.leftSquareBracket?(c.consume(Ee),R=0,Pe):th(Ee)?(c.consume(Ee),Ne):x(Ee)}function G(Ee){return Ee===ie.dash?(c.consume(Ee),J):x(Ee)}function H(Ee){return Ee===ie.eof?x(Ee):Ee===ie.dash?(c.consume(Ee),X):Bn(Ee)?(C=H,cn(Ee)):(c.consume(Ee),H)}function X(Ee){return Ee===ie.dash?(c.consume(Ee),J):H(Ee)}function J(Ee){return Ee===ie.greaterThan?Hn(Ee):Ee===ie.dash?X(Ee):H(Ee)}function Pe(Ee){const Fn=wn.cdataOpeningString;return Ee===Fn.charCodeAt(R++)?(c.consume(Ee),R===Fn.length?Re:Pe):x(Ee)}function Re(Ee){return Ee===ie.eof?x(Ee):Ee===ie.rightSquareBracket?(c.consume(Ee),qe):Bn(Ee)?(C=Re,cn(Ee)):(c.consume(Ee),Re)}function qe(Ee){return Ee===ie.rightSquareBracket?(c.consume(Ee),je):Re(Ee)}function je(Ee){return Ee===ie.greaterThan?Hn(Ee):Ee===ie.rightSquareBracket?(c.consume(Ee),je):Re(Ee)}function Ne(Ee){return Ee===ie.eof||Ee===ie.greaterThan?Hn(Ee):Bn(Ee)?(C=Ne,cn(Ee)):(c.consume(Ee),Ne)}function Xe(Ee){return Ee===ie.eof?x(Ee):Ee===ie.questionMark?(c.consume(Ee),Et):Bn(Ee)?(C=Xe,cn(Ee)):(c.consume(Ee),Xe)}function Et(Ee){return Ee===ie.greaterThan?Hn(Ee):Xe(Ee)}function St(Ee){return th(Ee)?(c.consume(Ee),Qe):x(Ee)}function Qe(Ee){return Ee===ie.dash||Sl(Ee)?(c.consume(Ee),Qe):Nt(Ee)}function Nt(Ee){return Bn(Ee)?(C=Nt,cn(Ee)):Si(Ee)?(c.consume(Ee),Nt):Hn(Ee)}function Mn(Ee){return Ee===ie.dash||Sl(Ee)?(c.consume(Ee),Mn):Ee===ie.slash||Ee===ie.greaterThan||Xs(Ee)?dn(Ee):x(Ee)}function dn(Ee){return Ee===ie.slash?(c.consume(Ee),Hn):Ee===ie.colon||Ee===ie.underscore||th(Ee)?(c.consume(Ee),ut):Bn(Ee)?(C=dn,cn(Ee)):Si(Ee)?(c.consume(Ee),dn):Hn(Ee)}function ut(Ee){return Ee===ie.dash||Ee===ie.dot||Ee===ie.colon||Ee===ie.underscore||Sl(Ee)?(c.consume(Ee),ut):qn(Ee)}function qn(Ee){return Ee===ie.equalsTo?(c.consume(Ee),Jn):Bn(Ee)?(C=qn,cn(Ee)):Si(Ee)?(c.consume(Ee),qn):dn(Ee)}function Jn(Ee){return Ee===ie.eof||Ee===ie.lessThan||Ee===ie.equalsTo||Ee===ie.greaterThan||Ee===ie.graveAccent?x(Ee):Ee===ie.quotationMark||Ee===ie.apostrophe?(c.consume(Ee),A=Ee,et):Bn(Ee)?(C=Jn,cn(Ee)):Si(Ee)?(c.consume(Ee),Jn):(c.consume(Ee),$t)}function et(Ee){return Ee===A?(c.consume(Ee),A=void 0,un):Ee===ie.eof?x(Ee):Bn(Ee)?(C=et,cn(Ee)):(c.consume(Ee),et)}function $t(Ee){return Ee===ie.eof||Ee===ie.quotationMark||Ee===ie.apostrophe||Ee===ie.lessThan||Ee===ie.equalsTo||Ee===ie.graveAccent?x(Ee):Ee===ie.slash||Ee===ie.greaterThan||Xs(Ee)?dn(Ee):(c.consume(Ee),$t)}function un(Ee){return Ee===ie.slash||Ee===ie.greaterThan||Xs(Ee)?dn(Ee):x(Ee)}function Hn(Ee){return Ee===ie.greaterThan?(c.consume(Ee),c.exit(re.htmlTextData),c.exit(re.htmlText),y):x(Ee)}function cn(Ee){return Ve(C,"expected return state"),Ve(Bn(Ee),"expected eol"),c.exit(re.htmlTextData),c.enter(re.lineEnding),c.consume(Ee),c.exit(re.lineEnding),Cr}function Cr(Ee){return Ve(E.parser.constructs.disable.null,"expected `disable.null` to be populated"),Si(Ee)?ia(c,It,re.linePrefix,E.parser.constructs.disable.null.includes("codeIndented")?void 0:wn.tabSize)(Ee):It(Ee)}function It(Ee){return c.enter(re.htmlTextData),C(Ee)}}const vS={name:"labelEnd",resolveAll:v3,resolveTo:_3,tokenize:x3},m3={tokenize:b3},g3={tokenize:w3},y3={tokenize:E3};function v3(c){let y=-1;const x=[];for(;++y<c.length;){const E=c[y][1];if(x.push(c[y]),E.type===re.labelImage||E.type===re.labelLink||E.type===re.labelEnd){const A=E.type===re.labelImage?4:2;E.type=re.data,y+=A}}return c.length!==x.length&&ih(c,0,c.length,x),c}function _3(c,y){let x=c.length,E=0,A,R,C,U;for(;x--;)if(A=c[x][1],R){if(A.type===re.link||A.type===re.labelLink&&A._inactive)break;c[x][0]==="enter"&&A.type===re.labelLink&&(A._inactive=!0)}else if(C){if(c[x][0]==="enter"&&(A.type===re.labelImage||A.type===re.labelLink)&&!A._balanced&&(R=x,A.type!==re.labelLink)){E=2;break}}else A.type===re.labelEnd&&(C=x);Ve(R!==void 0,"`open` is supposed to be found"),Ve(C!==void 0,"`close` is supposed to be found");const s={type:c[R][1].type===re.labelLink?re.link:re.image,start:{...c[R][1].start},end:{...c[c.length-1][1].end}},N={type:re.label,start:{...c[R][1].start},end:{...c[C][1].end}},G={type:re.labelText,start:{...c[R+E+2][1].end},end:{...c[C-2][1].start}};return U=[["enter",s,y],["enter",N,y]],U=iu(U,c.slice(R+1,R+E+3)),U=iu(U,[["enter",G,y]]),Ve(y.parser.constructs.insideSpan.null,"expected `insideSpan.null` to be populated"),U=iu(U,yS(y.parser.constructs.insideSpan.null,c.slice(R+E+4,C-3),y)),U=iu(U,[["exit",G,y],c[C-2],c[C-1],["exit",N,y]]),U=iu(U,c.slice(C+1)),U=iu(U,[["exit",s,y]]),ih(c,R,c.length,U),c}function x3(c,y,x){const E=this;let A=E.events.length,R,C;for(;A--;)if((E.events[A][1].type===re.labelImage||E.events[A][1].type===re.labelLink)&&!E.events[A][1]._balanced){R=E.events[A][1];break}return U;function U(X){return Ve(X===ie.rightSquareBracket,"expected `]`"),R?R._inactive?H(X):(C=E.parser.defined.includes(Vg(E.sliceSerialize({start:R.end,end:E.now()}))),c.enter(re.labelEnd),c.enter(re.labelMarker),c.consume(X),c.exit(re.labelMarker),c.exit(re.labelEnd),s):x(X)}function s(X){return X===ie.leftParenthesis?c.attempt(m3,G,C?G:H)(X):X===ie.leftSquareBracket?c.attempt(g3,G,C?N:H)(X):C?G(X):H(X)}function N(X){return c.attempt(y3,G,H)(X)}function G(X){return y(X)}function H(X){return R._balanced=!0,x(X)}}function b3(c,y,x){return E;function E(H){return Ve(H===ie.leftParenthesis,"expected left paren"),c.enter(re.resource),c.enter(re.resourceMarker),c.consume(H),c.exit(re.resourceMarker),A}function A(H){return Xs(H)?n_(c,R)(H):R(H)}function R(H){return H===ie.rightParenthesis?G(H):vk(c,C,U,re.resourceDestination,re.resourceDestinationLiteral,re.resourceDestinationLiteralMarker,re.resourceDestinationRaw,re.resourceDestinationString,wn.linkResourceDestinationBalanceMax)(H)}function C(H){return Xs(H)?n_(c,s)(H):G(H)}function U(H){return x(H)}function s(H){return H===ie.quotationMark||H===ie.apostrophe||H===ie.leftParenthesis?xk(c,N,x,re.resourceTitle,re.resourceTitleMarker,re.resourceTitleString)(H):G(H)}function N(H){return Xs(H)?n_(c,G)(H):G(H)}function G(H){return H===ie.rightParenthesis?(c.enter(re.resourceMarker),c.consume(H),c.exit(re.resourceMarker),c.exit(re.resource),y):x(H)}}function w3(c,y,x){const E=this;return A;function A(U){return Ve(U===ie.leftSquareBracket,"expected left bracket"),_k.call(E,c,R,C,re.reference,re.referenceMarker,re.referenceString)(U)}function R(U){return E.parser.defined.includes(Vg(E.sliceSerialize(E.events[E.events.length-1][1]).slice(1,-1)))?y(U):x(U)}function C(U){return x(U)}}function E3(c,y,x){return E;function E(R){return Ve(R===ie.leftSquareBracket,"expected left bracket"),c.enter(re.reference),c.enter(re.referenceMarker),c.consume(R),c.exit(re.referenceMarker),A}function A(R){return R===ie.rightSquareBracket?(c.enter(re.referenceMarker),c.consume(R),c.exit(re.referenceMarker),c.exit(re.reference),y):x(R)}}const S3={name:"labelStartImage",resolveAll:vS.resolveAll,tokenize:T3};function T3(c,y,x){const E=this;return A;function A(U){return Ve(U===ie.exclamationMark,"expected `!`"),c.enter(re.labelImage),c.enter(re.labelImageMarker),c.consume(U),c.exit(re.labelImageMarker),R}function R(U){return U===ie.leftSquareBracket?(c.enter(re.labelMarker),c.consume(U),c.exit(re.labelMarker),c.exit(re.labelImage),C):x(U)}function C(U){return U===ie.caret&&"_hiddenFootnoteSupport"in E.parser.constructs?x(U):y(U)}}const C3={name:"labelStartLink",resolveAll:vS.resolveAll,tokenize:M3};function M3(c,y,x){const E=this;return A;function A(C){return Ve(C===ie.leftSquareBracket,"expected `[`"),c.enter(re.labelLink),c.enter(re.labelMarker),c.consume(C),c.exit(re.labelMarker),c.exit(re.labelLink),R}function R(C){return C===ie.caret&&"_hiddenFootnoteSupport"in E.parser.constructs?x(C):y(C)}}const wE={name:"lineEnding",tokenize:A3};function A3(c,y){return x;function x(E){return Ve(Bn(E),"expected eol"),c.enter(re.lineEnding),c.consume(E),c.exit(re.lineEnding),ia(c,y,re.linePrefix)}}const O0={name:"thematicBreak",tokenize:k3};function k3(c,y,x){let E=0,A;return R;function R(N){return c.enter(re.thematicBreak),C(N)}function C(N){return Ve(N===ie.asterisk||N===ie.dash||N===ie.underscore,"expected `*`, `-`, or `_`"),A=N,U(N)}function U(N){return N===A?(c.enter(re.thematicBreakSequence),s(N)):E>=wn.thematicBreakMarkerCountMin&&(N===ie.eof||Bn(N))?(c.exit(re.thematicBreak),y(N)):x(N)}function s(N){return N===A?(c.consume(N),E++,s):(c.exit(re.thematicBreakSequence),Si(N)?ia(c,U,re.whitespace)(N):U(N))}}const Zs={continuation:{tokenize:L3},exit:P3,name:"list",tokenize:I3},D3={partial:!0,tokenize:O3},R3={partial:!0,tokenize:z3};function I3(c,y,x){const E=this,A=E.events[E.events.length-1];let R=A&&A[1].type===re.linePrefix?A[2].sliceSerialize(A[1],!0).length:0,C=0;return U;function U(J){Ve(E.containerState,"expected state");const Pe=E.containerState.type||(J===ie.asterisk||J===ie.plusSign||J===ie.dash?re.listUnordered:re.listOrdered);if(Pe===re.listUnordered?!E.containerState.marker||J===E.containerState.marker:XE(J)){if(E.containerState.type||(E.containerState.type=Pe,c.enter(Pe,{_container:!0})),Pe===re.listUnordered)return c.enter(re.listItemPrefix),J===ie.asterisk||J===ie.dash?c.check(O0,x,N)(J):N(J);if(!E.interrupt||J===ie.digit1)return c.enter(re.listItemPrefix),c.enter(re.listItemValue),s(J)}return x(J)}function s(J){return Ve(E.containerState,"expected state"),XE(J)&&++C<wn.listItemValueSizeMax?(c.consume(J),s):(!E.interrupt||C<2)&&(E.containerState.marker?J===E.containerState.marker:J===ie.rightParenthesis||J===ie.dot)?(c.exit(re.listItemValue),N(J)):x(J)}function N(J){return Ve(E.containerState,"expected state"),Ve(J!==ie.eof,"eof (`null`) is not a marker"),c.enter(re.listItemMarker),c.consume(J),c.exit(re.listItemMarker),E.containerState.marker=E.containerState.marker||J,c.check(X0,E.interrupt?x:G,c.attempt(D3,X,H))}function G(J){return Ve(E.containerState,"expected state"),E.containerState.initialBlankLine=!0,R++,X(J)}function H(J){return Si(J)?(c.enter(re.listItemPrefixWhitespace),c.consume(J),c.exit(re.listItemPrefixWhitespace),X):x(J)}function X(J){return Ve(E.containerState,"expected state"),E.containerState.size=R+E.sliceSerialize(c.exit(re.listItemPrefix),!0).length,y(J)}}function L3(c,y,x){const E=this;return Ve(E.containerState,"expected state"),E.containerState._closeFlow=void 0,c.check(X0,A,R);function A(U){return Ve(E.containerState,"expected state"),Ve(typeof E.containerState.size=="number","expected size"),E.containerState.furtherBlankLines=E.containerState.furtherBlankLines||E.containerState.initialBlankLine,ia(c,y,re.listItemIndent,E.containerState.size+1)(U)}function R(U){return Ve(E.containerState,"expected state"),E.containerState.furtherBlankLines||!Si(U)?(E.containerState.furtherBlankLines=void 0,E.containerState.initialBlankLine=void 0,C(U)):(E.containerState.furtherBlankLines=void 0,E.containerState.initialBlankLine=void 0,c.attempt(R3,y,C)(U))}function C(U){return Ve(E.containerState,"expected state"),E.containerState._closeFlow=!0,E.interrupt=void 0,Ve(E.parser.constructs.disable.null,"expected `disable.null` to be populated"),ia(c,c.attempt(Zs,y,x),re.linePrefix,E.parser.constructs.disable.null.includes("codeIndented")?void 0:wn.tabSize)(U)}}function z3(c,y,x){const E=this;return Ve(E.containerState,"expected state"),Ve(typeof E.containerState.size=="number","expected size"),ia(c,A,re.listItemIndent,E.containerState.size+1);function A(R){Ve(E.containerState,"expected state");const C=E.events[E.events.length-1];return C&&C[1].type===re.listItemIndent&&C[2].sliceSerialize(C[1],!0).length===E.containerState.size?y(R):x(R)}}function P3(c){Ve(this.containerState,"expected state"),Ve(typeof this.containerState.type=="string","expected type"),c.exit(this.containerState.type)}function O3(c,y,x){const E=this;return Ve(E.parser.constructs.disable.null,"expected `disable.null` to be populated"),ia(c,A,re.listItemPrefixWhitespace,E.parser.constructs.disable.null.includes("codeIndented")?void 0:wn.tabSize+1);function A(R){const C=E.events[E.events.length-1];return!Si(R)&&C&&C[1].type===re.listItemPrefixWhitespace?y(R):x(R)}}const UM={name:"setextUnderline",resolveTo:B3,tokenize:F3};function B3(c,y){let x=c.length,E,A,R;for(;x--;)if(c[x][0]==="enter"){if(c[x][1].type===re.content){E=x;break}c[x][1].type===re.paragraph&&(A=x)}else c[x][1].type===re.content&&c.splice(x,1),!R&&c[x][1].type===re.definition&&(R=x);Ve(A!==void 0,"expected a `text` index to be found"),Ve(E!==void 0,"expected a `text` index to be found");const C={type:re.setextHeading,start:{...c[A][1].start},end:{...c[c.length-1][1].end}};return c[A][1].type=re.setextHeadingText,R?(c.splice(A,0,["enter",C,y]),c.splice(R+1,0,["exit",c[E][1],y]),c[E][1].end={...c[R][1].end}):c[E][1]=C,c.push(["exit",C,y]),c}function F3(c,y,x){const E=this;let A;return R;function R(N){let G=E.events.length,H;for(Ve(N===ie.dash||N===ie.equalsTo,"expected `=` or `-`");G--;)if(E.events[G][1].type!==re.lineEnding&&E.events[G][1].type!==re.linePrefix&&E.events[G][1].type!==re.content){H=E.events[G][1].type===re.paragraph;break}return!E.parser.lazy[E.now().line]&&(E.interrupt||H)?(c.enter(re.setextHeadingLine),A=N,C(N)):x(N)}function C(N){return c.enter(re.setextHeadingLineSequence),U(N)}function U(N){return N===A?(c.consume(N),U):(c.exit(re.setextHeadingLineSequence),Si(N)?ia(c,s,re.lineSuffix)(N):s(N))}function s(N){return N===ie.eof||Bn(N)?(c.exit(re.setextHeadingLine),y(N)):x(N)}}const N3={tokenize:U3};function U3(c){const y=this,x=c.attempt(X0,E,c.attempt(this.parser.constructs.flowInitial,A,ia(c,c.attempt(this.parser.constructs.flow,A,c.attempt(qO,A)),re.linePrefix)));return x;function E(R){if(Ve(R===ie.eof||Bn(R),"expected eol or eof"),R===ie.eof){c.consume(R);return}return c.enter(re.lineEndingBlank),c.consume(R),c.exit(re.lineEndingBlank),y.currentConstruct=void 0,x}function A(R){if(Ve(R===ie.eof||Bn(R),"expected eol or eof"),R===ie.eof){c.consume(R);return}return c.enter(re.lineEnding),c.consume(R),c.exit(re.lineEnding),y.currentConstruct=void 0,x}}const j3={resolveAll:wk()},V3=bk("string"),$3=bk("text");function bk(c){return{resolveAll:wk(c==="text"?G3:void 0),tokenize:y};function y(x){const E=this,A=this.parser.constructs[c],R=x.attempt(A,C,U);return C;function C(G){return N(G)?R(G):U(G)}function U(G){if(G===ie.eof){x.consume(G);return}return x.enter(re.data),x.consume(G),s}function s(G){return N(G)?(x.exit(re.data),R(G)):(x.consume(G),s)}function N(G){if(G===ie.eof)return!0;const H=A[G];let X=-1;if(H)for(Ve(Array.isArray(H),"expected `disable.null` to be populated");++X<H.length;){const J=H[X];if(!J.previous||J.previous.call(E,E.previous))return!0}return!1}}}function wk(c){return y;function y(x,E){let A=-1,R;for(;++A<=x.length;)R===void 0?x[A]&&x[A][1].type===re.data&&(R=A,A++):(!x[A]||x[A][1].type!==re.data)&&(A!==R+2&&(x[R][1].end=x[A-1][1].end,x.splice(R+2,A-R-2),A=R+2),R=void 0);return c?c(x,E):x}}function G3(c,y){let x=0;for(;++x<=c.length;)if((x===c.length||c[x][1].type===re.lineEnding)&&c[x-1][1].type===re.data){const E=c[x-1][1],A=y.sliceStream(E);let R=A.length,C=-1,U=0,s;for(;R--;){const N=A[R];if(typeof N=="string"){for(C=N.length;N.charCodeAt(C-1)===ie.space;)U++,C--;if(C)break;C=-1}else if(N===ie.horizontalTab)s=!0,U++;else if(N!==ie.virtualSpace){R++;break}}if(U){const N={type:x===c.length||s||U<wn.hardBreakPrefixSizeMin?re.lineSuffix:re.hardBreakTrailing,start:{_bufferIndex:R?C:E.start._bufferIndex+C,_index:E.start._index+R,line:E.end.line,column:E.end.column-U,offset:E.end.offset-U},end:{...E.end}};E.end={...N.start},E.start.offset===E.end.offset?Object.assign(E,N):(c.splice(x,0,["enter",N,y],["exit",N,y]),x+=2)}x++}return c}const q3={[ie.asterisk]:Zs,[ie.plusSign]:Zs,[ie.dash]:Zs,[ie.digit0]:Zs,[ie.digit1]:Zs,[ie.digit2]:Zs,[ie.digit3]:Zs,[ie.digit4]:Zs,[ie.digit5]:Zs,[ie.digit6]:Zs,[ie.digit7]:Zs,[ie.digit8]:Zs,[ie.digit9]:Zs,[ie.greaterThan]:dk},H3={[ie.leftSquareBracket]:YO},W3={[ie.horizontalTab]:bE,[ie.virtualSpace]:bE,[ie.space]:bE},Z3={[ie.numberSign]:n3,[ie.asterisk]:O0,[ie.dash]:[UM,O0],[ie.lessThan]:o3,[ie.equalsTo]:UM,[ie.underscore]:O0,[ie.graveAccent]:FM,[ie.tilde]:FM},X3={[ie.ampersand]:mk,[ie.backslash]:pk},Y3={[ie.carriageReturn]:wE,[ie.lineFeed]:wE,[ie.carriageReturnLineFeed]:wE,[ie.exclamationMark]:S3,[ie.ampersand]:mk,[ie.asterisk]:YE,[ie.lessThan]:[MO,d3],[ie.leftSquareBracket]:C3,[ie.backslash]:[e3,pk],[ie.rightSquareBracket]:vS,[ie.underscore]:YE,[ie.graveAccent]:UO},K3={null:[YE,j3]},J3={null:[ie.asterisk,ie.underscore]},Q3={null:[]},eB=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:J3,contentInitial:H3,disable:Q3,document:q3,flow:Z3,flowInitial:W3,insideSpan:K3,string:X3,text:Y3},Symbol.toStringTag,{value:"Module"}));var KE={exports:{}},EE,jM;function tB(){if(jM)return EE;jM=1;var c=1e3,y=c*60,x=y*60,E=x*24,A=E*7,R=E*365.25;EE=function(G,H){H=H||{};var X=typeof G;if(X==="string"&&G.length>0)return C(G);if(X==="number"&&isFinite(G))return H.long?s(G):U(G);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(G))};function C(G){if(G=String(G),!(G.length>100)){var H=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(G);if(H){var X=parseFloat(H[1]),J=(H[2]||"ms").toLowerCase();switch(J){case"years":case"year":case"yrs":case"yr":case"y":return X*R;case"weeks":case"week":case"w":return X*A;case"days":case"day":case"d":return X*E;case"hours":case"hour":case"hrs":case"hr":case"h":return X*x;case"minutes":case"minute":case"mins":case"min":case"m":return X*y;case"seconds":case"second":case"secs":case"sec":case"s":return X*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return X;default:return}}}}function U(G){var H=Math.abs(G);return H>=E?Math.round(G/E)+"d":H>=x?Math.round(G/x)+"h":H>=y?Math.round(G/y)+"m":H>=c?Math.round(G/c)+"s":G+"ms"}function s(G){var H=Math.abs(G);return H>=E?N(G,H,E,"day"):H>=x?N(G,H,x,"hour"):H>=y?N(G,H,y,"minute"):H>=c?N(G,H,c,"second"):G+" ms"}function N(G,H,X,J){var Pe=H>=X*1.5;return Math.round(G/X)+" "+J+(Pe?"s":"")}return EE}function nB(c){x.debug=x,x.default=x,x.coerce=s,x.disable=C,x.enable=A,x.enabled=U,x.humanize=tB(),x.destroy=N,Object.keys(c).forEach(G=>{x[G]=c[G]}),x.names=[],x.skips=[],x.formatters={};function y(G){let H=0;for(let X=0;X<G.length;X++)H=(H<<5)-H+G.charCodeAt(X),H|=0;return x.colors[Math.abs(H)%x.colors.length]}x.selectColor=y;function x(G){let H,X=null,J,Pe;function Re(...qe){if(!Re.enabled)return;const je=Re,Ne=Number(new Date),Xe=Ne-(H||Ne);je.diff=Xe,je.prev=H,je.curr=Ne,H=Ne,qe[0]=x.coerce(qe[0]),typeof qe[0]!="string"&&qe.unshift("%O");let Et=0;qe[0]=qe[0].replace(/%([a-zA-Z%])/g,(Qe,Nt)=>{if(Qe==="%%")return"%";Et++;const Mn=x.formatters[Nt];if(typeof Mn=="function"){const dn=qe[Et];Qe=Mn.call(je,dn),qe.splice(Et,1),Et--}return Qe}),x.formatArgs.call(je,qe),(je.log||x.log).apply(je,qe)}return Re.namespace=G,Re.useColors=x.useColors(),Re.color=x.selectColor(G),Re.extend=E,Re.destroy=x.destroy,Object.defineProperty(Re,"enabled",{enumerable:!0,configurable:!1,get:()=>X!==null?X:(J!==x.namespaces&&(J=x.namespaces,Pe=x.enabled(G)),Pe),set:qe=>{X=qe}}),typeof x.init=="function"&&x.init(Re),Re}function E(G,H){const X=x(this.namespace+(typeof H>"u"?":":H)+G);return X.log=this.log,X}function A(G){x.save(G),x.namespaces=G,x.names=[],x.skips=[];const H=(typeof G=="string"?G:"").trim().replace(" ",",").split(",").filter(Boolean);for(const X of H)X[0]==="-"?x.skips.push(X.slice(1)):x.names.push(X)}function R(G,H){let X=0,J=0,Pe=-1,Re=0;for(;X<G.length;)if(J<H.length&&(H[J]===G[X]||H[J]==="*"))H[J]==="*"?(Pe=J,Re=X,J++):(X++,J++);else if(Pe!==-1)J=Pe+1,Re++,X=Re;else return!1;for(;J<H.length&&H[J]==="*";)J++;return J===H.length}function C(){const G=[...x.names,...x.skips.map(H=>"-"+H)].join(",");return x.enable(""),G}function U(G){for(const H of x.skips)if(R(G,H))return!1;for(const H of x.names)if(R(G,H))return!0;return!1}function s(G){return G instanceof Error?G.stack||G.message:G}function N(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return x.enable(x.load()),x}var rB=nB;(function(c,y){var x={};y.formatArgs=A,y.save=R,y.load=C,y.useColors=E,y.storage=U(),y.destroy=(()=>{let N=!1;return()=>{N||(N=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),y.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function E(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let N;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(N=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(N[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function A(N){if(N[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+N[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;const G="color: "+this.color;N.splice(1,0,G,"color: inherit");let H=0,X=0;N[0].replace(/%[a-zA-Z%]/g,J=>{J!=="%%"&&(H++,J==="%c"&&(X=H))}),N.splice(X,0,G)}y.log=console.debug||console.log||(()=>{});function R(N){try{N?y.storage.setItem("debug",N):y.storage.removeItem("debug")}catch{}}function C(){let N;try{N=y.storage.getItem("debug")}catch{}return!N&&typeof process<"u"&&"env"in process&&(N=x.DEBUG),N}function U(){try{return localStorage}catch{}}c.exports=rB(y);const{formatters:s}=c.exports;s.j=function(N){try{return JSON.stringify(N)}catch(G){return"[UnexpectedJSONParseError]: "+G.message}}})(KE,KE.exports);var iB=KE.exports;const aB=W0(iB),Xp=aB("micromark");function oB(c,y,x){let E={_bufferIndex:-1,_index:0,line:x&&x.line||1,column:x&&x.column||1,offset:x&&x.offset||0};const A={},R=[];let C=[],U=[],s=!0;const N={attempt:dn(Nt),check:dn(Mn),consume:Et,enter:St,exit:Qe,interrupt:dn(Mn,{interrupt:!0})},G={code:ie.eof,containerState:{},defineSkip:je,events:[],now:qe,parser:c,previous:ie.eof,sliceSerialize:Pe,sliceStream:Re,write:J};let H=y.tokenize.call(G,N),X;return y.resolveAll&&R.push(y),G;function J(et){return C=iu(C,et),Ne(),C[C.length-1]!==ie.eof?[]:(ut(y,0),G.events=yS(R,G.events,G),G.events)}function Pe(et,$t){return lB(Re(et),$t)}function Re(et){return sB(C,et)}function qe(){const{_bufferIndex:et,_index:$t,line:un,column:Hn,offset:cn}=E;return{_bufferIndex:et,_index:$t,line:un,column:Hn,offset:cn}}function je(et){A[et.line]=et.column,Jn(),Xp("position: define skip: `%j`",E)}function Ne(){let et;for(;E._index<C.length;){const $t=C[E._index];if(typeof $t=="string")for(et=E._index,E._bufferIndex<0&&(E._bufferIndex=0);E._index===et&&E._bufferIndex<$t.length;)Xe($t.charCodeAt(E._bufferIndex));else Xe($t)}}function Xe(et){Ve(s===!0,"expected character to be consumed"),s=void 0,Xp("main: passing `%s` to %s",et,H&&H.name),X=et,Ve(typeof H=="function","expected state"),H=H(et)}function Et(et){Ve(et===X,"expected given code to equal expected code"),Xp("consume: `%s`",et),Ve(s===void 0,"expected code to not have been consumed: this might be because `return x(code)` instead of `return x` was used"),Ve(et===null?G.events.length===0||G.events[G.events.length-1][0]==="exit":G.events[G.events.length-1][0]==="enter","expected last token to be open"),Bn(et)?(E.line++,E.column=1,E.offset+=et===ie.carriageReturnLineFeed?2:1,Jn(),Xp("position: after eol: `%j`",E)):et!==ie.virtualSpace&&(E.column++,E.offset++),E._bufferIndex<0?E._index++:(E._bufferIndex++,E._bufferIndex===C[E._index].length&&(E._bufferIndex=-1,E._index++)),G.previous=et,s=!0}function St(et,$t){const un=$t||{};return un.type=et,un.start=qe(),Ve(typeof et=="string","expected string type"),Ve(et.length>0,"expected non-empty string"),Xp("enter: `%s`",et),G.events.push(["enter",un,G]),U.push(un),un}function Qe(et){Ve(typeof et=="string","expected string type"),Ve(et.length>0,"expected non-empty string");const $t=U.pop();return Ve($t,"cannot close w/o open tokens"),$t.end=qe(),Ve(et===$t.type,"expected exit token to match current token"),Ve(!($t.start._index===$t.end._index&&$t.start._bufferIndex===$t.end._bufferIndex),"expected non-empty token (`"+et+"`)"),Xp("exit: `%s`",$t.type),G.events.push(["exit",$t,G]),$t}function Nt(et,$t){ut(et,$t.from)}function Mn(et,$t){$t.restore()}function dn(et,$t){return un;function un(Hn,cn,Cr){let It,Ee,Fn,An;return Array.isArray(Hn)?Vn(Hn):"tokenize"in Hn?Vn([Hn]):Me(Hn);function Me(hr){return ai;function ai(Or){const xi=Or!==null&&hr[Or],Dn=Or!==null&&hr.null,Yr=[...Array.isArray(xi)?xi:xi?[xi]:[],...Array.isArray(Dn)?Dn:Dn?[Dn]:[]];return Vn(Yr)(Or)}}function Vn(hr){return It=hr,Ee=0,hr.length===0?(Ve(Cr,"expected `bogusState` to be given"),Cr):Ti(hr[Ee])}function Ti(hr){return ai;function ai(Or){return An=qn(),Fn=hr,hr.partial||(G.currentConstruct=hr),Ve(G.parser.constructs.disable.null,"expected `disable.null` to be populated"),hr.name&&G.parser.constructs.disable.null.includes(hr.name)?Ci(Or):hr.tokenize.call($t?Object.assign(Object.create(G),$t):G,N,Vi,Ci)(Or)}}function Vi(hr){return Ve(hr===X,"expected code"),s=!0,et(Fn,An),cn}function Ci(hr){return Ve(hr===X,"expected code"),s=!0,An.restore(),++Ee<It.length?Ti(It[Ee]):Cr}}}function ut(et,$t){et.resolveAll&&!R.includes(et)&&R.push(et),et.resolve&&ih(G.events,$t,G.events.length-$t,et.resolve(G.events.slice($t),G)),et.resolveTo&&(G.events=et.resolveTo(G.events,G)),Ve(et.partial||G.events.length===0||G.events[G.events.length-1][0]==="exit","expected last token to end")}function qn(){const et=qe(),$t=G.previous,un=G.currentConstruct,Hn=G.events.length,cn=Array.from(U);return{from:Hn,restore:Cr};function Cr(){E=et,G.previous=$t,G.currentConstruct=un,G.events.length=Hn,U=cn,Jn(),Xp("position: restore: `%j`",E)}}function Jn(){E.line in A&&E.column<2&&(E.column=A[E.line],E.offset+=A[E.line]-1)}}function sB(c,y){const x=y.start._index,E=y.start._bufferIndex,A=y.end._index,R=y.end._bufferIndex;let C;if(x===A)Ve(R>-1,"expected non-negative end buffer index"),Ve(E>-1,"expected non-negative start buffer index"),C=[c[x].slice(E,R)];else{if(C=c.slice(x,A),E>-1){const U=C[0];typeof U=="string"?C[0]=U.slice(E):(Ve(E===0,"expected `startBufferIndex` to be `0`"),C.shift())}R>0&&C.push(c[A].slice(0,R))}return C}function lB(c,y){let x=-1;const E=[];let A;for(;++x<c.length;){const R=c[x];let C;if(typeof R=="string")C=R;else switch(R){case ie.carriageReturn:{C=eh.cr;break}case ie.lineFeed:{C=eh.lf;break}case ie.carriageReturnLineFeed:{C=eh.cr+eh.lf;break}case ie.horizontalTab:{C=y?eh.space:eh.ht;break}case ie.virtualSpace:{if(!y&&A)continue;C=eh.space;break}default:Ve(typeof R=="number","expected number"),C=String.fromCharCode(R)}A=R===ie.horizontalTab,E.push(C)}return E.join("")}function uB(c){const E={constructs:fO([eB,...(c||{}).extensions||[]]),content:A(xO),defined:[],document:A(wO),flow:A(N3),lazy:{},string:A(V3),text:A($3)};return E;function A(R){return C;function C(U){return oB(E,R,U)}}}function cB(c){for(;!yk(c););return c}const VM=/[\0\t\n\r]/g;function hB(){let c=1,y="",x=!0,E;return A;function A(R,C,U){const s=[];let N,G,H,X,J;for(R=y+(typeof R=="string"?R.toString():new TextDecoder(C||void 0).decode(R)),H=0,y="",x&&(R.charCodeAt(0)===ie.byteOrderMarker&&H++,x=void 0);H<R.length;){if(VM.lastIndex=H,N=VM.exec(R),X=N&&N.index!==void 0?N.index:R.length,J=R.charCodeAt(X),!N){y=R.slice(H);break}if(J===ie.lf&&H===X&&E)s.push(ie.carriageReturnLineFeed),E=void 0;else switch(E&&(s.push(ie.carriageReturn),E=void 0),H<X&&(s.push(R.slice(H,X)),c+=X-H),J){case ie.nul:{s.push(ie.replacementCharacter),c++;break}case ie.ht:{for(G=Math.ceil(c/wn.tabSize)*wn.tabSize,s.push(ie.horizontalTab);c++<G;)s.push(ie.virtualSpace);break}case ie.lf:{s.push(ie.lineFeed),c=1;break}default:E=!0,c=1}H=X+1}return U&&(E&&s.push(ie.carriageReturn),y&&s.push(y),s.push(ie.eof)),s}}const fB=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dB(c){return c.replace(fB,pB)}function pB(c,y,x){if(y)return y;if(x.charCodeAt(0)===ie.numberSign){const A=x.charCodeAt(1),R=A===ie.lowercaseX||A===ie.uppercaseX;return fk(x.slice(R?2:1),R?wn.numericBaseHexadecimal:wn.numericBaseDecimal)}return gS(x)||c}const Ek={}.hasOwnProperty;function mB(c,y,x){return typeof y!="string"&&(x=y,y=void 0),gB(x)(cB(uB(x).document().write(hB()(c,y,!0))))}function gB(c){const y={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:R(bi),autolinkProtocol:dn,autolinkEmail:dn,atxHeading:R(oi),blockQuote:R(Or),characterEscape:dn,characterReference:dn,codeFenced:R(xi),codeFencedFenceInfo:C,codeFencedFenceMeta:C,codeIndented:R(xi,C),codeText:R(Dn,C),codeTextData:dn,data:dn,codeFlowValue:dn,definition:R(Yr),definitionDestinationString:C,definitionLabelString:C,definitionTitleString:C,emphasis:R(Zr),hardBreakEscape:R(Wn),hardBreakTrailing:R(Wn),htmlFlow:R(Dr,C),htmlFlowData:dn,htmlText:R(Dr,C),htmlTextData:dn,image:R(aa),label:C,link:R(bi),listItem:R(va),listItemValue:X,listOrdered:R(Kr,H),listUnordered:R(Kr),paragraph:R(Wi),reference:Me,referenceString:C,resourceDestinationString:C,resourceTitleString:C,setextHeading:R(oi),strong:R(Zi),thematicBreak:R(Ii)},exit:{atxHeading:s(),atxHeadingSequence:St,autolink:s(),autolinkEmail:ai,autolinkProtocol:hr,blockQuote:s(),characterEscapeValue:ut,characterReferenceMarkerHexadecimal:Ti,characterReferenceMarkerNumeric:Ti,characterReferenceValue:Vi,characterReference:Ci,codeFenced:s(qe),codeFencedFence:Re,codeFencedFenceInfo:J,codeFencedFenceMeta:Pe,codeFlowValue:ut,codeIndented:s(je),codeText:s(un),codeTextData:ut,data:ut,definition:s(),definitionDestinationString:Et,definitionLabelString:Ne,definitionTitleString:Xe,emphasis:s(),hardBreakEscape:s(Jn),hardBreakTrailing:s(Jn),htmlFlow:s(et),htmlFlowData:ut,htmlText:s($t),htmlTextData:ut,image:s(cn),label:It,labelText:Cr,lineEnding:qn,link:s(Hn),listItem:s(),listOrdered:s(),listUnordered:s(),paragraph:s(),referenceString:Vn,resourceDestinationString:Ee,resourceTitleString:Fn,resource:An,setextHeading:s(Mn),setextHeadingLineSequence:Nt,setextHeadingText:Qe,strong:s(),thematicBreak:s()}};Sk(y,(c||{}).mdastExtensions||[]);const x={};return E;function E(ft){let at={type:"root",children:[]};const Jt={stack:[at],tokenStack:[],config:y,enter:U,exit:N,buffer:C,resume:G,data:x},On=[];let sr=-1;for(;++sr<ft.length;)if(ft[sr][1].type===re.listOrdered||ft[sr][1].type===re.listUnordered)if(ft[sr][0]==="enter")On.push(sr);else{const Ht=On.pop();Ve(typeof Ht=="number","expected list ot be open"),sr=A(ft,Ht,sr)}for(sr=-1;++sr<ft.length;){const Ht=y[ft[sr][0]];Ek.call(Ht,ft[sr][1].type)&&Ht[ft[sr][1].type].call(Object.assign({sliceSerialize:ft[sr][2].sliceSerialize},Jt),ft[sr][1])}if(Jt.tokenStack.length>0){const Ht=Jt.tokenStack[Jt.tokenStack.length-1];(Ht[1]||$M).call(Jt,void 0,Ht[0])}for(at.position={start:Ed(ft.length>0?ft[0][1].start:{line:1,column:1,offset:0}),end:Ed(ft.length>0?ft[ft.length-2][1].end:{line:1,column:1,offset:0})},sr=-1;++sr<y.transforms.length;)at=y.transforms[sr](at)||at;return at}function A(ft,at,Jt){let On=at-1,sr=-1,Ht=!1,hn,Un,dr,fr;for(;++On<=Jt;){const xr=ft[On];switch(xr[1].type){case re.listUnordered:case re.listOrdered:case re.blockQuote:{xr[0]==="enter"?sr++:sr--,fr=void 0;break}case re.lineEndingBlank:{xr[0]==="enter"&&(hn&&!fr&&!sr&&!dr&&(dr=On),fr=void 0);break}case re.linePrefix:case re.listItemValue:case re.listItemMarker:case re.listItemPrefix:case re.listItemPrefixWhitespace:break;default:fr=void 0}if(!sr&&xr[0]==="enter"&&xr[1].type===re.listItemPrefix||sr===-1&&xr[0]==="exit"&&(xr[1].type===re.listUnordered||xr[1].type===re.listOrdered)){if(hn){let Rr=On;for(Un=void 0;Rr--;){const Jr=ft[Rr];if(Jr[1].type===re.lineEnding||Jr[1].type===re.lineEndingBlank){if(Jr[0]==="exit")continue;Un&&(ft[Un][1].type=re.lineEndingBlank,Ht=!0),Jr[1].type=re.lineEnding,Un=Rr}else if(!(Jr[1].type===re.linePrefix||Jr[1].type===re.blockQuotePrefix||Jr[1].type===re.blockQuotePrefixWhitespace||Jr[1].type===re.blockQuoteMarker||Jr[1].type===re.listItemIndent))break}dr&&(!Un||dr<Un)&&(hn._spread=!0),hn.end=Object.assign({},Un?ft[Un][1].start:xr[1].end),ft.splice(Un||On,0,["exit",hn,xr[2]]),On++,Jt++}if(xr[1].type===re.listItemPrefix){const Rr={type:"listItem",_spread:!1,start:Object.assign({},xr[1].start),end:void 0};hn=Rr,ft.splice(On,0,["enter",Rr,xr[2]]),On++,Jt++,dr=void 0,fr=!0}}}return ft[at][1]._spread=Ht,Jt}function R(ft,at){return Jt;function Jt(On){U.call(this,ft(On),On),at&&at.call(this,On)}}function C(){this.stack.push({type:"fragment",children:[]})}function U(ft,at,Jt){const On=this.stack[this.stack.length-1];Ve(On,"expected `parent`"),Ve("children"in On,"expected `parent`"),On.children.push(ft),this.stack.push(ft),this.tokenStack.push([at,Jt||void 0]),ft.position={start:Ed(at.start),end:void 0}}function s(ft){return at;function at(Jt){ft&&ft.call(this,Jt),N.call(this,Jt)}}function N(ft,at){const Jt=this.stack.pop();Ve(Jt,"expected `node`");const On=this.tokenStack.pop();if(On)On[0].type!==ft.type&&(at?at.call(this,ft,On[0]):(On[1]||$M).call(this,ft,On[0]));else throw new Error("Cannot close `"+ft.type+"` ("+t_({start:ft.start,end:ft.end})+"): its not open");Ve(Jt.type!=="fragment","unexpected fragment `exit`ed"),Ve(Jt.position,"expected `position` to be defined"),Jt.position.end=Ed(ft.end)}function G(){return cO(this.stack.pop())}function H(){this.data.expectingFirstListItemValue=!0}function X(ft){if(this.data.expectingFirstListItemValue){const at=this.stack[this.stack.length-2];Ve(at,"expected nodes on stack"),Ve(at.type==="list","expected list on stack"),at.start=Number.parseInt(this.sliceSerialize(ft),wn.numericBaseDecimal),this.data.expectingFirstListItemValue=void 0}}function J(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="code","expected code on stack"),at.lang=ft}function Pe(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="code","expected code on stack"),at.meta=ft}function Re(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function qe(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="code","expected code on stack"),at.value=ft.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function je(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="code","expected code on stack"),at.value=ft.replace(/(\r?\n|\r)$/g,"")}function Ne(ft){const at=this.resume(),Jt=this.stack[this.stack.length-1];Ve(Jt,"expected node on stack"),Ve(Jt.type==="definition","expected definition on stack"),Jt.label=at,Jt.identifier=Vg(this.sliceSerialize(ft)).toLowerCase()}function Xe(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="definition","expected definition on stack"),at.title=ft}function Et(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="definition","expected definition on stack"),at.url=ft}function St(ft){const at=this.stack[this.stack.length-1];if(Ve(at,"expected node on stack"),Ve(at.type==="heading","expected heading on stack"),!at.depth){const Jt=this.sliceSerialize(ft).length;Ve(Jt===1||Jt===2||Jt===3||Jt===4||Jt===5||Jt===6,"expected `depth` between `1` and `6`"),at.depth=Jt}}function Qe(){this.data.setextHeadingSlurpLineEnding=!0}function Nt(ft){const at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="heading","expected heading on stack"),at.depth=this.sliceSerialize(ft).codePointAt(0)===ie.equalsTo?1:2}function Mn(){this.data.setextHeadingSlurpLineEnding=void 0}function dn(ft){const at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve("children"in at,"expected parent on stack");const Jt=at.children;let On=Jt[Jt.length-1];(!On||On.type!=="text")&&(On=Xi(),On.position={start:Ed(ft.start),end:void 0},Jt.push(On)),this.stack.push(On)}function ut(ft){const at=this.stack.pop();Ve(at,"expected a `node` to be on the stack"),Ve("value"in at,"expected a `literal` to be on the stack"),Ve(at.position,"expected `node` to have an open position"),at.value+=this.sliceSerialize(ft),at.position.end=Ed(ft.end)}function qn(ft){const at=this.stack[this.stack.length-1];if(Ve(at,"expected `node`"),this.data.atHardBreak){Ve("children"in at,"expected `parent`");const Jt=at.children[at.children.length-1];Ve(Jt.position,"expected tail to have a starting position"),Jt.position.end=Ed(ft.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&y.canContainEols.includes(at.type)&&(dn.call(this,ft),ut.call(this,ft))}function Jn(){this.data.atHardBreak=!0}function et(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="html","expected html on stack"),at.value=ft}function $t(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="html","expected html on stack"),at.value=ft}function un(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="inlineCode","expected inline code on stack"),at.value=ft}function Hn(){const ft=this.stack[this.stack.length-1];if(Ve(ft,"expected node on stack"),Ve(ft.type==="link","expected link on stack"),this.data.inReference){const at=this.data.referenceType||"shortcut";ft.type+="Reference",ft.referenceType=at,delete ft.url,delete ft.title}else delete ft.identifier,delete ft.label;this.data.referenceType=void 0}function cn(){const ft=this.stack[this.stack.length-1];if(Ve(ft,"expected node on stack"),Ve(ft.type==="image","expected image on stack"),this.data.inReference){const at=this.data.referenceType||"shortcut";ft.type+="Reference",ft.referenceType=at,delete ft.url,delete ft.title}else delete ft.identifier,delete ft.label;this.data.referenceType=void 0}function Cr(ft){const at=this.sliceSerialize(ft),Jt=this.stack[this.stack.length-2];Ve(Jt,"expected ancestor on stack"),Ve(Jt.type==="image"||Jt.type==="link","expected image or link on stack"),Jt.label=dB(at),Jt.identifier=Vg(at).toLowerCase()}function It(){const ft=this.stack[this.stack.length-1];Ve(ft,"expected node on stack"),Ve(ft.type==="fragment","expected fragment on stack");const at=this.resume(),Jt=this.stack[this.stack.length-1];if(Ve(Jt,"expected node on stack"),Ve(Jt.type==="image"||Jt.type==="link","expected image or link on stack"),this.data.inReference=!0,Jt.type==="link"){const On=ft.children;Jt.children=On}else Jt.alt=at}function Ee(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="image"||at.type==="link","expected image or link on stack"),at.url=ft}function Fn(){const ft=this.resume(),at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="image"||at.type==="link","expected image or link on stack"),at.title=ft}function An(){this.data.inReference=void 0}function Me(){this.data.referenceType="collapsed"}function Vn(ft){const at=this.resume(),Jt=this.stack[this.stack.length-1];Ve(Jt,"expected node on stack"),Ve(Jt.type==="image"||Jt.type==="link","expected image reference or link reference on stack"),Jt.label=at,Jt.identifier=Vg(this.sliceSerialize(ft)).toLowerCase(),this.data.referenceType="full"}function Ti(ft){Ve(ft.type==="characterReferenceMarkerNumeric"||ft.type==="characterReferenceMarkerHexadecimal"),this.data.characterReferenceType=ft.type}function Vi(ft){const at=this.sliceSerialize(ft),Jt=this.data.characterReferenceType;let On;if(Jt)On=fk(at,Jt===re.characterReferenceMarkerNumeric?wn.numericBaseDecimal:wn.numericBaseHexadecimal),this.data.characterReferenceType=void 0;else{const Ht=gS(at);Ve(Ht!==!1,"expected reference to decode"),On=Ht}const sr=this.stack[this.stack.length-1];Ve(sr,"expected `node`"),Ve("value"in sr,"expected `node.value`"),sr.value+=On}function Ci(ft){const at=this.stack.pop();Ve(at,"expected `node`"),Ve(at.position,"expected `node.position`"),at.position.end=Ed(ft.end)}function hr(ft){ut.call(this,ft);const at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="link","expected link on stack"),at.url=this.sliceSerialize(ft)}function ai(ft){ut.call(this,ft);const at=this.stack[this.stack.length-1];Ve(at,"expected node on stack"),Ve(at.type==="link","expected link on stack"),at.url="mailto:"+this.sliceSerialize(ft)}function Or(){return{type:"blockquote",children:[]}}function xi(){return{type:"code",lang:null,meta:null,value:""}}function Dn(){return{type:"inlineCode",value:""}}function Yr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Zr(){return{type:"emphasis",children:[]}}function oi(){return{type:"heading",depth:0,children:[]}}function Wn(){return{type:"break"}}function Dr(){return{type:"html",value:""}}function aa(){return{type:"image",title:null,url:"",alt:null}}function bi(){return{type:"link",title:null,url:"",children:[]}}function Kr(ft){return{type:"list",ordered:ft.type==="listOrdered",start:null,spread:ft._spread,children:[]}}function va(ft){return{type:"listItem",spread:ft._spread,checked:null,children:[]}}function Wi(){return{type:"paragraph",children:[]}}function Zi(){return{type:"strong",children:[]}}function Xi(){return{type:"text",value:""}}function Ii(){return{type:"thematicBreak"}}}function Ed(c){return{line:c.line,column:c.column,offset:c.offset}}function Sk(c,y){let x=-1;for(;++x<y.length;){const E=y[x];Array.isArray(E)?Sk(c,E):yB(c,E)}}function yB(c,y){let x;for(x in y)if(Ek.call(y,x))switch(x){case"canContainEols":{const E=y[x];E&&c[x].push(...E);break}case"transforms":{const E=y[x];E&&c[x].push(...E);break}case"enter":case"exit":{const E=y[x];E&&Object.assign(c[x],E);break}}}function $M(c,y){throw c?new Error("Cannot close `"+c.type+"` ("+t_({start:c.start,end:c.end})+"): a different token (`"+y.type+"`, "+t_({start:y.start,end:y.end})+") is open"):new Error("Cannot close document, a token (`"+y.type+"`, "+t_({start:y.start,end:y.end})+") is still open")}function vB(c){const y=this;y.parser=x;function x(E){return mB(E,{...y.data("settings"),...c,extensions:y.data("micromarkExtensions")||[],mdastExtensions:y.data("fromMarkdownExtensions")||[]})}}function _B(c,y){const x={type:"element",tagName:"blockquote",properties:{},children:c.wrap(c.all(y),!0)};return c.patch(y,x),c.applyData(y,x)}function xB(c,y){const x={type:"element",tagName:"br",properties:{},children:[]};return c.patch(y,x),[c.applyData(y,x),{type:"text",value:`
`}]}function bB(c,y){const x=y.value?y.value+`
`:"",E={};y.lang&&(E.className=["language-"+y.lang]);let A={type:"element",tagName:"code",properties:E,children:[{type:"text",value:x}]};return y.meta&&(A.data={meta:y.meta}),c.patch(y,A),A=c.applyData(y,A),A={type:"element",tagName:"pre",properties:{},children:[A]},c.patch(y,A),A}function wB(c,y){const x={type:"element",tagName:"del",properties:{},children:c.all(y)};return c.patch(y,x),c.applyData(y,x)}function EB(c,y){const x={type:"element",tagName:"em",properties:{},children:c.all(y)};return c.patch(y,x),c.applyData(y,x)}function SB(c,y){const x=typeof c.options.clobberPrefix=="string"?c.options.clobberPrefix:"user-content-",E=String(y.identifier).toUpperCase(),A=Xg(E.toLowerCase()),R=c.footnoteOrder.indexOf(E);let C,U=c.footnoteCounts.get(E);U===void 0?(U=0,c.footnoteOrder.push(E),C=c.footnoteOrder.length):C=R+1,U+=1,c.footnoteCounts.set(E,U);const s={type:"element",tagName:"a",properties:{href:"#"+x+"fn-"+A,id:x+"fnref-"+A+(U>1?"-"+U:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(C)}]};c.patch(y,s);const N={type:"element",tagName:"sup",properties:{},children:[s]};return c.patch(y,N),c.applyData(y,N)}function TB(c,y){const x={type:"element",tagName:"h"+y.depth,properties:{},children:c.all(y)};return c.patch(y,x),c.applyData(y,x)}function CB(c,y){if(c.options.allowDangerousHtml){const x={type:"raw",value:y.value};return c.patch(y,x),c.applyData(y,x)}}function Tk(c,y){const x=y.referenceType;let E="]";if(x==="collapsed"?E+="[]":x==="full"&&(E+="["+(y.label||y.identifier)+"]"),y.type==="imageReference")return[{type:"text",value:"!["+y.alt+E}];const A=c.all(y),R=A[0];R&&R.type==="text"?R.value="["+R.value:A.unshift({type:"text",value:"["});const C=A[A.length-1];return C&&C.type==="text"?C.value+=E:A.push({type:"text",value:E}),A}function MB(c,y){const x=String(y.identifier).toUpperCase(),E=c.definitionById.get(x);if(!E)return Tk(c,y);const A={src:Xg(E.url||""),alt:y.alt};E.title!==null&&E.title!==void 0&&(A.title=E.title);const R={type:"element",tagName:"img",properties:A,children:[]};return c.patch(y,R),c.applyData(y,R)}function AB(c,y){const x={src:Xg(y.url)};y.alt!==null&&y.alt!==void 0&&(x.alt=y.alt),y.title!==null&&y.title!==void 0&&(x.title=y.title);const E={type:"element",tagName:"img",properties:x,children:[]};return c.patch(y,E),c.applyData(y,E)}function kB(c,y){const x={type:"text",value:y.value.replace(/\r?\n|\r/g," ")};c.patch(y,x);const E={type:"element",tagName:"code",properties:{},children:[x]};return c.patch(y,E),c.applyData(y,E)}function DB(c,y){const x=String(y.identifier).toUpperCase(),E=c.definitionById.get(x);if(!E)return Tk(c,y);const A={href:Xg(E.url||"")};E.title!==null&&E.title!==void 0&&(A.title=E.title);const R={type:"element",tagName:"a",properties:A,children:c.all(y)};return c.patch(y,R),c.applyData(y,R)}function RB(c,y){const x={href:Xg(y.url)};y.title!==null&&y.title!==void 0&&(x.title=y.title);const E={type:"element",tagName:"a",properties:x,children:c.all(y)};return c.patch(y,E),c.applyData(y,E)}function IB(c,y,x){const E=c.all(y),A=x?LB(x):Ck(y),R={},C=[];if(typeof y.checked=="boolean"){const G=E[0];let H;G&&G.type==="element"&&G.tagName==="p"?H=G:(H={type:"element",tagName:"p",properties:{},children:[]},E.unshift(H)),H.children.length>0&&H.children.unshift({type:"text",value:" "}),H.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:y.checked,disabled:!0},children:[]}),R.className=["task-list-item"]}let U=-1;for(;++U<E.length;){const G=E[U];(A||U!==0||G.type!=="element"||G.tagName!=="p")&&C.push({type:"text",value:`
`}),G.type==="element"&&G.tagName==="p"&&!A?C.push(...G.children):C.push(G)}const s=E[E.length-1];s&&(A||s.type!=="element"||s.tagName!=="p")&&C.push({type:"text",value:`
`});const N={type:"element",tagName:"li",properties:R,children:C};return c.patch(y,N),c.applyData(y,N)}function LB(c){let y=!1;if(c.type==="list"){y=c.spread||!1;const x=c.children;let E=-1;for(;!y&&++E<x.length;)y=Ck(x[E])}return y}function Ck(c){const y=c.spread;return y??c.children.length>1}function zB(c,y){const x={},E=c.all(y);let A=-1;for(typeof y.start=="number"&&y.start!==1&&(x.start=y.start);++A<E.length;){const C=E[A];if(C.type==="element"&&C.tagName==="li"&&C.properties&&Array.isArray(C.properties.className)&&C.properties.className.includes("task-list-item")){x.className=["contains-task-list"];break}}const R={type:"element",tagName:y.ordered?"ol":"ul",properties:x,children:c.wrap(E,!0)};return c.patch(y,R),c.applyData(y,R)}function PB(c,y){const x={type:"element",tagName:"p",properties:{},children:c.all(y)};return c.patch(y,x),c.applyData(y,x)}function OB(c,y){const x={type:"root",children:c.wrap(c.all(y))};return c.patch(y,x),c.applyData(y,x)}function BB(c,y){const x={type:"element",tagName:"strong",properties:{},children:c.all(y)};return c.patch(y,x),c.applyData(y,x)}function FB(c,y){const x=c.all(y),E=x.shift(),A=[];if(E){const C={type:"element",tagName:"thead",properties:{},children:c.wrap([E],!0)};c.patch(y.children[0],C),A.push(C)}if(x.length>0){const C={type:"element",tagName:"tbody",properties:{},children:c.wrap(x,!0)},U=fS(y.children[1]),s=ik(y.children[y.children.length-1]);U&&s&&(C.position={start:U,end:s}),A.push(C)}const R={type:"element",tagName:"table",properties:{},children:c.wrap(A,!0)};return c.patch(y,R),c.applyData(y,R)}function NB(c,y,x){const E=x?x.children:void 0,R=(E?E.indexOf(y):1)===0?"th":"td",C=x&&x.type==="table"?x.align:void 0,U=C?C.length:y.children.length;let s=-1;const N=[];for(;++s<U;){const H=y.children[s],X={},J=C?C[s]:void 0;J&&(X.align=J);let Pe={type:"element",tagName:R,properties:X,children:[]};H&&(Pe.children=c.all(H),c.patch(H,Pe),Pe=c.applyData(H,Pe)),N.push(Pe)}const G={type:"element",tagName:"tr",properties:{},children:c.wrap(N,!0)};return c.patch(y,G),c.applyData(y,G)}function UB(c,y){const x={type:"element",tagName:"td",properties:{},children:c.all(y)};return c.patch(y,x),c.applyData(y,x)}const GM=9,qM=32;function jB(c){const y=String(c),x=/\r?\n|\r/g;let E=x.exec(y),A=0;const R=[];for(;E;)R.push(HM(y.slice(A,E.index),A>0,!0),E[0]),A=E.index+E[0].length,E=x.exec(y);return R.push(HM(y.slice(A),A>0,!1)),R.join("")}function HM(c,y,x){let E=0,A=c.length;if(y){let R=c.codePointAt(E);for(;R===GM||R===qM;)E++,R=c.codePointAt(E)}if(x){let R=c.codePointAt(A-1);for(;R===GM||R===qM;)A--,R=c.codePointAt(A-1)}return A>E?c.slice(E,A):""}function VB(c,y){const x={type:"text",value:jB(String(y.value))};return c.patch(y,x),c.applyData(y,x)}function $B(c,y){const x={type:"element",tagName:"hr",properties:{},children:[]};return c.patch(y,x),c.applyData(y,x)}const GB={blockquote:_B,break:xB,code:bB,delete:wB,emphasis:EB,footnoteReference:SB,heading:TB,html:CB,imageReference:MB,image:AB,inlineCode:kB,linkReference:DB,link:RB,listItem:IB,list:zB,paragraph:PB,root:OB,strong:BB,table:FB,tableCell:UB,tableRow:NB,text:VB,thematicBreak:$B,toml:T0,yaml:T0,definition:T0,footnoteDefinition:T0};function T0(){}const Mk=-1,Y0=0,$0=1,G0=2,_S=3,xS=4,bS=5,wS=6,Ak=7,kk=8,WM=typeof self=="object"?self:globalThis,qB=(c,y)=>{const x=(A,R)=>(c.set(R,A),A),E=A=>{if(c.has(A))return c.get(A);const[R,C]=y[A];switch(R){case Y0:case Mk:return x(C,A);case $0:{const U=x([],A);for(const s of C)U.push(E(s));return U}case G0:{const U=x({},A);for(const[s,N]of C)U[E(s)]=E(N);return U}case _S:return x(new Date(C),A);case xS:{const{source:U,flags:s}=C;return x(new RegExp(U,s),A)}case bS:{const U=x(new Map,A);for(const[s,N]of C)U.set(E(s),E(N));return U}case wS:{const U=x(new Set,A);for(const s of C)U.add(E(s));return U}case Ak:{const{name:U,message:s}=C;return x(new WM[U](s),A)}case kk:return x(BigInt(C),A);case"BigInt":return x(Object(BigInt(C)),A)}return x(new WM[R](C),A)};return E},ZM=c=>qB(new Map,c)(0),Og="",{toString:HB}={},{keys:WB}=Object,e_=c=>{const y=typeof c;if(y!=="object"||!c)return[Y0,y];const x=HB.call(c).slice(8,-1);switch(x){case"Array":return[$0,Og];case"Object":return[G0,Og];case"Date":return[_S,Og];case"RegExp":return[xS,Og];case"Map":return[bS,Og];case"Set":return[wS,Og]}return x.includes("Array")?[$0,x]:x.includes("Error")?[Ak,x]:[G0,x]},C0=([c,y])=>c===Y0&&(y==="function"||y==="symbol"),ZB=(c,y,x,E)=>{const A=(C,U)=>{const s=E.push(C)-1;return x.set(U,s),s},R=C=>{if(x.has(C))return x.get(C);let[U,s]=e_(C);switch(U){case Y0:{let G=C;switch(s){case"bigint":U=kk,G=C.toString();break;case"function":case"symbol":if(c)throw new TypeError("unable to serialize "+s);G=null;break;case"undefined":return A([Mk],C)}return A([U,G],C)}case $0:{if(s)return A([s,[...C]],C);const G=[],H=A([U,G],C);for(const X of C)G.push(R(X));return H}case G0:{if(s)switch(s){case"BigInt":return A([s,C.toString()],C);case"Boolean":case"Number":case"String":return A([s,C.valueOf()],C)}if(y&&"toJSON"in C)return R(C.toJSON());const G=[],H=A([U,G],C);for(const X of WB(C))(c||!C0(e_(C[X])))&&G.push([R(X),R(C[X])]);return H}case _S:return A([U,C.toISOString()],C);case xS:{const{source:G,flags:H}=C;return A([U,{source:G,flags:H}],C)}case bS:{const G=[],H=A([U,G],C);for(const[X,J]of C)(c||!(C0(e_(X))||C0(e_(J))))&&G.push([R(X),R(J)]);return H}case wS:{const G=[],H=A([U,G],C);for(const X of C)(c||!C0(e_(X)))&&G.push(R(X));return H}}const{message:N}=C;return A([U,{name:s,message:N}],C)};return R},XM=(c,{json:y,lossy:x}={})=>{const E=[];return ZB(!(y||x),!!y,new Map,E)(c),E},q0=typeof structuredClone=="function"?(c,y)=>y&&("json"in y||"lossy"in y)?ZM(XM(c,y)):structuredClone(c):(c,y)=>ZM(XM(c,y));function XB(c,y){const x=[{type:"text",value:""}];return y>1&&x.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(y)}]}),x}function YB(c,y){return"Back to reference "+(c+1)+(y>1?"-"+y:"")}function KB(c){const y=typeof c.options.clobberPrefix=="string"?c.options.clobberPrefix:"user-content-",x=c.options.footnoteBackContent||XB,E=c.options.footnoteBackLabel||YB,A=c.options.footnoteLabel||"Footnotes",R=c.options.footnoteLabelTagName||"h2",C=c.options.footnoteLabelProperties||{className:["sr-only"]},U=[];let s=-1;for(;++s<c.footnoteOrder.length;){const N=c.footnoteById.get(c.footnoteOrder[s]);if(!N)continue;const G=c.all(N),H=String(N.identifier).toUpperCase(),X=Xg(H.toLowerCase());let J=0;const Pe=[],Re=c.footnoteCounts.get(H);for(;Re!==void 0&&++J<=Re;){Pe.length>0&&Pe.push({type:"text",value:" "});let Ne=typeof x=="string"?x:x(s,J);typeof Ne=="string"&&(Ne={type:"text",value:Ne}),Pe.push({type:"element",tagName:"a",properties:{href:"#"+y+"fnref-"+X+(J>1?"-"+J:""),dataFootnoteBackref:"",ariaLabel:typeof E=="string"?E:E(s,J),className:["data-footnote-backref"]},children:Array.isArray(Ne)?Ne:[Ne]})}const qe=G[G.length-1];if(qe&&qe.type==="element"&&qe.tagName==="p"){const Ne=qe.children[qe.children.length-1];Ne&&Ne.type==="text"?Ne.value+=" ":qe.children.push({type:"text",value:" "}),qe.children.push(...Pe)}else G.push(...Pe);const je={type:"element",tagName:"li",properties:{id:y+"fn-"+X},children:c.wrap(G,!0)};c.patch(N,je),U.push(je)}if(U.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:R,properties:{...q0(C),id:"footnote-label"},children:[{type:"text",value:A}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:c.wrap(U,!0)},{type:"text",value:`
`}]}}const Dk=function(c){if(c==null)return tF;if(typeof c=="function")return K0(c);if(typeof c=="object")return Array.isArray(c)?JB(c):QB(c);if(typeof c=="string")return eF(c);throw new Error("Expected function, string, or object as test")};function JB(c){const y=[];let x=-1;for(;++x<c.length;)y[x]=Dk(c[x]);return K0(E);function E(...A){let R=-1;for(;++R<y.length;)if(y[R].apply(this,A))return!0;return!1}}function QB(c){const y=c;return K0(x);function x(E){const A=E;let R;for(R in c)if(A[R]!==y[R])return!1;return!0}}function eF(c){return K0(y);function y(x){return x&&x.type===c}}function K0(c){return y;function y(x,E,A){return!!(nF(x)&&c.call(this,x,typeof E=="number"?E:void 0,A||void 0))}}function tF(){return!0}function nF(c){return c!==null&&typeof c=="object"&&"type"in c}const Rk=[],rF=!0,YM=!1,iF="skip";function aF(c,y,x,E){let A;typeof y=="function"&&typeof x!="function"?(E=x,x=y):A=y;const R=Dk(A),C=E?-1:1;U(c,void 0,[])();function U(s,N,G){const H=s&&typeof s=="object"?s:{};if(typeof H.type=="string"){const J=typeof H.tagName=="string"?H.tagName:typeof H.name=="string"?H.name:void 0;Object.defineProperty(X,"name",{value:"node ("+(s.type+(J?"<"+J+">":""))+")"})}return X;function X(){let J=Rk,Pe,Re,qe;if((!y||R(s,N,G[G.length-1]||void 0))&&(J=oF(x(s,G)),J[0]===YM))return J;if("children"in s&&s.children){const je=s;if(je.children&&J[0]!==iF)for(Re=(E?je.children.length:-1)+C,qe=G.concat(je);Re>-1&&Re<je.children.length;){const Ne=je.children[Re];if(Pe=U(Ne,Re,qe)(),Pe[0]===YM)return Pe;Re=typeof Pe[1]=="number"?Pe[1]:Re+C}}return J}}}function oF(c){return Array.isArray(c)?c:typeof c=="number"?[rF,c]:c==null?Rk:[c]}function Ik(c,y,x,E){let A,R,C;typeof y=="function"&&typeof x!="function"?(R=void 0,C=y,A=x):(R=y,C=x,A=E),aF(c,R,U,A);function U(s,N){const G=N[N.length-1],H=G?G.children.indexOf(s):void 0;return C(s,H,G)}}const JE={}.hasOwnProperty,sF={};function lF(c,y){const x=y||sF,E=new Map,A=new Map,R=new Map,C={...GB,...x.handlers},U={all:N,applyData:cF,definitionById:E,footnoteById:A,footnoteCounts:R,footnoteOrder:[],handlers:C,one:s,options:x,patch:uF,wrap:fF};return Ik(c,function(G){if(G.type==="definition"||G.type==="footnoteDefinition"){const H=G.type==="definition"?E:A,X=String(G.identifier).toUpperCase();H.has(X)||H.set(X,G)}}),U;function s(G,H){const X=G.type,J=U.handlers[X];if(JE.call(U.handlers,X)&&J)return J(U,G,H);if(U.options.passThrough&&U.options.passThrough.includes(X)){if("children"in G){const{children:Re,...qe}=G,je=q0(qe);return je.children=U.all(G),je}return q0(G)}return(U.options.unknownHandler||hF)(U,G,H)}function N(G){const H=[];if("children"in G){const X=G.children;let J=-1;for(;++J<X.length;){const Pe=U.one(X[J],G);if(Pe){if(J&&X[J-1].type==="break"&&(!Array.isArray(Pe)&&Pe.type==="text"&&(Pe.value=KM(Pe.value)),!Array.isArray(Pe)&&Pe.type==="element")){const Re=Pe.children[0];Re&&Re.type==="text"&&(Re.value=KM(Re.value))}Array.isArray(Pe)?H.push(...Pe):H.push(Pe)}}}return H}}function uF(c,y){c.position&&(y.position=UP(c))}function cF(c,y){let x=y;if(c&&c.data){const E=c.data.hName,A=c.data.hChildren,R=c.data.hProperties;if(typeof E=="string")if(x.type==="element")x.tagName=E;else{const C="children"in x?x.children:[x];x={type:"element",tagName:E,properties:{},children:C}}x.type==="element"&&R&&Object.assign(x.properties,q0(R)),"children"in x&&x.children&&A!==null&&A!==void 0&&(x.children=A)}return x}function hF(c,y){const x=y.data||{},E="value"in y&&!(JE.call(x,"hProperties")||JE.call(x,"hChildren"))?{type:"text",value:y.value}:{type:"element",tagName:"div",properties:{},children:c.all(y)};return c.patch(y,E),c.applyData(y,E)}function fF(c,y){const x=[];let E=-1;for(y&&x.push({type:"text",value:`
`});++E<c.length;)E&&x.push({type:"text",value:`
`}),x.push(c[E]);return y&&c.length>0&&x.push({type:"text",value:`
`}),x}function KM(c){let y=0,x=c.charCodeAt(y);for(;x===9||x===32;)y++,x=c.charCodeAt(y);return c.slice(y)}function JM(c,y){const x=lF(c,y),E=x.one(c,void 0),A=KB(x),R=Array.isArray(E)?{type:"root",children:E}:E||{type:"root",children:[]};return A&&(Ve("children"in R),R.children.push({type:"text",value:`
`},A)),R}function dF(c,y){return c&&"run"in c?async function(x,E){const A=JM(x,{file:E,...y});await c.run(A,E)}:function(x,E){return JM(x,{file:E,...c||y})}}function QM(c){if(c)throw c}var B0=Object.prototype.hasOwnProperty,Lk=Object.prototype.toString,eA=Object.defineProperty,tA=Object.getOwnPropertyDescriptor,nA=function(y){return typeof Array.isArray=="function"?Array.isArray(y):Lk.call(y)==="[object Array]"},rA=function(y){if(!y||Lk.call(y)!=="[object Object]")return!1;var x=B0.call(y,"constructor"),E=y.constructor&&y.constructor.prototype&&B0.call(y.constructor.prototype,"isPrototypeOf");if(y.constructor&&!x&&!E)return!1;var A;for(A in y);return typeof A>"u"||B0.call(y,A)},iA=function(y,x){eA&&x.name==="__proto__"?eA(y,x.name,{enumerable:!0,configurable:!0,value:x.newValue,writable:!0}):y[x.name]=x.newValue},aA=function(y,x){if(x==="__proto__")if(B0.call(y,x)){if(tA)return tA(y,x).value}else return;return y[x]},pF=function c(){var y,x,E,A,R,C,U=arguments[0],s=1,N=arguments.length,G=!1;for(typeof U=="boolean"&&(G=U,U=arguments[1]||{},s=2),(U==null||typeof U!="object"&&typeof U!="function")&&(U={});s<N;++s)if(y=arguments[s],y!=null)for(x in y)E=aA(U,x),A=aA(y,x),U!==A&&(G&&A&&(rA(A)||(R=nA(A)))?(R?(R=!1,C=E&&nA(E)?E:[]):C=E&&rA(E)?E:{},iA(U,{name:x,newValue:c(G,C,A)})):typeof A<"u"&&iA(U,{name:x,newValue:A}));return U};const SE=W0(pF);function QE(c){if(typeof c!="object"||c===null)return!1;const y=Object.getPrototypeOf(c);return(y===null||y===Object.prototype||Object.getPrototypeOf(y)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)}function mF(){const c=[],y={run:x,use:E};return y;function x(...A){let R=-1;const C=A.pop();if(typeof C!="function")throw new TypeError("Expected function as last argument, not "+C);U(null,...A);function U(s,...N){const G=c[++R];let H=-1;if(s){C(s);return}for(;++H<A.length;)(N[H]===null||N[H]===void 0)&&(N[H]=A[H]);A=N,G?gF(G,U)(...N):C(null,...N)}}function E(A){if(typeof A!="function")throw new TypeError("Expected `middelware` to be a function, not "+A);return c.push(A),y}}function gF(c,y){let x;return E;function E(...C){const U=c.length>C.length;let s;U&&C.push(A);try{s=c.apply(this,C)}catch(N){const G=N;if(U&&x)throw G;return A(G)}U||(s&&s.then&&typeof s.then=="function"?s.then(R,A):s instanceof Error?A(s):R(s))}function A(C,...U){x||(x=!0,y(C,...U))}function R(C){A(null,C)}}const Qc={basename:yF,dirname:vF,extname:_F,join:xF,sep:"/"};function yF(c,y){if(y!==void 0&&typeof y!="string")throw new TypeError('"ext" argument must be a string');d_(c);let x=0,E=-1,A=c.length,R;if(y===void 0||y.length===0||y.length>c.length){for(;A--;)if(c.codePointAt(A)===47){if(R){x=A+1;break}}else E<0&&(R=!0,E=A+1);return E<0?"":c.slice(x,E)}if(y===c)return"";let C=-1,U=y.length-1;for(;A--;)if(c.codePointAt(A)===47){if(R){x=A+1;break}}else C<0&&(R=!0,C=A+1),U>-1&&(c.codePointAt(A)===y.codePointAt(U--)?U<0&&(E=A):(U=-1,E=C));return x===E?E=C:E<0&&(E=c.length),c.slice(x,E)}function vF(c){if(d_(c),c.length===0)return".";let y=-1,x=c.length,E;for(;--x;)if(c.codePointAt(x)===47){if(E){y=x;break}}else E||(E=!0);return y<0?c.codePointAt(0)===47?"/":".":y===1&&c.codePointAt(0)===47?"//":c.slice(0,y)}function _F(c){d_(c);let y=c.length,x=-1,E=0,A=-1,R=0,C;for(;y--;){const U=c.codePointAt(y);if(U===47){if(C){E=y+1;break}continue}x<0&&(C=!0,x=y+1),U===46?A<0?A=y:R!==1&&(R=1):A>-1&&(R=-1)}return A<0||x<0||R===0||R===1&&A===x-1&&A===E+1?"":c.slice(A,x)}function xF(...c){let y=-1,x;for(;++y<c.length;)d_(c[y]),c[y]&&(x=x===void 0?c[y]:x+"/"+c[y]);return x===void 0?".":bF(x)}function bF(c){d_(c);const y=c.codePointAt(0)===47;let x=wF(c,!y);return x.length===0&&!y&&(x="."),x.length>0&&c.codePointAt(c.length-1)===47&&(x+="/"),y?"/"+x:x}function wF(c,y){let x="",E=0,A=-1,R=0,C=-1,U,s;for(;++C<=c.length;){if(C<c.length)U=c.codePointAt(C);else{if(U===47)break;U=47}if(U===47){if(!(A===C-1||R===1))if(A!==C-1&&R===2){if(x.length<2||E!==2||x.codePointAt(x.length-1)!==46||x.codePointAt(x.length-2)!==46){if(x.length>2){if(s=x.lastIndexOf("/"),s!==x.length-1){s<0?(x="",E=0):(x=x.slice(0,s),E=x.length-1-x.lastIndexOf("/")),A=C,R=0;continue}}else if(x.length>0){x="",E=0,A=C,R=0;continue}}y&&(x=x.length>0?x+"/..":"..",E=2)}else x.length>0?x+="/"+c.slice(A+1,C):x=c.slice(A+1,C),E=C-A-1;A=C,R=0}else U===46&&R>-1?R++:R=-1}return x}function d_(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}const EF={cwd:SF};function SF(){return"/"}function eS(c){return!!(c!==null&&typeof c=="object"&&"href"in c&&c.href&&"protocol"in c&&c.protocol&&c.auth===void 0)}function TF(c){if(typeof c=="string")c=new URL(c);else if(!eS(c)){const y=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+c+"`");throw y.code="ERR_INVALID_ARG_TYPE",y}if(c.protocol!=="file:"){const y=new TypeError("The URL must be of scheme file");throw y.code="ERR_INVALID_URL_SCHEME",y}return CF(c)}function CF(c){if(c.hostname!==""){const E=new TypeError('File URL host must be "localhost" or empty on darwin');throw E.code="ERR_INVALID_FILE_URL_HOST",E}const y=c.pathname;let x=-1;for(;++x<y.length;)if(y.codePointAt(x)===37&&y.codePointAt(x+1)===50){const E=y.codePointAt(x+2);if(E===70||E===102){const A=new TypeError("File URL path must not include encoded / characters");throw A.code="ERR_INVALID_FILE_URL_PATH",A}}return decodeURIComponent(y)}const TE=["history","path","basename","stem","extname","dirname"];class zk{constructor(y){let x;y?eS(y)?x={path:y}:typeof y=="string"||MF(y)?x={value:y}:x=y:x={},this.cwd="cwd"in x?"":EF.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let E=-1;for(;++E<TE.length;){const R=TE[E];R in x&&x[R]!==void 0&&x[R]!==null&&(this[R]=R==="history"?[...x[R]]:x[R])}let A;for(A in x)TE.includes(A)||(this[A]=x[A])}get basename(){return typeof this.path=="string"?Qc.basename(this.path):void 0}set basename(y){ME(y,"basename"),CE(y,"basename"),this.path=Qc.join(this.dirname||"",y)}get dirname(){return typeof this.path=="string"?Qc.dirname(this.path):void 0}set dirname(y){oA(this.basename,"dirname"),this.path=Qc.join(y||"",this.basename)}get extname(){return typeof this.path=="string"?Qc.extname(this.path):void 0}set extname(y){if(CE(y,"extname"),oA(this.dirname,"extname"),y){if(y.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(y.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qc.join(this.dirname,this.stem+(y||""))}get path(){return this.history[this.history.length-1]}set path(y){eS(y)&&(y=TF(y)),ME(y,"path"),this.path!==y&&this.history.push(y)}get stem(){return typeof this.path=="string"?Qc.basename(this.path,this.extname):void 0}set stem(y){ME(y,"stem"),CE(y,"stem"),this.path=Qc.join(this.dirname||"",y+(this.extname||""))}fail(y,x,E){const A=this.message(y,x,E);throw A.fatal=!0,A}info(y,x,E){const A=this.message(y,x,E);return A.fatal=void 0,A}message(y,x,E){const A=new Zo(y,x,E);return this.path&&(A.name=this.path+":"+A.name,A.file=this.path),A.fatal=!1,this.messages.push(A),A}toString(y){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(y||void 0).decode(this.value)}}function CE(c,y){if(c&&c.includes(Qc.sep))throw new Error("`"+y+"` cannot be a path: did not expect `"+Qc.sep+"`")}function ME(c,y){if(!c)throw new Error("`"+y+"` cannot be empty")}function oA(c,y){if(!c)throw new Error("Setting `"+y+"` requires `path` to be set too")}function MF(c){return!!(c&&typeof c=="object"&&"byteLength"in c&&"byteOffset"in c)}const AF=function(c){const E=this.constructor.prototype,A=E[c],R=function(){return A.apply(R,arguments)};return Object.setPrototypeOf(R,E),R},kF={}.hasOwnProperty;class ES extends AF{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=mF()}copy(){const y=new ES;let x=-1;for(;++x<this.attachers.length;){const E=this.attachers[x];y.use(...E)}return y.data(SE(!0,{},this.namespace)),y}data(y,x){return typeof y=="string"?arguments.length===2?(DE("data",this.frozen),this.namespace[y]=x,this):kF.call(this.namespace,y)&&this.namespace[y]||void 0:y?(DE("data",this.frozen),this.namespace=y,this):this.namespace}freeze(){if(this.frozen)return this;const y=this;for(;++this.freezeIndex<this.attachers.length;){const[x,...E]=this.attachers[this.freezeIndex];if(E[0]===!1)continue;E[0]===!0&&(E[0]=void 0);const A=x.call(y,...E);typeof A=="function"&&this.transformers.use(A)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(y){this.freeze();const x=M0(y),E=this.parser||this.Parser;return AE("parse",E),E(String(x),x)}process(y,x){const E=this;return this.freeze(),AE("process",this.parser||this.Parser),kE("process",this.compiler||this.Compiler),x?A(void 0,x):new Promise(A);function A(R,C){const U=M0(y),s=E.parse(U);E.run(s,U,function(G,H,X){if(G||!H||!X)return N(G);const J=H,Pe=E.stringify(J,X);IF(Pe)?X.value=Pe:X.result=Pe,N(G,X)});function N(G,H){G||!H?C(G):R?R(H):(Ve(x,"`done` is defined if `resolve` is not"),x(void 0,H))}}}processSync(y){let x=!1,E;return this.freeze(),AE("processSync",this.parser||this.Parser),kE("processSync",this.compiler||this.Compiler),this.process(y,A),lA("processSync","process",x),Ve(E,"we either bailed on an error or have a tree"),E;function A(R,C){x=!0,QM(R),E=C}}run(y,x,E){sA(y),this.freeze();const A=this.transformers;return!E&&typeof x=="function"&&(E=x,x=void 0),E?R(void 0,E):new Promise(R);function R(C,U){Ve(typeof x!="function","`file` cant be a `done` anymore, we checked");const s=M0(x);A.run(y,s,N);function N(G,H,X){const J=H||y;G?U(G):C?C(J):(Ve(E,"`done` is defined if `resolve` is not"),E(void 0,J,X))}}}runSync(y,x){let E=!1,A;return this.run(y,x,R),lA("runSync","run",E),Ve(A,"we either bailed on an error or have a tree"),A;function R(C,U){QM(C),A=U,E=!0}}stringify(y,x){this.freeze();const E=M0(x),A=this.compiler||this.Compiler;return kE("stringify",A),sA(y),A(y,E)}use(y,...x){const E=this.attachers,A=this.namespace;if(DE("use",this.frozen),y!=null)if(typeof y=="function")s(y,x);else if(typeof y=="object")Array.isArray(y)?U(y):C(y);else throw new TypeError("Expected usable value, not `"+y+"`");return this;function R(N){if(typeof N=="function")s(N,[]);else if(typeof N=="object")if(Array.isArray(N)){const[G,...H]=N;s(G,H)}else C(N);else throw new TypeError("Expected usable value, not `"+N+"`")}function C(N){if(!("plugins"in N)&&!("settings"in N))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");U(N.plugins),N.settings&&(A.settings=SE(!0,A.settings,N.settings))}function U(N){let G=-1;if(N!=null)if(Array.isArray(N))for(;++G<N.length;){const H=N[G];R(H)}else throw new TypeError("Expected a list of plugins, not `"+N+"`")}function s(N,G){let H=-1,X=-1;for(;++H<E.length;)if(E[H][0]===N){X=H;break}if(X===-1)E.push([N,...G]);else if(G.length>0){let[J,...Pe]=G;const Re=E[X][1];QE(Re)&&QE(J)&&(J=SE(!0,Re,J)),E[X]=[N,J,...Pe]}}}}const DF=new ES().freeze();function AE(c,y){if(typeof y!="function")throw new TypeError("Cannot `"+c+"` without `parser`")}function kE(c,y){if(typeof y!="function")throw new TypeError("Cannot `"+c+"` without `compiler`")}function DE(c,y){if(y)throw new Error("Cannot call `"+c+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sA(c){if(!QE(c)||typeof c.type!="string")throw new TypeError("Expected node, got `"+c+"`")}function lA(c,y,x){if(!x)throw new Error("`"+c+"` finished async. Use `"+y+"` instead")}function M0(c){return RF(c)?c:new zk(c)}function RF(c){return!!(c&&typeof c=="object"&&"message"in c&&"messages"in c)}function IF(c){return typeof c=="string"||LF(c)}function LF(c){return!!(c&&typeof c=="object"&&"byteLength"in c&&"byteOffset"in c)}const zF="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",uA=[],cA={allowDangerousHtml:!0},PF=/^(https?|ircs?|mailto|xmpp)$/i,OF=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function BF(c){const y=c.allowedElements,x=c.allowElement,E=c.children||"",A=c.className,R=c.components,C=c.disallowedElements,U=c.rehypePlugins||uA,s=c.remarkPlugins||uA,N=c.remarkRehypeOptions?{...c.remarkRehypeOptions,...cA}:cA,G=c.skipHtml,H=c.unwrapDisallowed,X=c.urlTransform||FF,J=DF().use(vB).use(s).use(dF,N).use(U),Pe=new zk;typeof E=="string"?Pe.value=E:vE("Unexpected value `"+E+"` for `children` prop, expected `string`"),y&&C&&vE("Unexpected combined `allowedElements` and `disallowedElements`, expected one or the other");for(const Ne of OF)Object.hasOwn(c,Ne.from)&&vE("Unexpected `"+Ne.from+"` prop, "+(Ne.to?"use `"+Ne.to+"` instead":"remove it")+" (see <"+zF+"#"+Ne.id+"> for more info)");const Re=J.parse(Pe);let qe=J.runSync(Re,Pe);return A&&(qe={type:"element",tagName:"div",properties:{className:A},children:qe.type==="root"?qe.children:[qe]}),Ik(qe,je),HP(qe,{Fragment:ii.Fragment,components:R,ignoreInvalidStyle:!0,jsx:ii.jsx,jsxs:ii.jsxs,passKeys:!0,passNode:!0});function je(Ne,Xe,Et){if(Ne.type==="raw"&&Et&&typeof Xe=="number")return G?Et.children.splice(Xe,1):Et.children[Xe]={type:"text",value:Ne.value},Xe;if(Ne.type==="element"){let St;for(St in xE)if(Object.hasOwn(xE,St)&&Object.hasOwn(Ne.properties,St)){const Qe=Ne.properties[St],Nt=xE[St];(Nt===null||Nt.includes(Ne.tagName))&&(Ne.properties[St]=X(String(Qe||""),St,Ne))}}if(Ne.type==="element"){let St=y?!y.includes(Ne.tagName):C?C.includes(Ne.tagName):!1;if(!St&&x&&typeof Xe=="number"&&(St=!x(Ne,Xe,Et)),St&&Et&&typeof Xe=="number")return H&&Ne.children?Et.children.splice(Xe,1,...Ne.children):Et.children.splice(Xe,1),Xe}}}function FF(c){const y=c.indexOf(":"),x=c.indexOf("?"),E=c.indexOf("#"),A=c.indexOf("/");return y<0||A>-1&&y>A||x>-1&&y>x||E>-1&&y>E||PF.test(c.slice(0,y))?c:""}const NF=({location:c,onClose:y})=>{var N,G;const[x,E]=ke.useState(""),[A,R]=ke.useState(!0),[C,U]=ke.useState(null);ke.useEffect(()=>{var H,X;console.log("LocationDetailModal mounted with location:",c),(X=(H=c==null?void 0:c.content)==null?void 0:H.stories)!=null&&X[0]?s(c.content.stories[0].file):R(!1)},[c]);const s=async H=>{try{console.log("Loading story:",H),R(!0);const X=await fetch(`/api/stories/${H}`);if(console.log("Story response:",X),!X.ok)throw new Error("Failed to load story");const J=await X.text();console.log("Story content:",J),E(J),U(null)}catch(X){console.error("Error loading story:",X),U(X.message)}finally{R(!1)}};return console.log("Current modal state:",{loading:A,error:C,hasStory:!!x}),Rt.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:Rt.jsxDEV("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden relative",children:[Rt.jsxDEV("button",{onClick:y,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full",children:Rt.jsxDEV(WA,{className:"h-6 w-6"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:49,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:45,columnNumber:9},void 0),Rt.jsxDEV("div",{className:"overflow-y-auto max-h-[90vh]",children:[Rt.jsxDEV("div",{className:"p-6 border-b",children:[Rt.jsxDEV("h2",{className:"text-2xl font-bold",children:c.name},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:54,columnNumber:13},void 0),Rt.jsxDEV("p",{className:"text-gray-600 mt-2",children:c.shortDescription},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:55,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:53,columnNumber:11},void 0),Rt.jsxDEV("div",{className:"p-6 space-y-6",children:[Rt.jsxDEV("div",{className:"flex items-start gap-2",children:[Rt.jsxDEV(HA,{className:"h-5 w-5 text-gray-400 mt-1"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:60,columnNumber:15},void 0),Rt.jsxDEV("div",{children:[Rt.jsxDEV("h3",{className:"font-medium",children:"Location"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:62,columnNumber:17},void 0),Rt.jsxDEV("p",{className:"text-gray-600",children:[c.coordinates.lat.toFixed(6),", ",c.coordinates.lng.toFixed(6)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:63,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:61,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:59,columnNumber:13},void 0),c.historicalPeriods&&Rt.jsxDEV("div",{className:"flex items-start gap-2",children:[Rt.jsxDEV(nP,{className:"h-5 w-5 text-gray-400 mt-1"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:71,columnNumber:17},void 0),Rt.jsxDEV("div",{children:[Rt.jsxDEV("h3",{className:"font-medium",children:"Historical Period"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:73,columnNumber:19},void 0),Rt.jsxDEV("p",{className:"text-gray-600",children:c.historicalPeriods.join(", ")},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:74,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:72,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:70,columnNumber:15},void 0),c.tags&&c.tags.length>0&&Rt.jsxDEV("div",{className:"flex items-start gap-2",children:[Rt.jsxDEV(iP,{className:"h-5 w-5 text-gray-400 mt-1"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:83,columnNumber:17},void 0),Rt.jsxDEV("div",{children:[Rt.jsxDEV("h3",{className:"font-medium",children:"Tags"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:85,columnNumber:19},void 0),Rt.jsxDEV("div",{className:"flex flex-wrap gap-2 mt-1",children:c.tags.map((H,X)=>Rt.jsxDEV("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-sm",children:H},X,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:88,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:86,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:84,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:82,columnNumber:15},void 0),((G=(N=c.content)==null?void 0:N.stories)==null?void 0:G.length)>0&&Rt.jsxDEV("div",{className:"flex items-start gap-2",children:[Rt.jsxDEV(rP,{className:"h-5 w-5 text-gray-400 mt-1"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:102,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"flex-1",children:[Rt.jsxDEV("h3",{className:"font-medium",children:"Story"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:104,columnNumber:19},void 0),A?Rt.jsxDEV("p",{className:"text-gray-600",children:"Loading story..."},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:106,columnNumber:21},void 0):C?Rt.jsxDEV("p",{className:"text-red-600",children:C},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:108,columnNumber:21},void 0):Rt.jsxDEV("div",{className:"prose max-w-none mt-2",children:Rt.jsxDEV(BF,{children:x},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:111,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:110,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:103,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:101,columnNumber:15},void 0),c.photos&&c.photos.length>0&&Rt.jsxDEV("div",{className:"mt-6",children:[Rt.jsxDEV("h3",{className:"font-medium mb-2",children:"Photos"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:120,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:c.photos.map((H,X)=>Rt.jsxDEV("div",{className:"relative",children:[Rt.jsxDEV("img",{src:H.path,alt:H.caption||`Photo ${X+1}`,className:"w-full h-48 object-cover rounded"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:124,columnNumber:23},void 0),H.caption&&Rt.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:H.caption},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:130,columnNumber:25},void 0)]},X,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:123,columnNumber:21},void 0))},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:121,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:119,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:58,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:52,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:44,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/LocationDetailModal.jsx",lineNumber:43,columnNumber:5},void 0)};Ug.accessToken="pk.eyJ1IjoiY2VpbmFyc29uIiwiYSI6ImNtNGEybmN0ajAzOWQycXE1M2VibWNiZjkifQ.7JrNDHO9geEP_L9UT4hGgg";const UF=({locations:c,currentLocation:y})=>{const x=ke.useRef(null),E=ke.useRef(null),A=ke.useRef([]),[R,C]=ke.useState(null),U=N=>N.coordinates?N.coordinates:N.location&&N.location.coordinates?N.location.coordinates:null,s=N=>typeof N.name=="string"?N.name:N.name&&N.name.current?N.name.current:"Unnamed Location";return ke.useEffect(()=>{if(!E.current)try{console.log("Initializing map..."),E.current=new Ug.Map({container:x.current,style:"mapbox://styles/mapbox/outdoors-v12",center:[-122.5199,47.6262],zoom:12}),E.current.addControl(new Ug.NavigationControl),console.log("Map initialized successfully")}catch(N){console.error("Error initializing map:",N)}},[]),ke.useEffect(()=>{!E.current||!c||(console.log("Updating location markers...",c),A.current.forEach(N=>N.remove()),A.current=[],c.forEach(N=>{var J;const G=U(N);if(!G)return;const H=new Ug.Popup({offset:25}).setHTML(`
        <div>
          <h3 class="font-bold">${s(N)}</h3>
          <p class="text-sm">${N.shortDescription||((J=N.content)==null?void 0:J.summary)||""}</p>
          <button 
            onclick="window.showLocationDetails('${N.id}')"
            class="mt-2 text-sm text-blue-600 hover:underline"
          >
            View Details
          </button>
        </div>
      `),X=new Ug.Marker().setLngLat([G.lng,G.lat]).setPopup(H).addTo(E.current);A.current.push(X)}),window.showLocationDetails=N=>{const G=c.find(H=>H.id===N);G&&C(G)})},[c]),ke.useEffect(()=>{if(!(!E.current||!y)){console.log("Setting current location:",y);try{const N=new Ug.Marker({color:"#FF0000"}).setLngLat([y.lng,y.lat]).addTo(E.current);A.current.push(N),E.current.flyTo({center:[y.lng,y.lat],zoom:15})}catch(N){console.error("Error updating current location:",N)}}},[y]),Rt.jsxDEV(Rt.Fragment,{children:[Rt.jsxDEV("div",{ref:x,className:"absolute inset-0",style:{minHeight:"400px",width:"100%",height:"100%"}},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/Map.jsx",lineNumber:127,columnNumber:7},void 0),R&&Rt.jsxDEV(NF,{location:R,onClose:()=>C(null)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/Map.jsx",lineNumber:137,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/Map.jsx",lineNumber:126,columnNumber:5},void 0)},jF=["Pre-1850","1850-1870","1871-1890","1891-1910","1911-1930","1931-1950","1951-1970","Post-1970"],VF=({onLocationAdded:c,setCurrentLocation:y})=>{const[x,E]=ke.useState(!1),[A,R]=ke.useState(null),[C,U]=ke.useState([]),[s,N]=ke.useState(""),[G,H]=ke.useState(""),[X,J]=ke.useState(""),[Pe,Re]=ke.useState(""),[qe,je]=ke.useState(""),[Ne,Xe]=ke.useState([]),[Et,St]=ke.useState([]),[Qe,Nt]=ke.useState([]),[Mn,dn]=ke.useState(0),[ut,qn]=ke.useState(!1),[Jn,et]=ke.useState("");ke.useEffect(()=>{x&&fetch("/api/locations").then(It=>It.json()).then(It=>U(It)).catch(It=>console.error("Failed to load existing locations:",It))},[x]);const $t=()=>{if(qn(!0),et(""),!navigator.geolocation){et("Geolocation is not supported by your browser"),qn(!1);return}navigator.geolocation.getCurrentPosition(It=>{const Ee={lat:It.coords.latitude,lng:It.coords.longitude};R(Ee),y(Ee),qn(!1)},It=>{et("Unable to get location: "+It.message),qn(!1)},{enableHighAccuracy:!0})},un=It=>{const Ee=Array.from(It.target.files),Fn=Ee.filter(An=>An.type.startsWith("image/")&&An.size<=5*1024*1024);Fn.length!==Ee.length&&et("Some files were skipped. Photos must be images under 5MB."),St(An=>[...An,...Fn]),Fn.forEach(An=>{const Me=URL.createObjectURL(An);Nt(Vn=>[...Vn,Me])})},Hn=It=>{St(Ee=>Ee.filter((Fn,An)=>An!==It)),URL.revokeObjectURL(Qe[It]),Nt(Ee=>Ee.filter((Fn,An)=>An!==It))},cn=async()=>{const It=[];dn(0);for(let Ee=0;Ee<Et.length;Ee++){const Fn=Et[Ee],An=new FormData;An.append("file",Fn),An.append("type","image");try{const Me=await fetch("/api/media/upload",{method:"POST",body:An});if(!Me.ok)throw new Error("Failed to upload photo");const Vn=await Me.json();It.push({filename:Vn.filename,path:Vn.path,caption:""}),dn((Ee+1)/Et.length*100)}catch(Me){console.error("Error uploading photo:",Me),et(`Failed to upload ${Fn.name}`)}}return It},Cr=async()=>{try{qn(!0);const It=Et.length>0?await cn():[],Ee=qe.split(`
`).map(Me=>Me.trim()).filter(Me=>Me),Fn={name:s,shortDescription:G,historicalSignificance:X,coordinates:A,timePeriod:Pe,sources:Ee,relatedLocationIds:Ne,photos:It,status:"pending_review",submittedAt:new Date().toISOString(),id:`loc_${Date.now()}`};if(!(await fetch("/api/locations/draft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Fn)})).ok)throw new Error("Failed to save location");Qe.forEach(Me=>URL.revokeObjectURL(Me)),N(""),H(""),J(""),Re(""),je(""),Xe([]),St([]),Nt([]),R(null),E(!1),dn(0),c(Fn),alert("Location submitted for review")}catch(It){et("Failed to save location: "+It.message)}finally{qn(!1)}};return Rt.jsxDEV(Rt.Fragment,{children:[Rt.jsxDEV("button",{onClick:()=>{E(!0),$t()},className:"fixed bottom-4 right-4 flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:[Rt.jsxDEV(HA,{className:"h-4 w-4"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:208,columnNumber:9},void 0),"Add Location"]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:201,columnNumber:7},void 0),x&&Rt.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:Rt.jsxDEV("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-auto my-8",children:[Rt.jsxDEV("h2",{className:"text-xl font-bold mb-4",children:"Add Historical Location"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:215,columnNumber:13},void 0),Rt.jsxDEV("p",{className:"text-gray-600 mb-4",children:"Suggest a new historical location. Your current GPS coordinates will be used."},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:216,columnNumber:13},void 0),Jn&&Rt.jsxDEV("div",{className:"text-red-500 text-sm mb-4",children:Jn},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:221,columnNumber:15},void 0),ut?Rt.jsxDEV("div",{className:"text-center py-4",children:Mn>0?Rt.jsxDEV("div",{children:[Rt.jsxDEV("p",{children:["Uploading photos... ",Math.round(Mn),"%"]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:230,columnNumber:21},void 0),Rt.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:Rt.jsxDEV("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${Mn}%`}},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:232,columnNumber:23},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:231,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:229,columnNumber:19},void 0):"Getting your location..."},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:227,columnNumber:15},void 0):A?Rt.jsxDEV("div",{className:"space-y-4",children:[Rt.jsxDEV("div",{className:"text-sm text-gray-600",children:["Coordinates: ",A.lat.toFixed(6),", ",A.lng.toFixed(6)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:244,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Location Name"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:249,columnNumber:19},void 0),Rt.jsxDEV("input",{type:"text",value:s,onChange:It=>N(It.target.value),placeholder:"e.g., Old Mill Site",className:"w-full px-3 py-2 border rounded-md"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:250,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:248,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Brief Description"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:260,columnNumber:19},void 0),Rt.jsxDEV("textarea",{value:G,onChange:It=>H(It.target.value),placeholder:"Brief description of the location...",rows:2,className:"w-full px-3 py-2 border rounded-md"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:261,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:259,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Historical Significance"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:271,columnNumber:19},void 0),Rt.jsxDEV("textarea",{value:X,onChange:It=>J(It.target.value),placeholder:"Why is this location historically significant?",rows:3,className:"w-full px-3 py-2 border rounded-md"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:272,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:270,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Time Period"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:282,columnNumber:19},void 0),Rt.jsxDEV("select",{value:Pe,onChange:It=>Re(It.target.value),className:"w-full px-3 py-2 border rounded-md",children:[Rt.jsxDEV("option",{value:"",children:"Select a time period..."},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:288,columnNumber:21},void 0),jF.map(It=>Rt.jsxDEV("option",{value:It,children:It},It,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:290,columnNumber:23},void 0))]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:283,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:281,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Photos"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:296,columnNumber:19},void 0),Rt.jsxDEV("div",{className:"border-2 border-dashed rounded-md p-4",children:[Rt.jsxDEV("input",{type:"file",accept:"image/*",multiple:!0,onChange:un,className:"hidden",id:"photo-upload"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:298,columnNumber:21},void 0),Rt.jsxDEV("label",{htmlFor:"photo-upload",className:"flex items-center justify-center gap-2 cursor-pointer",children:[Rt.jsxDEV(aP,{size:20},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:310,columnNumber:23},void 0),Rt.jsxDEV("span",{children:"Upload Photos (max 5MB each)"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:311,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:306,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:297,columnNumber:19},void 0),Qe.length>0&&Rt.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:Qe.map((It,Ee)=>Rt.jsxDEV("div",{className:"relative",children:[Rt.jsxDEV("img",{src:It,alt:`Upload ${Ee+1}`,className:"w-full h-32 object-cover rounded-md"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:318,columnNumber:27},void 0),Rt.jsxDEV("button",{onClick:()=>Hn(Ee),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:Rt.jsxDEV(WA,{size:16},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:327,columnNumber:29},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:323,columnNumber:27},void 0)]},Ee,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:317,columnNumber:25},void 0))},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:315,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:295,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Sources & References"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:336,columnNumber:19},void 0),Rt.jsxDEV("textarea",{value:qe,onChange:It=>je(It.target.value),placeholder:"Add URLs or references (one per line)",rows:3,className:"w-full px-3 py-2 border rounded-md font-mono text-sm"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:337,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:335,columnNumber:17},void 0),Rt.jsxDEV("div",{className:"space-y-2",children:[Rt.jsxDEV("label",{className:"text-sm font-medium",children:"Related Locations"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:347,columnNumber:19},void 0),Rt.jsxDEV("select",{multiple:!0,value:Ne,onChange:It=>Xe(Array.from(It.target.selectedOptions,Ee=>Ee.value)),className:"w-full px-3 py-2 border rounded-md",size:3,children:C.map(It=>Rt.jsxDEV("option",{value:It.id,children:typeof It.name=="string"?It.name:It.name.current},It.id,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:358,columnNumber:23},void 0))},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:348,columnNumber:19},void 0),Rt.jsxDEV("p",{className:"text-xs text-gray-500",children:"Hold Ctrl/Cmd to select multiple locations"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:363,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:346,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:243,columnNumber:15},void 0):null,Rt.jsxDEV("div",{className:"mt-6 flex justify-end gap-2",children:[Rt.jsxDEV("button",{onClick:()=>{Qe.forEach(It=>URL.revokeObjectURL(It)),E(!1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:371,columnNumber:15},void 0),Rt.jsxDEV("button",{onClick:Cr,disabled:!A||!s.trim()||ut,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit for Review"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:380,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:370,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:214,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:213,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/components/AddLocationButton.jsx",lineNumber:200,columnNumber:5},void 0)};function Cd(c,y,{checkForDefaultPrevented:x=!0}={}){return function(A){if(c==null||c(A),x===!1||!A.defaultPrevented)return y==null?void 0:y(A)}}function hA(c,y){if(typeof c=="function")return c(y);c!=null&&(c.current=y)}function Pk(...c){return y=>{let x=!1;const E=c.map(A=>{const R=hA(A,y);return!x&&typeof R=="function"&&(x=!0),R});if(x)return()=>{for(let A=0;A<E.length;A++){const R=E[A];typeof R=="function"?R():hA(c[A],null)}}}}function em(...c){return ke.useCallback(Pk(...c),c)}function $F(c,y){const x=ke.createContext(y),E=R=>{const{children:C,...U}=R,s=ke.useMemo(()=>U,Object.values(U));return ii.jsx(x.Provider,{value:s,children:C})};E.displayName=c+"Provider";function A(R){const C=ke.useContext(x);if(C)return C;if(y!==void 0)return y;throw new Error(`\`${R}\` must be used within \`${c}\``)}return[E,A]}function GF(c,y=[]){let x=[];function E(R,C){const U=ke.createContext(C),s=x.length;x=[...x,C];const N=H=>{var je;const{scope:X,children:J,...Pe}=H,Re=((je=X==null?void 0:X[c])==null?void 0:je[s])||U,qe=ke.useMemo(()=>Pe,Object.values(Pe));return ii.jsx(Re.Provider,{value:qe,children:J})};N.displayName=R+"Provider";function G(H,X){var Re;const J=((Re=X==null?void 0:X[c])==null?void 0:Re[s])||U,Pe=ke.useContext(J);if(Pe)return Pe;if(C!==void 0)return C;throw new Error(`\`${H}\` must be used within \`${R}\``)}return[N,G]}const A=()=>{const R=x.map(C=>ke.createContext(C));return function(U){const s=(U==null?void 0:U[c])||R;return ke.useMemo(()=>({[`__scope${c}`]:{...U,[c]:s}}),[U,s])}};return A.scopeName=c,[E,qF(A,...y)]}function qF(...c){const y=c[0];if(c.length===1)return y;const x=()=>{const E=c.map(A=>({useScope:A(),scopeName:A.scopeName}));return function(R){const C=E.reduce((U,{useScope:s,scopeName:N})=>{const H=s(R)[`__scope${N}`];return{...U,...H}},{});return ke.useMemo(()=>({[`__scope${y.scopeName}`]:C}),[C])}};return x.scopeName=y.scopeName,x}var tS=globalThis!=null&&globalThis.document?ke.useLayoutEffect:()=>{},HF=MA.useId||(()=>{}),WF=0;function RE(c){const[y,x]=ke.useState(HF());return tS(()=>{c||x(E=>E??String(WF++))},[c]),c||(y?`radix-${y}`:"")}function Kp(c){const y=ke.useRef(c);return ke.useEffect(()=>{y.current=c}),ke.useMemo(()=>(...x)=>{var E;return(E=y.current)==null?void 0:E.call(y,...x)},[])}function ZF({prop:c,defaultProp:y,onChange:x=()=>{}}){const[E,A]=XF({defaultProp:y,onChange:x}),R=c!==void 0,C=R?c:E,U=Kp(x),s=ke.useCallback(N=>{if(R){const H=typeof N=="function"?N(c):N;H!==c&&U(H)}else A(N)},[R,c,A,U]);return[C,s]}function XF({defaultProp:c,onChange:y}){const x=ke.useState(c),[E]=x,A=ke.useRef(E),R=Kp(y);return ke.useEffect(()=>{A.current!==E&&(R(E),A.current=E)},[E,A,R]),x}var SS=ke.forwardRef((c,y)=>{const{children:x,...E}=c,A=ke.Children.toArray(x),R=A.find(KF);if(R){const C=R.props.children,U=A.map(s=>s===R?ke.Children.count(C)>1?ke.Children.only(null):ke.isValidElement(C)?C.props.children:null:s);return ii.jsx(nS,{...E,ref:y,children:ke.isValidElement(C)?ke.cloneElement(C,void 0,U):null})}return ii.jsx(nS,{...E,ref:y,children:x})});SS.displayName="Slot";var nS=ke.forwardRef((c,y)=>{const{children:x,...E}=c;if(ke.isValidElement(x)){const A=QF(x);return ke.cloneElement(x,{...JF(E,x.props),ref:y?Pk(y,A):A})}return ke.Children.count(x)>1?ke.Children.only(null):null});nS.displayName="SlotClone";var YF=({children:c})=>ii.jsx(ii.Fragment,{children:c});function KF(c){return ke.isValidElement(c)&&c.type===YF}function JF(c,y){const x={...y};for(const E in y){const A=c[E],R=y[E];/^on[A-Z]/.test(E)?A&&R?x[E]=(...U)=>{R(...U),A(...U)}:A&&(x[E]=A):E==="style"?x[E]={...A,...R}:E==="className"&&(x[E]=[A,R].filter(Boolean).join(" "))}return{...c,...x}}function QF(c){var E,A;let y=(E=Object.getOwnPropertyDescriptor(c.props,"ref"))==null?void 0:E.get,x=y&&"isReactWarning"in y&&y.isReactWarning;return x?c.ref:(y=(A=Object.getOwnPropertyDescriptor(c,"ref"))==null?void 0:A.get,x=y&&"isReactWarning"in y&&y.isReactWarning,x?c.props.ref:c.props.ref||c.ref)}var eN=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],kd=eN.reduce((c,y)=>{const x=ke.forwardRef((E,A)=>{const{asChild:R,...C}=E,U=R?SS:y;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ii.jsx(U,{...C,ref:A})});return x.displayName=`Primitive.${y}`,{...c,[y]:x}},{});function tN(c,y){c&&RA.flushSync(()=>c.dispatchEvent(y))}function nN(c,y=globalThis==null?void 0:globalThis.document){const x=Kp(c);ke.useEffect(()=>{const E=A=>{A.key==="Escape"&&x(A)};return y.addEventListener("keydown",E,{capture:!0}),()=>y.removeEventListener("keydown",E,{capture:!0})},[x,y])}var rN="DismissableLayer",rS="dismissableLayer.update",iN="dismissableLayer.pointerDownOutside",aN="dismissableLayer.focusOutside",fA,Ok=ke.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Bk=ke.forwardRef((c,y)=>{const{disableOutsidePointerEvents:x=!1,onEscapeKeyDown:E,onPointerDownOutside:A,onFocusOutside:R,onInteractOutside:C,onDismiss:U,...s}=c,N=ke.useContext(Ok),[G,H]=ke.useState(null),X=(G==null?void 0:G.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,J]=ke.useState({}),Pe=em(y,Nt=>H(Nt)),Re=Array.from(N.layers),[qe]=[...N.layersWithOutsidePointerEventsDisabled].slice(-1),je=Re.indexOf(qe),Ne=G?Re.indexOf(G):-1,Xe=N.layersWithOutsidePointerEventsDisabled.size>0,Et=Ne>=je,St=lN(Nt=>{const Mn=Nt.target,dn=[...N.branches].some(ut=>ut.contains(Mn));!Et||dn||(A==null||A(Nt),C==null||C(Nt),Nt.defaultPrevented||U==null||U())},X),Qe=uN(Nt=>{const Mn=Nt.target;[...N.branches].some(ut=>ut.contains(Mn))||(R==null||R(Nt),C==null||C(Nt),Nt.defaultPrevented||U==null||U())},X);return nN(Nt=>{Ne===N.layers.size-1&&(E==null||E(Nt),!Nt.defaultPrevented&&U&&(Nt.preventDefault(),U()))},X),ke.useEffect(()=>{if(G)return x&&(N.layersWithOutsidePointerEventsDisabled.size===0&&(fA=X.body.style.pointerEvents,X.body.style.pointerEvents="none"),N.layersWithOutsidePointerEventsDisabled.add(G)),N.layers.add(G),dA(),()=>{x&&N.layersWithOutsidePointerEventsDisabled.size===1&&(X.body.style.pointerEvents=fA)}},[G,X,x,N]),ke.useEffect(()=>()=>{G&&(N.layers.delete(G),N.layersWithOutsidePointerEventsDisabled.delete(G),dA())},[G,N]),ke.useEffect(()=>{const Nt=()=>J({});return document.addEventListener(rS,Nt),()=>document.removeEventListener(rS,Nt)},[]),ii.jsx(kd.div,{...s,ref:Pe,style:{pointerEvents:Xe?Et?"auto":"none":void 0,...c.style},onFocusCapture:Cd(c.onFocusCapture,Qe.onFocusCapture),onBlurCapture:Cd(c.onBlurCapture,Qe.onBlurCapture),onPointerDownCapture:Cd(c.onPointerDownCapture,St.onPointerDownCapture)})});Bk.displayName=rN;var oN="DismissableLayerBranch",sN=ke.forwardRef((c,y)=>{const x=ke.useContext(Ok),E=ke.useRef(null),A=em(y,E);return ke.useEffect(()=>{const R=E.current;if(R)return x.branches.add(R),()=>{x.branches.delete(R)}},[x.branches]),ii.jsx(kd.div,{...c,ref:A})});sN.displayName=oN;function lN(c,y=globalThis==null?void 0:globalThis.document){const x=Kp(c),E=ke.useRef(!1),A=ke.useRef(()=>{});return ke.useEffect(()=>{const R=U=>{if(U.target&&!E.current){let s=function(){Fk(iN,x,N,{discrete:!0})};const N={originalEvent:U};U.pointerType==="touch"?(y.removeEventListener("click",A.current),A.current=s,y.addEventListener("click",A.current,{once:!0})):s()}else y.removeEventListener("click",A.current);E.current=!1},C=window.setTimeout(()=>{y.addEventListener("pointerdown",R)},0);return()=>{window.clearTimeout(C),y.removeEventListener("pointerdown",R),y.removeEventListener("click",A.current)}},[y,x]),{onPointerDownCapture:()=>E.current=!0}}function uN(c,y=globalThis==null?void 0:globalThis.document){const x=Kp(c),E=ke.useRef(!1);return ke.useEffect(()=>{const A=R=>{R.target&&!E.current&&Fk(aN,x,{originalEvent:R},{discrete:!1})};return y.addEventListener("focusin",A),()=>y.removeEventListener("focusin",A)},[y,x]),{onFocusCapture:()=>E.current=!0,onBlurCapture:()=>E.current=!1}}function dA(){const c=new CustomEvent(rS);document.dispatchEvent(c)}function Fk(c,y,x,{discrete:E}){const A=x.originalEvent.target,R=new CustomEvent(c,{bubbles:!1,cancelable:!0,detail:x});y&&A.addEventListener(c,y,{once:!0}),E?tN(A,R):A.dispatchEvent(R)}var IE="focusScope.autoFocusOnMount",LE="focusScope.autoFocusOnUnmount",pA={bubbles:!1,cancelable:!0},cN="FocusScope",Nk=ke.forwardRef((c,y)=>{const{loop:x=!1,trapped:E=!1,onMountAutoFocus:A,onUnmountAutoFocus:R,...C}=c,[U,s]=ke.useState(null),N=Kp(A),G=Kp(R),H=ke.useRef(null),X=em(y,Re=>s(Re)),J=ke.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ke.useEffect(()=>{if(E){let Re=function(Xe){if(J.paused||!U)return;const Et=Xe.target;U.contains(Et)?H.current=Et:Sd(H.current,{select:!0})},qe=function(Xe){if(J.paused||!U)return;const Et=Xe.relatedTarget;Et!==null&&(U.contains(Et)||Sd(H.current,{select:!0}))},je=function(Xe){if(document.activeElement===document.body)for(const St of Xe)St.removedNodes.length>0&&Sd(U)};document.addEventListener("focusin",Re),document.addEventListener("focusout",qe);const Ne=new MutationObserver(je);return U&&Ne.observe(U,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Re),document.removeEventListener("focusout",qe),Ne.disconnect()}}},[E,U,J.paused]),ke.useEffect(()=>{if(U){gA.add(J);const Re=document.activeElement;if(!U.contains(Re)){const je=new CustomEvent(IE,pA);U.addEventListener(IE,N),U.dispatchEvent(je),je.defaultPrevented||(hN(gN(Uk(U)),{select:!0}),document.activeElement===Re&&Sd(U))}return()=>{U.removeEventListener(IE,N),setTimeout(()=>{const je=new CustomEvent(LE,pA);U.addEventListener(LE,G),U.dispatchEvent(je),je.defaultPrevented||Sd(Re??document.body,{select:!0}),U.removeEventListener(LE,G),gA.remove(J)},0)}}},[U,N,G,J]);const Pe=ke.useCallback(Re=>{if(!x&&!E||J.paused)return;const qe=Re.key==="Tab"&&!Re.altKey&&!Re.ctrlKey&&!Re.metaKey,je=document.activeElement;if(qe&&je){const Ne=Re.currentTarget,[Xe,Et]=fN(Ne);Xe&&Et?!Re.shiftKey&&je===Et?(Re.preventDefault(),x&&Sd(Xe,{select:!0})):Re.shiftKey&&je===Xe&&(Re.preventDefault(),x&&Sd(Et,{select:!0})):je===Ne&&Re.preventDefault()}},[x,E,J.paused]);return ii.jsx(kd.div,{tabIndex:-1,...C,ref:X,onKeyDown:Pe})});Nk.displayName=cN;function hN(c,{select:y=!1}={}){const x=document.activeElement;for(const E of c)if(Sd(E,{select:y}),document.activeElement!==x)return}function fN(c){const y=Uk(c),x=mA(y,c),E=mA(y.reverse(),c);return[x,E]}function Uk(c){const y=[],x=document.createTreeWalker(c,NodeFilter.SHOW_ELEMENT,{acceptNode:E=>{const A=E.tagName==="INPUT"&&E.type==="hidden";return E.disabled||E.hidden||A?NodeFilter.FILTER_SKIP:E.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;x.nextNode();)y.push(x.currentNode);return y}function mA(c,y){for(const x of c)if(!dN(x,{upTo:y}))return x}function dN(c,{upTo:y}){if(getComputedStyle(c).visibility==="hidden")return!0;for(;c;){if(y!==void 0&&c===y)return!1;if(getComputedStyle(c).display==="none")return!0;c=c.parentElement}return!1}function pN(c){return c instanceof HTMLInputElement&&"select"in c}function Sd(c,{select:y=!1}={}){if(c&&c.focus){const x=document.activeElement;c.focus({preventScroll:!0}),c!==x&&pN(c)&&y&&c.select()}}var gA=mN();function mN(){let c=[];return{add(y){const x=c[0];y!==x&&(x==null||x.pause()),c=yA(c,y),c.unshift(y)},remove(y){var x;c=yA(c,y),(x=c[0])==null||x.resume()}}}function yA(c,y){const x=[...c],E=x.indexOf(y);return E!==-1&&x.splice(E,1),x}function gN(c){return c.filter(y=>y.tagName!=="A")}function yN(c,y){return ke.useReducer((x,E)=>y[x][E]??x,c)}var TS=c=>{const{present:y,children:x}=c,E=vN(y),A=typeof x=="function"?x({present:E.isPresent}):ke.Children.only(x),R=em(E.ref,_N(A));return typeof x=="function"||E.isPresent?ke.cloneElement(A,{ref:R}):null};TS.displayName="Presence";function vN(c){const[y,x]=ke.useState(),E=ke.useRef({}),A=ke.useRef(c),R=ke.useRef("none"),C=c?"mounted":"unmounted",[U,s]=yN(C,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ke.useEffect(()=>{const N=A0(E.current);R.current=U==="mounted"?N:"none"},[U]),tS(()=>{const N=E.current,G=A.current;if(G!==c){const X=R.current,J=A0(N);c?s("MOUNT"):J==="none"||(N==null?void 0:N.display)==="none"?s("UNMOUNT"):s(G&&X!==J?"ANIMATION_OUT":"UNMOUNT"),A.current=c}},[c,s]),tS(()=>{if(y){let N;const G=y.ownerDocument.defaultView??window,H=J=>{const Re=A0(E.current).includes(J.animationName);if(J.target===y&&Re&&(s("ANIMATION_END"),!A.current)){const qe=y.style.animationFillMode;y.style.animationFillMode="forwards",N=G.setTimeout(()=>{y.style.animationFillMode==="forwards"&&(y.style.animationFillMode=qe)})}},X=J=>{J.target===y&&(R.current=A0(E.current))};return y.addEventListener("animationstart",X),y.addEventListener("animationcancel",H),y.addEventListener("animationend",H),()=>{G.clearTimeout(N),y.removeEventListener("animationstart",X),y.removeEventListener("animationcancel",H),y.removeEventListener("animationend",H)}}else s("ANIMATION_END")},[y,s]),{isPresent:["mounted","unmountSuspended"].includes(U),ref:ke.useCallback(N=>{N&&(E.current=getComputedStyle(N)),x(N)},[])}}function A0(c){return(c==null?void 0:c.animationName)||"none"}function _N(c){var E,A;let y=(E=Object.getOwnPropertyDescriptor(c.props,"ref"))==null?void 0:E.get,x=y&&"isReactWarning"in y&&y.isReactWarning;return x?c.ref:(y=(A=Object.getOwnPropertyDescriptor(c,"ref"))==null?void 0:A.get,x=y&&"isReactWarning"in y&&y.isReactWarning,x?c.props.ref:c.props.ref||c.ref)}var zE=0;function xN(){ke.useEffect(()=>{const c=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",c[0]??vA()),document.body.insertAdjacentElement("beforeend",c[1]??vA()),zE++,()=>{zE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(y=>y.remove()),zE--}},[])}function vA(){const c=document.createElement("span");return c.setAttribute("data-radix-focus-guard",""),c.tabIndex=0,c.style.outline="none",c.style.opacity="0",c.style.position="fixed",c.style.pointerEvents="none",c}var nh=function(){return nh=Object.assign||function(y){for(var x,E=1,A=arguments.length;E<A;E++){x=arguments[E];for(var R in x)Object.prototype.hasOwnProperty.call(x,R)&&(y[R]=x[R])}return y},nh.apply(this,arguments)};function jk(c,y){var x={};for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&y.indexOf(E)<0&&(x[E]=c[E]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var A=0,E=Object.getOwnPropertySymbols(c);A<E.length;A++)y.indexOf(E[A])<0&&Object.prototype.propertyIsEnumerable.call(c,E[A])&&(x[E[A]]=c[E[A]]);return x}function bN(c,y,x){if(x||arguments.length===2)for(var E=0,A=y.length,R;E<A;E++)(R||!(E in y))&&(R||(R=Array.prototype.slice.call(y,0,E)),R[E]=y[E]);return c.concat(R||Array.prototype.slice.call(y))}var F0="right-scroll-bar-position",N0="width-before-scroll-bar",wN="with-scroll-bars-hidden",EN="--removed-body-scroll-bar-size";function PE(c,y){return typeof c=="function"?c(y):c&&(c.current=y),c}function SN(c,y){var x=ke.useState(function(){return{value:c,callback:y,facade:{get current(){return x.value},set current(E){var A=x.value;A!==E&&(x.value=E,x.callback(E,A))}}}})[0];return x.callback=y,x.facade}var TN=typeof window<"u"?ke.useLayoutEffect:ke.useEffect,_A=new WeakMap;function CN(c,y){var x=SN(null,function(E){return c.forEach(function(A){return PE(A,E)})});return TN(function(){var E=_A.get(x);if(E){var A=new Set(E),R=new Set(c),C=x.current;A.forEach(function(U){R.has(U)||PE(U,null)}),R.forEach(function(U){A.has(U)||PE(U,C)})}_A.set(x,c)},[c]),x}function MN(c){return c}function AN(c,y){y===void 0&&(y=MN);var x=[],E=!1,A={read:function(){if(E)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return x.length?x[x.length-1]:c},useMedium:function(R){var C=y(R,E);return x.push(C),function(){x=x.filter(function(U){return U!==C})}},assignSyncMedium:function(R){for(E=!0;x.length;){var C=x;x=[],C.forEach(R)}x={push:function(U){return R(U)},filter:function(){return x}}},assignMedium:function(R){E=!0;var C=[];if(x.length){var U=x;x=[],U.forEach(R),C=x}var s=function(){var G=C;C=[],G.forEach(R)},N=function(){return Promise.resolve().then(s)};N(),x={push:function(G){C.push(G),N()},filter:function(G){return C=C.filter(G),x}}}};return A}function kN(c){c===void 0&&(c={});var y=AN(null);return y.options=nh({async:!0,ssr:!1},c),y}var Vk=function(c){var y=c.sideCar,x=jk(c,["sideCar"]);if(!y)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var E=y.read();if(!E)throw new Error("Sidecar medium not found");return ke.createElement(E,nh({},x))};Vk.isSideCarExport=!0;function DN(c,y){return c.useMedium(y),Vk}var $k=kN(),OE=function(){},J0=ke.forwardRef(function(c,y){var x=ke.useRef(null),E=ke.useState({onScrollCapture:OE,onWheelCapture:OE,onTouchMoveCapture:OE}),A=E[0],R=E[1],C=c.forwardProps,U=c.children,s=c.className,N=c.removeScrollBar,G=c.enabled,H=c.shards,X=c.sideCar,J=c.noIsolation,Pe=c.inert,Re=c.allowPinchZoom,qe=c.as,je=qe===void 0?"div":qe,Ne=c.gapMode,Xe=jk(c,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Et=X,St=CN([x,y]),Qe=nh(nh({},Xe),A);return ke.createElement(ke.Fragment,null,G&&ke.createElement(Et,{sideCar:$k,removeScrollBar:N,shards:H,noIsolation:J,inert:Pe,setCallbacks:R,allowPinchZoom:!!Re,lockRef:x,gapMode:Ne}),C?ke.cloneElement(ke.Children.only(U),nh(nh({},Qe),{ref:St})):ke.createElement(je,nh({},Qe,{className:s,ref:St}),U))});J0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};J0.classNames={fullWidth:N0,zeroRight:F0};var RN=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function IN(){if(!document)return null;var c=document.createElement("style");c.type="text/css";var y=RN();return y&&c.setAttribute("nonce",y),c}function LN(c,y){c.styleSheet?c.styleSheet.cssText=y:c.appendChild(document.createTextNode(y))}function zN(c){var y=document.head||document.getElementsByTagName("head")[0];y.appendChild(c)}var PN=function(){var c=0,y=null;return{add:function(x){c==0&&(y=IN())&&(LN(y,x),zN(y)),c++},remove:function(){c--,!c&&y&&(y.parentNode&&y.parentNode.removeChild(y),y=null)}}},ON=function(){var c=PN();return function(y,x){ke.useEffect(function(){return c.add(y),function(){c.remove()}},[y&&x])}},Gk=function(){var c=ON(),y=function(x){var E=x.styles,A=x.dynamic;return c(E,A),null};return y},BN={left:0,top:0,right:0,gap:0},BE=function(c){return parseInt(c||"",10)||0},FN=function(c){var y=window.getComputedStyle(document.body),x=y[c==="padding"?"paddingLeft":"marginLeft"],E=y[c==="padding"?"paddingTop":"marginTop"],A=y[c==="padding"?"paddingRight":"marginRight"];return[BE(x),BE(E),BE(A)]},NN=function(c){if(c===void 0&&(c="margin"),typeof window>"u")return BN;var y=FN(c),x=document.documentElement.clientWidth,E=window.innerWidth;return{left:y[0],top:y[1],right:y[2],gap:Math.max(0,E-x+y[2]-y[0])}},UN=Gk(),$g="data-scroll-locked",jN=function(c,y,x,E){var A=c.left,R=c.top,C=c.right,U=c.gap;return x===void 0&&(x="margin"),`
  .`.concat(wN,` {
   overflow: hidden `).concat(E,`;
   padding-right: `).concat(U,"px ").concat(E,`;
  }
  body[`).concat($g,`] {
    overflow: hidden `).concat(E,`;
    overscroll-behavior: contain;
    `).concat([y&&"position: relative ".concat(E,";"),x==="margin"&&`
    padding-left: `.concat(A,`px;
    padding-top: `).concat(R,`px;
    padding-right: `).concat(C,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(U,"px ").concat(E,`;
    `),x==="padding"&&"padding-right: ".concat(U,"px ").concat(E,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(F0,` {
    right: `).concat(U,"px ").concat(E,`;
  }
  
  .`).concat(N0,` {
    margin-right: `).concat(U,"px ").concat(E,`;
  }
  
  .`).concat(F0," .").concat(F0,` {
    right: 0 `).concat(E,`;
  }
  
  .`).concat(N0," .").concat(N0,` {
    margin-right: 0 `).concat(E,`;
  }
  
  body[`).concat($g,`] {
    `).concat(EN,": ").concat(U,`px;
  }
`)},xA=function(){var c=parseInt(document.body.getAttribute($g)||"0",10);return isFinite(c)?c:0},VN=function(){ke.useEffect(function(){return document.body.setAttribute($g,(xA()+1).toString()),function(){var c=xA()-1;c<=0?document.body.removeAttribute($g):document.body.setAttribute($g,c.toString())}},[])},$N=function(c){var y=c.noRelative,x=c.noImportant,E=c.gapMode,A=E===void 0?"margin":E;VN();var R=ke.useMemo(function(){return NN(A)},[A]);return ke.createElement(UN,{styles:jN(R,!y,A,x?"":"!important")})},iS=!1;if(typeof window<"u")try{var k0=Object.defineProperty({},"passive",{get:function(){return iS=!0,!0}});window.addEventListener("test",k0,k0),window.removeEventListener("test",k0,k0)}catch{iS=!1}var Bg=iS?{passive:!1}:!1,GN=function(c){return c.tagName==="TEXTAREA"},qk=function(c,y){if(!(c instanceof Element))return!1;var x=window.getComputedStyle(c);return x[y]!=="hidden"&&!(x.overflowY===x.overflowX&&!GN(c)&&x[y]==="visible")},qN=function(c){return qk(c,"overflowY")},HN=function(c){return qk(c,"overflowX")},bA=function(c,y){var x=y.ownerDocument,E=y;do{typeof ShadowRoot<"u"&&E instanceof ShadowRoot&&(E=E.host);var A=Hk(c,E);if(A){var R=Wk(c,E),C=R[1],U=R[2];if(C>U)return!0}E=E.parentNode}while(E&&E!==x.body);return!1},WN=function(c){var y=c.scrollTop,x=c.scrollHeight,E=c.clientHeight;return[y,x,E]},ZN=function(c){var y=c.scrollLeft,x=c.scrollWidth,E=c.clientWidth;return[y,x,E]},Hk=function(c,y){return c==="v"?qN(y):HN(y)},Wk=function(c,y){return c==="v"?WN(y):ZN(y)},XN=function(c,y){return c==="h"&&y==="rtl"?-1:1},YN=function(c,y,x,E,A){var R=XN(c,window.getComputedStyle(y).direction),C=R*E,U=x.target,s=y.contains(U),N=!1,G=C>0,H=0,X=0;do{var J=Wk(c,U),Pe=J[0],Re=J[1],qe=J[2],je=Re-qe-R*Pe;(Pe||je)&&Hk(c,U)&&(H+=je,X+=Pe),U instanceof ShadowRoot?U=U.host:U=U.parentNode}while(!s&&U!==document.body||s&&(y.contains(U)||y===U));return(G&&(Math.abs(H)<1||!A)||!G&&(Math.abs(X)<1||!A))&&(N=!0),N},D0=function(c){return"changedTouches"in c?[c.changedTouches[0].clientX,c.changedTouches[0].clientY]:[0,0]},wA=function(c){return[c.deltaX,c.deltaY]},EA=function(c){return c&&"current"in c?c.current:c},KN=function(c,y){return c[0]===y[0]&&c[1]===y[1]},JN=function(c){return`
  .block-interactivity-`.concat(c,` {pointer-events: none;}
  .allow-interactivity-`).concat(c,` {pointer-events: all;}
`)},QN=0,Fg=[];function eU(c){var y=ke.useRef([]),x=ke.useRef([0,0]),E=ke.useRef(),A=ke.useState(QN++)[0],R=ke.useState(Gk)[0],C=ke.useRef(c);ke.useEffect(function(){C.current=c},[c]),ke.useEffect(function(){if(c.inert){document.body.classList.add("block-interactivity-".concat(A));var Re=bN([c.lockRef.current],(c.shards||[]).map(EA),!0).filter(Boolean);return Re.forEach(function(qe){return qe.classList.add("allow-interactivity-".concat(A))}),function(){document.body.classList.remove("block-interactivity-".concat(A)),Re.forEach(function(qe){return qe.classList.remove("allow-interactivity-".concat(A))})}}},[c.inert,c.lockRef.current,c.shards]);var U=ke.useCallback(function(Re,qe){if("touches"in Re&&Re.touches.length===2||Re.type==="wheel"&&Re.ctrlKey)return!C.current.allowPinchZoom;var je=D0(Re),Ne=x.current,Xe="deltaX"in Re?Re.deltaX:Ne[0]-je[0],Et="deltaY"in Re?Re.deltaY:Ne[1]-je[1],St,Qe=Re.target,Nt=Math.abs(Xe)>Math.abs(Et)?"h":"v";if("touches"in Re&&Nt==="h"&&Qe.type==="range")return!1;var Mn=bA(Nt,Qe);if(!Mn)return!0;if(Mn?St=Nt:(St=Nt==="v"?"h":"v",Mn=bA(Nt,Qe)),!Mn)return!1;if(!E.current&&"changedTouches"in Re&&(Xe||Et)&&(E.current=St),!St)return!0;var dn=E.current||St;return YN(dn,qe,Re,dn==="h"?Xe:Et,!0)},[]),s=ke.useCallback(function(Re){var qe=Re;if(!(!Fg.length||Fg[Fg.length-1]!==R)){var je="deltaY"in qe?wA(qe):D0(qe),Ne=y.current.filter(function(St){return St.name===qe.type&&(St.target===qe.target||qe.target===St.shadowParent)&&KN(St.delta,je)})[0];if(Ne&&Ne.should){qe.cancelable&&qe.preventDefault();return}if(!Ne){var Xe=(C.current.shards||[]).map(EA).filter(Boolean).filter(function(St){return St.contains(qe.target)}),Et=Xe.length>0?U(qe,Xe[0]):!C.current.noIsolation;Et&&qe.cancelable&&qe.preventDefault()}}},[]),N=ke.useCallback(function(Re,qe,je,Ne){var Xe={name:Re,delta:qe,target:je,should:Ne,shadowParent:tU(je)};y.current.push(Xe),setTimeout(function(){y.current=y.current.filter(function(Et){return Et!==Xe})},1)},[]),G=ke.useCallback(function(Re){x.current=D0(Re),E.current=void 0},[]),H=ke.useCallback(function(Re){N(Re.type,wA(Re),Re.target,U(Re,c.lockRef.current))},[]),X=ke.useCallback(function(Re){N(Re.type,D0(Re),Re.target,U(Re,c.lockRef.current))},[]);ke.useEffect(function(){return Fg.push(R),c.setCallbacks({onScrollCapture:H,onWheelCapture:H,onTouchMoveCapture:X}),document.addEventListener("wheel",s,Bg),document.addEventListener("touchmove",s,Bg),document.addEventListener("touchstart",G,Bg),function(){Fg=Fg.filter(function(Re){return Re!==R}),document.removeEventListener("wheel",s,Bg),document.removeEventListener("touchmove",s,Bg),document.removeEventListener("touchstart",G,Bg)}},[]);var J=c.removeScrollBar,Pe=c.inert;return ke.createElement(ke.Fragment,null,Pe?ke.createElement(R,{styles:JN(A)}):null,J?ke.createElement($N,{gapMode:c.gapMode}):null)}function tU(c){for(var y=null;c!==null;)c instanceof ShadowRoot&&(y=c.host,c=c.host),c=c.parentNode;return y}const nU=DN($k,eU);var Zk=ke.forwardRef(function(c,y){return ke.createElement(J0,nh({},c,{ref:y,sideCar:nU}))});Zk.classNames=J0.classNames;var rU=function(c){if(typeof document>"u")return null;var y=Array.isArray(c)?c[0]:c;return y.ownerDocument.body},Ng=new WeakMap,R0=new WeakMap,I0={},FE=0,Xk=function(c){return c&&(c.host||Xk(c.parentNode))},iU=function(c,y){return y.map(function(x){if(c.contains(x))return x;var E=Xk(x);return E&&c.contains(E)?E:(console.error("aria-hidden",x,"in not contained inside",c,". Doing nothing"),null)}).filter(function(x){return!!x})},aU=function(c,y,x,E){var A=iU(y,Array.isArray(c)?c:[c]);I0[x]||(I0[x]=new WeakMap);var R=I0[x],C=[],U=new Set,s=new Set(A),N=function(H){!H||U.has(H)||(U.add(H),N(H.parentNode))};A.forEach(N);var G=function(H){!H||s.has(H)||Array.prototype.forEach.call(H.children,function(X){if(U.has(X))G(X);else try{var J=X.getAttribute(E),Pe=J!==null&&J!=="false",Re=(Ng.get(X)||0)+1,qe=(R.get(X)||0)+1;Ng.set(X,Re),R.set(X,qe),C.push(X),Re===1&&Pe&&R0.set(X,!0),qe===1&&X.setAttribute(x,"true"),Pe||X.setAttribute(E,"true")}catch(je){console.error("aria-hidden: cannot operate on ",X,je)}})};return G(y),U.clear(),FE++,function(){C.forEach(function(H){var X=Ng.get(H)-1,J=R.get(H)-1;Ng.set(H,X),R.set(H,J),X||(R0.has(H)||H.removeAttribute(E),R0.delete(H)),J||H.removeAttribute(x)}),FE--,FE||(Ng=new WeakMap,Ng=new WeakMap,R0=new WeakMap,I0={})}},oU=function(c,y,x){x===void 0&&(x="data-aria-hidden");var E=Array.from(Array.isArray(c)?c:[c]),A=rU(c);return A?(E.push.apply(E,Array.from(A.querySelectorAll("[aria-live]"))),aU(E,A,x,"aria-hidden")):function(){return null}},CS="Dialog",[Yk,AU]=GF(CS),[sU,ah]=Yk(CS),Kk=c=>{const{__scopeDialog:y,children:x,open:E,defaultOpen:A,onOpenChange:R,modal:C=!0}=c,U=ke.useRef(null),s=ke.useRef(null),[N=!1,G]=ZF({prop:E,defaultProp:A,onChange:R});return ii.jsx(sU,{scope:y,triggerRef:U,contentRef:s,contentId:RE(),titleId:RE(),descriptionId:RE(),open:N,onOpenChange:G,onOpenToggle:ke.useCallback(()=>G(H=>!H),[G]),modal:C,children:x})};Kk.displayName=CS;var Jk="DialogTrigger",lU=ke.forwardRef((c,y)=>{const{__scopeDialog:x,...E}=c,A=ah(Jk,x),R=em(y,A.triggerRef);return ii.jsx(kd.button,{type:"button","aria-haspopup":"dialog","aria-expanded":A.open,"aria-controls":A.contentId,"data-state":AS(A.open),...E,ref:R,onClick:Cd(c.onClick,A.onOpenToggle)})});lU.displayName=Jk;var uU="DialogPortal",[kU,Qk]=Yk(uU,{forceMount:void 0}),H0="DialogOverlay",cU=ke.forwardRef((c,y)=>{const x=Qk(H0,c.__scopeDialog),{forceMount:E=x.forceMount,...A}=c,R=ah(H0,c.__scopeDialog);return R.modal?ii.jsx(TS,{present:E||R.open,children:ii.jsx(hU,{...A,ref:y})}):null});cU.displayName=H0;var hU=ke.forwardRef((c,y)=>{const{__scopeDialog:x,...E}=c,A=ah(H0,x);return ii.jsx(Zk,{as:SS,allowPinchZoom:!0,shards:[A.contentRef],children:ii.jsx(kd.div,{"data-state":AS(A.open),...E,ref:y,style:{pointerEvents:"auto",...E.style}})})}),Jp="DialogContent",fU=ke.forwardRef((c,y)=>{const x=Qk(Jp,c.__scopeDialog),{forceMount:E=x.forceMount,...A}=c,R=ah(Jp,c.__scopeDialog);return ii.jsx(TS,{present:E||R.open,children:R.modal?ii.jsx(dU,{...A,ref:y}):ii.jsx(pU,{...A,ref:y})})});fU.displayName=Jp;var dU=ke.forwardRef((c,y)=>{const x=ah(Jp,c.__scopeDialog),E=ke.useRef(null),A=em(y,x.contentRef,E);return ke.useEffect(()=>{const R=E.current;if(R)return oU(R)},[]),ii.jsx(eD,{...c,ref:A,trapFocus:x.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Cd(c.onCloseAutoFocus,R=>{var C;R.preventDefault(),(C=x.triggerRef.current)==null||C.focus()}),onPointerDownOutside:Cd(c.onPointerDownOutside,R=>{const C=R.detail.originalEvent,U=C.button===0&&C.ctrlKey===!0;(C.button===2||U)&&R.preventDefault()}),onFocusOutside:Cd(c.onFocusOutside,R=>R.preventDefault())})}),pU=ke.forwardRef((c,y)=>{const x=ah(Jp,c.__scopeDialog),E=ke.useRef(!1),A=ke.useRef(!1);return ii.jsx(eD,{...c,ref:y,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:R=>{var C,U;(C=c.onCloseAutoFocus)==null||C.call(c,R),R.defaultPrevented||(E.current||(U=x.triggerRef.current)==null||U.focus(),R.preventDefault()),E.current=!1,A.current=!1},onInteractOutside:R=>{var s,N;(s=c.onInteractOutside)==null||s.call(c,R),R.defaultPrevented||(E.current=!0,R.detail.originalEvent.type==="pointerdown"&&(A.current=!0));const C=R.target;((N=x.triggerRef.current)==null?void 0:N.contains(C))&&R.preventDefault(),R.detail.originalEvent.type==="focusin"&&A.current&&R.preventDefault()}})}),eD=ke.forwardRef((c,y)=>{const{__scopeDialog:x,trapFocus:E,onOpenAutoFocus:A,onCloseAutoFocus:R,...C}=c,U=ah(Jp,x),s=ke.useRef(null),N=em(y,s);return xN(),ii.jsxs(ii.Fragment,{children:[ii.jsx(Nk,{asChild:!0,loop:!0,trapped:E,onMountAutoFocus:A,onUnmountAutoFocus:R,children:ii.jsx(Bk,{role:"dialog",id:U.contentId,"aria-describedby":U.descriptionId,"aria-labelledby":U.titleId,"data-state":AS(U.open),...C,ref:N,onDismiss:()=>U.onOpenChange(!1)})}),ii.jsxs(ii.Fragment,{children:[ii.jsx(vU,{titleId:U.titleId}),ii.jsx(xU,{contentRef:s,descriptionId:U.descriptionId})]})]})}),MS="DialogTitle",mU=ke.forwardRef((c,y)=>{const{__scopeDialog:x,...E}=c,A=ah(MS,x);return ii.jsx(kd.h2,{id:A.titleId,...E,ref:y})});mU.displayName=MS;var tD="DialogDescription",gU=ke.forwardRef((c,y)=>{const{__scopeDialog:x,...E}=c,A=ah(tD,x);return ii.jsx(kd.p,{id:A.descriptionId,...E,ref:y})});gU.displayName=tD;var nD="DialogClose",yU=ke.forwardRef((c,y)=>{const{__scopeDialog:x,...E}=c,A=ah(nD,x);return ii.jsx(kd.button,{type:"button",...E,ref:y,onClick:Cd(c.onClick,()=>A.onOpenChange(!1))})});yU.displayName=nD;function AS(c){return c?"open":"closed"}var rD="DialogTitleWarning",[DU,iD]=$F(rD,{contentName:Jp,titleName:MS,docsSlug:"dialog"}),vU=({titleId:c})=>{const y=iD(rD),x=`\`${y.contentName}\` requires a \`${y.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${y.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${y.docsSlug}`;return ke.useEffect(()=>{c&&(document.getElementById(c)||console.error(x))},[x,c]),null},_U="DialogDescriptionWarning",xU=({contentRef:c,descriptionId:y})=>{const E=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${iD(_U).contentName}}.`;return ke.useEffect(()=>{var R;const A=(R=c.current)==null?void 0:R.getAttribute("aria-describedby");y&&A&&(document.getElementById(y)||console.warn(E))},[E,c,y]),null},bU=Kk;function wU({children:c}){return Rt.jsxDEV(bU,{children:c},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/providers.jsx",lineNumber:6,columnNumber:5},this)}function EU(){const[c,y]=ke.useState([]),[x,E]=ke.useState(null);ke.useEffect(()=>{fetch("/api/locations").then(C=>C.json()).then(C=>{console.log("Loaded locations:",C),y(C)}).catch(C=>console.error("Failed to load locations:",C))},[]);const A=C=>{console.log("New location added:",C),y([...c,C])},R=()=>{if(!navigator.geolocation){alert("Geolocation is not supported by your browser");return}navigator.geolocation.getCurrentPosition(C=>{const U={lat:C.coords.latitude,lng:C.coords.longitude};console.log("Got current location:",U),E(U)},C=>{console.error("Error getting location:",C),alert("Unable to get location: "+C.message)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})};return Rt.jsxDEV(wU,{children:Rt.jsxDEV("div",{className:"h-screen w-screen flex flex-col",children:[Rt.jsxDEV("div",{className:"p-4 flex justify-between items-center bg-white shadow-sm z-10",children:[Rt.jsxDEV("h1",{className:"text-xl font-bold",children:"Historical Places Explorer"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:56,columnNumber:11},this),Rt.jsxDEV("button",{onClick:R,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Get Location"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:57,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:55,columnNumber:9},this),Rt.jsxDEV("div",{className:"flex-1 relative w-full h-full",children:[Rt.jsxDEV(UF,{locations:c,currentLocation:x},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:66,columnNumber:11},this),Rt.jsxDEV("div",{className:"absolute bottom-4 right-4 z-10",children:Rt.jsxDEV(VF,{onLocationAdded:A,setCurrentLocation:E},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:71,columnNumber:13},this)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:70,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:65,columnNumber:9},this),x&&Rt.jsxDEV("div",{className:"p-4 bg-white border-t z-10",children:[Rt.jsxDEV("p",{className:"font-bold",children:"Latest Location:"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:80,columnNumber:13},this),Rt.jsxDEV("p",{children:["Lat: ",x.lat.toFixed(6)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:81,columnNumber:13},this),Rt.jsxDEV("p",{children:["Lng: ",x.lng.toFixed(6)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:82,columnNumber:13},this),Rt.jsxDEV("p",{children:["Time: ",new Date().toLocaleString()]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:83,columnNumber:13},this)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:79,columnNumber:11},this)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:54,columnNumber:7},this)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/App.jsx",lineNumber:53,columnNumber:5},this)}function SU(){return Rt.jsxDEV("div",{className:"p-4",children:[Rt.jsxDEV("h1",{className:"text-xl font-bold",children:"Historical Places Admin"},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/admin.jsx",lineNumber:6,columnNumber:7},this),Rt.jsxDEV("p",{className:"mt-2",children:"Welcome to the admin interface."},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/admin.jsx",lineNumber:7,columnNumber:7},this)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/admin.jsx",lineNumber:5,columnNumber:5},this)}jE.createRoot(document.getElementById("root")).render(Rt.jsxDEV(CA.StrictMode,{children:Rt.jsxDEV(Uz,{children:Rt.jsxDEV(Tz,{children:[Rt.jsxDEV($E,{path:"/",element:Rt.jsxDEV(EU,{},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:12,columnNumber:34},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:12,columnNumber:9},void 0),Rt.jsxDEV($E,{path:"/admin",element:Rt.jsxDEV(SU,{},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:13,columnNumber:39},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:13,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:11,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:10,columnNumber:5},void 0)},void 0,!1,{fileName:"C:/Users/CEinarson/Documents/MyStuff/cluade/historical-places-explorer/src/main.jsx",lineNumber:9,columnNumber:3},void 0));
//# sourceMappingURL=index-BSx3x54l.js.map
